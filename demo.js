/* 
MIT License

Copyright (c) 2020 Steve Xu

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.

*/
import{a as sc}from"./chunk-6XLS75M2.js";import{a as ic,b as ki}from"./chunk-Y4VRAAK2.js";import{a as nc,b as rc,c as oc}from"./chunk-EU4ZLVQ3.js";import{b as tc}from"./chunk-PRJU7QU5.js";import{a as vi,b as Wd}from"./chunk-Z5X5J5U2.js";import{Ca as zr,F as Ci,Ga as Xa,I as Wa,Ja as Qa,Ka as Za,La as ec,O as za,P as Ri,Q as ja,R as Ga,Y as qa,Z as Ya,_ as Va,ja as ct,ka as ut,la as $e,ma as Tt,na as wi,oa as xi,pa as Ka,qa as Ja}from"./chunk-UR5ZFE2U.js";import{c as Wr}from"./chunk-AI5EXC2Q.js";var ac=Object.prototype.toString;function Kt(e){switch(ac.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":case"[object WebAssembly.Exception]":return!0;default:return Pe(e,Error)}}function dn(e,t){return ac.call(e)===`[object ${t}]`}function jr(e){return dn(e,"ErrorEvent")}function Gr(e){return dn(e,"DOMError")}function Ai(e){return dn(e,"DOMException")}function Re(e){return dn(e,"String")}function fn(e){return typeof e=="object"&&e!==null&&"__sentry_template_string__"in e&&"__sentry_template_values__"in e}function Jt(e){return e===null||fn(e)||typeof e!="object"&&typeof e!="function"}function Qe(e){return dn(e,"Object")}function Xt(e){return typeof Event<"u"&&Pe(e,Event)}function Ni(e){return typeof Element<"u"&&Pe(e,Element)}function Mi(e){return dn(e,"RegExp")}function lt(e){return!!(e&&e.then&&typeof e.then=="function")}function Oi(e){return Qe(e)&&"nativeEvent"in e&&"preventDefault"in e&&"stopPropagation"in e}function Pe(e,t){try{return e instanceof t}catch{return!1}}function Hn(e){return!!(typeof e=="object"&&e!==null&&(e.__isVue||e._isVue))}function dt(e,t=0){return typeof e!="string"||t===0||e.length<=t?e:`${e.slice(0,t)}...`}function qr(e,t){if(!Array.isArray(e))return"";let n=[];for(let r=0;r<e.length;r++){let o=e[r];try{Hn(o)?n.push("[VueViewModel]"):n.push(String(o))}catch{n.push("[value cannot be serialized]")}}return n.join(t)}function cc(e,t,n=!1){return Re(e)?Mi(t)?t.test(e):Re(t)?n?e===t:e.includes(t):!1:!1}function We(e,t=[],n=!1){return t.some(r=>cc(e,r,n))}function Li(e,t,n=250,r,o,i,s){if(!i.exception||!i.exception.values||!s||!Pe(s.originalException,Error))return;let a=i.exception.values.length>0?i.exception.values[i.exception.values.length-1]:void 0;a&&(i.exception.values=zd(Di(e,t,o,s.originalException,r,i.exception.values,a,0),n))}function Di(e,t,n,r,o,i,s,a){if(i.length>=n+1)return i;let c=[...i];if(Pe(r[o],Error)){uc(s,a);let u=e(t,r[o]),d=c.length;lc(u,o,d,a),c=Di(e,t,n,r[o],o,[u,...c],u,d)}return Array.isArray(r.errors)&&r.errors.forEach((u,d)=>{if(Pe(u,Error)){uc(s,a);let l=e(t,u),f=c.length;lc(l,`errors[${d}]`,f,a),c=Di(e,t,n,u,o,[l,...c],l,f)}}),c}function uc(e,t){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,...e.type==="AggregateError"&&{is_exception_group:!0},exception_id:t}}function lc(e,t,n,r){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,type:"chained",source:t,exception_id:n,parent_id:r}}function zd(e,t){return e.map(n=>(n.value&&(n.value=dt(n.value,t)),n))}function Yr(e){if(e!==void 0)return e>=400&&e<500?"warning":e>=500?"error":void 0}var ze="8.36.0";var R=globalThis;function Nt(e,t,n){let r=n||R,o=r.__SENTRY__=r.__SENTRY__||{},i=o[ze]=o[ze]||{};return i[e]||(i[e]=t())}var pn=R,jd=80;function Ee(e,t={}){if(!e)return"<unknown>";try{let n=e,r=5,o=[],i=0,s=0,a=" > ",c=a.length,u,d=Array.isArray(t)?t:t.keyAttrs,l=!Array.isArray(t)&&t.maxStringLength||jd;for(;n&&i++<r&&(u=Gd(n,d),!(u==="html"||i>1&&s+o.length*c+u.length>=l));)o.push(u),s+=u.length,n=n.parentNode;return o.reverse().join(a)}catch{return"<unknown>"}}function Gd(e,t){let n=e,r=[];if(!n||!n.tagName)return"";if(pn.HTMLElement&&n instanceof HTMLElement&&n.dataset){if(n.dataset.sentryComponent)return n.dataset.sentryComponent;if(n.dataset.sentryElement)return n.dataset.sentryElement}r.push(n.tagName.toLowerCase());let o=t&&t.length?t.filter(s=>n.getAttribute(s)).map(s=>[s,n.getAttribute(s)]):null;if(o&&o.length)o.forEach(s=>{r.push(`[${s[0]}="${s[1]}"]`)});else{n.id&&r.push(`#${n.id}`);let s=n.className;if(s&&Re(s)){let a=s.split(/\s+/);for(let c of a)r.push(`.${c}`)}}let i=["aria-label","type","name","title","alt"];for(let s of i){let a=n.getAttribute(s);a&&r.push(`[${s}="${a}"]`)}return r.join("")}function $n(){try{return pn.document.location.href}catch{return""}}function Pi(e){return pn.document&&pn.document.querySelector?pn.document.querySelector(e):null}function Wn(e){if(!pn.HTMLElement)return null;let t=e,n=5;for(let r=0;r<n;r++){if(!t)return null;if(t instanceof HTMLElement){if(t.dataset.sentryComponent)return t.dataset.sentryComponent;if(t.dataset.sentryElement)return t.dataset.sentryElement}t=t.parentNode}return null}var je=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;var qd="Sentry Logger ",zn=["debug","info","warn","error","log","assert","trace"],mn={};function Ge(e){if(!("console"in R))return e();let t=R.console,n={},r=Object.keys(mn);r.forEach(o=>{let i=mn[o];n[o]=t[o],t[o]=i});try{return e()}finally{r.forEach(o=>{t[o]=n[o]})}}function Yd(){let e=!1,t={enable:()=>{e=!0},disable:()=>{e=!1},isEnabled:()=>e};return je?zn.forEach(n=>{t[n]=(...r)=>{e&&Ge(()=>{R.console[n](`${qd}[${n}]:`,...r)})}}):zn.forEach(n=>{t[n]=()=>{}}),t}var h=Nt("logger",Yd);var Vd=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function Kd(e){return e==="http"||e==="https"}function Ze(e,t=!1){let{host:n,path:r,pass:o,port:i,projectId:s,protocol:a,publicKey:c}=e;return`${a}://${c}${t&&o?`:${o}`:""}@${n}${i?`:${i}`:""}/${r&&`${r}/`}${s}`}function dc(e){let t=Vd.exec(e);if(!t){Ge(()=>{console.error(`Invalid Sentry Dsn: ${e}`)});return}let[n,r,o="",i="",s="",a=""]=t.slice(1),c="",u=a,d=u.split("/");if(d.length>1&&(c=d.slice(0,-1).join("/"),u=d.pop()),u){let l=u.match(/^\d+/);l&&(u=l[0])}return fc({host:i,pass:o,path:c,projectId:u,port:s,protocol:n,publicKey:r})}function fc(e){return{protocol:e.protocol,publicKey:e.publicKey||"",pass:e.pass||"",host:e.host,port:e.port||"",path:e.path||"",projectId:e.projectId}}function Jd(e){if(!je)return!0;let{port:t,projectId:n,protocol:r}=e;return["protocol","publicKey","host","projectId"].find(s=>e[s]?!1:(h.error(`Invalid Sentry Dsn: ${s} missing`),!0))?!1:n.match(/^\d+$/)?Kd(r)?t&&isNaN(parseInt(t,10))?(h.error(`Invalid Sentry Dsn: Invalid port ${t}`),!1):!0:(h.error(`Invalid Sentry Dsn: Invalid protocol ${r}`),!1):(h.error(`Invalid Sentry Dsn: Invalid projectId ${n}`),!1)}function Vr(e){let t=typeof e=="string"?dc(e):fc(e);if(!(!t||!Jd(t)))return t}var Te=class extends Error{constructor(t,n="warn"){super(t),this.message=t,this.name=new.target.prototype.constructor.name,Object.setPrototypeOf(this,new.target.prototype),this.logLevel=n}};function ce(e,t,n){if(!(t in e))return;let r=e[t],o=n(r);typeof o=="function"&&Kr(o,r),e[t]=o}function ue(e,t,n){try{Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0})}catch{je&&h.log(`Failed to add non-enumerable property "${t}" to object`,e)}}function Kr(e,t){try{let n=t.prototype||{};e.prototype=t.prototype=n,ue(e,"__sentry_original__",t)}catch{}}function Qt(e){return e.__sentry_original__}function Ui(e){return Object.keys(e).map(t=>`${encodeURIComponent(t)}=${encodeURIComponent(e[t])}`).join("&")}function Jr(e){if(Kt(e))return{message:e.message,name:e.name,stack:e.stack,...mc(e)};if(Xt(e)){let t={type:e.type,target:pc(e.target),currentTarget:pc(e.currentTarget),...mc(e)};return typeof CustomEvent<"u"&&Pe(e,CustomEvent)&&(t.detail=e.detail),t}else return e}function pc(e){try{return Ni(e)?Ee(e):Object.prototype.toString.call(e)}catch{return"<unknown>"}}function mc(e){if(typeof e=="object"&&e!==null){let t={};for(let n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}else return{}}function Bi(e,t=40){let n=Object.keys(Jr(e));n.sort();let r=n[0];if(!r)return"[object has no keys]";if(r.length>=t)return dt(r,t);for(let o=n.length;o>0;o--){let i=n.slice(0,o).join(", ");if(!(i.length>t))return o===n.length?i:dt(i,t)}return""}function K(e){return Fi(e,new Map)}function Fi(e,t){if(Xd(e)){let n=t.get(e);if(n!==void 0)return n;let r={};t.set(e,r);for(let o of Object.getOwnPropertyNames(e))typeof e[o]<"u"&&(r[o]=Fi(e[o],t));return r}if(Array.isArray(e)){let n=t.get(e);if(n!==void 0)return n;let r=[];return t.set(e,r),e.forEach(o=>{r.push(Fi(o,t))}),r}return e}function Xd(e){if(!Qe(e))return!1;try{let t=Object.getPrototypeOf(e).constructor.name;return!t||t==="Object"}catch{return!0}}var ft="?",hc=/\(error: (.*)\)/,gc=/captureMessage|captureException/;function Qr(...e){let t=e.sort((n,r)=>n[0]-r[0]).map(n=>n[1]);return(n,r=0,o=0)=>{let i=[],s=n.split(`
`);for(let a=r;a<s.length;a++){let c=s[a];if(c.length>1024)continue;let u=hc.test(c)?c.replace(hc,"$1"):c;if(!u.match(/\S*Error: /)){for(let d of t){let l=d(u);if(l){i.push(l);break}}if(i.length>=50+o)break}}return Sc(i.slice(o))}}function $i(e){return Array.isArray(e)?Qr(...e):e}function Sc(e){if(!e.length)return[];let t=Array.from(e);return/sentryWrapped/.test(Xr(t).function||"")&&t.pop(),t.reverse(),gc.test(Xr(t).function||"")&&(t.pop(),gc.test(Xr(t).function||"")&&t.pop()),t.slice(0,50).map(n=>({...n,filename:n.filename||Xr(t).filename,function:n.function||ft}))}function Xr(e){return e[e.length-1]||{}}var Hi="<anonymous>";function Oe(e){try{return!e||typeof e!="function"?Hi:e.name||Hi}catch{return Hi}}function Zr(e){let t=e.exception;if(t){let n=[];try{return t.values.forEach(r=>{r.stacktrace.frames&&n.push(...r.stacktrace.frames)}),n}catch{return}}}var eo={},_c={};function Ie(e,t){eo[e]=eo[e]||[],eo[e].push(t)}function be(e,t){_c[e]||(t(),_c[e]=!0)}function de(e,t){let n=e&&eo[e];if(n)for(let r of n)try{r(t)}catch(o){je&&h.error(`Error while triggering instrumentation handler.
Type: ${e}
Name: ${Oe(r)}
Error:`,o)}}function Wi(e){let t="console";Ie(t,e),be(t,Qd)}function Qd(){"console"in R&&zn.forEach(function(e){e in R.console&&ce(R.console,e,function(t){return mn[e]=t,function(...n){de("console",{args:n,level:e});let o=mn[e];o&&o.apply(R.console,n)}})})}var zi=R;function to(){if(!("fetch"in zi))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch{return!1}}function jn(e){return e&&/^function\s+\w+\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}function ji(){if(typeof EdgeRuntime=="string")return!0;if(!to())return!1;if(jn(zi.fetch))return!0;let e=!1,t=zi.document;if(t&&typeof t.createElement=="function")try{let n=t.createElement("iframe");n.hidden=!0,t.head.appendChild(n),n.contentWindow&&n.contentWindow.fetch&&(e=jn(n.contentWindow.fetch)),t.head.removeChild(n)}catch(n){je&&h.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",n)}return e}var yc=1e3;function pt(){return Date.now()/yc}function Zd(){let{performance:e}=R;if(!e||!e.now)return pt;let t=Date.now()-e.now(),n=e.timeOrigin==null?t:e.timeOrigin;return()=>(n+e.now())/yc}var oe=Zd(),Gn,ie=(()=>{let{performance:e}=R;if(!e||!e.now){Gn="none";return}let t=3600*1e3,n=e.now(),r=Date.now(),o=e.timeOrigin?Math.abs(e.timeOrigin+n-r):t,i=o<t,s=e.timing&&e.timing.navigationStart,c=typeof s=="number"?Math.abs(s+n-r):t,u=c<t;return i||u?o<=c?(Gn="timeOrigin",e.timeOrigin):(Gn="navigationStart",s):(Gn="dateNow",r)})();function qn(e,t){let n="fetch";Ie(n,e),be(n,()=>Tc(void 0,t))}function qi(e){let t="fetch-body-resolved";Ie(t,e),be(t,()=>Tc(tf))}function Tc(e,t=!1){t&&!ji()||ce(R,"fetch",function(n){return function(...r){let{method:o,url:i}=nf(r),s={args:r,fetchData:{method:o,url:i},startTimestamp:oe()*1e3};e||de("fetch",{...s});let a=new Error().stack;return n.apply(R,r).then(async c=>(e?e(c):de("fetch",{...s,endTimestamp:oe()*1e3,response:c}),c),c=>{throw de("fetch",{...s,endTimestamp:oe()*1e3,error:c}),Kt(c)&&c.stack===void 0&&(c.stack=a,ue(c,"framesToPop",1)),c})}})}async function ef(e,t){if(e&&e.body){let n=e.body,r=n.getReader(),o=setTimeout(()=>{n.cancel().then(null,()=>{})},90*1e3),i=!0;for(;i;){let s;try{s=setTimeout(()=>{n.cancel().then(null,()=>{})},5e3);let{done:a}=await r.read();clearTimeout(s),a&&(t(),i=!1)}catch{i=!1}finally{clearTimeout(s)}}clearTimeout(o),r.releaseLock(),n.cancel().then(null,()=>{})}}function tf(e){let t;try{t=e.clone()}catch{return}ef(t,()=>{de("fetch-body-resolved",{endTimestamp:oe()*1e3,response:e})})}function Gi(e,t){return!!e&&typeof e=="object"&&!!e[t]}function Ec(e){return typeof e=="string"?e:e?Gi(e,"url")?e.url:e.toString?e.toString():"":""}function nf(e){if(e.length===0)return{method:"GET",url:""};if(e.length===2){let[n,r]=e;return{url:Ec(n),method:Gi(r,"method")?String(r.method).toUpperCase():"GET"}}let t=e[0];return{url:Ec(t),method:Gi(t,"method")?String(t.method).toUpperCase():"GET"}}var no=null;function Yn(e){let t="error";Ie(t,e),be(t,rf)}function rf(){no=R.onerror,R.onerror=function(e,t,n,r,o){return de("error",{column:r,error:o,line:n,msg:e,url:t}),no&&!no.__SENTRY_LOADER__?no.apply(this,arguments):!1},R.onerror.__SENTRY_INSTRUMENTED__=!0}var ro=null;function Vn(e){let t="unhandledrejection";Ie(t,e),be(t,of)}function of(){ro=R.onunhandledrejection,R.onunhandledrejection=function(e){return de("unhandledrejection",e),ro&&!ro.__SENTRY_LOADER__?ro.apply(this,arguments):!0},R.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}function Yi(){return typeof __SENTRY_BROWSER_BUNDLE__<"u"&&!!__SENTRY_BROWSER_BUNDLE__}function Vi(){return"npm"}function Ic(){return!Yi()&&Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]"}function oo(){return typeof window<"u"&&(!Ic()||sf())}function sf(){return R.process!==void 0&&R.process.type==="renderer"}function bc(){let e=typeof WeakSet=="function",t=e?new WeakSet:[];function n(o){if(e)return t.has(o)?!0:(t.add(o),!1);for(let i=0;i<t.length;i++)if(t[i]===o)return!0;return t.push(o),!1}function r(o){if(e)t.delete(o);else for(let i=0;i<t.length;i++)if(t[i]===o){t.splice(i,1);break}}return[n,r]}function W(){let e=R,t=e.crypto||e.msCrypto,n=()=>Math.random()*16;try{if(t&&t.randomUUID)return t.randomUUID().replace(/-/g,"");t&&t.getRandomValues&&(n=()=>{let r=new Uint8Array(1);return t.getRandomValues(r),r[0]})}catch{}return("10000000100040008000"+1e11).replace(/[018]/g,r=>(r^(n()&15)>>r/4).toString(16))}function vc(e){return e.exception&&e.exception.values?e.exception.values[0]:void 0}function et(e){let{message:t,event_id:n}=e;if(t)return t;let r=vc(e);return r?r.type&&r.value?`${r.type}: ${r.value}`:r.type||r.value||n||"<unknown>":n||"<unknown>"}function hn(e,t,n){let r=e.exception=e.exception||{},o=r.values=r.values||[],i=o[0]=o[0]||{};i.value||(i.value=t||""),i.type||(i.type=n||"Error")}function It(e,t){let n=vc(e);if(!n)return;let r={type:"generic",handled:!0},o=n.mechanism;if(n.mechanism={...r,...o,...t},t&&"data"in t){let i={...o&&o.data,...t.data};n.mechanism.data=i}}function io(e){if(e&&e.__sentry_captured__)return!0;try{ue(e,"__sentry_captured__",!0)}catch{}return!1}function Kn(e){return Array.isArray(e)?e:[e]}function De(e,t=100,n=1/0){try{return Ki("",e,t,n)}catch(r){return{ERROR:`**non-serializable** (${r})`}}}function so(e,t=3,n=100*1024){let r=De(e,t);return lf(r)>n?so(e,t-1,n):r}function Ki(e,t,n=1/0,r=1/0,o=bc()){let[i,s]=o;if(t==null||["boolean","string"].includes(typeof t)||typeof t=="number"&&Number.isFinite(t))return t;let a=af(e,t);if(!a.startsWith("[object "))return a;if(t.__sentry_skip_normalization__)return t;let c=typeof t.__sentry_override_normalization_depth__=="number"?t.__sentry_override_normalization_depth__:n;if(c===0)return a.replace("object ","");if(i(t))return"[Circular ~]";let u=t;if(u&&typeof u.toJSON=="function")try{let m=u.toJSON();return Ki("",m,c-1,r,o)}catch{}let d=Array.isArray(t)?[]:{},l=0,f=Jr(t);for(let m in f){if(!Object.prototype.hasOwnProperty.call(f,m))continue;if(l>=r){d[m]="[MaxProperties ~]";break}let p=f[m];d[m]=Ki(m,p,c-1,r,o),l++}return s(t),d}function af(e,t){try{if(e==="domain"&&t&&typeof t=="object"&&t._events)return"[Domain]";if(e==="domainEmitter")return"[DomainEmitter]";if(typeof global<"u"&&t===global)return"[Global]";if(typeof window<"u"&&t===window)return"[Window]";if(typeof document<"u"&&t===document)return"[Document]";if(Hn(t))return"[VueViewModel]";if(Oi(t))return"[SyntheticEvent]";if(typeof t=="number"&&!Number.isFinite(t))return`[${t}]`;if(typeof t=="function")return`[Function: ${Oe(t)}]`;if(typeof t=="symbol")return`[${String(t)}]`;if(typeof t=="bigint")return`[BigInt: ${String(t)}]`;let n=cf(t);return/^HTML(\w*)Element$/.test(n)?`[HTMLElement: ${n}]`:`[object ${n}]`}catch(n){return`**non-serializable** (${n})`}}function cf(e){let t=Object.getPrototypeOf(e);return t?t.constructor.name:"null prototype"}function uf(e){return~-encodeURI(e).split(/%..|./).length}function lf(e){return uf(JSON.stringify(e))}var bt;(function(e){e[e.PENDING=0]="PENDING";let n=1;e[e.RESOLVED=n]="RESOLVED";let r=2;e[e.REJECTED=r]="REJECTED"})(bt||(bt={}));function we(e){return new tt(t=>{t(e)})}function Mt(e){return new tt((t,n)=>{n(e)})}var tt=class e{constructor(t){e.prototype.__init.call(this),e.prototype.__init2.call(this),e.prototype.__init3.call(this),e.prototype.__init4.call(this),this._state=bt.PENDING,this._handlers=[];try{t(this._resolve,this._reject)}catch(n){this._reject(n)}}then(t,n){return new e((r,o)=>{this._handlers.push([!1,i=>{if(!t)r(i);else try{r(t(i))}catch(s){o(s)}},i=>{if(!n)o(i);else try{r(n(i))}catch(s){o(s)}}]),this._executeHandlers()})}catch(t){return this.then(n=>n,t)}finally(t){return new e((n,r)=>{let o,i;return this.then(s=>{i=!1,o=s,t&&t()},s=>{i=!0,o=s,t&&t()}).then(()=>{if(i){r(o);return}n(o)})})}__init(){this._resolve=t=>{this._setResult(bt.RESOLVED,t)}}__init2(){this._reject=t=>{this._setResult(bt.REJECTED,t)}}__init3(){this._setResult=(t,n)=>{if(this._state===bt.PENDING){if(lt(n)){n.then(this._resolve,this._reject);return}this._state=t,this._value=n,this._executeHandlers()}}}__init4(){this._executeHandlers=()=>{if(this._state===bt.PENDING)return;let t=this._handlers.slice();this._handlers=[],t.forEach(n=>{n[0]||(this._state===bt.RESOLVED&&n[1](this._value),this._state===bt.REJECTED&&n[2](this._value),n[0]=!0)})}}};function Ji(e){let t=[];function n(){return e===void 0||t.length<e}function r(s){return t.splice(t.indexOf(s),1)[0]||Promise.resolve(void 0)}function o(s){if(!n())return Mt(new Te("Not adding Promise because buffer limit was reached."));let a=s();return t.indexOf(a)===-1&&t.push(a),a.then(()=>r(a)).then(null,()=>r(a).then(null,()=>{})),a}function i(s){return new tt((a,c)=>{let u=t.length;if(!u)return a(!0);let d=setTimeout(()=>{s&&s>0&&a(!1)},s);t.forEach(l=>{we(l).then(()=>{--u||(clearTimeout(d),a(!0))},c)})})}return{$:t,add:o,drain:i}}function qe(e){if(!e)return{};let t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};let n=t[6]||"",r=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],search:n,hash:r,relative:t[5]+n+r}}var Cc=["fatal","error","warning","log","info","debug"];function Jn(e){return e==="warn"?"warning":Cc.includes(e)?e:"log"}var vt="baggage",Xn="sentry-",wc=/^sentry-/,xc=8192;function Qn(e){let t=kc(e);if(!t)return;let n=Object.entries(t).reduce((r,[o,i])=>{if(o.match(wc)){let s=o.slice(Xn.length);r[s]=i}return r},{});if(Object.keys(n).length>0)return n}function gn(e){if(!e)return;let t=Object.entries(e).reduce((n,[r,o])=>(o&&(n[`${Xn}${r}`]=o),n),{});return df(t)}function kc(e){if(!(!e||!Re(e)&&!Array.isArray(e)))return Array.isArray(e)?e.reduce((t,n)=>{let r=Rc(n);return Object.entries(r).forEach(([o,i])=>{t[o]=i}),t},{}):Rc(e)}function Rc(e){return e.split(",").map(t=>t.split("=").map(n=>decodeURIComponent(n.trim()))).reduce((t,[n,r])=>(n&&r&&(t[n]=r),t),{})}function df(e){if(Object.keys(e).length!==0)return Object.entries(e).reduce((t,[n,r],o)=>{let i=`${encodeURIComponent(n)}=${encodeURIComponent(r)}`,s=o===0?i:`${t},${i}`;return s.length>xc?(je&&h.warn(`Not adding key: ${n} with val: ${r} to baggage header due to exceeding baggage size limits.`),t):s},"")}var Ac=new RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");function Nc(e){if(!e)return;let t=e.match(Ac);if(!t)return;let n;return t[3]==="1"?n=!0:t[3]==="0"&&(n=!1),{traceId:t[1],parentSampled:n,parentSpanId:t[2]}}function Xi(e,t){let n=Nc(e),r=Qn(t),{traceId:o,parentSpanId:i,parentSampled:s}=n||{};return n?{traceId:o||W(),parentSpanId:i||W().substring(16),spanId:W().substring(16),sampled:s,dsc:r||{}}:{traceId:o||W(),spanId:W().substring(16)}}function Zt(e=W(),t=W().substring(16),n){let r="";return n!==void 0&&(r=n?"-1":"-0"),`${e}-${t}${r}`}function Fe(e,t=[]){return[e,t]}function Zi(e,t){let[n,r]=e;return[n,[...r,t]]}function ao(e,t){let n=e[1];for(let r of n){let o=r[0].type;if(t(r,o))return!0}return!1}function Qi(e){return R.__SENTRY__&&R.__SENTRY__.encodePolyfill?R.__SENTRY__.encodePolyfill(e):new TextEncoder().encode(e)}function es(e){let[t,n]=e,r=JSON.stringify(t);function o(i){typeof r=="string"?r=typeof i=="string"?r+i:[Qi(r),i]:r.push(typeof i=="string"?Qi(i):i)}for(let i of n){let[s,a]=i;if(o(`
${JSON.stringify(s)}
`),typeof a=="string"||a instanceof Uint8Array)o(a);else{let c;try{c=JSON.stringify(a)}catch{c=JSON.stringify(De(a))}o(c)}}return typeof r=="string"?r:ff(r)}function ff(e){let t=e.reduce((o,i)=>o+i.length,0),n=new Uint8Array(t),r=0;for(let o of e)n.set(o,r),r+=o.length;return n}function ts(e){return[{type:"span"},e]}function ns(e){let t=typeof e.data=="string"?Qi(e.data):e.data;return[K({type:"attachment",length:t.length,filename:e.filename,content_type:e.contentType,attachment_type:e.attachmentType}),t]}var pf={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",profile_chunk:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",statsd:"metric_bucket"};function co(e){return pf[e]}function Sn(e){if(!e||!e.sdk)return;let{name:t,version:n}=e.sdk;return{name:t,version:n}}function Zn(e,t,n,r){let o=e.sdkProcessingMetadata&&e.sdkProcessingMetadata.dynamicSamplingContext;return{event_id:e.event_id,sent_at:new Date().toISOString(),...t&&{sdk:t},...!!n&&r&&{dsn:Ze(r)},...o&&{trace:K({...o})}}}function rs(e,t,n){let r=[{type:"client_report"},{timestamp:n||pt(),discarded_events:e}];return Fe(t?{dsn:t}:{},[r])}function Mc(e,t=Date.now()){let n=parseInt(`${e}`,10);if(!isNaN(n))return n*1e3;let r=Date.parse(`${e}`);return isNaN(r)?6e4:r-t}function Oc(e,t){return e[t]||e.all||0}function er(e,t,n=Date.now()){return Oc(e,t)>n}function tr(e,{statusCode:t,headers:n},r=Date.now()){let o={...e},i=n&&n["x-sentry-rate-limits"],s=n&&n["retry-after"];if(i)for(let a of i.trim().split(",")){let[c,u,,,d]=a.split(":",5),l=parseInt(c,10),f=(isNaN(l)?60:l)*1e3;if(!u)o.all=r+f;else for(let m of u.split(";"))m==="metric_bucket"?(!d||d.split(";").includes("custom"))&&(o[m]=r+f):o[m]=r+f}else s?o.all=r+Mc(s,r):t===429&&(o.all=r+60*1e3);return o}function os(e,t){return e??t()}function he(e){let t,n=e[0],r=1;for(;r<e.length;){let o=e[r],i=e[r+1];if(r+=2,(o==="optionalAccess"||o==="optionalCall")&&n==null)return;o==="access"||o==="optionalAccess"?(t=n,n=i(n)):(o==="call"||o==="optionalCall")&&(n=i((...s)=>n.call(t,...s)),t=void 0)}return n}function en(){return{traceId:W(),spanId:W().substring(16)}}var uo=R;function is(){let e=uo.chrome,t=e&&e.app&&e.app.runtime,n="history"in uo&&!!uo.history.pushState&&!!uo.history.replaceState;return!t&&n}var w=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;function nt(){return nr(R),R}function nr(e){let t=e.__SENTRY__=e.__SENTRY__||{};return t.version=t.version||ze,t[ze]=t[ze]||{}}function Dc(e){let t=oe(),n={sid:W(),init:!0,timestamp:t,started:t,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>mf(n)};return e&&Ct(n,e),n}function Ct(e,t={}){if(t.user&&(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),!e.did&&!t.did&&(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||oe(),t.abnormal_mechanism&&(e.abnormal_mechanism=t.abnormal_mechanism),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=t.sid.length===32?t.sid:W()),t.init!==void 0&&(e.init=t.init),!e.did&&t.did&&(e.did=`${t.did}`),typeof t.started=="number"&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if(typeof t.duration=="number")e.duration=t.duration;else{let n=e.timestamp-e.started;e.duration=n>=0?n:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),typeof t.errors=="number"&&(e.errors=t.errors),t.status&&(e.status=t.status)}function Lc(e,t){let n={};t?n={status:t}:e.status==="ok"&&(n={status:"exited"}),Ct(e,n)}function mf(e){return K({sid:`${e.sid}`,init:e.init,started:new Date(e.started*1e3).toISOString(),timestamp:new Date(e.timestamp*1e3).toISOString(),status:e.status,errors:e.errors,did:typeof e.did=="number"||typeof e.did=="string"?`${e.did}`:void 0,duration:e.duration,abnormal_mechanism:e.abnormal_mechanism,attrs:{release:e.release,environment:e.environment,ip_address:e.ipAddress,user_agent:e.userAgent}})}var ss="_sentrySpan";function Ot(e,t){t?ue(e,ss,t):delete e[ss]}function tn(e){return e[ss]}var hf=100,as=class e{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext=en()}clone(){let t=new e;return t._breadcrumbs=[...this._breadcrumbs],t._tags={...this._tags},t._extra={...this._extra},t._contexts={...this._contexts},t._user=this._user,t._level=this._level,t._session=this._session,t._transactionName=this._transactionName,t._fingerprint=this._fingerprint,t._eventProcessors=[...this._eventProcessors],t._requestSession=this._requestSession,t._attachments=[...this._attachments],t._sdkProcessingMetadata={...this._sdkProcessingMetadata},t._propagationContext={...this._propagationContext},t._client=this._client,t._lastEventId=this._lastEventId,Ot(t,tn(this)),t}setClient(t){this._client=t}setLastEventId(t){this._lastEventId=t}getClient(){return this._client}lastEventId(){return this._lastEventId}addScopeListener(t){this._scopeListeners.push(t)}addEventProcessor(t){return this._eventProcessors.push(t),this}setUser(t){return this._user=t||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&Ct(this._session,{user:t}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(t){return this._requestSession=t,this}setTags(t){return this._tags={...this._tags,...t},this._notifyScopeListeners(),this}setTag(t,n){return this._tags={...this._tags,[t]:n},this._notifyScopeListeners(),this}setExtras(t){return this._extra={...this._extra,...t},this._notifyScopeListeners(),this}setExtra(t,n){return this._extra={...this._extra,[t]:n},this._notifyScopeListeners(),this}setFingerprint(t){return this._fingerprint=t,this._notifyScopeListeners(),this}setLevel(t){return this._level=t,this._notifyScopeListeners(),this}setTransactionName(t){return this._transactionName=t,this._notifyScopeListeners(),this}setContext(t,n){return n===null?delete this._contexts[t]:this._contexts[t]=n,this._notifyScopeListeners(),this}setSession(t){return t?this._session=t:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(t){if(!t)return this;let n=typeof t=="function"?t(this):t,[r,o]=n instanceof Ue?[n.getScopeData(),n.getRequestSession()]:Qe(n)?[t,t.requestSession]:[],{tags:i,extra:s,user:a,contexts:c,level:u,fingerprint:d=[],propagationContext:l}=r||{};return this._tags={...this._tags,...i},this._extra={...this._extra,...s},this._contexts={...this._contexts,...c},a&&Object.keys(a).length&&(this._user=a),u&&(this._level=u),d.length&&(this._fingerprint=d),l&&(this._propagationContext=l),o&&(this._requestSession=o),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._session=void 0,Ot(this,void 0),this._attachments=[],this._propagationContext=en(),this._notifyScopeListeners(),this}addBreadcrumb(t,n){let r=typeof n=="number"?n:hf;if(r<=0)return this;let o={timestamp:pt(),...t},i=this._breadcrumbs;return i.push(o),this._breadcrumbs=i.length>r?i.slice(-r):i,this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(t){return this._attachments.push(t),this}clearAttachments(){return this._attachments=[],this}getScopeData(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:tn(this)}}setSDKProcessingMetadata(t){return this._sdkProcessingMetadata={...this._sdkProcessingMetadata,...t},this}setPropagationContext(t){return this._propagationContext=t,this}getPropagationContext(){return this._propagationContext}captureException(t,n){let r=n&&n.event_id?n.event_id:W();if(!this._client)return h.warn("No client configured on scope - will not capture exception!"),r;let o=new Error("Sentry syntheticException");return this._client.captureException(t,{originalException:t,syntheticException:o,...n,event_id:r},this),r}captureMessage(t,n,r){let o=r&&r.event_id?r.event_id:W();if(!this._client)return h.warn("No client configured on scope - will not capture message!"),o;let i=new Error(t);return this._client.captureMessage(t,n,{originalException:t,syntheticException:i,...r,event_id:o},this),o}captureEvent(t,n){let r=n&&n.event_id?n.event_id:W();return this._client?(this._client.captureEvent(t,{...n,event_id:r},this),r):(h.warn("No client configured on scope - will not capture event!"),r)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(t=>{t(this)}),this._notifyingListeners=!1)}},Ue=as;function Pc(){return Nt("defaultCurrentScope",()=>new Ue)}function Fc(){return Nt("defaultIsolationScope",()=>new Ue)}var cs=class{constructor(t,n){let r;t?r=t:r=new Ue;let o;n?o=n:o=new Ue,this._stack=[{scope:r}],this._isolationScope=o}withScope(t){let n=this._pushScope(),r;try{r=t(n)}catch(o){throw this._popScope(),o}return lt(r)?r.then(o=>(this._popScope(),o),o=>{throw this._popScope(),o}):(this._popScope(),r)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStackTop(){return this._stack[this._stack.length-1]}_pushScope(){let t=this.getScope().clone();return this._stack.push({client:this.getClient(),scope:t}),t}_popScope(){return this._stack.length<=1?!1:!!this._stack.pop()}};function _n(){let e=nt(),t=nr(e);return t.stack=t.stack||new cs(Pc(),Fc())}function gf(e){return _n().withScope(e)}function Sf(e,t){let n=_n();return n.withScope(()=>(n.getStackTop().scope=e,t(e)))}function Uc(e){return _n().withScope(()=>e(_n().getIsolationScope()))}function Bc(){return{withIsolationScope:Uc,withScope:gf,withSetScope:Sf,withSetIsolationScope:(e,t)=>Uc(t),getCurrentScope:()=>_n().getScope(),getIsolationScope:()=>_n().getIsolationScope()}}function Dt(e){let t=nr(e);return t.acs?t.acs:Bc()}function H(){let e=nt();return Dt(e).getCurrentScope()}function se(){let e=nt();return Dt(e).getIsolationScope()}function lo(){return Nt("globalScope",()=>new Ue)}function nn(...e){let t=nt(),n=Dt(t);if(e.length===2){let[r,o]=e;return r?n.withSetScope(r,o):n.withScope(o)}return n.withScope(e[0])}function C(){return H().getClient()}var _f="_sentryMetrics";function rr(e){let t=e[_f];if(!t)return;let n={};for(let[,[r,o]]of t)(n[r]||(n[r]=[])).push(K(o));return n}var ve="sentry.source",yn="sentry.sample_rate",xe="sentry.op",Z="sentry.origin",En="sentry.idle_span_finish_reason",Lt="sentry.measurement_unit",Pt="sentry.measurement_value",us="sentry.profile_id",rn="sentry.exclusive_time";function ls(e){if(e<400&&e>=100)return{code:1};if(e>=400&&e<500)switch(e){case 401:return{code:2,message:"unauthenticated"};case 403:return{code:2,message:"permission_denied"};case 404:return{code:2,message:"not_found"};case 409:return{code:2,message:"already_exists"};case 413:return{code:2,message:"failed_precondition"};case 429:return{code:2,message:"resource_exhausted"};case 499:return{code:2,message:"cancelled"};default:return{code:2,message:"invalid_argument"}}if(e>=500&&e<600)switch(e){case 501:return{code:2,message:"unimplemented"};case 503:return{code:2,message:"unavailable"};case 504:return{code:2,message:"deadline_exceeded"};default:return{code:2,message:"internal_error"}}return{code:2,message:"unknown_error"}}function Tn(e,t){e.setAttribute("http.response.status_code",t);let n=ls(t);n.message!=="unknown_error"&&e.setStatus(n)}var fo=0,fs=1;function $c(e){let{spanId:t,traceId:n}=e.spanContext(),{data:r,op:o,parent_span_id:i,status:s,origin:a}=A(e);return K({parent_span_id:i,span_id:t,trace_id:n,data:r,op:o,status:s,origin:a})}function ps(e){let{spanId:t,traceId:n}=e.spanContext(),{parent_span_id:r}=A(e);return K({parent_span_id:r,span_id:t,trace_id:n})}function In(e){let{traceId:t,spanId:n}=e.spanContext(),r=Ye(e);return Zt(t,n,r)}function rt(e){return typeof e=="number"?Hc(e):Array.isArray(e)?e[0]+e[1]/1e9:e instanceof Date?Hc(e.getTime()):oe()}function Hc(e){return e>9999999999?e/1e3:e}function A(e){if(If(e))return e.getSpanJSON();try{let{spanId:t,traceId:n}=e.spanContext();if(Tf(e)){let{attributes:r,startTime:o,name:i,endTime:s,parentSpanId:a,status:c}=e;return K({span_id:t,trace_id:n,data:r,description:i,parent_span_id:a,start_timestamp:rt(o),timestamp:rt(s)||void 0,status:po(c),op:r[xe],origin:r[Z],_metrics_summary:rr(e)})}return{span_id:t,trace_id:n}}catch{return{}}}function Tf(e){let t=e;return!!t.attributes&&!!t.startTime&&!!t.name&&!!t.endTime&&!!t.status}function If(e){return typeof e.getSpanJSON=="function"}function Ye(e){let{traceFlags:t}=e.spanContext();return t===fs}function po(e){if(!(!e||e.code===0))return e.code===1?"ok":e.message||"unknown_error"}var on="_sentryChildSpans",ds="_sentryRootSpan";function mo(e,t){let n=e[ds]||e;ue(t,ds,n),e[on]?e[on].add(t):ue(e,on,new Set([t]))}function Wc(e,t){e[on]&&e[on].delete(t)}function Ft(e){let t=new Set;function n(r){if(!t.has(r)&&Ye(r)){t.add(r);let o=r[on]?Array.from(r[on]):[];for(let i of o)n(i)}}return n(e),Array.from(t)}function J(e){return e[ds]||e}function X(){let e=nt(),t=Dt(e);return t.getActiveSpan?t.getActiveSpan():tn(H())}var zc=!1;function ho(){zc||(zc=!0,Yn(ms),Vn(ms))}function ms(){let e=X(),t=e&&J(e);if(t){let n="internal_error";w&&h.log(`[Tracing] Root span: ${n} -> Global error occured`),t.setStatus({code:2,message:n})}}ms.tag="sentry_tracingErrorCallback";var jc="_sentryScope",Gc="_sentryIsolationScope";function qc(e,t,n){e&&(ue(e,Gc,n),ue(e,jc,t))}function hs(e){return{scope:e[jc],isolationScope:e[Gc]}}function Ce(e){if(typeof __SENTRY_TRACING__=="boolean"&&!__SENTRY_TRACING__)return!1;let t=C(),n=e||t&&t.getOptions();return!!n&&(n.enableTracing||"tracesSampleRate"in n||"tracesSampler"in n)}var Be=class{constructor(t={}){this._traceId=t.traceId||W(),this._spanId=t.spanId||W().substring(16)}spanContext(){return{spanId:this._spanId,traceId:this._traceId,traceFlags:fo}}end(t){}setAttribute(t,n){return this}setAttributes(t){return this}setStatus(t){return this}updateName(t){return this}isRecording(){return!1}addEvent(t,n,r){return this}addLink(t){return this}addLinks(t){return this}recordException(t,n){}};var bn="production";var Yc="_frozenDsc";function gs(e,t){ue(e,Yc,t)}function Ut(e,t){let n=t.getOptions(),{publicKey:r}=t.getDsn()||{},o=K({environment:n.environment||bn,release:n.release,public_key:r,trace_id:e});return t.emit("createDsc",o),o}function ge(e){let t=C();if(!t)return{};let n=Ut(A(e).trace_id||"",t),r=J(e),o=r[Yc];if(o)return o;let i=r.spanContext().traceState,s=i&&i.get("sentry.dsc"),a=s&&Qn(s);if(a)return a;let c=A(r),u=c.data||{},d=u[yn];d!=null&&(n.sample_rate=`${d}`);let l=u[ve],f=c.description;return l!=="url"&&f&&(n.transaction=f),Ce()&&(n.sampled=String(Ye(r))),t.emit("createDsc",n,r),n}function Vc(e){if(!w)return;let{description:t="< unknown name >",op:n="< unknown op >",parent_span_id:r}=A(e),{spanId:o}=e.spanContext(),i=Ye(e),s=J(e),a=s===e,c=`[Tracing] Starting ${i?"sampled":"unsampled"} ${a?"root ":""}span`,u=[`op: ${n}`,`name: ${t}`,`ID: ${o}`];if(r&&u.push(`parent ID: ${r}`),!a){let{op:d,description:l}=A(s);u.push(`root ID: ${s.spanContext().spanId}`),d&&u.push(`root op: ${d}`),l&&u.push(`root description: ${l}`)}h.log(`${c}
  ${u.join(`
  `)}`)}function Kc(e){if(!w)return;let{description:t="< unknown name >",op:n="< unknown op >"}=A(e),{spanId:r}=e.spanContext(),i=J(e)===e,s=`[Tracing] Finishing "${n}" ${i?"root ":""}span "${t}" with ID ${r}`;h.log(s)}function Bt(e){if(typeof e=="boolean")return Number(e);let t=typeof e=="string"?parseFloat(e):e;if(typeof t!="number"||isNaN(t)||t<0||t>1){w&&h.warn(`[Tracing] Given sample rate is invalid. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(e)} of type ${JSON.stringify(typeof e)}.`);return}return t}function Jc(e,t){if(!Ce(e))return[!1];let n;typeof e.tracesSampler=="function"?n=e.tracesSampler(t):t.parentSampled!==void 0?n=t.parentSampled:typeof e.tracesSampleRate<"u"?n=e.tracesSampleRate:n=1;let r=Bt(n);return r===void 0?(w&&h.warn("[Tracing] Discarding transaction because of invalid sample rate."),[!1]):r?Math.random()<r?[!0,r]:(w&&h.log(`[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ${Number(n)})`),[!1,r]):(w&&h.log(`[Tracing] Discarding transaction because ${typeof e.tracesSampler=="function"?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0"}`),[!1,r])}function bf(e,t){return t&&(e.sdk=e.sdk||{},e.sdk.name=e.sdk.name||t.name,e.sdk.version=e.sdk.version||t.version,e.sdk.integrations=[...e.sdk.integrations||[],...t.integrations||[]],e.sdk.packages=[...e.sdk.packages||[],...t.packages||[]]),e}function Xc(e,t,n,r){let o=Sn(n),i={sent_at:new Date().toISOString(),...o&&{sdk:o},...!!r&&t&&{dsn:Ze(t)}},s="aggregates"in e?[{type:"sessions"},e]:[{type:"session"},e.toJSON()];return Fe(i,[s])}function Qc(e,t,n,r){let o=Sn(n),i=e.type&&e.type!=="replay_event"?e.type:"event";bf(e,n&&n.sdk);let s=Zn(e,o,r,t);return delete e.sdkProcessingMetadata,Fe(s,[[{type:i},e]])}function Zc(e,t){function n(d){return!!d.trace_id&&!!d.public_key}let r=ge(e[0]),o=t&&t.getDsn(),i=t&&t.getOptions().tunnel,s={sent_at:new Date().toISOString(),...n(r)&&{trace:r},...!!i&&o&&{dsn:Ze(o)}},a=t&&t.getOptions().beforeSendSpan,c=a?d=>a(A(d)):d=>A(d),u=[];for(let d of e){let l=c(d);l&&u.push(ts(l))}return Fe(s,u)}function go(e,t,n,r=X()){let o=r&&J(r);o&&o.addEvent(e,{[Pt]:t,[Lt]:n})}function So(e){if(!e||e.length===0)return;let t={};return e.forEach(n=>{let r=n.attributes||{},o=r[Lt],i=r[Pt];typeof o=="string"&&typeof i=="number"&&(t[n.name]={value:i,unit:o})}),t}var eu=1e3,vn=class{constructor(t={}){this._traceId=t.traceId||W(),this._spanId=t.spanId||W().substring(16),this._startTime=t.startTimestamp||oe(),this._attributes={},this.setAttributes({[Z]:"manual",[xe]:t.op,...t.attributes}),this._name=t.name,t.parentSpanId&&(this._parentSpanId=t.parentSpanId),"sampled"in t&&(this._sampled=t.sampled),t.endTimestamp&&(this._endTime=t.endTimestamp),this._events=[],this._isStandaloneSpan=t.isStandalone,this._endTime&&this._onSpanEnded()}addLink(t){return this}addLinks(t){return this}recordException(t,n){}spanContext(){let{_spanId:t,_traceId:n,_sampled:r}=this;return{spanId:t,traceId:n,traceFlags:r?fs:fo}}setAttribute(t,n){return n===void 0?delete this._attributes[t]:this._attributes[t]=n,this}setAttributes(t){return Object.keys(t).forEach(n=>this.setAttribute(n,t[n])),this}updateStartTime(t){this._startTime=rt(t)}setStatus(t){return this._status=t,this}updateName(t){return this._name=t,this}end(t){this._endTime||(this._endTime=rt(t),Kc(this),this._onSpanEnded())}getSpanJSON(){return K({data:this._attributes,description:this._name,op:this._attributes[xe],parent_span_id:this._parentSpanId,span_id:this._spanId,start_timestamp:this._startTime,status:po(this._status),timestamp:this._endTime,trace_id:this._traceId,origin:this._attributes[Z],_metrics_summary:rr(this),profile_id:this._attributes[us],exclusive_time:this._attributes[rn],measurements:So(this._events),is_segment:this._isStandaloneSpan&&J(this)===this||void 0,segment_id:this._isStandaloneSpan?J(this).spanContext().spanId:void 0})}isRecording(){return!this._endTime&&!!this._sampled}addEvent(t,n,r){w&&h.log("[Tracing] Adding an event to span:",t);let o=tu(n)?n:r||oe(),i=tu(n)?{}:n||{},s={name:t,time:rt(o),attributes:i};return this._events.push(s),this}isStandaloneSpan(){return!!this._isStandaloneSpan}_onSpanEnded(){let t=C();if(t&&t.emit("spanEnd",this),!(this._isStandaloneSpan||this===J(this)))return;if(this._isStandaloneSpan){this._sampled?Cf(Zc([this],t)):(w&&h.log("[Tracing] Discarding standalone span because its trace was not chosen to be sampled."),t&&t.recordDroppedEvent("sample_rate","span"));return}let r=this._convertSpanToTransaction();r&&(hs(this).scope||H()).captureEvent(r)}_convertSpanToTransaction(){if(!nu(A(this)))return;this._name||(w&&h.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this._name="<unlabeled transaction>");let{scope:t,isolationScope:n}=hs(this),o=(t||H()).getClient()||C();if(this._sampled!==!0){w&&h.log("[Tracing] Discarding transaction because its trace was not chosen to be sampled."),o&&o.recordDroppedEvent("sample_rate","transaction");return}let s=Ft(this).filter(l=>l!==this&&!vf(l)).map(l=>A(l)).filter(nu),a=this._attributes[ve],c={contexts:{trace:$c(this)},spans:s.length>eu?s.sort((l,f)=>l.start_timestamp-f.start_timestamp).slice(0,eu):s,start_timestamp:this._startTime,timestamp:this._endTime,transaction:this._name,type:"transaction",sdkProcessingMetadata:{capturedSpanScope:t,capturedSpanIsolationScope:n,...K({dynamicSamplingContext:ge(this)})},_metrics_summary:rr(this),...a&&{transaction_info:{source:a}}},u=So(this._events);return u&&Object.keys(u).length&&(w&&h.log("[Measurements] Adding measurements to transaction event",JSON.stringify(u,void 0,2)),c.measurements=u),c}};function tu(e){return e&&typeof e=="number"||e instanceof Date||Array.isArray(e)}function nu(e){return!!e.start_timestamp&&!!e.timestamp&&!!e.span_id&&!!e.trace_id}function vf(e){return e instanceof vn&&e.isStandaloneSpan()}function Cf(e){let t=C();if(!t)return;let n=e[1];if(!n||n.length===0){t.recordDroppedEvent("before_send","span");return}t.sendEnvelope(e)}var ou="__SENTRY_SUPPRESS_TRACING__";function ke(e){let t=iu();if(t.startInactiveSpan)return t.startInactiveSpan(e);let n=wf(e),{forceTransaction:r,parentSpan:o}=e;return(e.scope?s=>nn(e.scope,s):o!==void 0?s=>or(o,s):s=>s())(()=>{let s=H(),a=kf(s);return e.onlyIfParent&&!a?new Be:Rf({parentSpan:a,spanArguments:n,forceTransaction:r,scope:s})})}function or(e,t){let n=iu();return n.withActiveSpan?n.withActiveSpan(e,t):nn(r=>(Ot(r,e||void 0),t(r)))}function Rf({parentSpan:e,spanArguments:t,forceTransaction:n,scope:r}){if(!Ce())return new Be;let o=se(),i;if(e&&!n)i=xf(e,r,t),mo(e,i);else if(e){let s=ge(e),{traceId:a,spanId:c}=e.spanContext(),u=Ye(e);i=ru({traceId:a,parentSpanId:c,...t},r,u),gs(i,s)}else{let{traceId:s,dsc:a,parentSpanId:c,sampled:u}={...o.getPropagationContext(),...r.getPropagationContext()};i=ru({traceId:s,parentSpanId:c,...t},r,u),a&&gs(i,a)}return Vc(i),qc(i,r,o),i}function wf(e){let n={isStandalone:(e.experimental||{}).standalone,...e};if(e.startTime){let r={...n};return r.startTimestamp=rt(e.startTime),delete r.startTime,r}return n}function iu(){let e=nt();return Dt(e)}function ru(e,t,n){let r=C(),o=r&&r.getOptions()||{},{name:i="",attributes:s}=e,[a,c]=t.getScopeData().sdkProcessingMetadata[ou]?[!1]:Jc(o,{name:i,parentSampled:n,attributes:s,transactionContext:{name:i,parentSampled:n}}),u=new vn({...e,attributes:{[ve]:"custom",...e.attributes},sampled:a});return c!==void 0&&u.setAttribute(yn,c),r&&r.emit("spanStart",u),u}function xf(e,t,n){let{spanId:r,traceId:o}=e.spanContext(),i=t.getScopeData().sdkProcessingMetadata[ou]?!1:Ye(e),s=i?new vn({...n,parentSpanId:r,traceId:o,sampled:i}):new Be({traceId:o});mo(e,s);let a=C();return a&&(a.emit("spanStart",s),n.endTimestamp&&a.emit("spanEnd",s)),s}function kf(e){let t=tn(e);if(!t)return;let n=C();return(n?n.getOptions():{}).parentSpanIsAlwaysRootSpan?J(t):t}var Cn={idleTimeout:1e3,finalTimeout:3e4,childSpanTimeout:15e3},Af="heartbeatFailed",Nf="idleTimeout",Mf="finalTimeout",Of="externalFinish";function _o(e,t={}){let n=new Map,r=!1,o,i=Of,s=!t.disableAutoFinish,a=[],{idleTimeout:c=Cn.idleTimeout,finalTimeout:u=Cn.finalTimeout,childSpanTimeout:d=Cn.childSpanTimeout,beforeSpanEnd:l}=t,f=C();if(!f||!Ce())return new Be;let m=H(),p=X(),g=Df(e);g.end=new Proxy(g.end,{apply(S,_,I){l&&l(g);let[B,...E]=I,b=B||oe(),M=rt(b),z=Ft(g).filter(q=>q!==g);if(!z.length)return N(M),Reflect.apply(S,_,[M,...E]);let Q=z.map(q=>A(q).timestamp).filter(q=>!!q),le=Q.length?Math.max(...Q):void 0,F=A(g).start_timestamp,me=Math.min(F?F+u/1e3:1/0,Math.max(F||-1/0,Math.min(M,le||1/0)));return N(me),Reflect.apply(S,_,[me,...E])}});function T(){o&&(clearTimeout(o),o=void 0)}function y(S){T(),o=setTimeout(()=>{!r&&n.size===0&&s&&(i=Nf,g.end(S))},c)}function x(S){o=setTimeout(()=>{!r&&s&&(i=Af,g.end(S))},d)}function U(S){T(),n.set(S,!0);let _=oe();x(_+d/1e3)}function L(S){if(n.has(S)&&n.delete(S),n.size===0){let _=oe();y(_+c/1e3)}}function N(S){r=!0,n.clear(),a.forEach(M=>M()),Ot(m,p);let _=A(g),{start_timestamp:I}=_;if(!I)return;(_.data||{})[En]||g.setAttribute(En,i),h.log(`[Tracing] Idle span "${_.op}" finished`);let E=Ft(g).filter(M=>M!==g),b=0;E.forEach(M=>{M.isRecording()&&(M.setStatus({code:2,message:"cancelled"}),M.end(S),w&&h.log("[Tracing] Cancelling span since span ended early",JSON.stringify(M,void 0,2)));let z=A(M),{timestamp:Q=0,start_timestamp:le=0}=z,F=le<=S,me=(u+c)/1e3,q=Q-le<=me;if(w){let Me=JSON.stringify(M,void 0,2);F?q||h.log("[Tracing] Discarding span since it finished after idle span final timeout",Me):h.log("[Tracing] Discarding span since it happened after idle span was finished",Me)}(!q||!F)&&(Wc(g,M),b++)}),b>0&&g.setAttribute("sentry.idle_span_discarded_spans",b)}return a.push(f.on("spanStart",S=>{if(r||S===g||A(S).timestamp)return;Ft(g).includes(S)&&U(S.spanContext().spanId)})),a.push(f.on("spanEnd",S=>{r||L(S.spanContext().spanId)})),a.push(f.on("idleSpanEnableAutoFinish",S=>{S===g&&(s=!0,y(),n.size&&x())})),t.disableAutoFinish||y(),setTimeout(()=>{r||(g.setStatus({code:2,message:"deadline_exceeded"}),i=Mf,g.end())},u),g}function Df(e){let t=ke(e);return Ot(H(),t),w&&h.log("[Tracing] Started span is an idle span"),t}function yo(e,t,n,r=0){return new tt((o,i)=>{let s=e[r];if(t===null||typeof s!="function")o(t);else{let a=s({...t},n);w&&s.id&&a===null&&h.log(`Event processor "${s.id}" dropped event`),lt(a)?a.then(c=>yo(e,c,n,r+1).then(o)).then(null,i):yo(e,a,n,r+1).then(o).then(null,i)}})}function su(e,t){let{fingerprint:n,span:r,breadcrumbs:o,sdkProcessingMetadata:i}=t;Lf(e,t),r&&Uf(e,r),Bf(e,n),Pf(e,o),Ff(e,i)}function Ss(e,t){let{extra:n,tags:r,user:o,contexts:i,level:s,sdkProcessingMetadata:a,breadcrumbs:c,fingerprint:u,eventProcessors:d,attachments:l,propagationContext:f,transactionName:m,span:p}=t;ir(e,"extra",n),ir(e,"tags",r),ir(e,"user",o),ir(e,"contexts",i),ir(e,"sdkProcessingMetadata",a),s&&(e.level=s),m&&(e.transactionName=m),p&&(e.span=p),c.length&&(e.breadcrumbs=[...e.breadcrumbs,...c]),u.length&&(e.fingerprint=[...e.fingerprint,...u]),d.length&&(e.eventProcessors=[...e.eventProcessors,...d]),l.length&&(e.attachments=[...e.attachments,...l]),e.propagationContext={...e.propagationContext,...f}}function ir(e,t,n){if(n&&Object.keys(n).length){e[t]={...e[t]};for(let r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[t][r]=n[r])}}function Lf(e,t){let{extra:n,tags:r,user:o,contexts:i,level:s,transactionName:a}=t,c=K(n);c&&Object.keys(c).length&&(e.extra={...c,...e.extra});let u=K(r);u&&Object.keys(u).length&&(e.tags={...u,...e.tags});let d=K(o);d&&Object.keys(d).length&&(e.user={...d,...e.user});let l=K(i);l&&Object.keys(l).length&&(e.contexts={...l,...e.contexts}),s&&(e.level=s),a&&e.type!=="transaction"&&(e.transaction=a)}function Pf(e,t){let n=[...e.breadcrumbs||[],...t];e.breadcrumbs=n.length?n:void 0}function Ff(e,t){e.sdkProcessingMetadata={...e.sdkProcessingMetadata,...t}}function Uf(e,t){e.contexts={trace:ps(t),...e.contexts},e.sdkProcessingMetadata={dynamicSamplingContext:ge(t),...e.sdkProcessingMetadata};let n=J(t),r=A(n).description;r&&!e.transaction&&e.type==="transaction"&&(e.transaction=r)}function Bf(e,t){e.fingerprint=e.fingerprint?Kn(e.fingerprint):[],t&&(e.fingerprint=e.fingerprint.concat(t)),e.fingerprint&&!e.fingerprint.length&&delete e.fingerprint}function sr(e,t,n,r,o,i){let{normalizeDepth:s=3,normalizeMaxBreadth:a=1e3}=e,c={...t,event_id:t.event_id||n.event_id||W(),timestamp:t.timestamp||pt()},u=n.integrations||e.integrations.map(T=>T.name);Hf(c,e),zf(c,u),o&&o.emit("applyFrameMetadata",t),t.type===void 0&&$f(c,e.stackParser);let d=Gf(r,n.captureContext);n.mechanism&&It(c,n.mechanism);let l=o?o.getEventProcessors():[],f=lo().getScopeData();if(i){let T=i.getScopeData();Ss(f,T)}if(d){let T=d.getScopeData();Ss(f,T)}let m=[...n.attachments||[],...f.attachments];m.length&&(n.attachments=m),su(c,f);let p=[...l,...f.eventProcessors];return yo(p,c,n).then(T=>(T&&Wf(T),typeof s=="number"&&s>0?jf(T,s,a):T))}function Hf(e,t){let{environment:n,release:r,dist:o,maxValueLength:i=250}=t;"environment"in e||(e.environment="environment"in t?n:bn),e.release===void 0&&r!==void 0&&(e.release=r),e.dist===void 0&&o!==void 0&&(e.dist=o),e.message&&(e.message=dt(e.message,i));let s=e.exception&&e.exception.values&&e.exception.values[0];s&&s.value&&(s.value=dt(s.value,i));let a=e.request;a&&a.url&&(a.url=dt(a.url,i))}var au=new WeakMap;function $f(e,t){let n=R._sentryDebugIds;if(!n)return;let r,o=au.get(t);o?r=o:(r=new Map,au.set(t,r));let i=Object.entries(n).reduce((s,[a,c])=>{let u,d=r.get(a);d?u=d:(u=t(a),r.set(a,u));for(let l=u.length-1;l>=0;l--){let f=u[l];if(f.filename){s[f.filename]=c;break}}return s},{});try{e.exception.values.forEach(s=>{s.stacktrace.frames.forEach(a=>{a.filename&&(a.debug_id=i[a.filename])})})}catch{}}function Wf(e){let t={};try{e.exception.values.forEach(r=>{r.stacktrace.frames.forEach(o=>{o.debug_id&&(o.abs_path?t[o.abs_path]=o.debug_id:o.filename&&(t[o.filename]=o.debug_id),delete o.debug_id)})})}catch{}if(Object.keys(t).length===0)return;e.debug_meta=e.debug_meta||{},e.debug_meta.images=e.debug_meta.images||[];let n=e.debug_meta.images;Object.entries(t).forEach(([r,o])=>{n.push({type:"sourcemap",code_file:r,debug_id:o})})}function zf(e,t){t.length>0&&(e.sdk=e.sdk||{},e.sdk.integrations=[...e.sdk.integrations||[],...t])}function jf(e,t,n){if(!e)return null;let r={...e,...e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map(o=>({...o,...o.data&&{data:De(o.data,t,n)}}))},...e.user&&{user:De(e.user,t,n)},...e.contexts&&{contexts:De(e.contexts,t,n)},...e.extra&&{extra:De(e.extra,t,n)}};return e.contexts&&e.contexts.trace&&r.contexts&&(r.contexts.trace=e.contexts.trace,e.contexts.trace.data&&(r.contexts.trace.data=De(e.contexts.trace.data,t,n))),e.spans&&(r.spans=e.spans.map(o=>({...o,...o.data&&{data:De(o.data,t,n)}}))),r}function Gf(e,t){if(!t)return e;let n=e?e.clone():new Ue;return n.update(t),n}function cu(e){if(e)return qf(e)?{captureContext:e}:Vf(e)?{captureContext:e}:e}function qf(e){return e instanceof Ue||typeof e=="function"}var Yf=["user","level","extra","contexts","tags","fingerprint","requestSession","propagationContext"];function Vf(e){return Object.keys(e).some(t=>Yf.includes(t))}function Rn(e,t){return H().captureException(e,cu(t))}function ar(e,t){return H().captureEvent(e,t)}function wn(e,t){se().setContext(e,t)}function Eo(e){se().addEventProcessor(e)}function cr(e){let t=C(),n=se(),r=H(),{release:o,environment:i=bn}=t&&t.getOptions()||{},{userAgent:s}=R.navigator||{},a=Dc({release:o,environment:i,user:r.getUser()||n.getUser(),...s&&{userAgent:s},...e}),c=n.getSession();return c&&c.status==="ok"&&Ct(c,{status:"exited"}),To(),n.setSession(a),r.setSession(a),a}function To(){let e=se(),t=H(),n=t.getSession()||e.getSession();n&&Lc(n),lu(),e.setSession(),t.setSession()}function lu(){let e=se(),t=H(),n=C(),r=t.getSession()||e.getSession();r&&n&&n.captureSession(r)}function ur(e=!1){if(e){To();return}lu()}var Kf="7";function Jf(e){let t=e.protocol?`${e.protocol}:`:"",n=e.port?`:${e.port}`:"";return`${t}//${e.host}${n}${e.path?`/${e.path}`:""}/api/`}function Xf(e){return`${Jf(e)}${e.projectId}/envelope/`}function Qf(e,t){return Ui({sentry_key:e.publicKey,sentry_version:Kf,...t&&{sentry_client:`${t.name}/${t.version}`}})}function du(e,t,n){return t||`${Xf(e)}?${Qf(e,n)}`}var fu=[];function Zf(e){let t={};return e.forEach(n=>{let{name:r}=n,o=t[r];o&&!o.isDefaultInstance&&n.isDefaultInstance||(t[r]=n)}),Object.values(t)}function _s(e){let t=e.defaultIntegrations||[],n=e.integrations;t.forEach(s=>{s.isDefaultInstance=!0});let r;Array.isArray(n)?r=[...t,...n]:typeof n=="function"?r=Kn(n(t)):r=t;let o=Zf(r),i=o.findIndex(s=>s.name==="Debug");if(i>-1){let[s]=o.splice(i,1);o.push(s)}return o}function pu(e,t){let n={};return t.forEach(r=>{r&&Es(e,r,n)}),n}function ys(e,t){for(let n of t)n&&n.afterAllSetup&&n.afterAllSetup(e)}function Es(e,t,n){if(n[t.name]){w&&h.log(`Integration skipped because it was already installed: ${t.name}`);return}if(n[t.name]=t,fu.indexOf(t.name)===-1&&typeof t.setupOnce=="function"&&(t.setupOnce(),fu.push(t.name)),t.setup&&typeof t.setup=="function"&&t.setup(e),typeof t.preprocessEvent=="function"){let r=t.preprocessEvent.bind(t);e.on("preprocessEvent",(o,i)=>r(o,i,e))}if(typeof t.processEvent=="function"){let r=t.processEvent.bind(t),o=Object.assign((i,s)=>r(i,s,e),{id:t.name});e.addEventProcessor(o)}w&&h.log(`Integration installed: ${t.name}`)}var mu="Not capturing exception because it's already been captured.",lr=class{constructor(t){if(this._options=t,this._integrations={},this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],t.dsn?this._dsn=Vr(t.dsn):w&&h.warn("No DSN provided, client will not send events."),this._dsn){let n=du(this._dsn,t.tunnel,t._metadata?t._metadata.sdk:void 0);this._transport=t.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),...t.transportOptions,url:n})}}captureException(t,n,r){let o=W();if(io(t))return w&&h.log(mu),o;let i={event_id:o,...n};return this._process(this.eventFromException(t,i).then(s=>this._captureEvent(s,i,r))),i.event_id}captureMessage(t,n,r,o){let i={event_id:W(),...r},s=fn(t)?t:String(t),a=Jt(t)?this.eventFromMessage(s,n,i):this.eventFromException(t,i);return this._process(a.then(c=>this._captureEvent(c,i,o))),i.event_id}captureEvent(t,n,r){let o=W();if(n&&n.originalException&&io(n.originalException))return w&&h.log(mu),o;let i={event_id:o,...n},a=(t.sdkProcessingMetadata||{}).capturedSpanScope;return this._process(this._captureEvent(t,i,a||r)),i.event_id}captureSession(t){typeof t.release!="string"?w&&h.warn("Discarded session because of missing or non-string release"):(this.sendSession(t),Ct(t,{init:!1}))}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(t){let n=this._transport;return n?(this.emit("flush"),this._isClientDoneProcessing(t).then(r=>n.flush(t).then(o=>r&&o))):we(!0)}close(t){return this.flush(t).then(n=>(this.getOptions().enabled=!1,this.emit("close"),n))}getEventProcessors(){return this._eventProcessors}addEventProcessor(t){this._eventProcessors.push(t)}init(){(this._isEnabled()||this._options.integrations.some(({name:t})=>t.startsWith("Spotlight")))&&this._setupIntegrations()}getIntegrationByName(t){return this._integrations[t]}addIntegration(t){let n=this._integrations[t.name];Es(this,t,this._integrations),n||ys(this,[t])}sendEvent(t,n={}){this.emit("beforeSendEvent",t,n);let r=Qc(t,this._dsn,this._options._metadata,this._options.tunnel);for(let i of n.attachments||[])r=Zi(r,ns(i));let o=this.sendEnvelope(r);o&&o.then(i=>this.emit("afterSendEvent",t,i),null)}sendSession(t){let n=Xc(t,this._dsn,this._options._metadata,this._options.tunnel);this.sendEnvelope(n)}recordDroppedEvent(t,n,r){if(this._options.sendClientReports){let o=typeof r=="number"?r:1,i=`${t}:${n}`;w&&h.log(`Recording outcome: "${i}"${o>1?` (${o} times)`:""}`),this._outcomes[i]=(this._outcomes[i]||0)+o}}on(t,n){let r=this._hooks[t]=this._hooks[t]||[];return r.push(n),()=>{let o=r.indexOf(n);o>-1&&r.splice(o,1)}}emit(t,...n){let r=this._hooks[t];r&&r.forEach(o=>o(...n))}sendEnvelope(t){return this.emit("beforeEnvelope",t),this._isEnabled()&&this._transport?this._transport.send(t).then(null,n=>(w&&h.error("Error while sending envelope:",n),n)):(w&&h.error("Transport disabled"),we({}))}_setupIntegrations(){let{integrations:t}=this._options;this._integrations=pu(this,t),ys(this,t)}_updateSessionFromEvent(t,n){let r=!1,o=!1,i=n.exception&&n.exception.values;if(i){o=!0;for(let c of i){let u=c.mechanism;if(u&&u.handled===!1){r=!0;break}}}let s=t.status==="ok";(s&&t.errors===0||s&&r)&&(Ct(t,{...r&&{status:"crashed"},errors:t.errors||Number(o||r)}),this.captureSession(t))}_isClientDoneProcessing(t){return new tt(n=>{let r=0,o=1,i=setInterval(()=>{this._numProcessing==0?(clearInterval(i),n(!0)):(r+=o,t&&r>=t&&(clearInterval(i),n(!1)))},o)})}_isEnabled(){return this.getOptions().enabled!==!1&&this._transport!==void 0}_prepareEvent(t,n,r,o=se()){let i=this.getOptions(),s=Object.keys(this._integrations);return!n.integrations&&s.length>0&&(n.integrations=s),this.emit("preprocessEvent",t,n),t.type||o.setLastEventId(t.event_id||n.event_id),sr(i,t,n,r,this,o).then(a=>{if(a===null)return a;let c={...o.getPropagationContext(),...r?r.getPropagationContext():void 0};if(!(a.contexts&&a.contexts.trace)&&c){let{traceId:d,spanId:l,parentSpanId:f,dsc:m}=c;a.contexts={trace:K({trace_id:d,span_id:l,parent_span_id:f}),...a.contexts};let p=m||Ut(d,this);a.sdkProcessingMetadata={dynamicSamplingContext:p,...a.sdkProcessingMetadata}}return a})}_captureEvent(t,n={},r){return this._processEvent(t,n,r).then(o=>o.event_id,o=>{if(w){let i=o;i.logLevel==="log"?h.log(i.message):h.warn(i)}})}_processEvent(t,n,r){let o=this.getOptions(),{sampleRate:i}=o,s=gu(t),a=hu(t),c=t.type||"error",u=`before send for type \`${c}\``,d=typeof i>"u"?void 0:Bt(i);if(a&&typeof d=="number"&&Math.random()>d)return this.recordDroppedEvent("sample_rate","error",t),Mt(new Te(`Discarding event because it's not included in the random sample (sampling rate = ${i})`,"log"));let l=c==="replay_event"?"replay":c,m=(t.sdkProcessingMetadata||{}).capturedSpanIsolationScope;return this._prepareEvent(t,n,r,m).then(p=>{if(p===null)throw this.recordDroppedEvent("event_processor",l,t),new Te("An event processor returned `null`, will not send event.","log");if(n.data&&n.data.__sentry__===!0)return p;let T=tp(this,o,p,n);return ep(T,u)}).then(p=>{if(p===null){if(this.recordDroppedEvent("before_send",l,t),s){let x=1+(t.spans||[]).length;this.recordDroppedEvent("before_send","span",x)}throw new Te(`${u} returned \`null\`, will not send event.`,"log")}let g=r&&r.getSession();if(!s&&g&&this._updateSessionFromEvent(g,p),s){let y=p.sdkProcessingMetadata&&p.sdkProcessingMetadata.spanCountBeforeProcessing||0,x=p.spans?p.spans.length:0,U=y-x;U>0&&this.recordDroppedEvent("before_send","span",U)}let T=p.transaction_info;if(s&&T&&p.transaction!==t.transaction){let y="custom";p.transaction_info={...T,source:y}}return this.sendEvent(p,n),p}).then(null,p=>{throw p instanceof Te?p:(this.captureException(p,{data:{__sentry__:!0},originalException:p}),new Te(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.
Reason: ${p}`))})}_process(t){this._numProcessing++,t.then(n=>(this._numProcessing--,n),n=>(this._numProcessing--,n))}_clearOutcomes(){let t=this._outcomes;return this._outcomes={},Object.entries(t).map(([n,r])=>{let[o,i]=n.split(":");return{reason:o,category:i,quantity:r}})}_flushOutcomes(){w&&h.log("Flushing outcomes...");let t=this._clearOutcomes();if(t.length===0){w&&h.log("No outcomes to send");return}if(!this._dsn){w&&h.log("No dsn provided, will not send outcomes");return}w&&h.log("Sending outcomes:",t);let n=rs(t,this._options.tunnel&&Ze(this._dsn));this.sendEnvelope(n)}};function ep(e,t){let n=`${t} must return \`null\` or a valid event.`;if(lt(e))return e.then(r=>{if(!Qe(r)&&r!==null)throw new Te(n);return r},r=>{throw new Te(`${t} rejected with ${r}`)});if(!Qe(e)&&e!==null)throw new Te(n);return e}function tp(e,t,n,r){let{beforeSend:o,beforeSendTransaction:i,beforeSendSpan:s}=t;if(hu(n)&&o)return o(n,r);if(gu(n)){if(n.spans&&s){let a=[];for(let c of n.spans){let u=s(c);u?a.push(u):e.recordDroppedEvent("before_send","span")}n.spans=a}if(i){if(n.spans){let a=n.spans.length;n.sdkProcessingMetadata={...n.sdkProcessingMetadata,spanCountBeforeProcessing:a}}return i(n,r)}}return n}function hu(e){return e.type===void 0}function gu(e){return e.type==="transaction"}function Ts(e,t){t.debug===!0&&(w?h.enable():Ge(()=>{console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.")})),H().update(t.initialScope);let r=new e(t);return Is(r),r.init(),r}function Is(e){H().setClient(e)}var np=64;function Io(e,t,n=Ji(e.bufferSize||np)){let r={},o=s=>n.drain(s);function i(s){let a=[];if(ao(s,(l,f)=>{let m=co(f);if(er(r,m)){let p=Su(l,f);e.recordDroppedEvent("ratelimit_backoff",m,p)}else a.push(l)}),a.length===0)return we({});let c=Fe(s[0],a),u=l=>{ao(c,(f,m)=>{let p=Su(f,m);e.recordDroppedEvent(l,co(m),p)})},d=()=>t({body:es(c)}).then(l=>(l.statusCode!==void 0&&(l.statusCode<200||l.statusCode>=300)&&w&&h.warn(`Sentry responded with status code ${l.statusCode} to sent event.`),r=tr(r,l),l),l=>{throw u("network_error"),l});return n.add(d).then(l=>l,l=>{if(l instanceof Te)return w&&h.error("Skipped sending event because buffer is full."),u("queue_overflow"),we({});throw l})}return{send:i,flush:o}}function Su(e,t){if(!(t!=="event"&&t!=="transaction"))return Array.isArray(e)?e[1]:void 0}function bs(e,t){let n=t&&t.getDsn(),r=t&&t.getOptions().tunnel;return op(e,n)||rp(e,r)}function rp(e,t){return t?_u(e)===_u(t):!1}function op(e,t){return t?e.includes(t.host):!1}function _u(e){return e[e.length-1]==="/"?e.slice(0,-1):e}function dr(e,t,n=[t],r="npm"){let o=e._metadata||{};o.sdk||(o.sdk={name:`sentry.javascript.${t}`,packages:n.map(i=>({name:`${r}:@sentry/${i}`,version:ze})),version:ze}),e._metadata=o}var ip=100;function Ve(e,t){let n=C(),r=se();if(!n)return;let{beforeBreadcrumb:o=null,maxBreadcrumbs:i=ip}=n.getOptions();if(i<=0)return;let a={timestamp:pt(),...e},c=o?Ge(()=>o(a,t)):a;c!==null&&(n.emit&&n.emit("beforeAddBreadcrumb",c,t),r.addBreadcrumb(c,i))}var yu,sp="FunctionToString",Eu=new WeakMap,ap=()=>({name:sp,setupOnce(){yu=Function.prototype.toString;try{Function.prototype.toString=function(...e){let t=Qt(this),n=Eu.has(C())&&t!==void 0?t:this;return yu.apply(n,e)}}catch{}},setup(e){Eu.set(e,!0)}}),bo=ap;var cp=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/,"undefined is not an object (evaluating 'a.L')",`can't redefine non-configurable property "solana"`,"vv().getRestrictions is not a function. (In 'vv().getRestrictions(1,a)', 'vv().getRestrictions' is undefined)","Can't find variable: _AutofillCallbackHandler"],up="InboundFilters",lp=(e={})=>({name:up,processEvent(t,n,r){let o=r.getOptions(),i=dp(e,o);return fp(t,i)?null:t}}),Co=lp;function dp(e={},t={}){return{allowUrls:[...e.allowUrls||[],...t.allowUrls||[]],denyUrls:[...e.denyUrls||[],...t.denyUrls||[]],ignoreErrors:[...e.ignoreErrors||[],...t.ignoreErrors||[],...e.disableErrorDefaults?[]:cp],ignoreTransactions:[...e.ignoreTransactions||[],...t.ignoreTransactions||[]],ignoreInternal:e.ignoreInternal!==void 0?e.ignoreInternal:!0}}function fp(e,t){return t.ignoreInternal&&_p(e)?(w&&h.warn(`Event dropped due to being internal Sentry Error.
Event: ${et(e)}`),!0):pp(e,t.ignoreErrors)?(w&&h.warn(`Event dropped due to being matched by \`ignoreErrors\` option.
Event: ${et(e)}`),!0):Ep(e)?(w&&h.warn(`Event dropped due to not having an error message, error type or stacktrace.
Event: ${et(e)}`),!0):mp(e,t.ignoreTransactions)?(w&&h.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.
Event: ${et(e)}`),!0):hp(e,t.denyUrls)?(w&&h.warn(`Event dropped due to being matched by \`denyUrls\` option.
Event: ${et(e)}.
Url: ${vo(e)}`),!0):gp(e,t.allowUrls)?!1:(w&&h.warn(`Event dropped due to not being matched by \`allowUrls\` option.
Event: ${et(e)}.
Url: ${vo(e)}`),!0)}function pp(e,t){return e.type||!t||!t.length?!1:Sp(e).some(n=>We(n,t))}function mp(e,t){if(e.type!=="transaction"||!t||!t.length)return!1;let n=e.transaction;return n?We(n,t):!1}function hp(e,t){if(!t||!t.length)return!1;let n=vo(e);return n?We(n,t):!1}function gp(e,t){if(!t||!t.length)return!0;let n=vo(e);return n?We(n,t):!0}function Sp(e){let t=[];e.message&&t.push(e.message);let n;try{n=e.exception.values[e.exception.values.length-1]}catch{}return n&&n.value&&(t.push(n.value),n.type&&t.push(`${n.type}: ${n.value}`)),t}function _p(e){try{return e.exception.values[0].type==="SentryError"}catch{}return!1}function yp(e=[]){for(let t=e.length-1;t>=0;t--){let n=e[t];if(n&&n.filename!=="<anonymous>"&&n.filename!=="[native code]")return n.filename||null}return null}function vo(e){try{let t;try{t=e.exception.values[0].stacktrace.frames}catch{}return t?yp(t):null}catch{return w&&h.error(`Cannot extract url for event ${et(e)}`),null}}function Ep(e){return e.type||!e.exception||!e.exception.values||e.exception.values.length===0?!1:!e.message&&!e.exception.values.some(t=>t.stacktrace||t.type&&t.type!=="Error"||t.value)}var Tp="Dedupe",Ip=()=>{let e;return{name:Tp,processEvent(t){if(t.type)return t;try{if(bp(t,e))return w&&h.warn("Event dropped due to being a duplicate of previously captured event."),null}catch{}return e=t}}},Ro=Ip;function bp(e,t){return t?!!(vp(e,t)||Cp(e,t)):!1}function vp(e,t){let n=e.message,r=t.message;return!(!n&&!r||n&&!r||!n&&r||n!==r||!bu(e,t)||!Iu(e,t))}function Cp(e,t){let n=Tu(t),r=Tu(e);return!(!n||!r||n.type!==r.type||n.value!==r.value||!bu(e,t)||!Iu(e,t))}function Iu(e,t){let n=Zr(e),r=Zr(t);if(!n&&!r)return!0;if(n&&!r||!n&&r||(n=n,r=r,r.length!==n.length))return!1;for(let o=0;o<r.length;o++){let i=r[o],s=n[o];if(i.filename!==s.filename||i.lineno!==s.lineno||i.colno!==s.colno||i.function!==s.function)return!1}return!0}function bu(e,t){let n=e.fingerprint,r=t.fingerprint;if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;n=n,r=r;try{return n.join("")===r.join("")}catch{return!1}}function Tu(e){return e.exception&&e.exception.values&&e.exception.values[0]}function vs(e,t,n,r,o="auto.http.browser"){if(!e.fetchData)return;let i=Ce()&&t(e.fetchData.url);if(e.endTimestamp&&i){let p=e.fetchData.__span;if(!p)return;let g=r[p];g&&(wp(g,e),delete r[p]);return}let s=H(),a=C(),{method:c,url:u}=e.fetchData,d=Rp(u),l=d?qe(d).host:void 0,f=!!X(),m=i&&f?ke({name:`${c} ${u}`,attributes:{url:u,type:"fetch","http.method":c,"http.url":d,"server.address":l,[Z]:o,[xe]:"http.client"}}):new Be;if(e.fetchData.__span=m.spanContext().spanId,r[m.spanContext().spanId]=m,n(e.fetchData.url)&&a){let p=e.args[0];e.args[1]=e.args[1]||{};let g=e.args[1];g.headers=vu(p,a,s,g,Ce()&&f?m:void 0)}return m}function vu(e,t,n,r,o){let i=se(),{traceId:s,spanId:a,sampled:c,dsc:u}={...i.getPropagationContext(),...n.getPropagationContext()},d=o?In(o):Zt(s,a,c),l=gn(u||(o?ge(o):Ut(s,t))),f=r.headers||(typeof Request<"u"&&Pe(e,Request)?e.headers:void 0);if(f)if(typeof Headers<"u"&&Pe(f,Headers)){let m=new Headers(f);if(m.set("sentry-trace",d),l){let p=m.get(vt);if(p){let g=wo(p);m.set(vt,g?`${g},${l}`:l)}else m.set(vt,l)}return m}else if(Array.isArray(f)){let m=[...f.filter(p=>!(Array.isArray(p)&&p[0]==="sentry-trace")).map(p=>{if(Array.isArray(p)&&p[0]===vt&&typeof p[1]=="string"){let[g,T,...y]=p;return[g,wo(T),...y]}else return p}),["sentry-trace",d]];return l&&m.push([vt,l]),m}else{let m="baggage"in f?f.baggage:void 0,p=[];return Array.isArray(m)?p=m.map(g=>typeof g=="string"?wo(g):g).filter(g=>g===""):m&&p.push(wo(m)),l&&p.push(l),{...f,"sentry-trace":d,baggage:p.length>0?p.join(","):void 0}}else return{"sentry-trace":d,baggage:l}}function Rp(e){try{return new URL(e).href}catch{return}}function wp(e,t){if(t.response){Tn(e,t.response.status);let n=t.response&&t.response.headers&&t.response.headers.get("content-length");if(n){let r=parseInt(n);r>0&&e.setAttribute("http.response_content_length",r)}}else t.error&&e.setStatus({code:2,message:"internal_error"});e.end()}function wo(e){return e.split(",").filter(t=>!t.split("=")[0].startsWith(Xn)).join(",")}var k=R,Cs=0;function Rs(){return Cs>0}function jp(){Cs++,setTimeout(()=>{Cs--})}function an(e,t={},n){if(typeof e!="function")return e;try{let o=e.__sentry_wrapped__;if(o)return typeof o=="function"?o:e;if(Qt(e))return e}catch{return e}let r=function(){let o=Array.prototype.slice.call(arguments);try{let i=o.map(s=>an(s,t));return e.apply(this,i)}catch(i){throw jp(),nn(s=>{s.addEventProcessor(a=>(t.mechanism&&(hn(a,void 0,void 0),It(a,t.mechanism)),a.extra={...a.extra,arguments:o},a)),Rn(i)}),i}};try{for(let o in e)Object.prototype.hasOwnProperty.call(e,o)&&(r[o]=e[o])}catch{}Kr(r,e),ue(e,"__sentry_wrapped__",r);try{Object.getOwnPropertyDescriptor(r,"name").configurable&&Object.defineProperty(r,"name",{get(){return e.name}})}catch{}return r}var Se=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;function xo(e,t){let n=ks(e,t),r={type:Kp(t),value:Jp(t)};return n.length&&(r.stacktrace={frames:n}),r.type===void 0&&r.value===""&&(r.value="Unrecoverable error caught"),r}function Gp(e,t,n,r){let o=C(),i=o&&o.getOptions().normalizeDepth,s=Zp(t),a={__serialized__:so(t,i)};if(s)return{exception:{values:[xo(e,s)]},extra:a};let c={exception:{values:[{type:Xt(t)?t.constructor.name:r?"UnhandledRejection":"Error",value:Xp(t,{isUnhandledRejection:r})}]},extra:a};if(n){let u=ks(e,n);u.length&&(c.exception.values[0].stacktrace={frames:u})}return c}function ws(e,t){return{exception:{values:[xo(e,t)]}}}function ks(e,t){let n=t.stacktrace||t.stack||"",r=Yp(t),o=Vp(t);try{return e(n,r,o)}catch{}return[]}var qp=/Minified React error #\d+;/i;function Yp(e){return e&&qp.test(e.message)?1:0}function Vp(e){return typeof e.framesToPop=="number"?e.framesToPop:0}function wu(e){return typeof WebAssembly<"u"&&typeof WebAssembly.Exception<"u"?e instanceof WebAssembly.Exception:!1}function Kp(e){let t=e&&e.name;return!t&&wu(e)?e.message&&Array.isArray(e.message)&&e.message.length==2?e.message[0]:"WebAssembly.Exception":t}function Jp(e){let t=e&&e.message;return t?t.error&&typeof t.error.message=="string"?t.error.message:wu(e)&&Array.isArray(e.message)&&e.message.length==2?e.message[1]:t:"No error message"}function xu(e,t,n,r){let o=n&&n.syntheticException||void 0,i=ko(e,t,o,r);return It(i),i.level="error",n&&n.event_id&&(i.event_id=n.event_id),we(i)}function ku(e,t,n="info",r,o){let i=r&&r.syntheticException||void 0,s=xs(e,t,i,o);return s.level=n,r&&r.event_id&&(s.event_id=r.event_id),we(s)}function ko(e,t,n,r,o){let i;if(jr(t)&&t.error)return ws(e,t.error);if(Gr(t)||Ai(t)){let s=t;if("stack"in t)i=ws(e,t);else{let a=s.name||(Gr(s)?"DOMError":"DOMException"),c=s.message?`${a}: ${s.message}`:a;i=xs(e,c,n,r),hn(i,c)}return"code"in s&&(i.tags={...i.tags,"DOMException.code":`${s.code}`}),i}return Kt(t)?ws(e,t):Qe(t)||Xt(t)?(i=Gp(e,t,n,o),It(i,{synthetic:!0}),i):(i=xs(e,t,n,r),hn(i,`${t}`,void 0),It(i,{synthetic:!0}),i)}function xs(e,t,n,r){let o={};if(r&&n){let i=ks(e,n);i.length&&(o.exception={values:[{value:t,stacktrace:{frames:i}}]})}if(fn(t)){let{__sentry_template_string__:i,__sentry_template_values__:s}=t;return o.logentry={message:i,params:s},o}return o.message=t,o}function Xp(e,{isUnhandledRejection:t}){let n=Bi(e),r=t?"promise rejection":"exception";return jr(e)?`Event \`ErrorEvent\` captured as ${r} with message \`${e.message}\``:Xt(e)?`Event \`${Qp(e)}\` (type=${e.type}) captured as ${r}`:`Object captured as ${r} with keys: ${n}`}function Qp(e){try{let t=Object.getPrototypeOf(e);return t?t.constructor.name:void 0}catch{}}function Zp(e){for(let t in e)if(Object.prototype.hasOwnProperty.call(e,t)){let n=e[t];if(n instanceof Error)return n}}function Au(e,{metadata:t,tunnel:n,dsn:r}){let o={event_id:e.event_id,sent_at:new Date().toISOString(),...t&&t.sdk&&{sdk:{name:t.sdk.name,version:t.sdk.version}},...!!n&&!!r&&{dsn:Ze(r)}},i=em(e);return Fe(o,[i])}function em(e){return[{type:"user_report"},e]}var Ao=class extends lr{constructor(t){let n={parentSpanIsAlwaysRootSpan:!0,...t},r=k.SENTRY_SDK_SOURCE||Vi();dr(n,"browser",["browser"],r),super(n),n.sendClientReports&&k.document&&k.document.addEventListener("visibilitychange",()=>{k.document.visibilityState==="hidden"&&this._flushOutcomes()})}eventFromException(t,n){return xu(this._options.stackParser,t,n,this._options.attachStacktrace)}eventFromMessage(t,n="info",r){return ku(this._options.stackParser,t,n,r,this._options.attachStacktrace)}captureUserFeedback(t){if(!this._isEnabled()){Se&&h.warn("SDK not enabled, will not capture user feedback.");return}let n=Au(t,{metadata:this.getSdkMetadata(),dsn:this.getDsn(),tunnel:this.getOptions().tunnel});this.sendEnvelope(n)}_prepareEvent(t,n,r){return t.platform=t.platform||"javascript",super._prepareEvent(t,n,r)}};var _e=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;var tm=(e,t)=>e>t[1]?"poor":e>t[0]?"needs-improvement":"good",Ke=(e,t,n,r)=>{let o,i;return s=>{t.value>=0&&(s||r)&&(i=t.value-(o||0),(i||o===void 0)&&(o=t.value,t.delta=i,t.rating=tm(t.value,n),e(t)))}};var v=R;var Nu=()=>`v3-${Date.now()}-${Math.floor(Math.random()*8999999999999)+1e12}`;var Rt=()=>v.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0];var mt=()=>{let e=Rt();return e&&e.activationStart||0};var Je=(e,t)=>{let n=Rt(),r="navigate";return n&&(v.document&&v.document.prerendering||mt()>0?r="prerender":v.document&&v.document.wasDiscarded?r="restore":n.type&&(r=n.type.replace(/_/g,"-"))),{name:e,value:typeof t>"u"?-1:t,rating:"good",delta:0,entries:[],id:Nu(),navigationType:r}};var Le=(e,t,n)=>{try{if(PerformanceObserver.supportedEntryTypes.includes(e)){let r=new PerformanceObserver(o=>{Promise.resolve().then(()=>{t(o.getEntries())})});return r.observe(Object.assign({type:e,buffered:!0},n||{})),r}}catch{}};var ht=e=>{let t=n=>{(n.type==="pagehide"||v.document&&v.document.visibilityState==="hidden")&&e(n)};v.document&&(addEventListener("visibilitychange",t,!0),addEventListener("pagehide",t,!0))};var xn=e=>{let t=!1;return n=>{t||(e(n),t=!0)}};var fr=-1,nm=()=>{fr=v.document.visibilityState==="hidden"&&!v.document.prerendering?0:1/0},No=e=>{v.document.visibilityState==="hidden"&&fr>-1&&(fr=e.type==="visibilitychange"?e.timeStamp:0,removeEventListener("visibilitychange",No,!0),removeEventListener("prerenderingchange",No,!0))},rm=()=>{addEventListener("visibilitychange",No,!0),addEventListener("prerenderingchange",No,!0)},Ht=()=>(v.document&&fr<0&&(nm(),rm()),{get firstHiddenTime(){return fr}});var gt=e=>{v.document&&v.document.prerendering?addEventListener("prerenderingchange",()=>e(),!0):e()};var om=[1800,3e3],Mu=(e,t={})=>{gt(()=>{let n=Ht(),r=Je("FCP"),o,s=Le("paint",a=>{a.forEach(c=>{c.name==="first-contentful-paint"&&(s.disconnect(),c.startTime<n.firstHiddenTime&&(r.value=Math.max(c.startTime-mt(),0),r.entries.push(c),o(!0)))})});s&&(o=Ke(e,r,om,t.reportAllChanges))})};var im=[.1,.25],Ou=(e,t={})=>{Mu(xn(()=>{let n=Je("CLS",0),r,o=0,i=[],s=c=>{c.forEach(u=>{if(!u.hadRecentInput){let d=i[0],l=i[i.length-1];o&&d&&l&&u.startTime-l.startTime<1e3&&u.startTime-d.startTime<5e3?(o+=u.value,i.push(u)):(o=u.value,i=[u])}}),o>n.value&&(n.value=o,n.entries=i,r())},a=Le("layout-shift",s);a&&(r=Ke(e,n,im,t.reportAllChanges),ht(()=>{s(a.takeRecords()),r(!0)}),setTimeout(r,0))}))};var sm=[100,300],Du=(e,t={})=>{gt(()=>{let n=Ht(),r=Je("FID"),o,i=c=>{c.startTime<n.firstHiddenTime&&(r.value=c.processingStart-c.startTime,r.entries.push(c),o(!0))},s=c=>{c.forEach(i)},a=Le("first-input",s);o=Ke(e,r,sm,t.reportAllChanges),a&&ht(xn(()=>{s(a.takeRecords()),a.disconnect()}))})};var Lu=0,As=1/0,Mo=0,am=e=>{e.forEach(t=>{t.interactionId&&(As=Math.min(As,t.interactionId),Mo=Math.max(Mo,t.interactionId),Lu=Mo?(Mo-As)/7+1:0)})},Ns,Pu=()=>Ns?Lu:performance.interactionCount||0,Fu=()=>{"interactionCount"in performance||Ns||(Ns=Le("event",am,{type:"event",buffered:!0,durationThreshold:0}))};var cm=[200,500],um=0,Hu=()=>Pu()-um,Uu=10,wt=[],Ms={},Bu=e=>{let t=wt[wt.length-1],n=Ms[e.interactionId];if(n||wt.length<Uu||t&&e.duration>t.latency){if(n)n.entries.push(e),n.latency=Math.max(n.latency,e.duration);else{let r={id:e.interactionId,latency:e.duration,entries:[e]};Ms[r.id]=r,wt.push(r)}wt.sort((r,o)=>o.latency-r.latency),wt.splice(Uu).forEach(r=>{delete Ms[r.id]})}},lm=()=>{let e=Math.min(wt.length-1,Math.floor(Hu()/50));return wt[e]},$u=(e,t={})=>{gt(()=>{Fu();let n=Je("INP"),r,o=s=>{s.forEach(c=>{c.interactionId&&Bu(c),c.entryType==="first-input"&&!wt.some(d=>d.entries.some(l=>c.duration===l.duration&&c.startTime===l.startTime))&&Bu(c)});let a=lm();a&&a.latency!==n.value&&(n.value=a.latency,n.entries=a.entries,r())},i=Le("event",o,{durationThreshold:t.durationThreshold!=null?t.durationThreshold:40});r=Ke(e,n,cm,t.reportAllChanges),i&&("PerformanceEventTiming"in v&&"interactionId"in PerformanceEventTiming.prototype&&i.observe({type:"first-input",buffered:!0}),ht(()=>{o(i.takeRecords()),n.value<0&&Hu()>0&&(n.value=0,n.entries=[]),r(!0)}))})};var dm=[2500,4e3],Wu={},zu=(e,t={})=>{gt(()=>{let n=Ht(),r=Je("LCP"),o,i=a=>{let c=a[a.length-1];c&&c.startTime<n.firstHiddenTime&&(r.value=Math.max(c.startTime-mt(),0),r.entries=[c],o())},s=Le("largest-contentful-paint",i);if(s){o=Ke(e,r,dm,t.reportAllChanges);let a=xn(()=>{Wu[r.id]||(i(s.takeRecords()),s.disconnect(),Wu[r.id]=!0,o(!0))});["keydown","click"].forEach(c=>{v.document&&addEventListener(c,()=>setTimeout(a,0),!0)}),ht(a)}})};var fm=[800,1800],Os=e=>{v.document&&v.document.prerendering?gt(()=>Os(e)):v.document&&v.document.readyState!=="complete"?addEventListener("load",()=>Os(e),!0):setTimeout(e,0)},ju=(e,t={})=>{let n=Je("TTFB"),r=Ke(e,n,fm,t.reportAllChanges);Os(()=>{let o=Rt();if(o){let i=o.responseStart;if(i<=0||i>performance.now())return;n.value=Math.max(i-mt(),0),n.entries=[o],r(!0)}})};var pr={},Oo={},Gu,qu,Yu,Vu,Ku;function cn(e,t=!1){return Sr("cls",e,pm,Gu,t)}function mr(e,t=!1){return Sr("lcp",e,hm,Yu,t)}function hr(e){return Sr("fid",e,mm,qu)}function Ds(e){return Sr("ttfb",e,gm,Vu)}function gr(e){return Sr("inp",e,Sm,Ku)}function ot(e,t){return Ju(e,t),Oo[e]||(_m(e),Oo[e]=!0),Xu(e,t)}function kn(e,t){let n=pr[e];if(!(!n||!n.length))for(let r of n)try{r(t)}catch(o){_e&&h.error(`Error while triggering instrumentation handler.
Type: ${e}
Name: ${Oe(r)}
Error:`,o)}}function pm(){return Ou(e=>{kn("cls",{metric:e}),Gu=e},{reportAllChanges:!0})}function mm(){return Du(e=>{kn("fid",{metric:e}),qu=e})}function hm(){return zu(e=>{kn("lcp",{metric:e}),Yu=e},{reportAllChanges:!0})}function gm(){return ju(e=>{kn("ttfb",{metric:e}),Vu=e})}function Sm(){return $u(e=>{kn("inp",{metric:e}),Ku=e})}function Sr(e,t,n,r,o=!1){Ju(e,t);let i;return Oo[e]||(i=n(),Oo[e]=!0),r&&t({metric:r}),Xu(e,t,o?i:void 0)}function _m(e){let t={};e==="event"&&(t.durationThreshold=0),Le(e,n=>{kn(e,{entries:n})},t)}function Ju(e,t){pr[e]=pr[e]||[],pr[e].push(t)}function Xu(e,t,n){return()=>{n&&n();let r=pr[e];if(!r)return;let o=r.indexOf(t);o!==-1&&r.splice(o,1)}}function Qu(e){return"duration"in e}function Do(e){return typeof e=="number"&&isFinite(e)}function un(e,t,n,{...r}){let o=A(e).start_timestamp;return o&&o>t&&typeof e.updateStartTime=="function"&&e.updateStartTime(t),or(e,()=>{let i=ke({startTime:t,...r});return i&&i.end(n),i})}function Lo(e){let t=C();if(!t)return;let{name:n,transaction:r,attributes:o,startTime:i}=e,{release:s,environment:a}=t.getOptions(),c=t.getIntegrationByName("Replay"),u=c&&c.getReplayId(),d=H(),l=d.getUser(),f=l!==void 0?l.email||l.id||l.ip_address:void 0,m;try{m=d.getScopeData().contexts.profile.profile_id}catch{}let p={release:s,environment:a,user:f||void 0,profile_id:m||void 0,replay_id:u||void 0,transaction:r,"user_agent.original":v.navigator&&v.navigator.userAgent,...o};return ke({name:n,attributes:p,startTime:i,experimental:{standalone:!0}})}function _r(){return v&&v.addEventListener&&v.performance}function ne(e){return e/1e3}function Zu(){let e=0,t,n;if(!Em())return;let r=!1;function o(){r||(r=!0,n&&ym(e,t,n),i())}let i=cn(({metric:s})=>{let a=s.entries[s.entries.length-1];a&&(e=s.value,t=a)},!0);ht(()=>{o()}),setTimeout(()=>{let s=C(),a=he([s,"optionalAccess",l=>l.on,"call",l=>l("startNavigationSpan",()=>{o(),a&&a()})]),c=X(),u=c&&J(c),d=u&&A(u);d&&d.op==="pageload"&&(n=u.spanContext().spanId)},0)}function ym(e,t,n){_e&&h.log(`Sending CLS span (${e})`);let r=ne((ie||0)+(he([t,"optionalAccess",c=>c.startTime])||0)),o=H().getScopeData().transactionName,i=t?Ee(he([t,"access",c=>c.sources,"access",c=>c[0],"optionalAccess",c=>c.node])):"Layout shift",s=K({[Z]:"auto.http.browser.cls",[xe]:"ui.webvital.cls",[rn]:he([t,"optionalAccess",c=>c.duration])||0,"sentry.pageload.span_id":n}),a=Lo({name:i,transaction:o,attributes:s,startTime:r});he([a,"optionalAccess",c=>c.addEvent,"call",c=>c("cls",{[Lt]:"",[Pt]:e})]),he([a,"optionalAccess",c=>c.end,"call",c=>c(r)])}function Em(){try{return he([PerformanceObserver,"access",e=>e.supportedEntryTypes,"optionalAccess",e=>e.includes,"call",e=>e("layout-shift")])}catch{return!1}}var Tm=2147483647,el=0,ye={},St,yr;function Ps({recordClsStandaloneSpans:e}){let t=_r();if(t&&ie){t.mark&&v.performance.mark("sentry-tracing-init");let n=vm(),r=bm(),o=Cm(),i=e?Zu():Im();return()=>{n(),r(),o(),i&&i()}}return()=>{}}function Fs(){ot("longtask",({entries:e})=>{if(X())for(let t of e){let n=ne(ie+t.startTime),r=ne(t.duration),o=ke({name:"Main UI thread blocked",op:"ui.long-task",startTime:n,attributes:{[Z]:"auto.ui.browser.metrics"}});o&&o.end(n+r)}})}function Us(){new PerformanceObserver(t=>{if(X())for(let n of t.getEntries()){if(!n.scripts[0])continue;let r=ne(ie+n.startTime),o=ne(n.duration),i={[Z]:"auto.ui.browser.metrics"},s=n.scripts[0],{invoker:a,invokerType:c,sourceURL:u,sourceFunctionName:d,sourceCharPosition:l}=s;i["browser.script.invoker"]=a,i["browser.script.invoker_type"]=c,u&&(i["code.filepath"]=u),d&&(i["code.function"]=d),l!==-1&&(i["browser.script.source_char_position"]=l);let f=ke({name:"Main UI thread blocked",op:"ui.long-animation-frame",startTime:r,attributes:i});f&&f.end(r+o)}}).observe({type:"long-animation-frame",buffered:!0})}function Bs(){ot("event",({entries:e})=>{if(X()){for(let t of e)if(t.name==="click"){let n=ne(ie+t.startTime),r=ne(t.duration),o={name:Ee(t.target),op:`ui.interaction.${t.name}`,startTime:n,attributes:{[Z]:"auto.ui.browser.metrics"}},i=Wn(t.target);i&&(o.attributes["ui.component_name"]=i);let s=ke(o);s&&s.end(n+r)}}})}function Im(){return cn(({metric:e})=>{let t=e.entries[e.entries.length-1];t&&(_e&&h.log(`[Measurements] Adding CLS ${e.value}`),ye.cls={value:e.value,unit:""},yr=t)},!0)}function bm(){return mr(({metric:e})=>{let t=e.entries[e.entries.length-1];t&&(_e&&h.log("[Measurements] Adding LCP"),ye.lcp={value:e.value,unit:"millisecond"},St=t)},!0)}function vm(){return hr(({metric:e})=>{let t=e.entries[e.entries.length-1];if(!t)return;let n=ne(ie),r=ne(t.startTime);_e&&h.log("[Measurements] Adding FID"),ye.fid={value:e.value,unit:"millisecond"},ye["mark.fid"]={value:n+r,unit:"second"}})}function Cm(){return Ds(({metric:e})=>{e.entries[e.entries.length-1]&&(_e&&h.log("[Measurements] Adding TTFB"),ye.ttfb={value:e.value,unit:"millisecond"})})}function Hs(e,t){let n=_r();if(!n||!v.performance.getEntries||!ie)return;_e&&h.log("[Tracing] Adding & adjusting spans using Performance API");let r=ne(ie),o=n.getEntries(),{op:i,start_timestamp:s}=A(e);if(o.slice(el).forEach(a=>{let c=ne(a.startTime),u=ne(Math.max(0,a.duration));if(!(i==="navigation"&&s&&r+c<s))switch(a.entryType){case"navigation":{wm(e,a,r);break}case"mark":case"paint":case"measure":{Rm(e,a,c,u,r);let d=Ht(),l=a.startTime<d.firstHiddenTime;a.name==="first-paint"&&l&&(_e&&h.log("[Measurements] Adding FP"),ye.fp={value:a.startTime,unit:"millisecond"}),a.name==="first-contentful-paint"&&l&&(_e&&h.log("[Measurements] Adding FCP"),ye.fcp={value:a.startTime,unit:"millisecond"});break}case"resource":{km(e,a,a.name,c,u,r);break}}}),el=Math.max(o.length-1,0),Am(e),i==="pageload"){Mm(ye);let a=ye["mark.fid"];a&&ye.fid&&(un(e,a.value,a.value+ne(ye.fid.value),{name:"first input delay",op:"ui.action",attributes:{[Z]:"auto.ui.browser.metrics"}}),delete ye["mark.fid"]),(!("fcp"in ye)||!t.recordClsOnPageloadSpan)&&delete ye.cls,Object.entries(ye).forEach(([c,u])=>{go(c,u.value,u.unit)}),e.setAttribute("performance.timeOrigin",r),e.setAttribute("performance.activationStart",mt()),Nm(e)}St=void 0,yr=void 0,ye={}}function Rm(e,t,n,r,o){let i=Rt(),s=ne(i?i.requestStart:0),a=o+Math.max(n,s),c=o+n,u=c+r,d={[Z]:"auto.resource.browser.metrics"};return a!==c&&(d["sentry.browser.measure_happened_before_request"]=!0,d["sentry.browser.measure_start_time"]=a),un(e,a,u,{name:t.name,op:t.entryType,attributes:d}),a}function wm(e,t,n){["unloadEvent","redirect","domContentLoadedEvent","loadEvent","connect"].forEach(r=>{Po(e,t,r,n)}),Po(e,t,"secureConnection",n,"TLS/SSL","connectEnd"),Po(e,t,"fetch",n,"cache","domainLookupStart"),Po(e,t,"domainLookup",n,"DNS"),xm(e,t,n)}function Po(e,t,n,r,o,i){let s=i?t[i]:t[`${n}End`],a=t[`${n}Start`];!a||!s||un(e,r+ne(a),r+ne(s),{op:`browser.${o||n}`,name:t.name,attributes:{[Z]:"auto.ui.browser.metrics"}})}function xm(e,t,n){let r=n+ne(t.requestStart),o=n+ne(t.responseEnd),i=n+ne(t.responseStart);t.responseEnd&&(un(e,r,o,{op:"browser.request",name:t.name,attributes:{[Z]:"auto.ui.browser.metrics"}}),un(e,i,o,{op:"browser.response",name:t.name,attributes:{[Z]:"auto.ui.browser.metrics"}}))}function km(e,t,n,r,o,i){if(t.initiatorType==="xmlhttprequest"||t.initiatorType==="fetch")return;let s=qe(n),a={[Z]:"auto.resource.browser.metrics"};Ls(a,t,"transferSize","http.response_transfer_size"),Ls(a,t,"encodedBodySize","http.response_content_length"),Ls(a,t,"decodedBodySize","http.decoded_response_content_length"),"renderBlockingStatus"in t&&(a["resource.render_blocking_status"]=t.renderBlockingStatus),s.protocol&&(a["url.scheme"]=s.protocol.split(":").pop()),s.host&&(a["server.address"]=s.host),a["url.same_origin"]=n.includes(v.location.origin);let c=i+r,u=c+o;un(e,c,u,{name:n.replace(v.location.origin,""),op:t.initiatorType?`resource.${t.initiatorType}`:"resource.other",attributes:a})}function Am(e){let t=v.navigator;if(!t)return;let n=t.connection;n&&(n.effectiveType&&e.setAttribute("effectiveConnectionType",n.effectiveType),n.type&&e.setAttribute("connectionType",n.type),Do(n.rtt)&&(ye["connection.rtt"]={value:n.rtt,unit:"millisecond"})),Do(t.deviceMemory)&&e.setAttribute("deviceMemory",`${t.deviceMemory} GB`),Do(t.hardwareConcurrency)&&e.setAttribute("hardwareConcurrency",String(t.hardwareConcurrency))}function Nm(e){St&&(_e&&h.log("[Measurements] Adding LCP Data"),St.element&&e.setAttribute("lcp.element",Ee(St.element)),St.id&&e.setAttribute("lcp.id",St.id),St.url&&e.setAttribute("lcp.url",St.url.trim().slice(0,200)),e.setAttribute("lcp.size",St.size)),yr&&yr.sources&&(_e&&h.log("[Measurements] Adding CLS Data"),yr.sources.forEach((t,n)=>e.setAttribute(`cls.source.${n+1}`,Ee(t.node))))}function Ls(e,t,n,r){let o=t[n];o!=null&&o<Tm&&(e[r]=o)}function Mm(e){let t=Rt();if(!t)return;let{responseStart:n,requestStart:r}=t;r<=n&&(_e&&h.log("[Measurements] Adding TTFB Request Time"),e["ttfb.requestTime"]={value:n-r,unit:"millisecond"})}var Om=1e3,tl,$s,Ws;function Er(e){let t="dom";Ie(t,e),be(t,Dm)}function Dm(){if(!v.document)return;let e=de.bind(null,"dom"),t=nl(e,!0);v.document.addEventListener("click",t,!1),v.document.addEventListener("keypress",t,!1),["EventTarget","Node"].forEach(n=>{let r=v[n]&&v[n].prototype;!r||!r.hasOwnProperty||!r.hasOwnProperty("addEventListener")||(ce(r,"addEventListener",function(o){return function(i,s,a){if(i==="click"||i=="keypress")try{let c=this,u=c.__sentry_instrumentation_handlers__=c.__sentry_instrumentation_handlers__||{},d=u[i]=u[i]||{refCount:0};if(!d.handler){let l=nl(e);d.handler=l,o.call(this,i,l,a)}d.refCount++}catch{}return o.call(this,i,s,a)}}),ce(r,"removeEventListener",function(o){return function(i,s,a){if(i==="click"||i=="keypress")try{let c=this,u=c.__sentry_instrumentation_handlers__||{},d=u[i];d&&(d.refCount--,d.refCount<=0&&(o.call(this,i,d.handler,a),d.handler=void 0,delete u[i]),Object.keys(u).length===0&&delete c.__sentry_instrumentation_handlers__)}catch{}return o.call(this,i,s,a)}}))})}function Lm(e){if(e.type!==$s)return!1;try{if(!e.target||e.target._sentryId!==Ws)return!1}catch{}return!0}function Pm(e,t){return e!=="keypress"?!1:!t||!t.tagName?!0:!(t.tagName==="INPUT"||t.tagName==="TEXTAREA"||t.isContentEditable)}function nl(e,t=!1){return n=>{if(!n||n._sentryCaptured)return;let r=Fm(n);if(Pm(n.type,r))return;ue(n,"_sentryCaptured",!0),r&&!r._sentryId&&ue(r,"_sentryId",W());let o=n.type==="keypress"?"input":n.type;Lm(n)||(e({event:n,name:o,global:t}),$s=n.type,Ws=r?r._sentryId:void 0),clearTimeout(tl),tl=v.setTimeout(()=>{Ws=void 0,$s=void 0},Om)}}function Fm(e){try{return e.target}catch{return null}}var Fo;function xt(e){let t="history";Ie(t,e),be(t,Um)}function Um(){if(!is())return;let e=v.onpopstate;v.onpopstate=function(...n){let r=v.location.href,o=Fo;if(Fo=r,de("history",{from:o,to:r}),e)try{return e.apply(this,n)}catch{}};function t(n){return function(...r){let o=r.length>2?r[2]:void 0;if(o){let i=Fo,s=String(o);Fo=s,de("history",{from:i,to:s})}return n.apply(this,r)}}ce(v.history,"pushState",t),ce(v.history,"replaceState",t)}var Uo={};function Bo(e){let t=Uo[e];if(t)return t;let n=v[e];if(jn(n))return Uo[e]=n.bind(v);let r=v.document;if(r&&typeof r.createElement=="function")try{let o=r.createElement("iframe");o.hidden=!0,r.head.appendChild(o);let i=o.contentWindow;i&&i[e]&&(n=i[e]),r.head.removeChild(o)}catch(o){_e&&h.warn(`Could not create sandbox iframe for ${e} check, bailing to window.${e}: `,o)}return n&&(Uo[e]=n.bind(v))}function Ho(e){Uo[e]=void 0}function $t(...e){return Bo("setTimeout")(...e)}var it="__sentry_xhr_v3__";function Tr(e){let t="xhr";Ie(t,e),be(t,Bm)}function Bm(){if(!v.XMLHttpRequest)return;let e=XMLHttpRequest.prototype;e.open=new Proxy(e.open,{apply(t,n,r){let o=oe()*1e3,i=Re(r[0])?r[0].toUpperCase():void 0,s=Hm(r[1]);if(!i||!s)return t.apply(n,r);n[it]={method:i,url:s,request_headers:{}},i==="POST"&&s.match(/sentry_key/)&&(n.__sentry_own_request__=!0);let a=()=>{let c=n[it];if(c&&n.readyState===4){try{c.status_code=n.status}catch{}let u={endTimestamp:oe()*1e3,startTimestamp:o,xhr:n};de("xhr",u)}};return"onreadystatechange"in n&&typeof n.onreadystatechange=="function"?n.onreadystatechange=new Proxy(n.onreadystatechange,{apply(c,u,d){return a(),c.apply(u,d)}}):n.addEventListener("readystatechange",a),n.setRequestHeader=new Proxy(n.setRequestHeader,{apply(c,u,d){let[l,f]=d,m=u[it];return m&&Re(l)&&Re(f)&&(m.request_headers[l.toLowerCase()]=f),c.apply(u,d)}}),t.apply(n,r)}}),e.send=new Proxy(e.send,{apply(t,n,r){let o=n[it];if(!o)return t.apply(n,r);r[0]!==void 0&&(o.body=r[0]);let i={startTimestamp:oe()*1e3,xhr:n};return de("xhr",i),t.apply(n,r)}})}function Hm(e){if(Re(e))return e;try{return e.toString()}catch{}}var zs=[],$o=new Map;function js(){if(_r()&&ie){let t=$m();return()=>{t()}}return()=>{}}var rl={click:"click",pointerdown:"click",pointerup:"click",mousedown:"click",mouseup:"click",touchstart:"click",touchend:"click",mouseover:"hover",mouseout:"hover",mouseenter:"hover",mouseleave:"hover",pointerover:"hover",pointerout:"hover",pointerenter:"hover",pointerleave:"hover",dragstart:"drag",dragend:"drag",drag:"drag",dragenter:"drag",dragleave:"drag",dragover:"drag",drop:"drag",keydown:"press",keyup:"press",keypress:"press",input:"press"};function $m(){return gr(({metric:e})=>{if(e.value==null)return;let t=e.entries.find(p=>p.duration===e.value&&rl[p.name]);if(!t)return;let{interactionId:n}=t,r=rl[t.name],o=ne(ie+t.startTime),i=ne(e.value),s=X(),a=s?J(s):void 0,u=(n!=null?$o.get(n):void 0)||a,d=u?A(u).description:H().getScopeData().transactionName,l=Ee(t.target),f=K({[Z]:"auto.http.browser.inp",[xe]:`ui.interaction.${r}`,[rn]:t.duration}),m=Lo({name:l,transaction:d,attributes:f,startTime:o});he([m,"optionalAccess",p=>p.addEvent,"call",p=>p("inp",{[Lt]:"millisecond",[Pt]:e.value})]),he([m,"optionalAccess",p=>p.end,"call",p=>p(o+i)])})}function Gs(e){let t=({entries:n})=>{let r=X(),o=r&&J(r);n.forEach(i=>{if(!Qu(i)||!o)return;let s=i.interactionId;if(s!=null&&!$o.has(s)){if(zs.length>10){let a=zs.shift();$o.delete(a)}zs.push(s),$o.set(s,o)}})};ot("event",t),ot("first-input",t)}function ol(e,t=Bo("fetch")){let n=0,r=0;function o(i){let s=i.body.length;n+=s,r++;let a={body:i.body,method:"POST",referrerPolicy:"origin",headers:e.headers,keepalive:n<=6e4&&r<15,...e.fetchOptions};if(!t)return Ho("fetch"),Mt("No fetch implementation available");try{return t(e.url,a).then(c=>(n-=s,r--,{statusCode:c.status,headers:{"x-sentry-rate-limits":c.headers.get("X-Sentry-Rate-Limits"),"retry-after":c.headers.get("Retry-After")}}))}catch(c){return Ho("fetch"),n-=s,r--,Mt(c)}}return Io(e,o)}var Wm=30;var zm=50;function qs(e,t,n,r){let o={filename:e,function:t==="<anonymous>"?ft:t,in_app:!0};return n!==void 0&&(o.lineno=n),r!==void 0&&(o.colno=r),o}var jm=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,Gm=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,qm=/\((\S*)(?::(\d+))(?::(\d+))\)/,Ym=e=>{let t=jm.exec(e);if(t){let[,r,o,i]=t;return qs(r,ft,+o,+i)}let n=Gm.exec(e);if(n){if(n[2]&&n[2].indexOf("eval")===0){let s=qm.exec(n[2]);s&&(n[2]=s[1],n[3]=s[2],n[4]=s[3])}let[o,i]=sl(n[1]||ft,n[2]);return qs(i,o,n[3]?+n[3]:void 0,n[4]?+n[4]:void 0)}},Vm=[Wm,Ym],Km=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,Jm=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,Xm=e=>{let t=Km.exec(e);if(t){if(t[3]&&t[3].indexOf(" > eval")>-1){let i=Jm.exec(t[3]);i&&(t[1]=t[1]||"eval",t[3]=i[1],t[4]=i[2],t[5]="")}let r=t[3],o=t[1]||ft;return[o,r]=sl(o,r),qs(r,o,t[4]?+t[4]:void 0,t[5]?+t[5]:void 0)}},Qm=[zm,Xm];var Zm=[Vm,Qm],il=Qr(...Zm),sl=(e,t)=>{let n=e.indexOf("safari-extension")!==-1,r=e.indexOf("safari-web-extension")!==-1;return n||r?[e.indexOf("@")!==-1?e.split("@")[0]:ft,n?`safari-extension:${t}`:`safari-web-extension:${t}`]:[e,t]};var Wo=1024,eh="Breadcrumbs",th=(e={})=>{let t={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...e};return{name:eh,setup(n){t.console&&Wi(oh(n)),t.dom&&Er(rh(n,t.dom)),t.xhr&&Tr(ih(n)),t.fetch&&qn(sh(n)),t.history&&xt(ah(n)),t.sentry&&n.on("beforeSendEvent",nh(n))}}},al=th;function nh(e){return function(n){C()===e&&Ve({category:`sentry.${n.type==="transaction"?"transaction":"event"}`,event_id:n.event_id,level:n.level,message:et(n)},{event:n})}}function rh(e,t){return function(r){if(C()!==e)return;let o,i,s=typeof t=="object"?t.serializeAttribute:void 0,a=typeof t=="object"&&typeof t.maxStringLength=="number"?t.maxStringLength:void 0;a&&a>Wo&&(Se&&h.warn(`\`dom.maxStringLength\` cannot exceed ${Wo}, but a value of ${a} was configured. Sentry will use ${Wo} instead.`),a=Wo),typeof s=="string"&&(s=[s]);try{let u=r.event,d=ch(u)?u.target:u;o=Ee(d,{keyAttrs:s,maxStringLength:a}),i=Wn(d)}catch{o="<unknown>"}if(o.length===0)return;let c={category:`ui.${r.name}`,message:o};i&&(c.data={"ui.component_name":i}),Ve(c,{event:r.event,name:r.name,global:r.global})}}function oh(e){return function(n){if(C()!==e)return;let r={category:"console",data:{arguments:n.args,logger:"console"},level:Jn(n.level),message:qr(n.args," ")};if(n.level==="assert")if(n.args[0]===!1)r.message=`Assertion failed: ${qr(n.args.slice(1)," ")||"console.assert"}`,r.data.arguments=n.args.slice(1);else return;Ve(r,{input:n.args,level:n.level})}}function ih(e){return function(n){if(C()!==e)return;let{startTimestamp:r,endTimestamp:o}=n,i=n.xhr[it];if(!r||!o||!i)return;let{method:s,url:a,status_code:c,body:u}=i,d={method:s,url:a,status_code:c},l={xhr:n.xhr,input:u,startTimestamp:r,endTimestamp:o},f=Yr(c);Ve({category:"xhr",data:d,type:"http",level:f},l)}}function sh(e){return function(n){if(C()!==e)return;let{startTimestamp:r,endTimestamp:o}=n;if(o&&!(n.fetchData.url.match(/sentry_key/)&&n.fetchData.method==="POST"))if(n.error){let i=n.fetchData,s={data:n.error,input:n.args,startTimestamp:r,endTimestamp:o};Ve({category:"fetch",data:i,level:"error",type:"http"},s)}else{let i=n.response,s={...n.fetchData,status_code:i&&i.status},a={input:n.args,response:i,startTimestamp:r,endTimestamp:o},c=Yr(s.status_code);Ve({category:"fetch",data:s,type:"http",level:c},a)}}}function ah(e){return function(n){if(C()!==e)return;let r=n.from,o=n.to,i=qe(k.location.href),s=r?qe(r):void 0,a=qe(o);(!s||!s.path)&&(s=i),i.protocol===a.protocol&&i.host===a.host&&(o=a.relative),i.protocol===s.protocol&&i.host===s.host&&(r=s.relative),Ve({category:"navigation",data:{from:r,to:o}})}}function ch(e){return!!e&&!!e.target}var uh=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],lh="BrowserApiErrors",dh=(e={})=>{let t={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,...e};return{name:lh,setupOnce(){t.setTimeout&&ce(k,"setTimeout",cl),t.setInterval&&ce(k,"setInterval",cl),t.requestAnimationFrame&&ce(k,"requestAnimationFrame",fh),t.XMLHttpRequest&&"XMLHttpRequest"in k&&ce(XMLHttpRequest.prototype,"send",ph);let n=t.eventTarget;n&&(Array.isArray(n)?n:uh).forEach(mh)}}},ul=dh;function cl(e){return function(...t){let n=t[0];return t[0]=an(n,{mechanism:{data:{function:Oe(e)},handled:!1,type:"instrument"}}),e.apply(this,t)}}function fh(e){return function(t){return e.apply(this,[an(t,{mechanism:{data:{function:"requestAnimationFrame",handler:Oe(e)},handled:!1,type:"instrument"}})])}}function ph(e){return function(...t){let n=this;return["onload","onerror","onprogress","onreadystatechange"].forEach(o=>{o in n&&typeof n[o]=="function"&&ce(n,o,function(i){let s={mechanism:{data:{function:o,handler:Oe(i)},handled:!1,type:"instrument"}},a=Qt(i);return a&&(s.mechanism.data.handler=Oe(a)),an(i,s)})}),e.apply(this,t)}}function mh(e){let t=k,n=t[e]&&t[e].prototype;!n||!n.hasOwnProperty||!n.hasOwnProperty("addEventListener")||(ce(n,"addEventListener",function(r){return function(o,i,s){try{typeof i.handleEvent=="function"&&(i.handleEvent=an(i.handleEvent,{mechanism:{data:{function:"handleEvent",handler:Oe(i),target:e},handled:!1,type:"instrument"}}))}catch{}return r.apply(this,[o,an(i,{mechanism:{data:{function:"addEventListener",handler:Oe(i),target:e},handled:!1,type:"instrument"}}),s])}}),ce(n,"removeEventListener",function(r){return function(o,i,s){let a=i;try{let c=a&&a.__sentry_wrapped__;c&&r.call(this,o,c,s)}catch{}return r.call(this,o,a,s)}}))}var hh="GlobalHandlers",gh=(e={})=>{let t={onerror:!0,onunhandledrejection:!0,...e};return{name:hh,setupOnce(){Error.stackTraceLimit=50},setup(n){t.onerror&&(Sh(n),ll("onerror")),t.onunhandledrejection&&(_h(n),ll("onunhandledrejection"))}}},dl=gh;function Sh(e){Yn(t=>{let{stackParser:n,attachStacktrace:r}=fl();if(C()!==e||Rs())return;let{msg:o,url:i,line:s,column:a,error:c}=t,u=Th(ko(n,c||o,void 0,r,!1),i,s,a);u.level="error",ar(u,{originalException:c,mechanism:{handled:!1,type:"onerror"}})})}function _h(e){Vn(t=>{let{stackParser:n,attachStacktrace:r}=fl();if(C()!==e||Rs())return;let o=yh(t),i=Jt(o)?Eh(o):ko(n,o,void 0,r,!0);i.level="error",ar(i,{originalException:o,mechanism:{handled:!1,type:"onunhandledrejection"}})})}function yh(e){if(Jt(e))return e;try{if("reason"in e)return e.reason;if("detail"in e&&"reason"in e.detail)return e.detail.reason}catch{}return e}function Eh(e){return{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(e)}`}]}}}function Th(e,t,n,r){let o=e.exception=e.exception||{},i=o.values=o.values||[],s=i[0]=i[0]||{},a=s.stacktrace=s.stacktrace||{},c=a.frames=a.frames||[],u=isNaN(parseInt(r,10))?void 0:r,d=isNaN(parseInt(n,10))?void 0:n,l=Re(t)&&t.length>0?t:$n();return c.length===0&&c.push({colno:u,filename:l,function:ft,in_app:!0,lineno:d}),e}function ll(e){Se&&h.log(`Global Handler attached: ${e}`)}function fl(){let e=C();return e&&e.getOptions()||{stackParser:()=>[],attachStacktrace:!1}}var pl=()=>({name:"HttpContext",preprocessEvent(e){if(!k.navigator&&!k.location&&!k.document)return;let t=e.request&&e.request.url||k.location&&k.location.href,{referrer:n}=k.document||{},{userAgent:r}=k.navigator||{},o={...e.request&&e.request.headers,...n&&{Referer:n},...r&&{"User-Agent":r}},i={...e.request,...t&&{url:t},headers:o};e.request=i}});var Ih="cause",bh=5,vh="LinkedErrors",Ch=(e={})=>{let t=e.limit||bh,n=e.key||Ih;return{name:vh,preprocessEvent(r,o,i){let s=i.getOptions();Li(xo,s.stackParser,s.maxValueLength,n,t,r,o)}}},ml=Ch;function hl(e){return[Co(),bo(),ul(),al(),dl(),ml(),Ro(),pl()]}function Rh(e={}){let t={defaultIntegrations:hl(),release:typeof __SENTRY_RELEASE__=="string"?__SENTRY_RELEASE__:k.SENTRY_RELEASE&&k.SENTRY_RELEASE.id?k.SENTRY_RELEASE.id:void 0,autoSessionTracking:!0,sendClientReports:!0};return e.defaultIntegrations==null&&delete e.defaultIntegrations,{...t,...e}}function wh(){let e=typeof k.window<"u"&&k;if(!e)return!1;let t=e.chrome?"chrome":"browser",n=e[t],r=n&&n.runtime&&n.runtime.id,o=k.location&&k.location.href||"",i=["chrome-extension:","moz-extension:","ms-browser-extension:","safari-web-extension:"],s=!!r&&k===k.top&&i.some(c=>o.startsWith(`${c}//`)),a=typeof e.nw<"u";return!!r&&!s&&!a}function Ys(e={}){let t=Rh(e);if(wh()){Ge(()=>{console.error("[Sentry] You cannot run Sentry this way in a browser extension, check: https://docs.sentry.io/platforms/javascript/best-practices/browser-extensions/")});return}Se&&(to()||h.warn("No Fetch API detected. The Sentry SDK requires a Fetch API compatible environment to send events. Please add a Fetch API polyfill."));let n={...t,stackParser:$i(t.stackParser||il),integrations:_s(t),transport:t.transport||ol},r=Ts(Ao,n);return t.autoSessionTracking&&xh(),r}function xh(){if(typeof k.document>"u"){Se&&h.warn("Session tracking in non-browser environment with @sentry/browser is not supported.");return}cr({ignoreDuration:!0}),ur(),xt(({from:e,to:t})=>{e!==void 0&&e!==t&&(cr({ignoreDuration:!0}),ur())})}var te=R,Ta="sentryReplaySession",kh="replay_event",Ia="Unable to send Replay",Ah=3e5,Nh=9e5,Mh=5e3,Oh=5500,Dh=6e4,Lh=5e3,Ph=3,gl=15e4,zo=5e3,Fh=3e3,Uh=300,ba=2e7,Bh=4999,Hh=15e3,Sl=36e5;function Qs(e,t){return e??t()}function Rr(e){let t,n=e[0],r=1;for(;r<e.length;){let o=e[r],i=e[r+1];if(r+=2,(o==="optionalAccess"||o==="optionalCall")&&n==null)return;o==="access"||o==="optionalAccess"?(t=n,n=i(n)):(o==="call"||o==="optionalCall")&&(n=i((...s)=>n.call(t,...s)),t=void 0)}return n}var fe;(function(e){e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment"})(fe||(fe={}));function $h(e){return e.nodeType===e.ELEMENT_NODE}function br(e){let t=Rr([e,"optionalAccess",n=>n.host]);return Rr([t,"optionalAccess",n=>n.shadowRoot])===e}function vr(e){return Object.prototype.toString.call(e)==="[object ShadowRoot]"}function Wh(e){return e.includes(" background-clip: text;")&&!e.includes(" -webkit-background-clip: text;")&&(e=e.replace(/\sbackground-clip:\s*text;/g," -webkit-background-clip: text; background-clip: text;")),e}function zh(e){let{cssText:t}=e;if(t.split('"').length<3)return t;let n=["@import",`url(${JSON.stringify(e.href)})`];return e.layerName===""?n.push("layer"):e.layerName&&n.push(`layer(${e.layerName})`),e.supportsText&&n.push(`supports(${e.supportsText})`),e.media.length&&n.push(e.media.mediaText),n.join(" ")+";"}function Vo(e){try{let t=e.rules||e.cssRules;return t?Wh(Array.from(t,Ul).join("")):null}catch{return null}}function Ul(e){let t;if(Gh(e))try{t=Vo(e.styleSheet)||zh(e)}catch{}else if(qh(e)&&e.selectorText.includes(":"))return jh(e.cssText);return t||e.cssText}function jh(e){let t=/(\[(?:[\w-]+)[^\\])(:(?:[\w-]+)\])/gm;return e.replace(t,"$1\\$2")}function Gh(e){return"styleSheet"in e}function qh(e){return"selectorText"in e}var Ko=class{constructor(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}getId(t){if(!t)return-1;let n=Rr([this,"access",r=>r.getMeta,"call",r=>r(t),"optionalAccess",r=>r.id]);return Qs(n,()=>-1)}getNode(t){return this.idNodeMap.get(t)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(t){return this.nodeMetaMap.get(t)||null}removeNodeFromMap(t){let n=this.getId(t);this.idNodeMap.delete(n),t.childNodes&&t.childNodes.forEach(r=>this.removeNodeFromMap(r))}has(t){return this.idNodeMap.has(t)}hasNode(t){return this.nodeMetaMap.has(t)}add(t,n){let r=n.id;this.idNodeMap.set(r,t),this.nodeMetaMap.set(t,n)}replace(t,n){let r=this.getNode(t);if(r){let o=this.nodeMetaMap.get(r);o&&this.nodeMetaMap.set(n,o)}this.idNodeMap.set(t,n)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}};function Yh(){return new Ko}function ci({maskInputOptions:e,tagName:t,type:n}){return t==="OPTION"&&(t="SELECT"),!!(e[t.toLowerCase()]||n&&e[n]||n==="password"||t==="INPUT"&&!n&&e.text)}function wr({isMasked:e,element:t,value:n,maskInputFn:r}){let o=n||"";return e?(r&&(o=r(o,t)),"*".repeat(o.length)):o}function Pn(e){return e.toLowerCase()}function Zs(e){return e.toUpperCase()}var _l="__rrweb_original__";function Vh(e){let t=e.getContext("2d");if(!t)return!0;let n=50;for(let r=0;r<e.width;r+=n)for(let o=0;o<e.height;o+=n){let i=t.getImageData,s=_l in i?i[_l]:i;if(new Uint32Array(s.call(t,r,o,Math.min(n,e.width-r),Math.min(n,e.height-o)).data.buffer).some(c=>c!==0))return!1}return!0}function va(e){let t=e.type;return e.hasAttribute("data-rr-is-password")?"password":t?Pn(t):null}function Jo(e,t,n){return t==="INPUT"&&(n==="radio"||n==="checkbox")?e.getAttribute("value")||"":e.value}function Bl(e,t){let n;try{n=new URL(e,Qs(t,()=>window.location.href))}catch{return null}let r=/\.([0-9a-z]+)(?:$)/i,o=n.pathname.match(r);return Qs(Rr([o,"optionalAccess",i=>i[1]]),()=>null)}var yl={};function Hl(e){let t=yl[e];if(t)return t;let n=window.document,r=window[e];if(n&&typeof n.createElement=="function")try{let o=n.createElement("iframe");o.hidden=!0,n.head.appendChild(o);let i=o.contentWindow;i&&i[e]&&(r=i[e]),n.head.removeChild(o)}catch{}return yl[e]=r.bind(window)}function ea(...e){return Hl("setTimeout")(...e)}function $l(...e){return Hl("clearTimeout")(...e)}var Kh=1,Jh=new RegExp("[^a-z0-9-_:]"),xr=-2;function Ca(){return Kh++}function Xh(e){if(e instanceof HTMLFormElement)return"form";let t=Pn(e.tagName);return Jh.test(t)?"div":t}function Qh(e){let t="";return e.indexOf("//")>-1?t=e.split("/").slice(0,3).join("/"):t=e.split("/")[0],t=t.split("?")[0],t}var An,El,Zh=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,eg=/^(?:[a-z+]+:)?\/\//i,tg=/^www\..*/i,ng=/^(data:)([^,]*),(.*)/i;function Xo(e,t){return(e||"").replace(Zh,(n,r,o,i,s,a)=>{let c=o||s||a,u=r||i||"";if(!c)return n;if(eg.test(c)||tg.test(c))return`url(${u}${c}${u})`;if(ng.test(c))return`url(${u}${c}${u})`;if(c[0]==="/")return`url(${u}${Qh(t)+c}${u})`;let d=t.split("/"),l=c.split("/");d.pop();for(let f of l)f!=="."&&(f===".."?d.pop():d.push(f));return`url(${u}${d.join("/")}${u})`})}var rg=/^[^ \t\n\r\u000c]+/,og=/^[, \t\n\r\u000c]+/;function ig(e,t){if(t.trim()==="")return t;let n=0;function r(i){let s,a=i.exec(t.substring(n));return a?(s=a[0],n+=s.length,s):""}let o=[];for(;r(og),!(n>=t.length);){let i=r(rg);if(i.slice(-1)===",")i=Mn(e,i.substring(0,i.length-1)),o.push(i);else{let s="";i=Mn(e,i);let a=!1;for(;;){let c=t.charAt(n);if(c===""){o.push((i+s).trim());break}else if(a)c===")"&&(a=!1);else if(c===","){n+=1,o.push((i+s).trim());break}else c==="("&&(a=!0);s+=c,n+=1}}}return o.join(", ")}var Tl=new WeakMap;function Mn(e,t){return!t||t.trim()===""?t:ui(e,t)}function sg(e){return!!(e.tagName==="svg"||e.ownerSVGElement)}function ui(e,t){let n=Tl.get(e);if(n||(n=e.createElement("a"),Tl.set(e,n)),!t)t="";else if(t.startsWith("blob:")||t.startsWith("data:"))return t;return n.setAttribute("href",t),n.href}function Wl(e,t,n,r,o,i){return r&&(n==="src"||n==="href"&&!(t==="use"&&r[0]==="#")||n==="xlink:href"&&r[0]!=="#"||n==="background"&&(t==="table"||t==="td"||t==="th")?Mn(e,r):n==="srcset"?ig(e,r):n==="style"?Xo(r,ui(e)):t==="object"&&n==="data"?Mn(e,r):typeof i=="function"?i(n,r,o):r)}function zl(e,t,n){return(e==="video"||e==="audio")&&t==="autoplay"}function ag(e,t,n,r){try{if(r&&e.matches(r))return!1;if(typeof t=="string"){if(e.classList.contains(t))return!0}else for(let o=e.classList.length;o--;){let i=e.classList[o];if(t.test(i))return!0}if(n)return e.matches(n)}catch{}return!1}function cg(e,t){for(let n=e.classList.length;n--;){let r=e.classList[n];if(t.test(r))return!0}return!1}function ln(e,t,n=1/0,r=0){return!e||e.nodeType!==e.ELEMENT_NODE||r>n?-1:t(e)?r:ln(e.parentNode,t,n,r+1)}function On(e,t){return n=>{let r=n;if(r===null)return!1;try{if(e){if(typeof e=="string"){if(r.matches(`.${e}`))return!0}else if(cg(r,e))return!0}return!!(t&&r.matches(t))}catch{return!1}}}function Fn(e,t,n,r,o,i){try{let s=e.nodeType===e.ELEMENT_NODE?e:e.parentElement;if(s===null)return!1;if(s.tagName==="INPUT"){let u=s.getAttribute("autocomplete");if(["current-password","new-password","cc-number","cc-exp","cc-exp-month","cc-exp-year","cc-csc"].includes(u))return!0}let a=-1,c=-1;if(i){if(c=ln(s,On(r,o)),c<0)return!0;a=ln(s,On(t,n),c>=0?c:1/0)}else{if(a=ln(s,On(t,n)),a<0)return!1;c=ln(s,On(r,o),a>=0?a:1/0)}return a>=0?c>=0?a<=c:!0:c>=0?!1:!!i}catch{}return!!i}function ug(e,t,n){let r=e.contentWindow;if(!r)return;let o=!1,i;try{i=r.document.readyState}catch{return}if(i!=="complete"){let a=ea(()=>{o||(t(),o=!0)},n);e.addEventListener("load",()=>{$l(a),o=!0,t()});return}let s="about:blank";if(r.location.href!==s||e.src===s||e.src==="")return ea(t,0),e.addEventListener("load",t);e.addEventListener("load",t)}function lg(e,t,n){let r=!1,o;try{o=e.sheet}catch{return}if(o)return;let i=ea(()=>{r||(t(),r=!0)},n);e.addEventListener("load",()=>{$l(i),r=!0,t()})}function dg(e,t){let{doc:n,mirror:r,blockClass:o,blockSelector:i,unblockSelector:s,maskAllText:a,maskAttributeFn:c,maskTextClass:u,unmaskTextClass:d,maskTextSelector:l,unmaskTextSelector:f,inlineStylesheet:m,maskInputOptions:p={},maskTextFn:g,maskInputFn:T,dataURLOptions:y={},inlineImages:x,recordCanvas:U,keepIframeSrcFn:L,newlyAddedElement:N=!1}=t,S=fg(n,r);switch(e.nodeType){case e.DOCUMENT_NODE:return e.compatMode!=="CSS1Compat"?{type:fe.Document,childNodes:[],compatMode:e.compatMode}:{type:fe.Document,childNodes:[]};case e.DOCUMENT_TYPE_NODE:return{type:fe.DocumentType,name:e.name,publicId:e.publicId,systemId:e.systemId,rootId:S};case e.ELEMENT_NODE:return mg(e,{doc:n,blockClass:o,blockSelector:i,unblockSelector:s,inlineStylesheet:m,maskAttributeFn:c,maskInputOptions:p,maskInputFn:T,dataURLOptions:y,inlineImages:x,recordCanvas:U,keepIframeSrcFn:L,newlyAddedElement:N,rootId:S,maskAllText:a,maskTextClass:u,unmaskTextClass:d,maskTextSelector:l,unmaskTextSelector:f});case e.TEXT_NODE:return pg(e,{doc:n,maskAllText:a,maskTextClass:u,unmaskTextClass:d,maskTextSelector:l,unmaskTextSelector:f,maskTextFn:g,maskInputOptions:p,maskInputFn:T,rootId:S});case e.CDATA_SECTION_NODE:return{type:fe.CDATA,textContent:"",rootId:S};case e.COMMENT_NODE:return{type:fe.Comment,textContent:e.textContent||"",rootId:S};default:return!1}}function fg(e,t){if(!t.hasNode(e))return;let n=t.getId(e);return n===1?void 0:n}function pg(e,t){let{maskAllText:n,maskTextClass:r,unmaskTextClass:o,maskTextSelector:i,unmaskTextSelector:s,maskTextFn:a,maskInputOptions:c,maskInputFn:u,rootId:d}=t,l=e.parentNode&&e.parentNode.tagName,f=e.textContent,m=l==="STYLE"?!0:void 0,p=l==="SCRIPT"?!0:void 0,g=l==="TEXTAREA"?!0:void 0;if(m&&f){try{e.nextSibling||e.previousSibling||Rr([e,"access",y=>y.parentNode,"access",y=>y.sheet,"optionalAccess",y=>y.cssRules])&&(f=Vo(e.parentNode.sheet))}catch(y){console.warn(`Cannot get CSS styles from text's parentNode. Error: ${y}`,e)}f=Xo(f,ui(t.doc))}p&&(f="SCRIPT_PLACEHOLDER");let T=Fn(e,r,i,o,s,n);if(!m&&!p&&!g&&f&&T&&(f=a?a(f,e.parentElement):f.replace(/[\S]/g,"*")),g&&f&&(c.textarea||T)&&(f=u?u(f,e.parentNode):f.replace(/[\S]/g,"*")),l==="OPTION"&&f){let y=ci({type:null,tagName:l,maskInputOptions:c});f=wr({isMasked:Fn(e,r,i,o,s,y),element:e,value:f,maskInputFn:u})}return{type:fe.Text,textContent:f||"",isStyle:m,rootId:d}}function mg(e,t){let{doc:n,blockClass:r,blockSelector:o,unblockSelector:i,inlineStylesheet:s,maskInputOptions:a={},maskAttributeFn:c,maskInputFn:u,dataURLOptions:d={},inlineImages:l,recordCanvas:f,keepIframeSrcFn:m,newlyAddedElement:p=!1,rootId:g,maskAllText:T,maskTextClass:y,unmaskTextClass:x,maskTextSelector:U,unmaskTextSelector:L}=t,N=ag(e,r,o,i),S=Xh(e),_={},I=e.attributes.length;for(let E=0;E<I;E++){let b=e.attributes[E];b.name&&!zl(S,b.name,b.value)&&(_[b.name]=Wl(n,S,Pn(b.name),b.value,e,c))}if(S==="link"&&s){let E=Array.from(n.styleSheets).find(M=>M.href===e.href),b=null;E&&(b=Vo(E)),b&&(delete _.rel,delete _.href,_._cssText=Xo(b,E.href))}if(S==="style"&&e.sheet&&!(e.innerText||e.textContent||"").trim().length){let E=Vo(e.sheet);E&&(_._cssText=Xo(E,ui(n)))}if(S==="input"||S==="textarea"||S==="select"||S==="option"){let E=e,b=va(E),M=Jo(E,Zs(S),b),z=E.checked;if(b!=="submit"&&b!=="button"&&M){let Q=Fn(E,y,U,x,L,ci({type:b,tagName:Zs(S),maskInputOptions:a}));_.value=wr({isMasked:Q,element:E,value:M,maskInputFn:u})}z&&(_.checked=z)}if(S==="option"&&(e.selected&&!a.select?_.selected=!0:delete _.selected),S==="canvas"&&f){if(e.__context==="2d")Vh(e)||(_.rr_dataURL=e.toDataURL(d.type,d.quality));else if(!("__context"in e)){let E=e.toDataURL(d.type,d.quality),b=n.createElement("canvas");b.width=e.width,b.height=e.height;let M=b.toDataURL(d.type,d.quality);E!==M&&(_.rr_dataURL=E)}}if(S==="img"&&l){An||(An=n.createElement("canvas"),El=An.getContext("2d"));let E=e,b=E.currentSrc||E.getAttribute("src")||"<unknown-src>",M=E.crossOrigin,z=()=>{E.removeEventListener("load",z);try{An.width=E.naturalWidth,An.height=E.naturalHeight,El.drawImage(E,0,0),_.rr_dataURL=An.toDataURL(d.type,d.quality)}catch(Q){if(E.crossOrigin!=="anonymous"){E.crossOrigin="anonymous",E.complete&&E.naturalWidth!==0?z():E.addEventListener("load",z);return}else console.warn(`Cannot inline img src=${b}! Error: ${Q}`)}E.crossOrigin==="anonymous"&&(M?_.crossOrigin=M:E.removeAttribute("crossorigin"))};E.complete&&E.naturalWidth!==0?z():E.addEventListener("load",z)}if((S==="audio"||S==="video")&&(_.rr_mediaState=e.paused?"paused":"played",_.rr_mediaCurrentTime=e.currentTime),p||(e.scrollLeft&&(_.rr_scrollLeft=e.scrollLeft),e.scrollTop&&(_.rr_scrollTop=e.scrollTop)),N){let{width:E,height:b}=e.getBoundingClientRect();_={class:_.class,rr_width:`${E}px`,rr_height:`${b}px`}}S==="iframe"&&!m(_.src)&&(!N&&!e.contentDocument&&(_.rr_src=_.src),delete _.src);let B;try{customElements.get(S)&&(B=!0)}catch{}return{type:fe.Element,tagName:S,attributes:_,childNodes:[],isSVG:sg(e)||void 0,needBlock:N,rootId:g,isCustom:B}}function ee(e){return e==null?"":e.toLowerCase()}function hg(e,t){if(t.comment&&e.type===fe.Comment)return!0;if(e.type===fe.Element){if(t.script&&(e.tagName==="script"||e.tagName==="link"&&(e.attributes.rel==="preload"||e.attributes.rel==="modulepreload")&&e.attributes.as==="script"||e.tagName==="link"&&e.attributes.rel==="prefetch"&&typeof e.attributes.href=="string"&&Bl(e.attributes.href)==="js"))return!0;if(t.headFavicon&&(e.tagName==="link"&&e.attributes.rel==="shortcut icon"||e.tagName==="meta"&&(ee(e.attributes.name).match(/^msapplication-tile(image|color)$/)||ee(e.attributes.name)==="application-name"||ee(e.attributes.rel)==="icon"||ee(e.attributes.rel)==="apple-touch-icon"||ee(e.attributes.rel)==="shortcut icon")))return!0;if(e.tagName==="meta"){if(t.headMetaDescKeywords&&ee(e.attributes.name).match(/^description|keywords$/))return!0;if(t.headMetaSocial&&(ee(e.attributes.property).match(/^(og|twitter|fb):/)||ee(e.attributes.name).match(/^(og|twitter):/)||ee(e.attributes.name)==="pinterest"))return!0;if(t.headMetaRobots&&(ee(e.attributes.name)==="robots"||ee(e.attributes.name)==="googlebot"||ee(e.attributes.name)==="bingbot"))return!0;if(t.headMetaHttpEquiv&&e.attributes["http-equiv"]!==void 0)return!0;if(t.headMetaAuthorship&&(ee(e.attributes.name)==="author"||ee(e.attributes.name)==="generator"||ee(e.attributes.name)==="framework"||ee(e.attributes.name)==="publisher"||ee(e.attributes.name)==="progid"||ee(e.attributes.property).match(/^article:/)||ee(e.attributes.property).match(/^product:/)))return!0;if(t.headMetaVerification&&(ee(e.attributes.name)==="google-site-verification"||ee(e.attributes.name)==="yandex-verification"||ee(e.attributes.name)==="csrf-token"||ee(e.attributes.name)==="p:domain_verify"||ee(e.attributes.name)==="verify-v1"||ee(e.attributes.name)==="verification"||ee(e.attributes.name)==="shopify-checkout-api-token"))return!0}}return!1}function Dn(e,t){let{doc:n,mirror:r,blockClass:o,blockSelector:i,unblockSelector:s,maskAllText:a,maskTextClass:c,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:l,skipChild:f=!1,inlineStylesheet:m=!0,maskInputOptions:p={},maskAttributeFn:g,maskTextFn:T,maskInputFn:y,slimDOMOptions:x,dataURLOptions:U={},inlineImages:L=!1,recordCanvas:N=!1,onSerialize:S,onIframeLoad:_,iframeLoadTimeout:I=5e3,onStylesheetLoad:B,stylesheetLoadTimeout:E=5e3,keepIframeSrcFn:b=()=>!1,newlyAddedElement:M=!1}=t,{preserveWhiteSpace:z=!0}=t,Q=dg(e,{doc:n,mirror:r,blockClass:o,blockSelector:i,maskAllText:a,unblockSelector:s,maskTextClass:c,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:l,inlineStylesheet:m,maskInputOptions:p,maskAttributeFn:g,maskTextFn:T,maskInputFn:y,dataURLOptions:U,inlineImages:L,recordCanvas:N,keepIframeSrcFn:b,newlyAddedElement:M});if(!Q)return console.warn(e,"not serialized"),null;let le;r.hasNode(e)?le=r.getId(e):hg(Q,x)||!z&&Q.type===fe.Text&&!Q.isStyle&&!Q.textContent.replace(/^\s+|\s+$/gm,"").length?le=xr:le=Ca();let F=Object.assign(Q,{id:le});if(r.add(e,F),le===xr)return null;S&&S(e);let me=!f;if(F.type===fe.Element){me=me&&!F.needBlock,delete F.needBlock;let q=e.shadowRoot;q&&vr(q)&&(F.isShadowHost=!0)}if((F.type===fe.Document||F.type===fe.Element)&&me){x.headWhitespace&&F.type===fe.Element&&F.tagName==="head"&&(z=!1);let q={doc:n,mirror:r,blockClass:o,blockSelector:i,maskAllText:a,unblockSelector:s,maskTextClass:c,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:l,skipChild:f,inlineStylesheet:m,maskInputOptions:p,maskAttributeFn:g,maskTextFn:T,maskInputFn:y,slimDOMOptions:x,dataURLOptions:U,inlineImages:L,recordCanvas:N,preserveWhiteSpace:z,onSerialize:S,onIframeLoad:_,iframeLoadTimeout:I,onStylesheetLoad:B,stylesheetLoadTimeout:E,keepIframeSrcFn:b};for(let Me of Array.from(e.childNodes)){let Et=Dn(Me,q);Et&&F.childNodes.push(Et)}if($h(e)&&e.shadowRoot)for(let Me of Array.from(e.shadowRoot.childNodes)){let Et=Dn(Me,q);Et&&(vr(e.shadowRoot)&&(Et.isShadow=!0),F.childNodes.push(Et))}}return e.parentNode&&br(e.parentNode)&&vr(e.parentNode)&&(F.isShadow=!0),F.type===fe.Element&&F.tagName==="iframe"&&ug(e,()=>{let q=e.contentDocument;if(q&&_){let Me=Dn(q,{doc:q,mirror:r,blockClass:o,blockSelector:i,unblockSelector:s,maskAllText:a,maskTextClass:c,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:l,skipChild:!1,inlineStylesheet:m,maskInputOptions:p,maskAttributeFn:g,maskTextFn:T,maskInputFn:y,slimDOMOptions:x,dataURLOptions:U,inlineImages:L,recordCanvas:N,preserveWhiteSpace:z,onSerialize:S,onIframeLoad:_,iframeLoadTimeout:I,onStylesheetLoad:B,stylesheetLoadTimeout:E,keepIframeSrcFn:b});Me&&_(e,Me)}},I),F.type===fe.Element&&F.tagName==="link"&&typeof F.attributes.rel=="string"&&(F.attributes.rel==="stylesheet"||F.attributes.rel==="preload"&&typeof F.attributes.href=="string"&&Bl(F.attributes.href)==="css")&&lg(e,()=>{if(B){let q=Dn(e,{doc:n,mirror:r,blockClass:o,blockSelector:i,unblockSelector:s,maskAllText:a,maskTextClass:c,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:l,skipChild:!1,inlineStylesheet:m,maskInputOptions:p,maskAttributeFn:g,maskTextFn:T,maskInputFn:y,slimDOMOptions:x,dataURLOptions:U,inlineImages:L,recordCanvas:N,preserveWhiteSpace:z,onSerialize:S,onIframeLoad:_,iframeLoadTimeout:I,onStylesheetLoad:B,stylesheetLoadTimeout:E,keepIframeSrcFn:b});q&&B(e,q)}},E),F}function gg(e,t){let{mirror:n=new Ko,blockClass:r="rr-block",blockSelector:o=null,unblockSelector:i=null,maskAllText:s=!1,maskTextClass:a="rr-mask",unmaskTextClass:c=null,maskTextSelector:u=null,unmaskTextSelector:d=null,inlineStylesheet:l=!0,inlineImages:f=!1,recordCanvas:m=!1,maskAllInputs:p=!1,maskAttributeFn:g,maskTextFn:T,maskInputFn:y,slimDOM:x=!1,dataURLOptions:U,preserveWhiteSpace:L,onSerialize:N,onIframeLoad:S,iframeLoadTimeout:_,onStylesheetLoad:I,stylesheetLoadTimeout:B,keepIframeSrcFn:E=()=>!1}=t||{};return Dn(e,{doc:e,mirror:n,blockClass:r,blockSelector:o,unblockSelector:i,maskAllText:s,maskTextClass:a,unmaskTextClass:c,maskTextSelector:u,unmaskTextSelector:d,skipChild:!1,inlineStylesheet:l,maskInputOptions:p===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0}:p===!1?{}:p,maskAttributeFn:g,maskTextFn:T,maskInputFn:y,slimDOMOptions:x===!0||x==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:x==="all",headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:x===!1?{}:x,dataURLOptions:U,inlineImages:f,recordCanvas:m,preserveWhiteSpace:L,onSerialize:N,onIframeLoad:S,iframeLoadTimeout:_,onStylesheetLoad:I,stylesheetLoadTimeout:B,keepIframeSrcFn:E,newlyAddedElement:!1})}function Wt(e){let t,n=e[0],r=1;for(;r<e.length;){let o=e[r],i=e[r+1];if(r+=2,(o==="optionalAccess"||o==="optionalCall")&&n==null)return;o==="access"||o==="optionalAccess"?(t=n,n=i(n)):(o==="call"||o==="optionalCall")&&(n=i((...s)=>n.call(t,...s)),t=void 0)}return n}function Ne(e,t,n=document){let r={capture:!0,passive:!0};return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t,r)}var Nn=`Please stop import mirror directly. Instead of that,\r
now you can use replayer.getMirror() to access the mirror instance of a replayer,\r
or you can use record.mirror to access the mirror instance during recording.`,Il={map:{},getId(){return console.error(Nn),-1},getNode(){return console.error(Nn),null},removeNodeFromMap(){console.error(Nn)},has(){return console.error(Nn),!1},reset(){console.error(Nn)}};typeof window<"u"&&window.Proxy&&window.Reflect&&(Il=new Proxy(Il,{get(e,t,n){return t==="map"&&console.error(Nn),Reflect.get(e,t,n)}}));function kr(e,t,n={}){let r=null,o=0;return function(...i){let s=Date.now();!o&&n.leading===!1&&(o=s);let a=t-(s-o),c=this;a<=0||a>t?(r&&(Ig(r),r=null),o=s,e.apply(c,i)):!r&&n.trailing!==!1&&(r=li(()=>{o=n.leading===!1?0:Date.now(),r=null,e.apply(c,i)},a))}}function jl(e,t,n,r,o=window){let i=o.Object.getOwnPropertyDescriptor(e,t);return o.Object.defineProperty(e,t,r?n:{set(s){li(()=>{n.set.call(this,s)},0),i&&i.set&&i.set.call(this,s)}}),()=>jl(e,t,i||{},!0)}function Ra(e,t,n){try{if(!(t in e))return()=>{};let r=e[t],o=n(r);return typeof o=="function"&&(o.prototype=o.prototype||{},Object.defineProperties(o,{__rrweb_original__:{enumerable:!1,value:r}})),e[t]=o,()=>{e[t]=r}}catch{return()=>{}}}var Qo=Date.now;/[1-9][0-9]{12}/.test(Date.now().toString())||(Qo=()=>new Date().getTime());function Gl(e){let t=e.document;return{left:t.scrollingElement?t.scrollingElement.scrollLeft:e.pageXOffset!==void 0?e.pageXOffset:Wt([t,"optionalAccess",n=>n.documentElement,"access",n=>n.scrollLeft])||Wt([t,"optionalAccess",n=>n.body,"optionalAccess",n=>n.parentElement,"optionalAccess",n=>n.scrollLeft])||Wt([t,"optionalAccess",n=>n.body,"optionalAccess",n=>n.scrollLeft])||0,top:t.scrollingElement?t.scrollingElement.scrollTop:e.pageYOffset!==void 0?e.pageYOffset:Wt([t,"optionalAccess",n=>n.documentElement,"access",n=>n.scrollTop])||Wt([t,"optionalAccess",n=>n.body,"optionalAccess",n=>n.parentElement,"optionalAccess",n=>n.scrollTop])||Wt([t,"optionalAccess",n=>n.body,"optionalAccess",n=>n.scrollTop])||0}}function ql(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function Yl(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function Vl(e){return e?e.nodeType===e.ELEMENT_NODE?e:e.parentElement:null}function He(e,t,n,r,o){if(!e)return!1;let i=Vl(e);if(!i)return!1;let s=On(t,n);if(!o){let u=r&&i.matches(r);return s(i)&&!u}let a=ln(i,s),c=-1;return a<0?!1:(r&&(c=ln(i,On(null,r))),a>-1&&c<0?!0:a<c)}function Sg(e,t){return t.getId(e)!==-1}function Vs(e,t){return t.getId(e)===xr}function Kl(e,t){if(br(e))return!1;let n=t.getId(e);return t.has(n)?e.parentNode&&e.parentNode.nodeType===e.DOCUMENT_NODE?!1:e.parentNode?Kl(e.parentNode,t):!0:!0}function ta(e){return!!e.changedTouches}function _g(e=window){"NodeList"in e&&!e.NodeList.prototype.forEach&&(e.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in e&&!e.DOMTokenList.prototype.forEach&&(e.DOMTokenList.prototype.forEach=Array.prototype.forEach),Node.prototype.contains||(Node.prototype.contains=(...t)=>{let n=t[0];if(!(0 in t))throw new TypeError("1 argument is required");do if(this===n)return!0;while(n=n&&n.parentNode);return!1})}function Jl(e,t){return!!(e.nodeName==="IFRAME"&&t.getMeta(e))}function Xl(e,t){return!!(e.nodeName==="LINK"&&e.nodeType===e.ELEMENT_NODE&&e.getAttribute&&e.getAttribute("rel")==="stylesheet"&&t.getMeta(e))}function na(e){return!!Wt([e,"optionalAccess",t=>t.shadowRoot])}var ra=class{constructor(){this.id=1,this.styleIDMap=new WeakMap,this.idStyleMap=new Map}getId(t){return os(this.styleIDMap.get(t),()=>-1)}has(t){return this.styleIDMap.has(t)}add(t,n){if(this.has(t))return this.getId(t);let r;return n===void 0?r=this.id++:r=n,this.styleIDMap.set(t,r),this.idStyleMap.set(r,t),r}getStyle(t){return this.idStyleMap.get(t)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}};function Ql(e){let t=null;return Wt([e,"access",n=>n.getRootNode,"optionalCall",n=>n(),"optionalAccess",n=>n.nodeType])===Node.DOCUMENT_FRAGMENT_NODE&&e.getRootNode().host&&(t=e.getRootNode().host),t}function yg(e){let t=e,n;for(;n=Ql(t);)t=n;return t}function Eg(e){let t=e.ownerDocument;if(!t)return!1;let n=yg(e);return t.contains(n)}function Zl(e){let t=e.ownerDocument;return t?t.contains(e)||Eg(e):!1}var bl={};function wa(e){let t=bl[e];if(t)return t;let n=window.document,r=window[e];if(n&&typeof n.createElement=="function")try{let o=n.createElement("iframe");o.hidden=!0,n.head.appendChild(o);let i=o.contentWindow;i&&i[e]&&(r=i[e]),n.head.removeChild(o)}catch{}return bl[e]=r.bind(window)}function Tg(...e){return wa("requestAnimationFrame")(...e)}function li(...e){return wa("setTimeout")(...e)}function Ig(...e){return wa("clearTimeout")(...e)}var $=(e=>(e[e.DomContentLoaded=0]="DomContentLoaded",e[e.Load=1]="Load",e[e.FullSnapshot=2]="FullSnapshot",e[e.IncrementalSnapshot=3]="IncrementalSnapshot",e[e.Meta=4]="Meta",e[e.Custom=5]="Custom",e[e.Plugin=6]="Plugin",e))($||{}),P=(e=>(e[e.Mutation=0]="Mutation",e[e.MouseMove=1]="MouseMove",e[e.MouseInteraction=2]="MouseInteraction",e[e.Scroll=3]="Scroll",e[e.ViewportResize=4]="ViewportResize",e[e.Input=5]="Input",e[e.TouchMove=6]="TouchMove",e[e.MediaInteraction=7]="MediaInteraction",e[e.StyleSheetRule=8]="StyleSheetRule",e[e.CanvasMutation=9]="CanvasMutation",e[e.Font=10]="Font",e[e.Log=11]="Log",e[e.Drag=12]="Drag",e[e.StyleDeclaration=13]="StyleDeclaration",e[e.Selection=14]="Selection",e[e.AdoptedStyleSheet=15]="AdoptedStyleSheet",e[e.CustomElement=16]="CustomElement",e))(P||{}),Ae=(e=>(e[e.MouseUp=0]="MouseUp",e[e.MouseDown=1]="MouseDown",e[e.Click=2]="Click",e[e.ContextMenu=3]="ContextMenu",e[e.DblClick=4]="DblClick",e[e.Focus=5]="Focus",e[e.Blur=6]="Blur",e[e.TouchStart=7]="TouchStart",e[e.TouchMove_Departed=8]="TouchMove_Departed",e[e.TouchEnd=9]="TouchEnd",e[e.TouchCancel=10]="TouchCancel",e))(Ae||{}),kt=(e=>(e[e.Mouse=0]="Mouse",e[e.Pen=1]="Pen",e[e.Touch=2]="Touch",e))(kt||{});function bg(e){let t,n=e[0],r=1;for(;r<e.length;){let o=e[r],i=e[r+1];if(r+=2,(o==="optionalAccess"||o==="optionalCall")&&n==null)return;o==="access"||o==="optionalAccess"?(t=n,n=i(n)):(o==="call"||o==="optionalCall")&&(n=i((...s)=>n.call(t,...s)),t=void 0)}return n}function vl(e){return"__ln"in e}var oa=class{constructor(){this.length=0,this.head=null,this.tail=null}get(t){if(t>=this.length)throw new Error("Position outside of list range");let n=this.head;for(let r=0;r<t;r++)n=bg([n,"optionalAccess",o=>o.next])||null;return n}addNode(t){let n={value:t,previous:null,next:null};if(t.__ln=n,t.previousSibling&&vl(t.previousSibling)){let r=t.previousSibling.__ln.next;n.next=r,n.previous=t.previousSibling.__ln,t.previousSibling.__ln.next=n,r&&(r.previous=n)}else if(t.nextSibling&&vl(t.nextSibling)&&t.nextSibling.__ln.previous){let r=t.nextSibling.__ln.previous;n.previous=r,n.next=t.nextSibling.__ln,t.nextSibling.__ln.previous=n,r&&(r.next=n)}else this.head&&(this.head.previous=n),n.next=this.head,this.head=n;n.next===null&&(this.tail=n),this.length++}removeNode(t){let n=t.__ln;this.head&&(n.previous?(n.previous.next=n.next,n.next?n.next.previous=n.previous:this.tail=n.previous):(this.head=n.next,this.head?this.head.previous=null:this.tail=null),t.__ln&&delete t.__ln,this.length--)}},Cl=(e,t)=>`${e}@${t}`,ia=class{constructor(){this.frozen=!1,this.locked=!1,this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.mapRemoves=[],this.movedMap={},this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.processMutations=t=>{t.forEach(this.processMutation),this.emit()},this.emit=()=>{if(this.frozen||this.locked)return;let t=[],n=new Set,r=new oa,o=c=>{let u=c,d=xr;for(;d===xr;)u=u&&u.nextSibling,d=u&&this.mirror.getId(u);return d},i=c=>{if(!c.parentNode||!Zl(c))return;let u=br(c.parentNode)?this.mirror.getId(Ql(c)):this.mirror.getId(c.parentNode),d=o(c);if(u===-1||d===-1)return r.addNode(c);let l=Dn(c,{doc:this.doc,mirror:this.mirror,blockClass:this.blockClass,blockSelector:this.blockSelector,maskAllText:this.maskAllText,unblockSelector:this.unblockSelector,maskTextClass:this.maskTextClass,unmaskTextClass:this.unmaskTextClass,maskTextSelector:this.maskTextSelector,unmaskTextSelector:this.unmaskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:this.inlineStylesheet,maskInputOptions:this.maskInputOptions,maskAttributeFn:this.maskAttributeFn,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,dataURLOptions:this.dataURLOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,onSerialize:f=>{Jl(f,this.mirror)&&!He(f,this.blockClass,this.blockSelector,this.unblockSelector,!1)&&this.iframeManager.addIframe(f),Xl(f,this.mirror)&&this.stylesheetManager.trackLinkElement(f),na(c)&&this.shadowDomManager.addShadowRoot(c.shadowRoot,this.doc)},onIframeLoad:(f,m)=>{He(f,this.blockClass,this.blockSelector,this.unblockSelector,!1)||(this.iframeManager.attachIframe(f,m),f.contentWindow&&this.canvasManager.addWindow(f.contentWindow),this.shadowDomManager.observeAttachShadow(f))},onStylesheetLoad:(f,m)=>{this.stylesheetManager.attachLinkElement(f,m)}});l&&(t.push({parentId:u,nextId:d,node:l}),n.add(l.id))};for(;this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(let c of this.movedSet)Rl(this.removes,c,this.mirror)&&!this.movedSet.has(c.parentNode)||i(c);for(let c of this.addedSet)!wl(this.droppedSet,c)&&!Rl(this.removes,c,this.mirror)||wl(this.movedSet,c)?i(c):this.droppedSet.add(c);let s=null;for(;r.length;){let c=null;if(s){let u=this.mirror.getId(s.value.parentNode),d=o(s.value);u!==-1&&d!==-1&&(c=s)}if(!c){let u=r.tail;for(;u;){let d=u;if(u=u.previous,d){let l=this.mirror.getId(d.value.parentNode);if(o(d.value)===-1)continue;if(l!==-1){c=d;break}else{let m=d.value;if(m.parentNode&&m.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE){let p=m.parentNode.host;if(this.mirror.getId(p)!==-1){c=d;break}}}}}}if(!c){for(;r.head;)r.removeNode(r.head.value);break}s=c.previous,r.removeNode(c.value),i(c.value)}let a={texts:this.texts.map(c=>({id:this.mirror.getId(c.node),value:c.value})).filter(c=>!n.has(c.id)).filter(c=>this.mirror.has(c.id)),attributes:this.attributes.map(c=>{let{attributes:u}=c;if(typeof u.style=="string"){let d=JSON.stringify(c.styleDiff),l=JSON.stringify(c._unchangedStyles);d.length<u.style.length&&(d+l).split("var(").length===u.style.split("var(").length&&(u.style=c.styleDiff)}return{id:this.mirror.getId(c.node),attributes:u}}).filter(c=>!n.has(c.id)).filter(c=>this.mirror.has(c.id)),removes:this.removes,adds:t};!a.texts.length&&!a.attributes.length&&!a.removes.length&&!a.adds.length||(this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.movedMap={},this.mutationCb(a))},this.processMutation=t=>{if(!Vs(t.target,this.mirror))switch(t.type){case"characterData":{let n=t.target.textContent;!He(t.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)&&n!==t.oldValue&&this.texts.push({value:Fn(t.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,this.maskAllText)&&n?this.maskTextFn?this.maskTextFn(n,Vl(t.target)):n.replace(/[\S]/g,"*"):n,node:t.target});break}case"attributes":{let n=t.target,r=t.attributeName,o=t.target.getAttribute(r);if(r==="value"){let s=va(n),a=n.tagName;o=Jo(n,a,s);let c=ci({maskInputOptions:this.maskInputOptions,tagName:a,type:s}),u=Fn(t.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,c);o=wr({isMasked:u,element:n,value:o,maskInputFn:this.maskInputFn})}if(He(t.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||o===t.oldValue)return;let i=this.attributeMap.get(t.target);if(n.tagName==="IFRAME"&&r==="src"&&!this.keepIframeSrcFn(o))if(!n.contentDocument)r="rr_src";else return;if(i||(i={node:t.target,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(i),this.attributeMap.set(t.target,i)),r==="type"&&n.tagName==="INPUT"&&(t.oldValue||"").toLowerCase()==="password"&&n.setAttribute("data-rr-is-password","true"),!zl(n.tagName,r)&&(i.attributes[r]=Wl(this.doc,Pn(n.tagName),Pn(r),o,n,this.maskAttributeFn),r==="style")){if(!this.unattachedDoc)try{this.unattachedDoc=document.implementation.createHTMLDocument()}catch{this.unattachedDoc=this.doc}let s=this.unattachedDoc.createElement("span");t.oldValue&&s.setAttribute("style",t.oldValue);for(let a of Array.from(n.style)){let c=n.style.getPropertyValue(a),u=n.style.getPropertyPriority(a);c!==s.style.getPropertyValue(a)||u!==s.style.getPropertyPriority(a)?u===""?i.styleDiff[a]=c:i.styleDiff[a]=[c,u]:i._unchangedStyles[a]=[c,u]}for(let a of Array.from(s.style))n.style.getPropertyValue(a)===""&&(i.styleDiff[a]=!1)}break}case"childList":{if(He(t.target,this.blockClass,this.blockSelector,this.unblockSelector,!0))return;t.addedNodes.forEach(n=>this.genAdds(n,t.target)),t.removedNodes.forEach(n=>{let r=this.mirror.getId(n),o=br(t.target)?this.mirror.getId(t.target.host):this.mirror.getId(t.target);He(t.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||Vs(n,this.mirror)||!Sg(n,this.mirror)||(this.addedSet.has(n)?(sa(this.addedSet,n),this.droppedSet.add(n)):this.addedSet.has(t.target)&&r===-1||Kl(t.target,this.mirror)||(this.movedSet.has(n)&&this.movedMap[Cl(r,o)]?sa(this.movedSet,n):this.removes.push({parentId:o,id:r,isShadow:br(t.target)&&vr(t.target)?!0:void 0})),this.mapRemoves.push(n))});break}}},this.genAdds=(t,n)=>{if(!this.processedNodeManager.inOtherBuffer(t,this)&&!(this.addedSet.has(t)||this.movedSet.has(t))){if(this.mirror.hasNode(t)){if(Vs(t,this.mirror))return;this.movedSet.add(t);let r=null;n&&this.mirror.hasNode(n)&&(r=this.mirror.getId(n)),r&&r!==-1&&(this.movedMap[Cl(this.mirror.getId(t),r)]=!0)}else this.addedSet.add(t),this.droppedSet.delete(t);He(t,this.blockClass,this.blockSelector,this.unblockSelector,!1)||(t.childNodes.forEach(r=>this.genAdds(r)),na(t)&&t.shadowRoot.childNodes.forEach(r=>{this.processedNodeManager.add(r,this),this.genAdds(r,t)}))}}}init(t){["mutationCb","blockClass","blockSelector","unblockSelector","maskAllText","maskTextClass","unmaskTextClass","maskTextSelector","unmaskTextSelector","inlineStylesheet","maskInputOptions","maskAttributeFn","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager","processedNodeManager"].forEach(n=>{this[n]=t[n]})}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}};function sa(e,t){e.delete(t),t.childNodes.forEach(n=>sa(e,n))}function Rl(e,t,n){return e.length===0?!1:vg(e,t,n)}function vg(e,t,n){let r=t.parentNode;for(;r;){let o=n.getId(r);if(e.some(i=>i.id===o))return!0;r=r.parentNode}return!1}function wl(e,t){return e.size===0?!1:ed(e,t)}function ed(e,t){let{parentNode:n}=t;return n?e.has(n)?!0:ed(e,n):!1}var Cr;function Cg(e){Cr=e}function Rg(){Cr=void 0}var G=e=>Cr?(...n)=>{try{return e(...n)}catch(r){if(Cr&&Cr(r)===!0)return()=>{};throw r}}:e;function at(e){let t,n=e[0],r=1;for(;r<e.length;){let o=e[r],i=e[r+1];if(r+=2,(o==="optionalAccess"||o==="optionalCall")&&n==null)return;o==="access"||o==="optionalAccess"?(t=n,n=i(n)):(o==="call"||o==="optionalCall")&&(n=i((...s)=>n.call(t,...s)),t=void 0)}return n}var Ln=[];function Dr(e){try{if("composedPath"in e){let t=e.composedPath();if(t.length)return t[0]}else if("path"in e&&e.path.length)return e.path[0]}catch{}return e&&e.target}function td(e,t){let n=new ia;Ln.push(n),n.init(e);let r=window.MutationObserver||window.__rrMutationObserver,o=at([window,"optionalAccess",s=>s.Zone,"optionalAccess",s=>s.__symbol__,"optionalCall",s=>s("MutationObserver")]);o&&window[o]&&(r=window[o]);let i=new r(G(s=>{e.onMutation&&e.onMutation(s)===!1||n.processMutations.bind(n)(s)}));return i.observe(t,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),i}function wg({mousemoveCb:e,sampling:t,doc:n,mirror:r}){if(t.mousemove===!1)return()=>{};let o=typeof t.mousemove=="number"?t.mousemove:50,i=typeof t.mousemoveCallback=="number"?t.mousemoveCallback:500,s=[],a,c=kr(G(l=>{let f=Date.now()-a;e(s.map(m=>(m.timeOffset-=f,m)),l),s=[],a=null}),i),u=G(kr(G(l=>{let f=Dr(l),{clientX:m,clientY:p}=ta(l)?l.changedTouches[0]:l;a||(a=Qo()),s.push({x:m,y:p,id:r.getId(f),timeOffset:Qo()-a}),c(typeof DragEvent<"u"&&l instanceof DragEvent?P.Drag:l instanceof MouseEvent?P.MouseMove:P.TouchMove)}),o,{trailing:!1})),d=[Ne("mousemove",u,n),Ne("touchmove",u,n),Ne("drag",u,n)];return G(()=>{d.forEach(l=>l())})}function xg({mouseInteractionCb:e,doc:t,mirror:n,blockClass:r,blockSelector:o,unblockSelector:i,sampling:s}){if(s.mouseInteraction===!1)return()=>{};let a=s.mouseInteraction===!0||s.mouseInteraction===void 0?{}:s.mouseInteraction,c=[],u=null,d=l=>f=>{let m=Dr(f);if(He(m,r,o,i,!0))return;let p=null,g=l;if("pointerType"in f){switch(f.pointerType){case"mouse":p=kt.Mouse;break;case"touch":p=kt.Touch;break;case"pen":p=kt.Pen;break}p===kt.Touch?Ae[l]===Ae.MouseDown?g="TouchStart":Ae[l]===Ae.MouseUp&&(g="TouchEnd"):kt.Pen}else ta(f)&&(p=kt.Touch);p!==null?(u=p,(g.startsWith("Touch")&&p===kt.Touch||g.startsWith("Mouse")&&p===kt.Mouse)&&(p=null)):Ae[l]===Ae.Click&&(p=u,u=null);let T=ta(f)?f.changedTouches[0]:f;if(!T)return;let y=n.getId(m),{clientX:x,clientY:U}=T;G(e)({type:Ae[g],id:y,x,y:U,...p!==null&&{pointerType:p}})};return Object.keys(Ae).filter(l=>Number.isNaN(Number(l))&&!l.endsWith("_Departed")&&a[l]!==!1).forEach(l=>{let f=Pn(l),m=d(l);if(window.PointerEvent)switch(Ae[l]){case Ae.MouseDown:case Ae.MouseUp:f=f.replace("mouse","pointer");break;case Ae.TouchStart:case Ae.TouchEnd:return}c.push(Ne(f,m,t))}),G(()=>{c.forEach(l=>l())})}function nd({scrollCb:e,doc:t,mirror:n,blockClass:r,blockSelector:o,unblockSelector:i,sampling:s}){let a=G(kr(G(c=>{let u=Dr(c);if(!u||He(u,r,o,i,!0))return;let d=n.getId(u);if(u===t&&t.defaultView){let l=Gl(t.defaultView);e({id:d,x:l.left,y:l.top})}else e({id:d,x:u.scrollLeft,y:u.scrollTop})}),s.scroll||100));return Ne("scroll",a,t)}function kg({viewportResizeCb:e},{win:t}){let n=-1,r=-1,o=G(kr(G(()=>{let i=ql(),s=Yl();(n!==i||r!==s)&&(e({width:Number(s),height:Number(i)}),n=i,r=s)}),200));return Ne("resize",o,t)}var Ag=["INPUT","TEXTAREA","SELECT"],xl=new WeakMap;function Ng({inputCb:e,doc:t,mirror:n,blockClass:r,blockSelector:o,unblockSelector:i,ignoreClass:s,ignoreSelector:a,maskInputOptions:c,maskInputFn:u,sampling:d,userTriggeredOnInput:l,maskTextClass:f,unmaskTextClass:m,maskTextSelector:p,unmaskTextSelector:g}){function T(_){let I=Dr(_),B=_.isTrusted,E=I&&Zs(I.tagName);if(E==="OPTION"&&(I=I.parentElement),!I||!E||Ag.indexOf(E)<0||He(I,r,o,i,!0))return;let b=I;if(b.classList.contains(s)||a&&b.matches(a))return;let M=va(I),z=Jo(b,E,M),Q=!1,le=ci({maskInputOptions:c,tagName:E,type:M}),F=Fn(I,f,p,m,g,le);(M==="radio"||M==="checkbox")&&(Q=I.checked),z=wr({isMasked:F,element:I,value:z,maskInputFn:u}),y(I,l?{text:z,isChecked:Q,userTriggered:B}:{text:z,isChecked:Q});let me=I.name;M==="radio"&&me&&Q&&t.querySelectorAll(`input[type="radio"][name="${me}"]`).forEach(q=>{if(q!==I){let Me=wr({isMasked:F,element:q,value:Jo(q,E,M),maskInputFn:u});y(q,l?{text:Me,isChecked:!Q,userTriggered:!1}:{text:Me,isChecked:!Q})}})}function y(_,I){let B=xl.get(_);if(!B||B.text!==I.text||B.isChecked!==I.isChecked){xl.set(_,I);let E=n.getId(_);G(e)({...I,id:E})}}let U=(d.input==="last"?["change"]:["input","change"]).map(_=>Ne(_,G(T),t)),L=t.defaultView;if(!L)return()=>{U.forEach(_=>_())};let N=L.Object.getOwnPropertyDescriptor(L.HTMLInputElement.prototype,"value"),S=[[L.HTMLInputElement.prototype,"value"],[L.HTMLInputElement.prototype,"checked"],[L.HTMLSelectElement.prototype,"value"],[L.HTMLTextAreaElement.prototype,"value"],[L.HTMLSelectElement.prototype,"selectedIndex"],[L.HTMLOptionElement.prototype,"selected"]];return N&&N.set&&U.push(...S.map(_=>jl(_[0],_[1],{set(){G(T)({target:this,isTrusted:!1})}},!1,L))),G(()=>{U.forEach(_=>_())})}function Zo(e){let t=[];function n(r,o){if(jo("CSSGroupingRule")&&r.parentRule instanceof CSSGroupingRule||jo("CSSMediaRule")&&r.parentRule instanceof CSSMediaRule||jo("CSSSupportsRule")&&r.parentRule instanceof CSSSupportsRule||jo("CSSConditionRule")&&r.parentRule instanceof CSSConditionRule){let s=Array.from(r.parentRule.cssRules).indexOf(r);o.unshift(s)}else if(r.parentStyleSheet){let s=Array.from(r.parentStyleSheet.cssRules).indexOf(r);o.unshift(s)}return o}return n(e,t)}function zt(e,t,n){let r,o;return e?(e.ownerNode?r=t.getId(e.ownerNode):o=n.getId(e),{styleId:o,id:r}):{}}function Mg({styleSheetRuleCb:e,mirror:t,stylesheetManager:n},{win:r}){if(!r.CSSStyleSheet||!r.CSSStyleSheet.prototype)return()=>{};let o=r.CSSStyleSheet.prototype.insertRule;r.CSSStyleSheet.prototype.insertRule=new Proxy(o,{apply:G((d,l,f)=>{let[m,p]=f,{id:g,styleId:T}=zt(l,t,n.styleMirror);return(g&&g!==-1||T&&T!==-1)&&e({id:g,styleId:T,adds:[{rule:m,index:p}]}),d.apply(l,f)})});let i=r.CSSStyleSheet.prototype.deleteRule;r.CSSStyleSheet.prototype.deleteRule=new Proxy(i,{apply:G((d,l,f)=>{let[m]=f,{id:p,styleId:g}=zt(l,t,n.styleMirror);return(p&&p!==-1||g&&g!==-1)&&e({id:p,styleId:g,removes:[{index:m}]}),d.apply(l,f)})});let s;r.CSSStyleSheet.prototype.replace&&(s=r.CSSStyleSheet.prototype.replace,r.CSSStyleSheet.prototype.replace=new Proxy(s,{apply:G((d,l,f)=>{let[m]=f,{id:p,styleId:g}=zt(l,t,n.styleMirror);return(p&&p!==-1||g&&g!==-1)&&e({id:p,styleId:g,replace:m}),d.apply(l,f)})}));let a;r.CSSStyleSheet.prototype.replaceSync&&(a=r.CSSStyleSheet.prototype.replaceSync,r.CSSStyleSheet.prototype.replaceSync=new Proxy(a,{apply:G((d,l,f)=>{let[m]=f,{id:p,styleId:g}=zt(l,t,n.styleMirror);return(p&&p!==-1||g&&g!==-1)&&e({id:p,styleId:g,replaceSync:m}),d.apply(l,f)})}));let c={};Go("CSSGroupingRule")?c.CSSGroupingRule=r.CSSGroupingRule:(Go("CSSMediaRule")&&(c.CSSMediaRule=r.CSSMediaRule),Go("CSSConditionRule")&&(c.CSSConditionRule=r.CSSConditionRule),Go("CSSSupportsRule")&&(c.CSSSupportsRule=r.CSSSupportsRule));let u={};return Object.entries(c).forEach(([d,l])=>{u[d]={insertRule:l.prototype.insertRule,deleteRule:l.prototype.deleteRule},l.prototype.insertRule=new Proxy(u[d].insertRule,{apply:G((f,m,p)=>{let[g,T]=p,{id:y,styleId:x}=zt(m.parentStyleSheet,t,n.styleMirror);return(y&&y!==-1||x&&x!==-1)&&e({id:y,styleId:x,adds:[{rule:g,index:[...Zo(m),T||0]}]}),f.apply(m,p)})}),l.prototype.deleteRule=new Proxy(u[d].deleteRule,{apply:G((f,m,p)=>{let[g]=p,{id:T,styleId:y}=zt(m.parentStyleSheet,t,n.styleMirror);return(T&&T!==-1||y&&y!==-1)&&e({id:T,styleId:y,removes:[{index:[...Zo(m),g]}]}),f.apply(m,p)})})}),G(()=>{r.CSSStyleSheet.prototype.insertRule=o,r.CSSStyleSheet.prototype.deleteRule=i,s&&(r.CSSStyleSheet.prototype.replace=s),a&&(r.CSSStyleSheet.prototype.replaceSync=a),Object.entries(c).forEach(([d,l])=>{l.prototype.insertRule=u[d].insertRule,l.prototype.deleteRule=u[d].deleteRule})})}function rd({mirror:e,stylesheetManager:t},n){let r=null;n.nodeName==="#document"?r=e.getId(n):r=e.getId(n.host);let o=n.nodeName==="#document"?at([n,"access",s=>s.defaultView,"optionalAccess",s=>s.Document]):at([n,"access",s=>s.ownerDocument,"optionalAccess",s=>s.defaultView,"optionalAccess",s=>s.ShadowRoot]),i=at([o,"optionalAccess",s=>s.prototype])?Object.getOwnPropertyDescriptor(at([o,"optionalAccess",s=>s.prototype]),"adoptedStyleSheets"):void 0;return r===null||r===-1||!o||!i?()=>{}:(Object.defineProperty(n,"adoptedStyleSheets",{configurable:i.configurable,enumerable:i.enumerable,get(){return at([i,"access",s=>s.get,"optionalAccess",s=>s.call,"call",s=>s(this)])},set(s){let a=at([i,"access",c=>c.set,"optionalAccess",c=>c.call,"call",c=>c(this,s)]);if(r!==null&&r!==-1)try{t.adoptStyleSheets(s,r)}catch{}return a}}),G(()=>{Object.defineProperty(n,"adoptedStyleSheets",{configurable:i.configurable,enumerable:i.enumerable,get:i.get,set:i.set})}))}function Og({styleDeclarationCb:e,mirror:t,ignoreCSSAttributes:n,stylesheetManager:r},{win:o}){let i=o.CSSStyleDeclaration.prototype.setProperty;o.CSSStyleDeclaration.prototype.setProperty=new Proxy(i,{apply:G((a,c,u)=>{let[d,l,f]=u;if(n.has(d))return i.apply(c,[d,l,f]);let{id:m,styleId:p}=zt(at([c,"access",g=>g.parentRule,"optionalAccess",g=>g.parentStyleSheet]),t,r.styleMirror);return(m&&m!==-1||p&&p!==-1)&&e({id:m,styleId:p,set:{property:d,value:l,priority:f},index:Zo(c.parentRule)}),a.apply(c,u)})});let s=o.CSSStyleDeclaration.prototype.removeProperty;return o.CSSStyleDeclaration.prototype.removeProperty=new Proxy(s,{apply:G((a,c,u)=>{let[d]=u;if(n.has(d))return s.apply(c,[d]);let{id:l,styleId:f}=zt(at([c,"access",m=>m.parentRule,"optionalAccess",m=>m.parentStyleSheet]),t,r.styleMirror);return(l&&l!==-1||f&&f!==-1)&&e({id:l,styleId:f,remove:{property:d},index:Zo(c.parentRule)}),a.apply(c,u)})}),G(()=>{o.CSSStyleDeclaration.prototype.setProperty=i,o.CSSStyleDeclaration.prototype.removeProperty=s})}function Dg({mediaInteractionCb:e,blockClass:t,blockSelector:n,unblockSelector:r,mirror:o,sampling:i,doc:s}){let a=G(u=>kr(G(d=>{let l=Dr(d);if(!l||He(l,t,n,r,!0))return;let{currentTime:f,volume:m,muted:p,playbackRate:g}=l;e({type:u,id:o.getId(l),currentTime:f,volume:m,muted:p,playbackRate:g})}),i.media||500)),c=[Ne("play",a(0),s),Ne("pause",a(1),s),Ne("seeked",a(2),s),Ne("volumechange",a(3),s),Ne("ratechange",a(4),s)];return G(()=>{c.forEach(u=>u())})}function Lg({fontCb:e,doc:t}){let n=t.defaultView;if(!n)return()=>{};let r=[],o=new WeakMap,i=n.FontFace;n.FontFace=function(c,u,d){let l=new i(c,u,d);return o.set(l,{family:c,buffer:typeof u!="string",descriptors:d,fontSource:typeof u=="string"?u:JSON.stringify(Array.from(new Uint8Array(u)))}),l};let s=Ra(t.fonts,"add",function(a){return function(c){return li(G(()=>{let u=o.get(c);u&&(e(u),o.delete(c))}),0),a.apply(this,[c])}});return r.push(()=>{n.FontFace=i}),r.push(s),G(()=>{r.forEach(a=>a())})}function Pg(e){let{doc:t,mirror:n,blockClass:r,blockSelector:o,unblockSelector:i,selectionCb:s}=e,a=!0,c=G(()=>{let u=t.getSelection();if(!u||a&&at([u,"optionalAccess",f=>f.isCollapsed]))return;a=u.isCollapsed||!1;let d=[],l=u.rangeCount||0;for(let f=0;f<l;f++){let m=u.getRangeAt(f),{startContainer:p,startOffset:g,endContainer:T,endOffset:y}=m;He(p,r,o,i,!0)||He(T,r,o,i,!0)||d.push({start:n.getId(p),startOffset:g,end:n.getId(T),endOffset:y})}s({ranges:d})});return c(),Ne("selectionchange",c)}function Fg({doc:e,customElementCb:t}){let n=e.defaultView;return!n||!n.customElements?()=>{}:Ra(n.customElements,"define",function(o){return function(i,s,a){try{t({define:{name:i}})}catch{}return o.apply(this,[i,s,a])}})}function Ug(e,t={}){let n=e.doc.defaultView;if(!n)return()=>{};let r;e.recordDOM&&(r=td(e,e.doc));let o=wg(e),i=xg(e),s=nd(e),a=kg(e,{win:n}),c=Ng(e),u=Dg(e),d=()=>{},l=()=>{},f=()=>{},m=()=>{};e.recordDOM&&(d=Mg(e,{win:n}),l=rd(e,e.doc),f=Og(e,{win:n}),e.collectFonts&&(m=Lg(e)));let p=Pg(e),g=Fg(e),T=[];for(let y of e.plugins)T.push(y.observer(y.callback,n,y.options));return G(()=>{Ln.forEach(y=>y.reset()),at([r,"optionalAccess",y=>y.disconnect,"call",y=>y()]),o(),i(),s(),a(),c(),u(),d(),l(),f(),m(),p(),g(),T.forEach(y=>y())})}function jo(e){return typeof window[e]<"u"}function Go(e){return!!(typeof window[e]<"u"&&window[e].prototype&&"insertRule"in window[e].prototype&&"deleteRule"in window[e].prototype)}var Ar=class{constructor(t){this.generateIdFn=t,this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap}getId(t,n,r,o){let i=r||this.getIdToRemoteIdMap(t),s=o||this.getRemoteIdToIdMap(t),a=i.get(n);return a||(a=this.generateIdFn(),i.set(n,a),s.set(a,n)),a}getIds(t,n){let r=this.getIdToRemoteIdMap(t),o=this.getRemoteIdToIdMap(t);return n.map(i=>this.getId(t,i,r,o))}getRemoteId(t,n,r){let o=r||this.getRemoteIdToIdMap(t);if(typeof n!="number")return n;let i=o.get(n);return i||-1}getRemoteIds(t,n){let r=this.getRemoteIdToIdMap(t);return n.map(o=>this.getRemoteId(t,o,r))}reset(t){if(!t){this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap;return}this.iframeIdToRemoteIdMap.delete(t),this.iframeRemoteIdToIdMap.delete(t)}getIdToRemoteIdMap(t){let n=this.iframeIdToRemoteIdMap.get(t);return n||(n=new Map,this.iframeIdToRemoteIdMap.set(t,n)),n}getRemoteIdToIdMap(t){let n=this.iframeRemoteIdToIdMap.get(t);return n||(n=new Map,this.iframeRemoteIdToIdMap.set(t,n)),n}};function kl(e){let t,n=e[0],r=1;for(;r<e.length;){let o=e[r],i=e[r+1];if(r+=2,(o==="optionalAccess"||o==="optionalCall")&&n==null)return;o==="access"||o==="optionalAccess"?(t=n,n=i(n)):(o==="call"||o==="optionalCall")&&(n=i((...s)=>n.call(t,...s)),t=void 0)}return n}var aa=class{constructor(){this.crossOriginIframeMirror=new Ar(Ca),this.crossOriginIframeRootIdMap=new WeakMap}addIframe(){}addLoadListener(){}attachIframe(){}},ca=class{constructor(t){this.iframes=new WeakMap,this.crossOriginIframeMap=new WeakMap,this.crossOriginIframeMirror=new Ar(Ca),this.crossOriginIframeRootIdMap=new WeakMap,this.mutationCb=t.mutationCb,this.wrappedEmit=t.wrappedEmit,this.stylesheetManager=t.stylesheetManager,this.recordCrossOriginIframes=t.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new Ar(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=t.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}addIframe(t){this.iframes.set(t,!0),t.contentWindow&&this.crossOriginIframeMap.set(t.contentWindow,t)}addLoadListener(t){this.loadListener=t}attachIframe(t,n){this.mutationCb({adds:[{parentId:this.mirror.getId(t),nextId:null,node:n}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),kl([this,"access",r=>r.loadListener,"optionalCall",r=>r(t)]),t.contentDocument&&t.contentDocument.adoptedStyleSheets&&t.contentDocument.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(t.contentDocument.adoptedStyleSheets,this.mirror.getId(t.contentDocument))}handleMessage(t){let n=t;if(n.data.type!=="rrweb"||n.origin!==n.data.origin||!t.source)return;let o=this.crossOriginIframeMap.get(t.source);if(!o)return;let i=this.transformCrossOriginEvent(o,n.data.event);i&&this.wrappedEmit(i,n.data.isCheckout)}transformCrossOriginEvent(t,n){switch(n.type){case $.FullSnapshot:{this.crossOriginIframeMirror.reset(t),this.crossOriginIframeStyleMirror.reset(t),this.replaceIdOnNode(n.data.node,t);let r=n.data.node.id;return this.crossOriginIframeRootIdMap.set(t,r),this.patchRootIdOnNode(n.data.node,r),{timestamp:n.timestamp,type:$.IncrementalSnapshot,data:{source:P.Mutation,adds:[{parentId:this.mirror.getId(t),nextId:null,node:n.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}}}case $.Meta:case $.Load:case $.DomContentLoaded:return!1;case $.Plugin:return n;case $.Custom:return this.replaceIds(n.data.payload,t,["id","parentId","previousId","nextId"]),n;case $.IncrementalSnapshot:switch(n.data.source){case P.Mutation:return n.data.adds.forEach(r=>{this.replaceIds(r,t,["parentId","nextId","previousId"]),this.replaceIdOnNode(r.node,t);let o=this.crossOriginIframeRootIdMap.get(t);o&&this.patchRootIdOnNode(r.node,o)}),n.data.removes.forEach(r=>{this.replaceIds(r,t,["parentId","id"])}),n.data.attributes.forEach(r=>{this.replaceIds(r,t,["id"])}),n.data.texts.forEach(r=>{this.replaceIds(r,t,["id"])}),n;case P.Drag:case P.TouchMove:case P.MouseMove:return n.data.positions.forEach(r=>{this.replaceIds(r,t,["id"])}),n;case P.ViewportResize:return!1;case P.MediaInteraction:case P.MouseInteraction:case P.Scroll:case P.CanvasMutation:case P.Input:return this.replaceIds(n.data,t,["id"]),n;case P.StyleSheetRule:case P.StyleDeclaration:return this.replaceIds(n.data,t,["id"]),this.replaceStyleIds(n.data,t,["styleId"]),n;case P.Font:return n;case P.Selection:return n.data.ranges.forEach(r=>{this.replaceIds(r,t,["start","end"])}),n;case P.AdoptedStyleSheet:return this.replaceIds(n.data,t,["id"]),this.replaceStyleIds(n.data,t,["styleIds"]),kl([n,"access",r=>r.data,"access",r=>r.styles,"optionalAccess",r=>r.forEach,"call",r=>r(o=>{this.replaceStyleIds(o,t,["styleId"])})]),n}}return!1}replace(t,n,r,o){for(let i of o)!Array.isArray(n[i])&&typeof n[i]!="number"||(Array.isArray(n[i])?n[i]=t.getIds(r,n[i]):n[i]=t.getId(r,n[i]));return n}replaceIds(t,n,r){return this.replace(this.crossOriginIframeMirror,t,n,r)}replaceStyleIds(t,n,r){return this.replace(this.crossOriginIframeStyleMirror,t,n,r)}replaceIdOnNode(t,n){this.replaceIds(t,n,["id","rootId"]),"childNodes"in t&&t.childNodes.forEach(r=>{this.replaceIdOnNode(r,n)})}patchRootIdOnNode(t,n){t.type!==fe.Document&&!t.rootId&&(t.rootId=n),"childNodes"in t&&t.childNodes.forEach(r=>{this.patchRootIdOnNode(r,n)})}},ua=class{init(){}addShadowRoot(){}observeAttachShadow(){}reset(){}},la=class{constructor(t){this.shadowDoms=new WeakSet,this.restoreHandlers=[],this.mutationCb=t.mutationCb,this.scrollCb=t.scrollCb,this.bypassOptions=t.bypassOptions,this.mirror=t.mirror,this.init()}init(){this.reset(),this.patchAttachShadow(Element,document)}addShadowRoot(t,n){if(!vr(t)||this.shadowDoms.has(t))return;this.shadowDoms.add(t),this.bypassOptions.canvasManager.addShadowRoot(t);let r=td({...this.bypassOptions,doc:n,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this},t);this.restoreHandlers.push(()=>r.disconnect()),this.restoreHandlers.push(nd({...this.bypassOptions,scrollCb:this.scrollCb,doc:t,mirror:this.mirror})),li(()=>{t.adoptedStyleSheets&&t.adoptedStyleSheets.length>0&&this.bypassOptions.stylesheetManager.adoptStyleSheets(t.adoptedStyleSheets,this.mirror.getId(t.host)),this.restoreHandlers.push(rd({mirror:this.mirror,stylesheetManager:this.bypassOptions.stylesheetManager},t))},0)}observeAttachShadow(t){!t.contentWindow||!t.contentDocument||this.patchAttachShadow(t.contentWindow.Element,t.contentDocument)}patchAttachShadow(t,n){let r=this;this.restoreHandlers.push(Ra(t.prototype,"attachShadow",function(o){return function(i){let s=o.call(this,i);return this.shadowRoot&&Zl(this)&&r.addShadowRoot(this.shadowRoot,n),s}}))}reset(){this.restoreHandlers.forEach(t=>{try{t()}catch{}}),this.restoreHandlers=[],this.shadowDoms=new WeakSet,this.bypassOptions.canvasManager.resetShadowRoots()}},ei=class{reset(){}freeze(){}unfreeze(){}lock(){}unlock(){}snapshot(){}addWindow(){}addShadowRoot(){}resetShadowRoots(){}},da=class{constructor(t){this.trackedLinkElements=new WeakSet,this.styleMirror=new ra,this.mutationCb=t.mutationCb,this.adoptedStyleSheetCb=t.adoptedStyleSheetCb}attachLinkElement(t,n){"_cssText"in n.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:n.id,attributes:n.attributes}]}),this.trackLinkElement(t)}trackLinkElement(t){this.trackedLinkElements.has(t)||(this.trackedLinkElements.add(t),this.trackStylesheetInLinkElement(t))}adoptStyleSheets(t,n){if(t.length===0)return;let r={id:n,styleIds:[]},o=[];for(let i of t){let s;this.styleMirror.has(i)?s=this.styleMirror.getId(i):(s=this.styleMirror.add(i),o.push({styleId:s,rules:Array.from(i.rules||CSSRule,(a,c)=>({rule:Ul(a),index:c}))})),r.styleIds.push(s)}o.length>0&&(r.styles=o),this.adoptedStyleSheetCb(r)}reset(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}trackStylesheetInLinkElement(t){}},fa=class{constructor(){this.nodeMap=new WeakMap,this.active=!1}inOtherBuffer(t,n){let r=this.nodeMap.get(t);return r&&Array.from(r).some(o=>o!==n)}add(t,n){this.active||(this.active=!0,Tg(()=>{this.nodeMap=new WeakMap,this.active=!1})),this.nodeMap.set(t,(this.nodeMap.get(t)||new Set).add(n))}destroy(){}},ae,ti;try{if(Array.from([1],e=>e*2)[0]!==2){let e=document.createElement("iframe");document.body.appendChild(e),Array.from=he([e,"access",t=>t.contentWindow,"optionalAccess",t=>t.Array,"access",t=>t.from])||Array.from,document.body.removeChild(e)}}catch(e){console.debug("Unable to override Array.from",e)}var st=Yh();function At(e={}){let{emit:t,checkoutEveryNms:n,checkoutEveryNth:r,blockClass:o="rr-block",blockSelector:i=null,unblockSelector:s=null,ignoreClass:a="rr-ignore",ignoreSelector:c=null,maskAllText:u=!1,maskTextClass:d="rr-mask",unmaskTextClass:l=null,maskTextSelector:f=null,unmaskTextSelector:m=null,inlineStylesheet:p=!0,maskAllInputs:g,maskInputOptions:T,slimDOMOptions:y,maskAttributeFn:x,maskInputFn:U,maskTextFn:L,maxCanvasSize:N=null,packFn:S,sampling:_={},dataURLOptions:I={},mousemoveWait:B,recordDOM:E=!0,recordCanvas:b=!1,recordCrossOriginIframes:M=!1,recordAfter:z=e.recordAfter==="DOMContentLoaded"?e.recordAfter:"load",userTriggeredOnInput:Q=!1,collectFonts:le=!1,inlineImages:F=!1,plugins:me,keepIframeSrcFn:q=()=>!1,ignoreCSSAttributes:Me=new Set([]),errorHandler:Et,onMutation:Ba,getCanvasManager:Ud}=e;Cg(Et);let Br=M?window.parent===window:!0,Bn=!1;if(!Br)try{window.parent.document&&(Bn=!1)}catch{Bn=!0}if(Br&&!t)throw new Error("emit function is required");if(!Br&&!Bn)return()=>{};B!==void 0&&_.mousemove===void 0&&(_.mousemove=B),st.reset();let Si=g===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,radio:!0,checkbox:!0}:T!==void 0?T:{},_i=y===!0||y==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:y==="all",headMetaDescKeywords:y==="all"}:y||{};_g();let yi,Ei=0,Ha=Y=>{for(let Xe of me||[])Xe.eventProcessor&&(Y=Xe.eventProcessor(Y));return S&&!Bn&&(Y=S(Y)),Y};ae=(Y,Xe)=>{let j=Y;if(j.timestamp=Qo(),he([Ln,"access",re=>re[0],"optionalAccess",re=>re.isFrozen,"call",re=>re()])&&j.type!==$.FullSnapshot&&!(j.type===$.IncrementalSnapshot&&j.data.source===P.Mutation)&&Ln.forEach(re=>re.unfreeze()),Br)he([t,"optionalCall",re=>re(Ha(j),Xe)]);else if(Bn){let re={type:"rrweb",event:Ha(j),origin:window.location.origin,isCheckout:Xe};window.parent.postMessage(re,"*")}if(j.type===$.FullSnapshot)yi=j,Ei=0;else if(j.type===$.IncrementalSnapshot){if(j.data.source===P.Mutation&&j.data.isAttachIframe)return;Ei++;let re=r&&Ei>=r,V=n&&yi&&j.timestamp-yi.timestamp>n;(re||V)&&bi(!0)}};let Hr=Y=>{ae({type:$.IncrementalSnapshot,data:{source:P.Mutation,...Y}})},$a=Y=>ae({type:$.IncrementalSnapshot,data:{source:P.Scroll,...Y}}),Bd=Y=>ae({type:$.IncrementalSnapshot,data:{source:P.CanvasMutation,...Y}}),Hd=Y=>ae({type:$.IncrementalSnapshot,data:{source:P.AdoptedStyleSheet,...Y}}),qt=new da({mutationCb:Hr,adoptedStyleSheetCb:Hd}),Yt=typeof __RRWEB_EXCLUDE_IFRAME__=="boolean"&&__RRWEB_EXCLUDE_IFRAME__?new aa:new ca({mirror:st,mutationCb:Hr,stylesheetManager:qt,recordCrossOriginIframes:M,wrappedEmit:ae});for(let Y of me||[])Y.getMirror&&Y.getMirror({nodeMirror:st,crossOriginIframeMirror:Yt.crossOriginIframeMirror,crossOriginIframeStyleMirror:Yt.crossOriginIframeStyleMirror});let Ti=new fa,Ii=Hg(Ud,{mirror:st,win:window,mutationCb:Y=>ae({type:$.IncrementalSnapshot,data:{source:P.CanvasMutation,...Y}}),recordCanvas:b,blockClass:o,blockSelector:i,unblockSelector:s,maxCanvasSize:N,sampling:_.canvas,dataURLOptions:I,errorHandler:Et}),$r=typeof __RRWEB_EXCLUDE_SHADOW_DOM__=="boolean"&&__RRWEB_EXCLUDE_SHADOW_DOM__?new ua:new la({mutationCb:Hr,scrollCb:$a,bypassOptions:{onMutation:Ba,blockClass:o,blockSelector:i,unblockSelector:s,maskAllText:u,maskTextClass:d,unmaskTextClass:l,maskTextSelector:f,unmaskTextSelector:m,inlineStylesheet:p,maskInputOptions:Si,dataURLOptions:I,maskAttributeFn:x,maskTextFn:L,maskInputFn:U,recordCanvas:b,inlineImages:F,sampling:_,slimDOMOptions:_i,iframeManager:Yt,stylesheetManager:qt,canvasManager:Ii,keepIframeSrcFn:q,processedNodeManager:Ti},mirror:st}),bi=(Y=!1)=>{if(!E)return;ae({type:$.Meta,data:{href:window.location.href,width:Yl(),height:ql()}},Y),qt.reset(),$r.init(),Ln.forEach(j=>j.lock());let Xe=gg(document,{mirror:st,blockClass:o,blockSelector:i,unblockSelector:s,maskAllText:u,maskTextClass:d,unmaskTextClass:l,maskTextSelector:f,unmaskTextSelector:m,inlineStylesheet:p,maskAllInputs:Si,maskAttributeFn:x,maskInputFn:U,maskTextFn:L,slimDOM:_i,dataURLOptions:I,recordCanvas:b,inlineImages:F,onSerialize:j=>{Jl(j,st)&&Yt.addIframe(j),Xl(j,st)&&qt.trackLinkElement(j),na(j)&&$r.addShadowRoot(j.shadowRoot,document)},onIframeLoad:(j,re)=>{Yt.attachIframe(j,re),j.contentWindow&&Ii.addWindow(j.contentWindow),$r.observeAttachShadow(j)},onStylesheetLoad:(j,re)=>{qt.attachLinkElement(j,re)},keepIframeSrcFn:q});if(!Xe)return console.warn("Failed to snapshot the document");ae({type:$.FullSnapshot,data:{node:Xe,initialOffset:Gl(window)}}),Ln.forEach(j=>j.unlock()),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&qt.adoptStyleSheets(document.adoptedStyleSheets,st.getId(document))};ti=bi;try{let Y=[],Xe=re=>G(Ug)({onMutation:Ba,mutationCb:Hr,mousemoveCb:(V,Vt)=>ae({type:$.IncrementalSnapshot,data:{source:Vt,positions:V}}),mouseInteractionCb:V=>ae({type:$.IncrementalSnapshot,data:{source:P.MouseInteraction,...V}}),scrollCb:$a,viewportResizeCb:V=>ae({type:$.IncrementalSnapshot,data:{source:P.ViewportResize,...V}}),inputCb:V=>ae({type:$.IncrementalSnapshot,data:{source:P.Input,...V}}),mediaInteractionCb:V=>ae({type:$.IncrementalSnapshot,data:{source:P.MediaInteraction,...V}}),styleSheetRuleCb:V=>ae({type:$.IncrementalSnapshot,data:{source:P.StyleSheetRule,...V}}),styleDeclarationCb:V=>ae({type:$.IncrementalSnapshot,data:{source:P.StyleDeclaration,...V}}),canvasMutationCb:Bd,fontCb:V=>ae({type:$.IncrementalSnapshot,data:{source:P.Font,...V}}),selectionCb:V=>{ae({type:$.IncrementalSnapshot,data:{source:P.Selection,...V}})},customElementCb:V=>{ae({type:$.IncrementalSnapshot,data:{source:P.CustomElement,...V}})},blockClass:o,ignoreClass:a,ignoreSelector:c,maskAllText:u,maskTextClass:d,unmaskTextClass:l,maskTextSelector:f,unmaskTextSelector:m,maskInputOptions:Si,inlineStylesheet:p,sampling:_,recordDOM:E,recordCanvas:b,inlineImages:F,userTriggeredOnInput:Q,collectFonts:le,doc:re,maskAttributeFn:x,maskInputFn:U,maskTextFn:L,keepIframeSrcFn:q,blockSelector:i,unblockSelector:s,slimDOMOptions:_i,dataURLOptions:I,mirror:st,iframeManager:Yt,stylesheetManager:qt,shadowDomManager:$r,processedNodeManager:Ti,canvasManager:Ii,ignoreCSSAttributes:Me,plugins:he([me,"optionalAccess",V=>V.filter,"call",V=>V(Vt=>Vt.observer),"optionalAccess",V=>V.map,"call",V=>V(Vt=>({observer:Vt.observer,options:Vt.options,callback:$d=>ae({type:$.Plugin,data:{plugin:Vt.name,payload:$d}})}))])||[]},{});Yt.addLoadListener(re=>{try{Y.push(Xe(re.contentDocument))}catch(V){console.warn(V)}});let j=()=>{bi(),Y.push(Xe(document))};return document.readyState==="interactive"||document.readyState==="complete"?j():(Y.push(Ne("DOMContentLoaded",()=>{ae({type:$.DomContentLoaded,data:{}}),z==="DOMContentLoaded"&&j()})),Y.push(Ne("load",()=>{ae({type:$.Load,data:{}}),z==="load"&&j()},window))),()=>{Y.forEach(re=>re()),Ti.destroy(),ti=void 0,Rg()}}catch(Y){console.warn(Y)}}function Bg(e){if(!ti)throw new Error("please take full snapshot after start recording");ti(e)}At.mirror=st;At.takeFullSnapshot=Bg;function Hg(e,t){try{return e?e(t):new ei}catch{return console.warn("Unable to initialize CanvasManager"),new ei}}var O=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,Al=["info","warn","error","log"],Yo="[Replay] ";function Ks(e,t="info"){Ve({category:"console",data:{logger:"replay"},level:t,message:`${Yo}${e}`},{level:t})}function $g(){let e=!1,t=!1,n={exception:()=>{},infoTick:()=>{},setConfig:r=>{e=r.captureExceptions,t=r.traceInternals}};return O?(Al.forEach(r=>{n[r]=(...o)=>{h[r](Yo,...o),t&&Ks(o.join(""),Jn(r))}}),n.exception=(r,...o)=>{o.length&&n.error&&n.error(...o),h.error(Yo,r),e?Rn(r):t&&Ks(r,"error")},n.infoTick=(...r)=>{h.info(Yo,...r),t&&setTimeout(()=>Ks(r[0]),0)}):Al.forEach(r=>{n[r]=()=>{}}),n}var D=$g(),Wg=3,zg=5;function xa(e){return e>9999999999?e:e*1e3}function Js(e){return e>9999999999?e/1e3:e}function Lr(e,t){t.category!=="sentry.transaction"&&(["ui.click","ui.input"].includes(t.category)?e.triggerUserActivity():e.checkAndHandleExpiredSession(),e.addUpdate(()=>(e.throttledAddEvent({type:$.Custom,timestamp:(t.timestamp||0)*1e3,data:{tag:"breadcrumb",payload:De(t,10,1e3)}}),t.category==="console")))}var jg="button,a";function od(e){return e.closest(jg)||e}function id(e){let t=sd(e);return!t||!(t instanceof Element)?t:od(t)}function sd(e){return Gg(e)?e.target:e}function Gg(e){return typeof e=="object"&&!!e&&"target"in e}var jt;function qg(e){return jt||(jt=[],Yg()),jt.push(e),()=>{let t=jt?jt.indexOf(e):-1;t>-1&&jt.splice(t,1)}}function Yg(){ce(te,"open",function(e){return function(...t){if(jt)try{jt.forEach(n=>n())}catch{}return e.apply(te,t)}})}var Vg=new Set([P.Mutation,P.StyleSheetRule,P.StyleDeclaration,P.AdoptedStyleSheet,P.CanvasMutation,P.Selection,P.MediaInteraction]);function Kg(e,t,n){e.handleClick(t,n)}var pa=class{constructor(t,n,r=Lr){this._lastMutation=0,this._lastScroll=0,this._clicks=[],this._timeout=n.timeout/1e3,this._threshold=n.threshold/1e3,this._scollTimeout=n.scrollTimeout/1e3,this._replay=t,this._ignoreSelector=n.ignoreSelector,this._addBreadcrumbEvent=r}addListeners(){let t=qg(()=>{this._lastMutation=Nl()});this._teardown=()=>{t(),this._clicks=[],this._lastMutation=0,this._lastScroll=0}}removeListeners(){this._teardown&&this._teardown(),this._checkClickTimeout&&clearTimeout(this._checkClickTimeout)}handleClick(t,n){if(Xg(n,this._ignoreSelector)||!Qg(t))return;let r={timestamp:Js(t.timestamp),clickBreadcrumb:t,clickCount:0,node:n};this._clicks.some(o=>o.node===r.node&&Math.abs(o.timestamp-r.timestamp)<1)||(this._clicks.push(r),this._clicks.length===1&&this._scheduleCheckClicks())}registerMutation(t=Date.now()){this._lastMutation=Js(t)}registerScroll(t=Date.now()){this._lastScroll=Js(t)}registerClick(t){let n=od(t);this._handleMultiClick(n)}_handleMultiClick(t){this._getClicks(t).forEach(n=>{n.clickCount++})}_getClicks(t){return this._clicks.filter(n=>n.node===t)}_checkClicks(){let t=[],n=Nl();this._clicks.forEach(r=>{!r.mutationAfter&&this._lastMutation&&(r.mutationAfter=r.timestamp<=this._lastMutation?this._lastMutation-r.timestamp:void 0),!r.scrollAfter&&this._lastScroll&&(r.scrollAfter=r.timestamp<=this._lastScroll?this._lastScroll-r.timestamp:void 0),r.timestamp+this._timeout<=n&&t.push(r)});for(let r of t){let o=this._clicks.indexOf(r);o>-1&&(this._generateBreadcrumbs(r),this._clicks.splice(o,1))}this._clicks.length&&this._scheduleCheckClicks()}_generateBreadcrumbs(t){let n=this._replay,r=t.scrollAfter&&t.scrollAfter<=this._scollTimeout,o=t.mutationAfter&&t.mutationAfter<=this._threshold,i=!r&&!o,{clickCount:s,clickBreadcrumb:a}=t;if(i){let c=Math.min(t.mutationAfter||this._timeout,this._timeout)*1e3,u=c<this._timeout*1e3?"mutation":"timeout",d={type:"default",message:a.message,timestamp:a.timestamp,category:"ui.slowClickDetected",data:{...a.data,url:te.location.href,route:n.getCurrentRoute(),timeAfterClickMs:c,endReason:u,clickCount:s||1}};this._addBreadcrumbEvent(n,d);return}if(s>1){let c={type:"default",message:a.message,timestamp:a.timestamp,category:"ui.multiClick",data:{...a.data,url:te.location.href,route:n.getCurrentRoute(),clickCount:s,metric:!0}};this._addBreadcrumbEvent(n,c)}}_scheduleCheckClicks(){this._checkClickTimeout&&clearTimeout(this._checkClickTimeout),this._checkClickTimeout=$t(()=>this._checkClicks(),1e3)}},Jg=["A","BUTTON","INPUT"];function Xg(e,t){return!!(!Jg.includes(e.tagName)||e.tagName==="INPUT"&&!["submit","button"].includes(e.getAttribute("type")||"")||e.tagName==="A"&&(e.hasAttribute("download")||e.hasAttribute("target")&&e.getAttribute("target")!=="_self")||t&&e.matches(t))}function Qg(e){return!!(e.data&&typeof e.data.nodeId=="number"&&e.timestamp)}function Nl(){return Date.now()/1e3}function Zg(e,t){try{if(!eS(t))return;let{source:n}=t.data;if(Vg.has(n)&&e.registerMutation(t.timestamp),n===P.Scroll&&e.registerScroll(t.timestamp),tS(t)){let{type:r,id:o}=t.data,i=At.mirror.getNode(o);i instanceof HTMLElement&&r===Ae.Click&&e.registerClick(i)}}catch{}}function eS(e){return e.type===Wg}function tS(e){return e.data.source===P.MouseInteraction}function _t(e){return{timestamp:Date.now()/1e3,type:"default",...e}}var ni;(function(e){e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment"})(ni||(ni={}));var nS=new Set(["id","class","aria-label","role","name","alt","title","data-test-id","data-testid","disabled","aria-disabled","data-sentry-component"]);function rS(e){let t={};!e["data-sentry-component"]&&e["data-sentry-element"]&&(e["data-sentry-component"]=e["data-sentry-element"]);for(let n in e)if(nS.has(n)){let r=n;(n==="data-testid"||n==="data-test-id")&&(r="testId"),t[r]=e[n]}return t}var oS=e=>t=>{if(!e.isEnabled())return;let n=iS(t);if(!n)return;let r=t.name==="click",o=r?t.event:void 0;r&&e.clickDetector&&o&&o.target&&!o.altKey&&!o.metaKey&&!o.ctrlKey&&!o.shiftKey&&Kg(e.clickDetector,n,id(t.event)),Lr(e,n)};function ad(e,t){let n=At.mirror.getId(e),r=n&&At.mirror.getNode(n),o=r&&At.mirror.getMeta(r),i=o&&aS(o)?o:null;return{message:t,data:i?{nodeId:n,node:{id:n,tagName:i.tagName,textContent:Array.from(i.childNodes).map(s=>s.type===ni.Text&&s.textContent).filter(Boolean).map(s=>s.trim()).join(""),attributes:rS(i.attributes)}}:{}}}function iS(e){let{target:t,message:n}=sS(e);return _t({category:`ui.${e.name}`,...ad(t,n)})}function sS(e){let t=e.name==="click",n,r=null;try{r=t?id(e.event):sd(e.event),n=Ee(r,{maxStringLength:200})||"<unknown>"}catch{n="<unknown>"}return{target:r,message:n}}function aS(e){return e.type===ni.Element}function cS(e,t){if(!e.isEnabled())return;e.updateUserActivity();let n=uS(t);n&&Lr(e,n)}function uS(e){let{metaKey:t,shiftKey:n,ctrlKey:r,altKey:o,key:i,target:s}=e;if(!s||lS(s)||!i)return null;let a=t||r||o,c=i.length===1;if(!a&&c)return null;let u=Ee(s,{maxStringLength:200})||"<unknown>",d=ad(s,u);return _t({category:"ui.keyDown",message:u,data:{...d.data,metaKey:t,shiftKey:n,ctrlKey:r,altKey:o,key:i}})}function lS(e){return e.tagName==="INPUT"||e.tagName==="TEXTAREA"||e.isContentEditable}var dS={resource:gS,paint:mS,navigation:hS};function qo(e,t){return({metric:n})=>void t.replayPerformanceEntries.push(e(n))}function fS(e){return e.map(pS).filter(Boolean)}function pS(e){let t=dS[e.entryType];return t?t(e):null}function Un(e){return((ie||te.performance.timeOrigin)+e)/1e3}function mS(e){let{duration:t,entryType:n,name:r,startTime:o}=e,i=Un(o);return{type:n,name:r,start:i,end:i+t,data:void 0}}function hS(e){let{entryType:t,name:n,decodedBodySize:r,duration:o,domComplete:i,encodedBodySize:s,domContentLoadedEventStart:a,domContentLoadedEventEnd:c,domInteractive:u,loadEventStart:d,loadEventEnd:l,redirectCount:f,startTime:m,transferSize:p,type:g}=e;return o===0?null:{type:`${t}.${g}`,start:Un(m),end:Un(i),name:n,data:{size:p,decodedBodySize:r,encodedBodySize:s,duration:o,domInteractive:u,domContentLoadedEventStart:a,domContentLoadedEventEnd:c,loadEventStart:d,loadEventEnd:l,domComplete:i,redirectCount:f}}}function gS(e){let{entryType:t,initiatorType:n,name:r,responseEnd:o,startTime:i,decodedBodySize:s,encodedBodySize:a,responseStatus:c,transferSize:u}=e;return["fetch","xmlhttprequest"].includes(n)?null:{type:`${t}.${n}`,start:Un(i),end:Un(o),name:r,data:{size:u,statusCode:c,decodedBodySize:s,encodedBodySize:a}}}function SS(e){let t=e.entries[e.entries.length-1],n=t&&t.element?[t.element]:void 0;return di(e,"largest-contentful-paint",n)}function _S(e){return e.sources!==void 0}function yS(e){let t=[],n=[];for(let r of e.entries)if(_S(r)){let o=[];for(let i of r.sources)if(i.node){n.push(i.node);let s=At.mirror.getId(i.node);s&&o.push(s)}t.push({value:r.value,nodeIds:o.length?o:void 0})}return di(e,"cumulative-layout-shift",n,t)}function ES(e){let t=e.entries[e.entries.length-1],n=t&&t.target?[t.target]:void 0;return di(e,"first-input-delay",n)}function TS(e){let t=e.entries[e.entries.length-1],n=t&&t.target?[t.target]:void 0;return di(e,"interaction-to-next-paint",n)}function di(e,t,n,r){let o=e.value,i=e.rating,s=Un(o);return{type:"web-vital",name:t,start:s,end:s,data:{value:o,size:o,rating:i,nodeIds:n?n.map(a=>At.mirror.getId(a)):void 0,attributions:r}}}function IS(e){function t(o){e.performanceEntries.includes(o)||e.performanceEntries.push(o)}function n({entries:o}){o.forEach(t)}let r=[];return["navigation","paint","resource"].forEach(o=>{r.push(ot(o,n))}),r.push(mr(qo(SS,e)),cn(qo(yS,e)),hr(qo(ES,e)),gr(qo(TS,e))),()=>{r.forEach(o=>o())}}var bS='var t=Uint8Array,n=Uint16Array,r=Int32Array,e=new t([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),i=new t([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),a=new t([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),s=function(t,e){for(var i=new n(31),a=0;a<31;++a)i[a]=e+=1<<t[a-1];var s=new r(i[30]);for(a=1;a<30;++a)for(var o=i[a];o<i[a+1];++o)s[o]=o-i[a]<<5|a;return{b:i,r:s}},o=s(e,2),f=o.b,h=o.r;f[28]=258,h[258]=28;for(var l=s(i,0).r,u=new n(32768),c=0;c<32768;++c){var v=(43690&c)>>1|(21845&c)<<1;v=(61680&(v=(52428&v)>>2|(13107&v)<<2))>>4|(3855&v)<<4,u[c]=((65280&v)>>8|(255&v)<<8)>>1}var d=function(t,r,e){for(var i=t.length,a=0,s=new n(r);a<i;++a)t[a]&&++s[t[a]-1];var o,f=new n(r);for(a=1;a<r;++a)f[a]=f[a-1]+s[a-1]<<1;if(e){o=new n(1<<r);var h=15-r;for(a=0;a<i;++a)if(t[a])for(var l=a<<4|t[a],c=r-t[a],v=f[t[a]-1]++<<c,d=v|(1<<c)-1;v<=d;++v)o[u[v]>>h]=l}else for(o=new n(i),a=0;a<i;++a)t[a]&&(o[a]=u[f[t[a]-1]++]>>15-t[a]);return o},g=new t(288);for(c=0;c<144;++c)g[c]=8;for(c=144;c<256;++c)g[c]=9;for(c=256;c<280;++c)g[c]=7;for(c=280;c<288;++c)g[c]=8;var w=new t(32);for(c=0;c<32;++c)w[c]=5;var p=d(g,9,0),y=d(w,5,0),m=function(t){return(t+7)/8|0},b=function(n,r,e){return(null==e||e>n.length)&&(e=n.length),new t(n.subarray(r,e))},M=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],E=function(t,n,r){var e=new Error(n||M[t]);if(e.code=t,Error.captureStackTrace&&Error.captureStackTrace(e,E),!r)throw e;return e},z=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8},_=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8,t[e+2]|=r>>16},x=function(r,e){for(var i=[],a=0;a<r.length;++a)r[a]&&i.push({s:a,f:r[a]});var s=i.length,o=i.slice();if(!s)return{t:F,l:0};if(1==s){var f=new t(i[0].s+1);return f[i[0].s]=1,{t:f,l:1}}i.sort((function(t,n){return t.f-n.f})),i.push({s:-1,f:25001});var h=i[0],l=i[1],u=0,c=1,v=2;for(i[0]={s:-1,f:h.f+l.f,l:h,r:l};c!=s-1;)h=i[i[u].f<i[v].f?u++:v++],l=i[u!=c&&i[u].f<i[v].f?u++:v++],i[c++]={s:-1,f:h.f+l.f,l:h,r:l};var d=o[0].s;for(a=1;a<s;++a)o[a].s>d&&(d=o[a].s);var g=new n(d+1),w=A(i[c-1],g,0);if(w>e){a=0;var p=0,y=w-e,m=1<<y;for(o.sort((function(t,n){return g[n.s]-g[t.s]||t.f-n.f}));a<s;++a){var b=o[a].s;if(!(g[b]>e))break;p+=m-(1<<w-g[b]),g[b]=e}for(p>>=y;p>0;){var M=o[a].s;g[M]<e?p-=1<<e-g[M]++-1:++a}for(;a>=0&&p;--a){var E=o[a].s;g[E]==e&&(--g[E],++p)}w=e}return{t:new t(g),l:w}},A=function(t,n,r){return-1==t.s?Math.max(A(t.l,n,r+1),A(t.r,n,r+1)):n[t.s]=r},D=function(t){for(var r=t.length;r&&!t[--r];);for(var e=new n(++r),i=0,a=t[0],s=1,o=function(t){e[i++]=t},f=1;f<=r;++f)if(t[f]==a&&f!=r)++s;else{if(!a&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(a),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(a);s=1,a=t[f]}return{c:e.subarray(0,i),n:r}},T=function(t,n){for(var r=0,e=0;e<n.length;++e)r+=t[e]*n[e];return r},k=function(t,n,r){var e=r.length,i=m(n+2);t[i]=255&e,t[i+1]=e>>8,t[i+2]=255^t[i],t[i+3]=255^t[i+1];for(var a=0;a<e;++a)t[i+a+4]=r[a];return 8*(i+4+e)},U=function(t,r,s,o,f,h,l,u,c,v,m){z(r,m++,s),++f[256];for(var b=x(f,15),M=b.t,E=b.l,A=x(h,15),U=A.t,C=A.l,F=D(M),I=F.c,S=F.n,L=D(U),O=L.c,j=L.n,q=new n(19),B=0;B<I.length;++B)++q[31&I[B]];for(B=0;B<O.length;++B)++q[31&O[B]];for(var G=x(q,7),H=G.t,J=G.l,K=19;K>4&&!H[a[K-1]];--K);var N,P,Q,R,V=v+5<<3,W=T(f,g)+T(h,w)+l,X=T(f,M)+T(h,U)+l+14+3*K+T(q,H)+2*q[16]+3*q[17]+7*q[18];if(c>=0&&V<=W&&V<=X)return k(r,m,t.subarray(c,c+v));if(z(r,m,1+(X<W)),m+=2,X<W){N=d(M,E,0),P=M,Q=d(U,C,0),R=U;var Y=d(H,J,0);z(r,m,S-257),z(r,m+5,j-1),z(r,m+10,K-4),m+=14;for(B=0;B<K;++B)z(r,m+3*B,H[a[B]]);m+=3*K;for(var Z=[I,O],$=0;$<2;++$){var tt=Z[$];for(B=0;B<tt.length;++B){var nt=31&tt[B];z(r,m,Y[nt]),m+=H[nt],nt>15&&(z(r,m,tt[B]>>5&127),m+=tt[B]>>12)}}}else N=p,P=g,Q=y,R=w;for(B=0;B<u;++B){var rt=o[B];if(rt>255){_(r,m,N[(nt=rt>>18&31)+257]),m+=P[nt+257],nt>7&&(z(r,m,rt>>23&31),m+=e[nt]);var et=31&rt;_(r,m,Q[et]),m+=R[et],et>3&&(_(r,m,rt>>5&8191),m+=i[et])}else _(r,m,N[rt]),m+=P[rt]}return _(r,m,N[256]),m+P[256]},C=new r([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),F=new t(0),I=function(){for(var t=new Int32Array(256),n=0;n<256;++n){for(var r=n,e=9;--e;)r=(1&r&&-306674912)^r>>>1;t[n]=r}return t}(),S=function(){var t=-1;return{p:function(n){for(var r=t,e=0;e<n.length;++e)r=I[255&r^n[e]]^r>>>8;t=r},d:function(){return~t}}},L=function(){var t=1,n=0;return{p:function(r){for(var e=t,i=n,a=0|r.length,s=0;s!=a;){for(var o=Math.min(s+2655,a);s<o;++s)i+=e+=r[s];e=(65535&e)+15*(e>>16),i=(65535&i)+15*(i>>16)}t=e,n=i},d:function(){return(255&(t%=65521))<<24|(65280&t)<<8|(255&(n%=65521))<<8|n>>8}}},O=function(a,s,o,f,u){if(!u&&(u={l:1},s.dictionary)){var c=s.dictionary.subarray(-32768),v=new t(c.length+a.length);v.set(c),v.set(a,c.length),a=v,u.w=c.length}return function(a,s,o,f,u,c){var v=c.z||a.length,d=new t(f+v+5*(1+Math.ceil(v/7e3))+u),g=d.subarray(f,d.length-u),w=c.l,p=7&(c.r||0);if(s){p&&(g[0]=c.r>>3);for(var y=C[s-1],M=y>>13,E=8191&y,z=(1<<o)-1,_=c.p||new n(32768),x=c.h||new n(z+1),A=Math.ceil(o/3),D=2*A,T=function(t){return(a[t]^a[t+1]<<A^a[t+2]<<D)&z},F=new r(25e3),I=new n(288),S=new n(32),L=0,O=0,j=c.i||0,q=0,B=c.w||0,G=0;j+2<v;++j){var H=T(j),J=32767&j,K=x[H];if(_[J]=K,x[H]=J,B<=j){var N=v-j;if((L>7e3||q>24576)&&(N>423||!w)){p=U(a,g,0,F,I,S,O,q,G,j-G,p),q=L=O=0,G=j;for(var P=0;P<286;++P)I[P]=0;for(P=0;P<30;++P)S[P]=0}var Q=2,R=0,V=E,W=J-K&32767;if(N>2&&H==T(j-W))for(var X=Math.min(M,N)-1,Y=Math.min(32767,j),Z=Math.min(258,N);W<=Y&&--V&&J!=K;){if(a[j+Q]==a[j+Q-W]){for(var $=0;$<Z&&a[j+$]==a[j+$-W];++$);if($>Q){if(Q=$,R=W,$>X)break;var tt=Math.min(W,$-2),nt=0;for(P=0;P<tt;++P){var rt=j-W+P&32767,et=rt-_[rt]&32767;et>nt&&(nt=et,K=rt)}}}W+=(J=K)-(K=_[J])&32767}if(R){F[q++]=268435456|h[Q]<<18|l[R];var it=31&h[Q],at=31&l[R];O+=e[it]+i[at],++I[257+it],++S[at],B=j+Q,++L}else F[q++]=a[j],++I[a[j]]}}for(j=Math.max(j,B);j<v;++j)F[q++]=a[j],++I[a[j]];p=U(a,g,w,F,I,S,O,q,G,j-G,p),w||(c.r=7&p|g[p/8|0]<<3,p-=7,c.h=x,c.p=_,c.i=j,c.w=B)}else{for(j=c.w||0;j<v+w;j+=65535){var st=j+65535;st>=v&&(g[p/8|0]=w,st=v),p=k(g,p+1,a.subarray(j,st))}c.i=v}return b(d,0,f+m(p)+u)}(a,null==s.level?6:s.level,null==s.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(a.length)))):12+s.mem,o,f,u)},j=function(t,n,r){for(;r;++n)t[n]=r,r>>>=8},q=function(t,n){var r=n.filename;if(t[0]=31,t[1]=139,t[2]=8,t[8]=n.level<2?4:9==n.level?2:0,t[9]=3,0!=n.mtime&&j(t,4,Math.floor(new Date(n.mtime||Date.now())/1e3)),r){t[3]=8;for(var e=0;e<=r.length;++e)t[e+10]=r.charCodeAt(e)}},B=function(t){return 10+(t.filename?t.filename.length+1:0)},G=function(){function n(n,r){if("function"==typeof n&&(r=n,n={}),this.ondata=r,this.o=n||{},this.s={l:0,i:32768,w:32768,z:32768},this.b=new t(98304),this.o.dictionary){var e=this.o.dictionary.subarray(-32768);this.b.set(e,32768-e.length),this.s.i=32768-e.length}}return n.prototype.p=function(t,n){this.ondata(O(t,this.o,0,0,this.s),n)},n.prototype.push=function(n,r){this.ondata||E(5),this.s.l&&E(4);var e=n.length+this.s.z;if(e>this.b.length){if(e>2*this.b.length-32768){var i=new t(-32768&e);i.set(this.b.subarray(0,this.s.z)),this.b=i}var a=this.b.length-this.s.z;a&&(this.b.set(n.subarray(0,a),this.s.z),this.s.z=this.b.length,this.p(this.b,!1)),this.b.set(this.b.subarray(-32768)),this.b.set(n.subarray(a),32768),this.s.z=n.length-a+32768,this.s.i=32766,this.s.w=32768}else this.b.set(n,this.s.z),this.s.z+=n.length;this.s.l=1&r,(this.s.z>this.s.w+8191||r)&&(this.p(this.b,r||!1),this.s.w=this.s.i,this.s.i-=2)},n}();var H=function(){function t(t,n){this.c=L(),this.v=1,G.call(this,t,n)}return t.prototype.push=function(t,n){this.c.p(t),G.prototype.push.call(this,t,n)},t.prototype.p=function(t,n){var r=O(t,this.o,this.v&&(this.o.dictionary?6:2),n&&4,this.s);this.v&&(function(t,n){var r=n.level,e=0==r?0:r<6?1:9==r?3:2;if(t[0]=120,t[1]=e<<6|(n.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,n.dictionary){var i=L();i.p(n.dictionary),j(t,2,i.d())}}(r,this.o),this.v=0),n&&j(r,r.length-4,this.c.d()),this.ondata(r,n)},t}(),J="undefined"!=typeof TextEncoder&&new TextEncoder,K="undefined"!=typeof TextDecoder&&new TextDecoder;try{K.decode(F,{stream:!0})}catch(t){}var N=function(){function t(t){this.ondata=t}return t.prototype.push=function(t,n){this.ondata||E(5),this.d&&E(4),this.ondata(P(t),this.d=n||!1)},t}();function P(n,r){if(J)return J.encode(n);for(var e=n.length,i=new t(n.length+(n.length>>1)),a=0,s=function(t){i[a++]=t},o=0;o<e;++o){if(a+5>i.length){var f=new t(a+8+(e-o<<1));f.set(i),i=f}var h=n.charCodeAt(o);h<128||r?s(h):h<2048?(s(192|h>>6),s(128|63&h)):h>55295&&h<57344?(s(240|(h=65536+(1047552&h)|1023&n.charCodeAt(++o))>>18),s(128|h>>12&63),s(128|h>>6&63),s(128|63&h)):(s(224|h>>12),s(128|h>>6&63),s(128|63&h))}return b(i,0,a)}function Q(t){return function(t,n){n||(n={});var r=S(),e=t.length;r.p(t);var i=O(t,n,B(n),8),a=i.length;return q(i,n),j(i,a-8,r.d()),j(i,a-4,e),i}(P(t))}const R=new class{constructor(){this._init()}clear(){this._init()}addEvent(t){if(!t)throw new Error("Adding invalid event");const n=this._hasEvents?",":"";this.stream.push(n+t),this._hasEvents=!0}finish(){this.stream.push("]",!0);const t=function(t){let n=0;for(const r of t)n+=r.length;const r=new Uint8Array(n);for(let n=0,e=0,i=t.length;n<i;n++){const i=t[n];r.set(i,e),e+=i.length}return r}(this._deflatedData);return this._init(),t}_init(){this._hasEvents=!1,this._deflatedData=[],this.deflate=new H,this.deflate.ondata=(t,n)=>{this._deflatedData.push(t)},this.stream=new N(((t,n)=>{this.deflate.push(t,n)})),this.stream.push("[")}},V={clear:()=>{R.clear()},addEvent:t=>R.addEvent(t),finish:()=>R.finish(),compress:t=>Q(t)};addEventListener("message",(function(t){const n=t.data.method,r=t.data.id,e=t.data.arg;if(n in V&&"function"==typeof V[n])try{const t=V[n](e);postMessage({id:r,method:n,success:!0,response:t})}catch(t){postMessage({id:r,method:n,success:!1,response:t.message}),console.error(t)}})),postMessage({id:void 0,method:"init",success:!0,response:void 0});';function vS(){let e=new Blob([bS]);return URL.createObjectURL(e)}var Nr=class extends Error{constructor(){super(`Event buffer exceeded maximum size of ${ba}.`)}},ri=class{constructor(){this.events=[],this._totalSize=0,this.hasCheckout=!1}get hasEvents(){return this.events.length>0}get type(){return"sync"}destroy(){this.events=[]}async addEvent(t){let n=JSON.stringify(t).length;if(this._totalSize+=n,this._totalSize>ba)throw new Nr;this.events.push(t)}finish(){return new Promise(t=>{let n=this.events;this.clear(),t(JSON.stringify(n))})}clear(){this.events=[],this._totalSize=0,this.hasCheckout=!1}getEarliestTimestamp(){let t=this.events.map(n=>n.timestamp).sort()[0];return t?xa(t):null}},ma=class{constructor(t){this._worker=t,this._id=0}ensureReady(){return this._ensureReadyPromise?this._ensureReadyPromise:(this._ensureReadyPromise=new Promise((t,n)=>{this._worker.addEventListener("message",({data:r})=>{r.success?t():n()},{once:!0}),this._worker.addEventListener("error",r=>{n(r)},{once:!0})}),this._ensureReadyPromise)}destroy(){O&&D.info("Destroying compression worker"),this._worker.terminate()}postMessage(t,n){let r=this._getAndIncrementId();return new Promise((o,i)=>{let s=({data:a})=>{let c=a;if(c.method===t&&c.id===r){if(this._worker.removeEventListener("message",s),!c.success){O&&D.error("Error in compression worker: ",c.response),i(new Error("Error in compression worker"));return}o(c.response)}};this._worker.addEventListener("message",s),this._worker.postMessage({id:r,method:t,arg:n})})}_getAndIncrementId(){return this._id++}},ha=class{constructor(t){this._worker=new ma(t),this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1}get hasEvents(){return!!this._earliestTimestamp}get type(){return"worker"}ensureReady(){return this._worker.ensureReady()}destroy(){this._worker.destroy()}addEvent(t){let n=xa(t.timestamp);(!this._earliestTimestamp||n<this._earliestTimestamp)&&(this._earliestTimestamp=n);let r=JSON.stringify(t);return this._totalSize+=r.length,this._totalSize>ba?Promise.reject(new Nr):this._sendEventToWorker(r)}finish(){return this._finishRequest()}clear(){this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1,this._worker.postMessage("clear").then(null,t=>{O&&D.exception(t,'Sending "clear" message to worker failed',t)})}getEarliestTimestamp(){return this._earliestTimestamp}_sendEventToWorker(t){return this._worker.postMessage("addEvent",t)}async _finishRequest(){let t=await this._worker.postMessage("finish");return this._earliestTimestamp=null,this._totalSize=0,t}},ga=class{constructor(t){this._fallback=new ri,this._compression=new ha(t),this._used=this._fallback,this._ensureWorkerIsLoadedPromise=this._ensureWorkerIsLoaded()}get type(){return this._used.type}get hasEvents(){return this._used.hasEvents}get hasCheckout(){return this._used.hasCheckout}set hasCheckout(t){this._used.hasCheckout=t}destroy(){this._fallback.destroy(),this._compression.destroy()}clear(){return this._used.clear()}getEarliestTimestamp(){return this._used.getEarliestTimestamp()}addEvent(t){return this._used.addEvent(t)}async finish(){return await this.ensureWorkerIsLoaded(),this._used.finish()}ensureWorkerIsLoaded(){return this._ensureWorkerIsLoadedPromise}async _ensureWorkerIsLoaded(){try{await this._compression.ensureReady()}catch(t){O&&D.exception(t,"Failed to load the compression worker, falling back to simple buffer");return}await this._switchToCompressionWorker()}async _switchToCompressionWorker(){let{events:t,hasCheckout:n}=this._fallback,r=[];for(let o of t)r.push(this._compression.addEvent(o));this._compression.hasCheckout=n,this._used=this._compression;try{await Promise.all(r),this._fallback.clear()}catch(o){O&&D.exception(o,"Failed to add events when switching buffers.")}}};function CS({useCompression:e,workerUrl:t}){if(e&&window.Worker){let n=RS(t);if(n)return n}return O&&D.info("Using simple buffer"),new ri}function RS(e){try{let t=e||wS();if(!t)return;O&&D.info(`Using compression worker${e?` from ${e}`:""}`);let n=new Worker(t);return new ga(n)}catch(t){O&&D.exception(t,"Failed to create compression worker")}}function wS(){return typeof __SENTRY_EXCLUDE_REPLAY_WORKER__>"u"||!__SENTRY_EXCLUDE_REPLAY_WORKER__?vS():""}function ka(){try{return"sessionStorage"in te&&!!te.sessionStorage}catch{return!1}}function xS(e){kS(),e.session=void 0}function kS(){if(ka())try{te.sessionStorage.removeItem(Ta)}catch{}}function cd(e){return e===void 0?!1:Math.random()<e}function ud(e){let t=Date.now(),n=e.id||W(),r=e.started||t,o=e.lastActivity||t,i=e.segmentId||0,s=e.sampled,a=e.previousSessionId;return{id:n,started:r,lastActivity:o,segmentId:i,sampled:s,previousSessionId:a}}function Aa(e){if(ka())try{te.sessionStorage.setItem(Ta,JSON.stringify(e))}catch{}}function AS(e,t){return cd(e)?"session":t?"buffer":!1}function Ml({sessionSampleRate:e,allowBuffering:t,stickySession:n=!1},{previousSessionId:r}={}){let o=AS(e,t),i=ud({sampled:o,previousSessionId:r});return n&&Aa(i),i}function NS(){if(!ka())return null;try{let e=te.sessionStorage.getItem(Ta);if(!e)return null;let t=JSON.parse(e);return O&&D.infoTick("Loading existing session"),ud(t)}catch{return null}}function Sa(e,t,n=+new Date){return e===null||t===void 0||t<0?!0:t===0?!1:e+t<=n}function ld(e,{maxReplayDuration:t,sessionIdleExpire:n,targetTime:r=Date.now()}){return Sa(e.started,t,r)||Sa(e.lastActivity,n,r)}function dd(e,{sessionIdleExpire:t,maxReplayDuration:n}){return!(!ld(e,{sessionIdleExpire:t,maxReplayDuration:n})||e.sampled==="buffer"&&e.segmentId===0)}function Xs({sessionIdleExpire:e,maxReplayDuration:t,previousSessionId:n},r){let o=r.stickySession&&NS();return o?dd(o,{sessionIdleExpire:e,maxReplayDuration:t})?(O&&D.infoTick("Session in sessionStorage is expired, creating new one..."),Ml(r,{previousSessionId:o.id})):o:(O&&D.infoTick("Creating new session"),Ml(r,{previousSessionId:n}))}function MS(e){return e.type===$.Custom}function Na(e,t,n){return pd(e,t)?(fd(e,t,n),!0):!1}function OS(e,t,n){return pd(e,t)?fd(e,t,n):Promise.resolve(null)}async function fd(e,t,n){if(!e.eventBuffer)return null;try{n&&e.recordingMode==="buffer"&&e.eventBuffer.clear(),n&&(e.eventBuffer.hasCheckout=!0);let r=e.getOptions(),o=DS(t,r.beforeAddRecordingEvent);return o?await e.eventBuffer.addEvent(o):void 0}catch(r){let o=r&&r instanceof Nr?"addEventSizeExceeded":"addEvent";e.handleException(r),await e.stop({reason:o});let i=C();i&&i.recordDroppedEvent("internal_sdk_error","replay")}}function pd(e,t){if(!e.eventBuffer||e.isPaused()||!e.isEnabled())return!1;let n=xa(t.timestamp);return n+e.timeouts.sessionIdlePause<Date.now()?!1:n>e.getContext().initialTimestamp+e.getOptions().maxReplayDuration?(O&&D.infoTick(`Skipping event with timestamp ${n} because it is after maxReplayDuration`),!1):!0}function DS(e,t){try{if(typeof t=="function"&&MS(e))return t(e)}catch(n){return O&&D.exception(n,"An error occured in the `beforeAddRecordingEvent` callback, skipping the event..."),null}return e}function Ma(e){return!e.type}function _a(e){return e.type==="transaction"}function LS(e){return e.type==="replay_event"}function Ol(e){return e.type==="feedback"}function PS(e){return(t,n)=>{if(!e.isEnabled()||!Ma(t)&&!_a(t))return;let r=n&&n.statusCode;if(!(!r||r<200||r>=300)){if(_a(t)){FS(e,t);return}US(e,t)}}}function FS(e,t){let n=e.getContext();t.contexts&&t.contexts.trace&&t.contexts.trace.trace_id&&n.traceIds.size<100&&n.traceIds.add(t.contexts.trace.trace_id)}function US(e,t){let n=e.getContext();if(t.event_id&&n.errorIds.size<100&&n.errorIds.add(t.event_id),e.recordingMode!=="buffer"||!t.tags||!t.tags.replayId)return;let{beforeErrorSampling:r}=e.getOptions();typeof r=="function"&&!r(t)||$t(async()=>{try{await e.sendBufferedReplayOrFlush()}catch(o){e.handleException(o)}})}function BS(e){return t=>{!e.isEnabled()||!Ma(t)||HS(e,t)}}function HS(e,t){let n=t.exception&&t.exception.values&&t.exception.values[0]&&t.exception.values[0].value;if(typeof n=="string"&&(n.match(/(reactjs\.org\/docs\/error-decoder\.html\?invariant=|react\.dev\/errors\/)(418|419|422|423|425)/)||n.match(/(does not match server-rendered HTML|Hydration failed because)/i))){let r=_t({category:"replay.hydrate-error",data:{url:$n()}});Lr(e,r)}}function $S(e){let t=C();t&&t.on("beforeAddBreadcrumb",n=>WS(e,n))}function WS(e,t){if(!e.isEnabled()||!md(t))return;let n=zS(t);n&&Lr(e,n)}function zS(e){return!md(e)||["fetch","xhr","sentry.event","sentry.transaction"].includes(e.category)||e.category.startsWith("ui.")?null:e.category==="console"?jS(e):_t(e)}function jS(e){let t=e.data&&e.data.arguments;if(!Array.isArray(t)||t.length===0)return _t(e);let n=!1,r=t.map(o=>{if(!o)return o;if(typeof o=="string")return o.length>zo?(n=!0,`${o.slice(0,zo)}\u2026`):o;if(typeof o=="object")try{let i=De(o,7);return JSON.stringify(i).length>zo?(n=!0,`${JSON.stringify(i,null,2).slice(0,zo)}\u2026`):i}catch{}return o});return _t({...e,data:{...e.data,arguments:r,...n?{_meta:{warnings:["CONSOLE_ARG_TRUNCATED"]}}:{}}})}function md(e){return!!e.category}function GS(e,t){return e.type||!e.exception||!e.exception.values||!e.exception.values.length?!1:!!(t.originalException&&t.originalException.__rrweb__)}function qS(e,t){e.triggerUserActivity(),e.addUpdate(()=>t.timestamp?(e.throttledAddEvent({type:$.Custom,timestamp:t.timestamp*1e3,data:{tag:"breadcrumb",payload:{timestamp:t.timestamp,type:"default",category:"sentry.feedback",data:{feedbackId:t.event_id}}}}),!1):!0)}function YS(e,t){return e.recordingMode!=="buffer"||t.message===Ia||!t.exception||t.type?!1:cd(e.getOptions().errorSampleRate)}function VS(e){return Object.assign((t,n)=>!e.isEnabled()||e.isPaused()?t:LS(t)?(delete t.breadcrumbs,t):!Ma(t)&&!_a(t)&&!Ol(t)||!e.checkAndHandleExpiredSession()?t:Ol(t)?(e.flush(),t.contexts.feedback.replay_id=e.getSessionId(),qS(e,t),t):GS(t,n)&&!e.getOptions()._experiments.captureExceptions?(O&&D.log("Ignoring error from rrweb internals",t),null):((YS(e,t)||e.recordingMode==="session")&&(t.tags={...t.tags,replayId:e.getSessionId()}),t),{id:"Replay"})}function fi(e,t){return t.map(({type:n,start:r,end:o,name:i,data:s})=>{let a=e.throttledAddEvent({type:$.Custom,timestamp:r,data:{tag:"performanceSpan",payload:{op:n,description:i,startTimestamp:r,endTimestamp:o,data:s}}});return typeof a=="string"?Promise.resolve(null):a})}function KS(e){let{from:t,to:n}=e,r=Date.now()/1e3;return{type:"navigation.push",start:r,end:r,name:n,data:{previous:t}}}function JS(e){return t=>{if(!e.isEnabled())return;let n=KS(t);n!==null&&(e.getContext().urls.push(n.name),e.triggerUserActivity(),e.addUpdate(()=>(fi(e,[n]),!1)))}}function XS(e,t){return O&&e.getOptions()._experiments.traceInternals?!1:bs(t,C())}function hd(e,t){e.isEnabled()&&t!==null&&(XS(e,t.name)||e.addUpdate(()=>(fi(e,[t]),!0)))}function pi(e){if(!e)return;let t=new TextEncoder;try{if(typeof e=="string")return t.encode(e).length;if(e instanceof URLSearchParams)return t.encode(e.toString()).length;if(e instanceof FormData){let n=yd(e);return t.encode(n).length}if(e instanceof Blob)return e.size;if(e instanceof ArrayBuffer)return e.byteLength}catch{}}function gd(e){if(!e)return;let t=parseInt(e,10);return isNaN(t)?void 0:t}function Sd(e){try{if(typeof e=="string")return[e];if(e instanceof URLSearchParams)return[e.toString()];if(e instanceof FormData)return[yd(e)];if(!e)return[void 0]}catch(t){return O&&D.exception(t,"Failed to serialize body",e),[void 0,"BODY_PARSE_ERROR"]}return O&&D.info("Skipping network body because of body type",e),[void 0,"UNPARSEABLE_BODY_TYPE"]}function oi(e,t){if(!e)return{headers:{},size:void 0,_meta:{warnings:[t]}};let n={...e._meta},r=n.warnings||[];return n.warnings=[...r,t],e._meta=n,e}function _d(e,t){if(!t)return null;let{startTimestamp:n,endTimestamp:r,url:o,method:i,statusCode:s,request:a,response:c}=t;return{type:e,start:n/1e3,end:r/1e3,name:o,data:K({method:i,statusCode:s,request:a,response:c})}}function Mr(e){return{headers:{},size:e,_meta:{warnings:["URL_SKIPPED"]}}}function Gt(e,t,n){if(!t&&Object.keys(e).length===0)return;if(!t)return{headers:e};if(!n)return{headers:e,size:t};let r={headers:e,size:t},{body:o,warnings:i}=QS(n);return r.body=o,i&&i.length>0&&(r._meta={warnings:i}),r}function ya(e,t){return Object.entries(e).reduce((n,[r,o])=>{let i=r.toLowerCase();return t.includes(i)&&e[r]&&(n[i]=o),n},{})}function yd(e){return new URLSearchParams(e).toString()}function QS(e){if(!e||typeof e!="string")return{body:e};let t=e.length>gl,n=ZS(e);if(t){let r=e.slice(0,gl);return n?{body:r,warnings:["MAYBE_JSON_TRUNCATED"]}:{body:`${r}\u2026`,warnings:["TEXT_TRUNCATED"]}}if(n)try{return{body:JSON.parse(e)}}catch{}return{body:e}}function ZS(e){let t=e[0],n=e[e.length-1];return t==="["&&n==="]"||t==="{"&&n==="}"}function ii(e,t){let n=e_(e);return We(n,t)}function e_(e,t=te.document.baseURI){if(e.startsWith("http://")||e.startsWith("https://")||e.startsWith(te.location.origin))return e;let n=new URL(e,t);if(n.origin!==new URL(t).origin)return e;let r=n.href;return!e.endsWith("/")&&r.endsWith("/")?r.slice(0,-1):r}async function t_(e,t,n){try{let r=await r_(e,t,n),o=_d("resource.fetch",r);hd(n.replay,o)}catch(r){O&&D.exception(r,"Failed to capture fetch breadcrumb")}}function n_(e,t){let{input:n,response:r}=t,o=n?Ed(n):void 0,i=pi(o),s=r?gd(r.headers.get("content-length")):void 0;i!==void 0&&(e.data.request_body_size=i),s!==void 0&&(e.data.response_body_size=s)}async function r_(e,t,n){let r=Date.now(),{startTimestamp:o=r,endTimestamp:i=r}=t,{url:s,method:a,status_code:c=0,request_body_size:u,response_body_size:d}=e.data,l=ii(s,n.networkDetailAllowUrls)&&!ii(s,n.networkDetailDenyUrls),f=l?o_(n,t.input,u):Mr(u),m=await i_(l,n,t.response,d);return{startTimestamp:o,endTimestamp:i,url:s,method:a,statusCode:c,request:f,response:m}}function o_({networkCaptureBodies:e,networkRequestHeaders:t},n,r){let o=n?c_(n,t):{};if(!e)return Gt(o,r,void 0);let i=Ed(n),[s,a]=Sd(i),c=Gt(o,r,s);return a?oi(c,a):c}async function i_(e,{networkCaptureBodies:t,networkResponseHeaders:n},r,o){if(!e&&o!==void 0)return Mr(o);let i=r?Td(r.headers,n):{};if(!r||!t&&o!==void 0)return Gt(i,o,void 0);let[s,a]=await a_(r),c=s_(s,{networkCaptureBodies:t,responseBodySize:o,captureDetails:e,headers:i});return a?oi(c,a):c}function s_(e,{networkCaptureBodies:t,responseBodySize:n,captureDetails:r,headers:o}){try{let i=e&&e.length&&n===void 0?pi(e):n;return r?t?Gt(o,i,e):Gt(o,i,void 0):Mr(i)}catch(i){return O&&D.exception(i,"Failed to serialize response body"),Gt(o,n,void 0)}}async function a_(e){let t=u_(e);if(!t)return[void 0,"BODY_PARSE_ERROR"];try{return[await l_(t)]}catch(n){return n instanceof Error&&n.message.indexOf("Timeout")>-1?(O&&D.warn("Parsing text body from response timed out"),[void 0,"BODY_PARSE_TIMEOUT"]):(O&&D.exception(n,"Failed to get text body from response"),[void 0,"BODY_PARSE_ERROR"])}}function Ed(e=[]){if(!(e.length!==2||typeof e[1]!="object"))return e[1].body}function Td(e,t){let n={};return t.forEach(r=>{e.get(r)&&(n[r]=e.get(r))}),n}function c_(e,t){return e.length===1&&typeof e[0]!="string"?Dl(e[0],t):e.length===2?Dl(e[1],t):{}}function Dl(e,t){if(!e)return{};let n=e.headers;return n?n instanceof Headers?Td(n,t):Array.isArray(n)?{}:ya(n,t):{}}function u_(e){try{return e.clone()}catch(t){O&&D.exception(t,"Failed to clone response body")}}function l_(e){return new Promise((t,n)=>{let r=$t(()=>n(new Error("Timeout while trying to read response body")),500);d_(e).then(o=>t(o),o=>n(o)).finally(()=>clearTimeout(r))})}async function d_(e){return await e.text()}async function f_(e,t,n){try{let r=m_(e,t,n),o=_d("resource.xhr",r);hd(n.replay,o)}catch(r){O&&D.exception(r,"Failed to capture xhr breadcrumb")}}function p_(e,t){let{xhr:n,input:r}=t;if(!n)return;let o=pi(r),i=n.getResponseHeader("content-length")?gd(n.getResponseHeader("content-length")):__(n.response,n.responseType);o!==void 0&&(e.data.request_body_size=o),i!==void 0&&(e.data.response_body_size=i)}function m_(e,t,n){let r=Date.now(),{startTimestamp:o=r,endTimestamp:i=r,input:s,xhr:a}=t,{url:c,method:u,status_code:d=0,request_body_size:l,response_body_size:f}=e.data;if(!c)return null;if(!a||!ii(c,n.networkDetailAllowUrls)||ii(c,n.networkDetailDenyUrls)){let S=Mr(l),_=Mr(f);return{startTimestamp:o,endTimestamp:i,url:c,method:u,statusCode:d,request:S,response:_}}let m=a[it],p=m?ya(m.request_headers,n.networkRequestHeaders):{},g=ya(h_(a),n.networkResponseHeaders),[T,y]=n.networkCaptureBodies?Sd(s):[void 0],[x,U]=n.networkCaptureBodies?g_(a):[void 0],L=Gt(p,l,T),N=Gt(g,f,x);return{startTimestamp:o,endTimestamp:i,url:c,method:u,statusCode:d,request:y?oi(L,y):L,response:U?oi(N,U):N}}function h_(e){let t=e.getAllResponseHeaders();return t?t.split(`\r
`).reduce((n,r)=>{let[o,i]=r.split(": ");return i&&(n[o.toLowerCase()]=i),n},{}):{}}function g_(e){let t=[];try{return[e.responseText]}catch(n){t.push(n)}try{return S_(e.response,e.responseType)}catch(n){t.push(n)}return O&&D.warn("Failed to get xhr response body",...t),[void 0]}function S_(e,t){try{if(typeof e=="string")return[e];if(e instanceof Document)return[e.body.outerHTML];if(t==="json"&&e&&typeof e=="object")return[JSON.stringify(e)];if(!e)return[void 0]}catch(n){return O&&D.exception(n,"Failed to serialize body",e),[void 0,"BODY_PARSE_ERROR"]}return O&&D.info("Skipping network body because of body type",e),[void 0,"UNPARSEABLE_BODY_TYPE"]}function __(e,t){try{let n=t==="json"&&e&&typeof e=="object"?JSON.stringify(e):e;return pi(n)}catch{return}}function y_(e){let t=C();try{let{networkDetailAllowUrls:n,networkDetailDenyUrls:r,networkCaptureBodies:o,networkRequestHeaders:i,networkResponseHeaders:s}=e.getOptions(),a={replay:e,networkDetailAllowUrls:n,networkDetailDenyUrls:r,networkCaptureBodies:o,networkRequestHeaders:i,networkResponseHeaders:s};t&&t.on("beforeAddBreadcrumb",(c,u)=>E_(a,c,u))}catch{}}function E_(e,t,n){if(t.data)try{T_(t)&&b_(n)&&(p_(t,n),f_(t,n,e)),I_(t)&&v_(n)&&(n_(t,n),t_(t,n,e))}catch(r){O&&D.exception(r,"Error when enriching network breadcrumb")}}function T_(e){return e.category==="xhr"}function I_(e){return e.category==="fetch"}function b_(e){return e&&e.xhr}function v_(e){return e&&e.response}function C_(e){let t=C();Er(oS(e)),xt(JS(e)),$S(e),y_(e);let n=VS(e);Eo(n),t&&(t.on("beforeSendEvent",BS(e)),t.on("afterSendEvent",PS(e)),t.on("createDsc",r=>{let o=e.getSessionId();o&&e.isEnabled()&&e.recordingMode==="session"&&e.checkAndHandleExpiredSession()&&(r.replay_id=o)}),t.on("spanStart",r=>{e.lastActiveSpan=r}),t.on("spanEnd",r=>{e.lastActiveSpan=r}),t.on("beforeSendFeedback",(r,o)=>{let i=e.getSessionId();o&&o.includeReplay&&e.isEnabled()&&i&&r.contexts&&r.contexts.feedback&&(r.contexts.feedback.replay_id=i)}))}async function R_(e){try{return Promise.all(fi(e,[w_(te.performance.memory)]))}catch{return[]}}function w_(e){let{jsHeapSizeLimit:t,totalJSHeapSize:n,usedJSHeapSize:r}=e,o=Date.now()/1e3;return{type:"memory",name:"memory",start:o,end:o,data:{memory:{jsHeapSizeLimit:t,totalJSHeapSize:n,usedJSHeapSize:r}}}}function x_(e,t,n){let r,o,i,s=n&&n.maxWait?Math.max(n.maxWait,t):0;function a(){return c(),r=e(),r}function c(){o!==void 0&&clearTimeout(o),i!==void 0&&clearTimeout(i),o=i=void 0}function u(){return o!==void 0||i!==void 0?a():r}function d(){return o&&clearTimeout(o),o=$t(a,t),s&&i===void 0&&(i=$t(a,s)),r}return d.cancel=c,d.flush=u,d}function k_(e){let t=!1;return(n,r)=>{if(!e.checkAndHandleExpiredSession()){O&&D.warn("Received replay event after session expired.");return}let o=r||!t;t=!0,e.clickDetector&&Zg(e.clickDetector,n),e.addUpdate(()=>{if(e.recordingMode==="buffer"&&o&&e.setInitialState(),!Na(e,n,o))return!0;if(!o)return!1;let i=e.session;if(N_(e,o),e.recordingMode==="buffer"&&i&&e.eventBuffer){let s=e.eventBuffer.getEarliestTimestamp();s&&(O&&D.info(`Updating session start time to earliest event in buffer to ${new Date(s)}`),i.started=s,e.getOptions().stickySession&&Aa(i))}return i&&i.previousSessionId||e.recordingMode==="session"&&e.flush(),!0})}}function A_(e){let t=e.getOptions();return{type:$.Custom,timestamp:Date.now(),data:{tag:"options",payload:{shouldRecordCanvas:e.isRecordingCanvas(),sessionSampleRate:t.sessionSampleRate,errorSampleRate:t.errorSampleRate,useCompressionOption:t.useCompression,blockAllMedia:t.blockAllMedia,maskAllText:t.maskAllText,maskAllInputs:t.maskAllInputs,useCompression:e.eventBuffer?e.eventBuffer.type==="worker":!1,networkDetailHasUrls:t.networkDetailAllowUrls.length>0,networkCaptureBodies:t.networkCaptureBodies,networkRequestHasHeaders:t.networkRequestHeaders.length>0,networkResponseHasHeaders:t.networkResponseHeaders.length>0}}}}function N_(e,t){!t||!e.session||e.session.segmentId!==0||Na(e,A_(e),!1)}function M_(){let e=H().getPropagationContext().dsc;e&&delete e.replay_id;let t=X();if(t){let n=ge(t);delete n.replay_id}}function O_(e,t,n,r){return Fe(Zn(e,Sn(e),r,n),[[{type:"replay_event"},e],[{type:"replay_recording",length:typeof t=="string"?new TextEncoder().encode(t).length:t.length},t]])}function D_({recordingData:e,headers:t}){let n,r=`${JSON.stringify(t)}
`;if(typeof e=="string")n=`${r}${e}`;else{let i=new TextEncoder().encode(r);n=new Uint8Array(i.length+e.length),n.set(i),n.set(e,i.length)}return n}async function L_({client:e,scope:t,replayId:n,event:r}){let o=typeof e._integrations=="object"&&e._integrations!==null&&!Array.isArray(e._integrations)?Object.keys(e._integrations):void 0,i={event_id:n,integrations:o};e.emit("preprocessEvent",r,i);let s=await sr(e.getOptions(),r,i,t,e,se());if(!s)return null;s.platform=s.platform||"javascript";let a=e.getSdkMetadata(),{name:c,version:u}=a&&a.sdk||{};return s.sdk={...s.sdk,name:c||"sentry.javascript.unknown",version:u||"0.0.0"},s}async function P_({recordingData:e,replayId:t,segmentId:n,eventContext:r,timestamp:o,session:i}){let s=D_({recordingData:e,headers:{segment_id:n}}),{urls:a,errorIds:c,traceIds:u,initialTimestamp:d}=r,l=C(),f=H(),m=l&&l.getTransport(),p=l&&l.getDsn();if(!l||!m||!p||!i.sampled)return we({});let g={type:kh,replay_start_timestamp:d/1e3,timestamp:o/1e3,error_ids:c,trace_ids:u,urls:a,replay_id:t,segment_id:n,replay_type:i.sampled},T=await L_({scope:f,client:l,replayId:t,event:g});if(!T)return l.recordDroppedEvent("event_processor","replay",g),O&&D.info("An event processor returned `null`, will not send event."),we({});delete T.sdkProcessingMetadata;let y=O_(T,s,p,l.getOptions().tunnel),x;try{x=await m.send(y)}catch(L){let N=new Error(Ia);try{N.cause=L}catch{}throw N}if(typeof x.statusCode=="number"&&(x.statusCode<200||x.statusCode>=300))throw new si(x.statusCode);let U=tr({},x);if(er(U,"replay"))throw new Or(U);return x}var si=class extends Error{constructor(t){super(`Transport returned status code ${t}`)}},Or=class extends Error{constructor(t){super("Rate limit hit"),this.rateLimits=t}};async function Id(e,t={count:0,interval:Lh}){let{recordingData:n,onError:r}=e;if(n.length)try{return await P_(e),!0}catch(o){if(o instanceof si||o instanceof Or)throw o;if(wn("Replays",{_retryCount:t.count}),r&&r(o),t.count>=Ph){let i=new Error(`${Ia} - max retries exceeded`);try{i.cause=o}catch{}throw i}return t.interval*=++t.count,new Promise((i,s)=>{$t(async()=>{try{await Id(e,t),i(!0)}catch(a){s(a)}},t.interval)})}}var bd="__THROTTLED",F_="__SKIPPED";function U_(e,t,n){let r=new Map,o=a=>{let c=a-n;r.forEach((u,d)=>{d<c&&r.delete(d)})},i=()=>[...r.values()].reduce((a,c)=>a+c,0),s=!1;return(...a)=>{let c=Math.floor(Date.now()/1e3);if(o(c),i()>=t){let d=s;return s=!0,d?F_:bd}s=!1;let u=r.get(c)||0;return r.set(c,u+1),e(...a)}}var Ea=class e{constructor({options:t,recordingOptions:n}){e.prototype.__init.call(this),e.prototype.__init2.call(this),e.prototype.__init3.call(this),e.prototype.__init4.call(this),e.prototype.__init5.call(this),e.prototype.__init6.call(this),this.eventBuffer=null,this.performanceEntries=[],this.replayPerformanceEntries=[],this.recordingMode="session",this.timeouts={sessionIdlePause:Ah,sessionIdleExpire:Nh},this._lastActivity=Date.now(),this._isEnabled=!1,this._isPaused=!1,this._requiresManualStart=!1,this._hasInitializedCoreListeners=!1,this._context={errorIds:new Set,traceIds:new Set,urls:[],initialTimestamp:Date.now(),initialUrl:""},this._recordingOptions=n,this._options=t,this._debouncedFlush=x_(()=>this._flush(),this._options.flushMinDelay,{maxWait:this._options.flushMaxDelay}),this._throttledAddEvent=U_((s,a)=>OS(this,s,a),300,5);let{slowClickTimeout:r,slowClickIgnoreSelectors:o}=this.getOptions(),i=r?{threshold:Math.min(Fh,r),timeout:r,scrollTimeout:Uh,ignoreSelector:o?o.join(","):""}:void 0;if(i&&(this.clickDetector=new pa(this,i)),O){let s=t._experiments;D.setConfig({captureExceptions:!!s.captureExceptions,traceInternals:!!s.traceInternals})}}getContext(){return this._context}isEnabled(){return this._isEnabled}isPaused(){return this._isPaused}isRecordingCanvas(){return!!this._canvas}getOptions(){return this._options}handleException(t){O&&D.exception(t),this._options.onError&&this._options.onError(t)}initializeSampling(t){let{errorSampleRate:n,sessionSampleRate:r}=this._options,o=n<=0&&r<=0;if(this._requiresManualStart=o,!o){if(this._initializeSessionForSampling(t),!this.session){O&&D.exception(new Error("Unable to initialize and create session"));return}this.session.sampled!==!1&&(this.recordingMode=this.session.sampled==="buffer"&&this.session.segmentId===0?"buffer":"session",O&&D.infoTick(`Starting replay in ${this.recordingMode} mode`),this._initializeRecording())}}start(){if(this._isEnabled&&this.recordingMode==="session"){O&&D.info("Recording is already in progress");return}if(this._isEnabled&&this.recordingMode==="buffer"){O&&D.info("Buffering is in progress, call `flush()` to save the replay");return}O&&D.infoTick("Starting replay in session mode"),this._updateUserActivity();let t=Xs({maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire},{stickySession:this._options.stickySession,sessionSampleRate:1,allowBuffering:!1});this.session=t,this._initializeRecording()}startBuffering(){if(this._isEnabled){O&&D.info("Buffering is in progress, call `flush()` to save the replay");return}O&&D.infoTick("Starting replay in buffer mode");let t=Xs({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration},{stickySession:this._options.stickySession,sessionSampleRate:0,allowBuffering:!0});this.session=t,this.recordingMode="buffer",this._initializeRecording()}startRecording(){try{let t=this._canvas;this._stopRecording=At({...this._recordingOptions,...this.recordingMode==="buffer"?{checkoutEveryNms:Dh}:this._options._experiments.continuousCheckout&&{checkoutEveryNms:Math.max(36e4,this._options._experiments.continuousCheckout)},emit:k_(this),onMutation:this._onMutationHandler,...t?{recordCanvas:t.recordCanvas,getCanvasManager:t.getCanvasManager,sampling:t.sampling,dataURLOptions:t.dataURLOptions}:{}})}catch(t){this.handleException(t)}}stopRecording(){try{return this._stopRecording&&(this._stopRecording(),this._stopRecording=void 0),!0}catch(t){return this.handleException(t),!1}}async stop({forceFlush:t=!1,reason:n}={}){if(this._isEnabled){this._isEnabled=!1;try{O&&D.info(`Stopping Replay${n?` triggered by ${n}`:""}`),M_(),this._removeListeners(),this.stopRecording(),this._debouncedFlush.cancel(),t&&await this._flush({force:!0}),this.eventBuffer&&this.eventBuffer.destroy(),this.eventBuffer=null,xS(this)}catch(r){this.handleException(r)}}}pause(){this._isPaused||(this._isPaused=!0,this.stopRecording(),O&&D.info("Pausing replay"))}resume(){!this._isPaused||!this._checkSession()||(this._isPaused=!1,this.startRecording(),O&&D.info("Resuming replay"))}async sendBufferedReplayOrFlush({continueRecording:t=!0}={}){if(this.recordingMode==="session")return this.flushImmediate();let n=Date.now();O&&D.info("Converting buffer to session"),await this.flushImmediate();let r=this.stopRecording();!t||!r||this.recordingMode!=="session"&&(this.recordingMode="session",this.session&&(this._updateUserActivity(n),this._updateSessionActivity(n),this._maybeSaveSession()),this.startRecording())}addUpdate(t){let n=t();this.recordingMode!=="buffer"&&n!==!0&&this._debouncedFlush()}triggerUserActivity(){if(this._updateUserActivity(),!this._stopRecording){if(!this._checkSession())return;this.resume();return}this.checkAndHandleExpiredSession(),this._updateSessionActivity()}updateUserActivity(){this._updateUserActivity(),this._updateSessionActivity()}conditionalFlush(){return this.recordingMode==="buffer"?Promise.resolve():this.flushImmediate()}flush(){return this._debouncedFlush()}flushImmediate(){return this._debouncedFlush(),this._debouncedFlush.flush()}cancelFlush(){this._debouncedFlush.cancel()}getSessionId(){return this.session&&this.session.id}checkAndHandleExpiredSession(){if(this._lastActivity&&Sa(this._lastActivity,this.timeouts.sessionIdlePause)&&this.session&&this.session.sampled==="session"){this.pause();return}return!!this._checkSession()}setInitialState(){let t=`${te.location.pathname}${te.location.hash}${te.location.search}`,n=`${te.location.origin}${t}`;this.performanceEntries=[],this.replayPerformanceEntries=[],this._clearContext(),this._context.initialUrl=n,this._context.initialTimestamp=Date.now(),this._context.urls.push(n)}throttledAddEvent(t,n){let r=this._throttledAddEvent(t,n);if(r===bd){let o=_t({category:"replay.throttled"});this.addUpdate(()=>!Na(this,{type:zg,timestamp:o.timestamp||0,data:{tag:"breadcrumb",payload:o,metric:!0}}))}return r}getCurrentRoute(){let t=this.lastActiveSpan||X(),n=t&&J(t),o=(n&&A(n).data||{})[ve];if(!(!n||!o||!["route","custom"].includes(o)))return A(n).description}_initializeRecording(){this.setInitialState(),this._updateSessionActivity(),this.eventBuffer=CS({useCompression:this._options.useCompression,workerUrl:this._options.workerUrl}),this._removeListeners(),this._addListeners(),this._isEnabled=!0,this._isPaused=!1,this.startRecording()}_initializeSessionForSampling(t){let n=this._options.errorSampleRate>0,r=Xs({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration,previousSessionId:t},{stickySession:this._options.stickySession,sessionSampleRate:this._options.sessionSampleRate,allowBuffering:n});this.session=r}_checkSession(){if(!this.session)return!1;let t=this.session;return dd(t,{sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration})?(this._refreshSession(t),!1):!0}async _refreshSession(t){this._isEnabled&&(await this.stop({reason:"refresh session"}),this.initializeSampling(t.id))}_addListeners(){try{te.document.addEventListener("visibilitychange",this._handleVisibilityChange),te.addEventListener("blur",this._handleWindowBlur),te.addEventListener("focus",this._handleWindowFocus),te.addEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.addListeners(),this._hasInitializedCoreListeners||(C_(this),this._hasInitializedCoreListeners=!0)}catch(t){this.handleException(t)}this._performanceCleanupCallback=IS(this)}_removeListeners(){try{te.document.removeEventListener("visibilitychange",this._handleVisibilityChange),te.removeEventListener("blur",this._handleWindowBlur),te.removeEventListener("focus",this._handleWindowFocus),te.removeEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.removeListeners(),this._performanceCleanupCallback&&this._performanceCleanupCallback()}catch(t){this.handleException(t)}}__init(){this._handleVisibilityChange=()=>{te.document.visibilityState==="visible"?this._doChangeToForegroundTasks():this._doChangeToBackgroundTasks()}}__init2(){this._handleWindowBlur=()=>{let t=_t({category:"ui.blur"});this._doChangeToBackgroundTasks(t)}}__init3(){this._handleWindowFocus=()=>{let t=_t({category:"ui.focus"});this._doChangeToForegroundTasks(t)}}__init4(){this._handleKeyboardEvent=t=>{cS(this,t)}}_doChangeToBackgroundTasks(t){!this.session||ld(this.session,{maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire})||(t&&this._createCustomBreadcrumb(t),this.conditionalFlush())}_doChangeToForegroundTasks(t){if(!this.session)return;if(!this.checkAndHandleExpiredSession()){O&&D.info("Document has become active, but session has expired");return}t&&this._createCustomBreadcrumb(t)}_updateUserActivity(t=Date.now()){this._lastActivity=t}_updateSessionActivity(t=Date.now()){this.session&&(this.session.lastActivity=t,this._maybeSaveSession())}_createCustomBreadcrumb(t){this.addUpdate(()=>{this.throttledAddEvent({type:$.Custom,timestamp:t.timestamp||0,data:{tag:"breadcrumb",payload:t}})})}_addPerformanceEntries(){let t=fS(this.performanceEntries).concat(this.replayPerformanceEntries);if(this.performanceEntries=[],this.replayPerformanceEntries=[],this._requiresManualStart){let n=this._context.initialTimestamp/1e3;t=t.filter(r=>r.start>=n)}return Promise.all(fi(this,t))}_clearContext(){this._context.errorIds.clear(),this._context.traceIds.clear(),this._context.urls=[]}_updateInitialTimestampFromEventBuffer(){let{session:t,eventBuffer:n}=this;if(!t||!n||this._requiresManualStart||t.segmentId)return;let r=n.getEarliestTimestamp();r&&r<this._context.initialTimestamp&&(this._context.initialTimestamp=r)}_popEventContext(){let t={initialTimestamp:this._context.initialTimestamp,initialUrl:this._context.initialUrl,errorIds:Array.from(this._context.errorIds),traceIds:Array.from(this._context.traceIds),urls:this._context.urls};return this._clearContext(),t}async _runFlush(){let t=this.getSessionId();if(!this.session||!this.eventBuffer||!t){O&&D.error("No session or eventBuffer found to flush.");return}if(await this._addPerformanceEntries(),!(!this.eventBuffer||!this.eventBuffer.hasEvents)&&(await R_(this),!!this.eventBuffer&&t===this.getSessionId()))try{this._updateInitialTimestampFromEventBuffer();let n=Date.now();if(n-this._context.initialTimestamp>this._options.maxReplayDuration+3e4)throw new Error("Session is too long, not sending replay");let r=this._popEventContext(),o=this.session.segmentId++;this._maybeSaveSession();let i=await this.eventBuffer.finish();await Id({replayId:t,recordingData:i,segmentId:o,eventContext:r,session:this.session,timestamp:n,onError:s=>this.handleException(s)})}catch(n){this.handleException(n),this.stop({reason:"sendReplay"});let r=C();if(r){let o=n instanceof Or?"ratelimit_backoff":"send_error";r.recordDroppedEvent(o,"replay")}}}__init5(){this._flush=async({force:t=!1}={})=>{if(!this._isEnabled&&!t)return;if(!this.checkAndHandleExpiredSession()){O&&D.error("Attempting to finish replay event after session expired.");return}if(!this.session)return;let n=this.session.started,o=Date.now()-n;this._debouncedFlush.cancel();let i=o<this._options.minReplayDuration,s=o>this._options.maxReplayDuration+5e3;if(i||s){O&&D.info(`Session duration (${Math.floor(o/1e3)}s) is too ${i?"short":"long"}, not sending replay.`),i&&this._debouncedFlush();return}let a=this.eventBuffer;a&&this.session.segmentId===0&&!a.hasCheckout&&O&&D.info("Flushing initial segment without checkout.");let c=!!this._flushLock;this._flushLock||(this._flushLock=this._runFlush());try{await this._flushLock}catch(u){this.handleException(u)}finally{this._flushLock=void 0,c&&this._debouncedFlush()}}}_maybeSaveSession(){this.session&&this._options.stickySession&&Aa(this.session)}__init6(){this._onMutationHandler=t=>{let n=t.length,r=this._options.mutationLimit,o=this._options.mutationBreadcrumbLimit,i=r&&n>r;if(n>o||i){let s=_t({category:"replay.mutations",data:{count:n,limit:i}});this._createCustomBreadcrumb(s)}return i?(this.stop({reason:"mutationLimit",forceFlush:this.recordingMode==="session"}),!1):!0}}};function Ir(e,t){return[...e,...t].join(",")}function B_({mask:e,unmask:t,block:n,unblock:r,ignore:o}){let i=['base[href="/"]'],s=Ir(e,[".sentry-mask","[data-sentry-mask]"]),a=Ir(t,[]);return{maskTextSelector:s,unmaskTextSelector:a,blockSelector:Ir(n,[".sentry-block","[data-sentry-block]",...i]),unblockSelector:Ir(r,[]),ignoreSelector:Ir(o,[".sentry-ignore","[data-sentry-ignore]",'input[type="file"]'])}}function H_({el:e,key:t,maskAttributes:n,maskAllText:r,privacyOptions:o,value:i}){return!r||o.unmaskTextSelector&&e.matches(o.unmaskTextSelector)?i:n.includes(t)||t==="value"&&e.tagName==="INPUT"&&["submit","button"].includes(e.getAttribute("type")||"")?i.replace(/[\S]/g,"*"):i}var Ll='img,image,svg,video,object,picture,embed,map,audio,link[rel="icon"],link[rel="apple-touch-icon"]',$_=["content-length","content-type","accept"],Pl=!1,Oa=e=>new ai(e),ai=class e{static __initStatic(){this.id="Replay"}constructor({flushMinDelay:t=Mh,flushMaxDelay:n=Oh,minReplayDuration:r=Bh,maxReplayDuration:o=Sl,stickySession:i=!0,useCompression:s=!0,workerUrl:a,_experiments:c={},maskAllText:u=!0,maskAllInputs:d=!0,blockAllMedia:l=!0,mutationBreadcrumbLimit:f=750,mutationLimit:m=1e4,slowClickTimeout:p=7e3,slowClickIgnoreSelectors:g=[],networkDetailAllowUrls:T=[],networkDetailDenyUrls:y=[],networkCaptureBodies:x=!0,networkRequestHeaders:U=[],networkResponseHeaders:L=[],mask:N=[],maskAttributes:S=["title","placeholder"],unmask:_=[],block:I=[],unblock:B=[],ignore:E=[],maskFn:b,beforeAddRecordingEvent:M,beforeErrorSampling:z,onError:Q}={}){this.name=e.id;let le=B_({mask:N,unmask:_,block:I,unblock:B,ignore:E});if(this._recordingOptions={maskAllInputs:d,maskAllText:u,maskInputOptions:{password:!0},maskTextFn:b,maskInputFn:b,maskAttributeFn:(F,me,q)=>H_({maskAttributes:S,maskAllText:u,privacyOptions:le,key:F,value:me,el:q}),...le,slimDOMOptions:"all",inlineStylesheet:!0,inlineImages:!1,collectFonts:!0,errorHandler:F=>{try{F.__rrweb__=!0}catch{}}},this._initialOptions={flushMinDelay:t,flushMaxDelay:n,minReplayDuration:Math.min(r,Hh),maxReplayDuration:Math.min(o,Sl),stickySession:i,useCompression:s,workerUrl:a,blockAllMedia:l,maskAllInputs:d,maskAllText:u,mutationBreadcrumbLimit:f,mutationLimit:m,slowClickTimeout:p,slowClickIgnoreSelectors:g,networkDetailAllowUrls:T,networkDetailDenyUrls:y,networkCaptureBodies:x,networkRequestHeaders:Fl(U),networkResponseHeaders:Fl(L),beforeAddRecordingEvent:M,beforeErrorSampling:z,onError:Q,_experiments:c},this._initialOptions.blockAllMedia&&(this._recordingOptions.blockSelector=this._recordingOptions.blockSelector?`${this._recordingOptions.blockSelector},${Ll}`:Ll),this._isInitialized&&oo())throw new Error("Multiple Sentry Session Replay instances are not supported");this._isInitialized=!0}get _isInitialized(){return Pl}set _isInitialized(t){Pl=t}afterAllSetup(t){!oo()||this._replay||(this._setup(t),this._initialize(t))}start(){this._replay&&this._replay.start()}startBuffering(){this._replay&&this._replay.startBuffering()}stop(){return this._replay?this._replay.stop({forceFlush:this._replay.recordingMode==="session"}):Promise.resolve()}flush(t){return this._replay?this._replay.isEnabled()?this._replay.sendBufferedReplayOrFlush(t):(this._replay.start(),Promise.resolve()):Promise.resolve()}getReplayId(){if(!(!this._replay||!this._replay.isEnabled()))return this._replay.getSessionId()}getRecordingMode(){if(!(!this._replay||!this._replay.isEnabled()))return this._replay.recordingMode}_initialize(t){this._replay&&(this._maybeLoadFromReplayCanvasIntegration(t),this._replay.initializeSampling())}_setup(t){let n=W_(this._initialOptions,t);this._replay=new Ea({options:n,recordingOptions:this._recordingOptions})}_maybeLoadFromReplayCanvasIntegration(t){try{let n=t.getIntegrationByName("ReplayCanvas");if(!n)return;this._replay._canvas=n.getOptions()}catch{}}};ai.__initStatic();function W_(e,t){let n=t.getOptions(),r={sessionSampleRate:0,errorSampleRate:0,...K(e)},o=Bt(n.replaysSessionSampleRate),i=Bt(n.replaysOnErrorSampleRate);return o==null&&i==null&&Ge(()=>{console.warn("Replay is disabled because neither `replaysSessionSampleRate` nor `replaysOnErrorSampleRate` are set.")}),o!=null&&(r.sessionSampleRate=o),i!=null&&(r.errorSampleRate=i),r}function Fl(e){return[...$_,...e.map(t=>t.toLowerCase())]}var vd=new WeakMap,Da=new Map,Pr={traceFetch:!0,traceXHR:!0,enableHTTPTimings:!0,trackFetchStreamPerformance:!1};function Rd(e,t){let{traceFetch:n,traceXHR:r,trackFetchStreamPerformance:o,shouldCreateSpanForRequest:i,enableHTTPTimings:s,tracePropagationTargets:a}={traceFetch:Pr.traceFetch,traceXHR:Pr.traceXHR,trackFetchStreamPerformance:Pr.trackFetchStreamPerformance,...t},c=typeof i=="function"?i:l=>!0,u=l=>q_(l,a),d={};n&&(e.addEventProcessor(l=>(l.type==="transaction"&&l.spans&&l.spans.forEach(f=>{if(f.op==="http.client"){let m=Da.get(f.span_id);m&&(f.timestamp=m/1e3,Da.delete(f.span_id))}}),l)),o&&qi(l=>{if(l.response){let f=vd.get(l.response);f&&l.endTimestamp&&Da.set(f,l.endTimestamp)}}),qn(l=>{let f=vs(l,c,u,d);if(l.response&&l.fetchData.__span&&vd.set(l.response,l.fetchData.__span),f){let m=wd(l.fetchData.url),p=m?qe(m).host:void 0;f.setAttributes({"http.url":m,"server.address":p})}s&&f&&Cd(f)})),r&&Tr(l=>{let f=Y_(l,c,u,d);s&&f&&Cd(f)})}function z_(e){return e.entryType==="resource"&&"initiatorType"in e&&typeof e.nextHopProtocol=="string"&&(e.initiatorType==="fetch"||e.initiatorType==="xmlhttprequest")}function Cd(e){let{url:t}=A(e).data||{};if(!t||typeof t!="string")return;let n=ot("resource",({entries:r})=>{r.forEach(o=>{z_(o)&&o.name.endsWith(t)&&(G_(o).forEach(s=>e.setAttribute(...s)),setTimeout(n))})})}function j_(e){let t="unknown",n="unknown",r="";for(let o of e){if(o==="/"){[t,n]=e.split("/");break}if(!isNaN(Number(o))){t=r==="h"?"http":r,n=e.split(r)[1];break}r+=o}return r===e&&(t=r),{name:t,version:n}}function yt(e=0){return((ie||performance.timeOrigin)+e)/1e3}function G_(e){let{name:t,version:n}=j_(e.nextHopProtocol),r=[];return r.push(["network.protocol.version",n],["network.protocol.name",t]),ie?[...r,["http.request.redirect_start",yt(e.redirectStart)],["http.request.fetch_start",yt(e.fetchStart)],["http.request.domain_lookup_start",yt(e.domainLookupStart)],["http.request.domain_lookup_end",yt(e.domainLookupEnd)],["http.request.connect_start",yt(e.connectStart)],["http.request.secure_connection_start",yt(e.secureConnectionStart)],["http.request.connection_end",yt(e.connectEnd)],["http.request.request_start",yt(e.requestStart)],["http.request.response_start",yt(e.responseStart)],["http.request.response_end",yt(e.responseEnd)]]:r}function q_(e,t){let n=k.location&&k.location.href;if(n){let r,o;try{r=new URL(e,n),o=new URL(n).origin}catch{return!1}let i=r.origin===o;return t?We(r.toString(),t)||i&&We(r.pathname,t):i}else{let r=!!e.match(/^\/(?!\/)/);return t?We(e,t):r}}function Y_(e,t,n,r){let o=e.xhr,i=o&&o[it];if(!o||o.__sentry_own_request__||!i)return;let s=Ce()&&t(i.url);if(e.endTimestamp&&s){let f=o.__sentry_xhr_span_id__;if(!f)return;let m=r[f];m&&i.status_code!==void 0&&(Tn(m,i.status_code),m.end(),delete r[f]);return}let a=wd(i.url),c=a?qe(a).host:void 0,u=!!X(),d=s&&u?ke({name:`${i.method} ${i.url}`,attributes:{type:"xhr","http.method":i.method,"http.url":a,url:i.url,"server.address":c,[Z]:"auto.http.browser",[xe]:"http.client"}}):new Be;o.__sentry_xhr_span_id__=d.spanContext().spanId,r[o.__sentry_xhr_span_id__]=d;let l=C();return o.setRequestHeader&&n(i.url)&&l&&V_(o,l,Ce()&&u?d:void 0),d}function V_(e,t,n){let r=H(),o=se(),{traceId:i,spanId:s,sampled:a,dsc:c}={...o.getPropagationContext(),...r.getPropagationContext()},u=n&&Ce()?In(n):Zt(i,s,a),d=gn(c||(n?ge(n):Ut(i,t)));K_(e,u,d)}function K_(e,t,n){try{e.setRequestHeader("sentry-trace",t),n&&e.setRequestHeader(vt,n)}catch{}}function wd(e){try{return new URL(e,k.location.origin).href}catch{return}}function xd(){k&&k.document?k.document.addEventListener("visibilitychange",()=>{let e=X();if(!e)return;let t=J(e);if(k.document.hidden&&t){let n="cancelled",{op:r,status:o}=A(t);Se&&h.log(`[Tracing] Transaction: ${n} -> since tab moved to the background, op: ${r}`),o||t.setStatus({code:2,message:n}),t.setAttribute("sentry.cancellation_reason","document.hidden"),t.end()}}):Se&&h.warn("[Tracing] Could not set up background tab detection due to lack of global document")}var J_="BrowserTracing",X_={...Cn,instrumentNavigation:!0,instrumentPageLoad:!0,markBackgroundSpan:!0,enableLongTask:!0,enableLongAnimationFrame:!0,enableInp:!0,_experiments:{},...Pr},La=(e={})=>{ho();let{enableInp:t,enableLongTask:n,enableLongAnimationFrame:r,_experiments:{enableInteractions:o,enableStandaloneClsSpans:i},beforeStartSpan:s,idleTimeout:a,finalTimeout:c,childSpanTimeout:u,markBackgroundSpan:d,traceFetch:l,traceXHR:f,trackFetchStreamPerformance:m,shouldCreateSpanForRequest:p,enableHTTPTimings:g,instrumentPageLoad:T,instrumentNavigation:y}={...X_,...e},x=Ps({recordClsStandaloneSpans:i||!1});t&&js(),r&&R.PerformanceObserver&&PerformanceObserver.supportedEntryTypes&&PerformanceObserver.supportedEntryTypes.includes("long-animation-frame")?Us():n&&Fs(),o&&Bs();let U={name:void 0,source:void 0};function L(N,S){let _=S.op==="pageload",I=s?s(S):S,B=I.attributes||{};S.name!==I.name&&(B[ve]="custom",I.attributes=B),U.name=I.name,U.source=B[ve];let E=_o(I,{idleTimeout:a,finalTimeout:c,childSpanTimeout:u,disableAutoFinish:_,beforeSpanEnd:M=>{x(),Hs(M,{recordClsOnPageloadSpan:!i})}});function b(){["interactive","complete"].includes(k.document.readyState)&&N.emit("idleSpanEnableAutoFinish",E)}return _&&k.document&&(k.document.addEventListener("readystatechange",()=>{b()}),b()),E}return{name:J_,afterAllSetup(N){let S,_=k.location&&k.location.href;N.on("startNavigationSpan",I=>{C()===N&&(S&&!A(S).timestamp&&(Se&&h.log(`[Tracing] Finishing current root span with op: ${A(S).op}`),S.end()),S=L(N,{op:"navigation",...I}))}),N.on("startPageLoadSpan",(I,B={})=>{if(C()!==N)return;S&&!A(S).timestamp&&(Se&&h.log(`[Tracing] Finishing current root span with op: ${A(S).op}`),S.end());let E=B.sentryTrace||kd("sentry-trace"),b=B.baggage||kd("baggage"),M=Xi(E,b);H().setPropagationContext(M),S=L(N,{op:"pageload",...I})}),N.on("spanEnd",I=>{let B=A(I).op;if(I!==J(I)||B!=="navigation"&&B!=="pageload")return;let E=H(),b=E.getPropagationContext();E.setPropagationContext({...b,sampled:b.sampled!==void 0?b.sampled:Ye(I),dsc:b.dsc||ge(I)})}),k.location&&(T&&Ad(N,{name:k.location.pathname,startTime:ie?ie/1e3:void 0,attributes:{[ve]:"url",[Z]:"auto.pageload.browser"}}),y&&xt(({to:I,from:B})=>{if(B===void 0&&_&&_.indexOf(I)!==-1){_=void 0;return}B!==I&&(_=void 0,Nd(N,{name:k.location.pathname,attributes:{[ve]:"url",[Z]:"auto.navigation.browser"}}))})),d&&xd(),o&&Q_(a,c,u,U),t&&Gs(),Rd(N,{traceFetch:l,traceXHR:f,trackFetchStreamPerformance:m,tracePropagationTargets:N.getOptions().tracePropagationTargets,shouldCreateSpanForRequest:p,enableHTTPTimings:g})}}};function Ad(e,t,n){e.emit("startPageLoadSpan",t,n),H().setTransactionName(t.name);let r=X();return(r&&A(r).op)==="pageload"?r:void 0}function Nd(e,t){se().setPropagationContext(en()),H().setPropagationContext(en()),e.emit("startNavigationSpan",t),H().setTransactionName(t.name);let n=X();return(n&&A(n).op)==="navigation"?n:void 0}function kd(e){let t=Pi(`meta[name=${e}]`);return t?t.getAttribute("content"):void 0}function Q_(e,t,n,r){let o,i=()=>{let s="ui.action.click",a=X(),c=a&&J(a);if(c){let u=A(c).op;if(["navigation","pageload"].includes(u)){Se&&h.warn(`[Tracing] Did not create ${s} span because a pageload or navigation span is in progress.`);return}}if(o&&(o.setAttribute(En,"interactionInterrupted"),o.end(),o=void 0),!r.name){Se&&h.warn(`[Tracing] Did not create ${s} transaction because _latestRouteName is missing.`);return}o=_o({name:r.name,op:s,attributes:{[ve]:r.source||"url"}},{idleTimeout:e,finalTimeout:t,childSpanTimeout:n})};k.document&&addEventListener("click",i,{once:!1,capture:!0})}var Md=Wr(vi(),1);function Pa(e){let t={...e};return dr(t,"react"),wn("react",{version:Md.version}),Ys(t)}var Fd=Wr(Wd()),Ur=Wr(vi());var Od={"app-container":"S"};var pe=Wr(vi()),ey=(0,pe.lazy)(()=>import("./FormulaBar-REZCV7MB.js")),ty=(0,pe.lazy)(()=>import("./ToolBar-LWJAOYC6.js")),ny=(0,pe.lazy)(()=>import("./canvas-ZB3L6ACS.js")),ry=(0,pe.lazy)(()=>import("./SheetBar-SHBSNZZ6.js")),oy=(0,pe.lazy)(()=>import("./MenuBar-MADY3BDU.js")),mi=(0,pe.memo)(({controller:e})=>pe.default.createElement("div",{className:Od["app-container"],"data-testid":"app-container"},pe.default.createElement(pe.Suspense,{fallback:pe.default.createElement("div",null,"loading")},pe.default.createElement(oy,{controller:e}),pe.default.createElement(ty,{controller:e}),pe.default.createElement(ey,{controller:e}),pe.default.createElement(ny,{controller:e}),pe.default.createElement(ry,{controller:e}))));mi.displayName="App";var Fa={top:0,left:0,row:0,col:0,scrollLeft:0,scrollTop:0},Fr=class{constructor(t,n){this.scrollValue={};this.changeSet=new Set;this.floatElementUuid="";this.copyRange=void 0;this.isCut=!1;this.isNoChange=!1;this.deleteSheet=t=>{this.model.deleteSheet(t),this.emitChange()};this.getCell=t=>this.model.getCell(t);this.model=t,this.hooks=n}applyCommandList(t){this.model.applyCommandList(t)}getHooks(){return this.hooks}validateDefinedName(t){return this.model.validateDefinedName(t)}validateDrawing(t){return this.model.validateDrawing(t)}validateRange(t){return this.model.validateRange(t)}getCurrentSheetId(){return this.model.getCurrentSheetId()}getSheetList(){return this.model.getSheetList()}getSheetInfo(t){return this.model.getSheetInfo(t)}batchUpdate(t,n=!1){this.isNoChange=!0;let r=t();n&&this.changeSet.add("noHistory"),this.isNoChange=!1,r&&this.emitChange()}emitChange(){this.isNoChange||(this.model.emitChange(this.changeSet),this.changeSet=new Set)}getActiveRange(t){return this.model.getActiveRange(t)}setNextActiveCell(t){let{range:n,isMerged:r}=this.getActiveRange(),o=n.col,i=n.row,s=this.getSheetInfo(n.sheetId),a={...n,rowCount:1,colCount:1};if(t==="left"){for(o--;o>0&&this.getColWidth(o).len<=0;)o--;a.col=o}if(t==="right"){for(r?o=n.col+n.colCount:o++;o<s.colCount&&this.getColWidth(o).len<=0;)o++;a.col=o}if(t==="up"){for(i--;i>0&&this.getRowHeight(i).len<=0;)i--;a.row=i}if(t==="down"){for(r?i=n.row+n.rowCount:i++;i<s.rowCount&&this.getRowHeight(i).len<=0;)i++;a.row=i}this.setActiveRange(a)}setActiveRange(t){this.model.setActiveRange(t),this.emitChange()}setCurrentSheetId(t){this.model.setCurrentSheetId(t),this.setScroll(this.getScroll())}getWorksheet(t){return this.model.getWorksheet(t)}setWorksheet(t,n){this.model.setWorksheet(t,n),this.emitChange()}addSheet(){let t=this.model.addSheet();return this.setScroll({...Fa}),t}updateSheetInfo(t,n){this.model.updateSheetInfo(t,n),this.emitChange()}hideSheet(t){this.model.hideSheet(t),this.emitChange()}unhideSheet(t){this.model.unhideSheet(t),this.emitChange()}renameSheet(t,n){this.model.renameSheet(t,n),this.emitChange()}fromJSON(t){this.model.fromJSON(t),this.setScroll({...Fa})}toJSON(){return this.model.toJSON()}setCell(t,n,r){this.model.setCell(t,n,r),this.emitChange()}setCellValue(t,n){let r=this.getCell(n);if(rc(r?.style?.numberFormat)&&typeof t=="string"&&!isNaN(Date.parse(t))){let o=oc(new Date(t));this.model.setCellValue(o,n)}else this.model.setCellValue(t,n);this.emitChange()}updateCellStyle(t,n){this.model.updateCellStyle(t,n),this.emitChange()}canRedo(){return this.model.canRedo()}canUndo(){return this.model.canUndo()}undo(){this.model.undo(),this.changeSet.add("scroll"),this.changeSet.add("undo"),this.emitChange()}redo(){this.model.redo(),this.changeSet.add("scroll"),this.changeSet.add("redo"),this.emitChange()}getColWidth(t,n){return this.model.getColWidth(t,n)}setColWidth(t,n,r){this.model.setColWidth(t,n,r),this.emitChange()}getRowHeight(t,n){return this.model.getRowHeight(t,n)}setRowHeight(t,n,r){this.model.setRowHeight(t,n,r),this.emitChange()}getCellSize(t){return t.sheetId=t.sheetId||this.getCurrentSheetId(),this.getRangeSize(t)}getRangeSize(t){let{row:n,col:r,colCount:o,rowCount:i}=t,s=n,a=r,c=n+i,u=r+o,d=t.sheetId||this.getCurrentSheetId(),l=this.getSheetInfo(d);if(!l)return{width:0,height:0};qa(t)?(a=0,u=l.colCount,s=0,c=l.rowCount):Va(t)?(s=0,c=l.rowCount):Ya(t)&&(a=0,u=l.colCount);let f=0,m=0;for(;s<c;s++)m+=this.getRowHeight(s,d).len;for(;a<u;a++)f+=this.getColWidth(a,d).len;return{width:f,height:m}}computeCellPosition(t){let{row:n,col:r}=t,o=t.sheetId||this.model.getCurrentSheetId(),i=zr.get(),s=this.getScroll(o),a=i.width,c=i.height,u=s.row,d=s.col;if(r>=s.col)for(;d<r;)a+=this.getColWidth(d,o).len,d++;else for(a=-i.width;d>r;)a-=this.getColWidth(d,o).len,d--;if(n>=s.row)for(;u<n;)c+=this.getRowHeight(u,o).len,u++;else for(c=-i.height;u>n;)c-=this.getRowHeight(u,o).len,u--;return{top:c,left:a}}addRow(t,n,r=!1){this.model.addRow(t,n,r),this.emitChange()}addCol(t,n,r=!1){this.model.addCol(t,n,r),this.emitChange()}deleteCol(t,n){this.model.deleteCol(t,n),this.emitChange()}deleteRow(t,n){this.model.deleteRow(t,n),this.emitChange()}hideCol(t,n){this.model.hideCol(t,n),this.emitChange()}hideRow(t,n){this.model.hideRow(t,n),this.emitChange()}getScroll(t){let n=t||this.model.getCurrentSheetId();return{...this.scrollValue[n]||{...Fa}}}setScroll(t){let n=this.model.getCurrentSheetId();this.scrollValue[n]={...t},t.row>9999?zr.set({width:Math.floor(38*2),height:22}):zr.set({width:38,height:22}),this.changeSet.add("scroll"),this.emitChange()}getPasteRange(t){let n=t.length,r=this.getActiveRange().range,o=Math.max(...t.map(i=>i.length));return{...r,rowCount:n,colCount:o}}parseText(t){let n=ja(t),r=this.getPasteRange(n);if(n.length>0)return this.model.setCell(n,[],r),r}parseHTML(t){let{textList:n,styleList:r,rowMap:o,colMap:i}=Ga(t),s=this.getPasteRange(n);for(let[a,c]of o.entries())this.model.setRowHeight(a,c);for(let[a,c]of i.entries())this.model.setColWidth(a,c);if(n.length>0||r.length>0)return this.model.setCell(n,r,s),s}async getCopyData(t){let{range:n,isMerged:r}=this.getActiveRange(),{row:o,col:i,rowCount:s,colCount:a}=n,c=[],u=[],d=1,l=[],f=this.model.getCurrentSheetId(),m=new Set;for(let L=o,N=o+s;L<N;L++){let S=[],_=[],I=Ri(this.getRowHeight(L).len,"");for(let B=i,E=i+a;B<E;B++){let b=this.model.getCell({row:L,col:B,rowCount:1,colCount:1,sheetId:f});if(!b)continue;let M=nc(b.value,b.style?.numberFormat);S.push(M);let z=Ri(this.getColWidth(B).len,""),Q=`height=${I} width=${z} style='height:${I}pt;width:${z}pt;'`;if(m.add(`<col width=${z} style='width:${z}pt;'>`),b.style){let le=za(b.style);M||(le+="mso-pattern:black none;");let F=`xl${d++}`;l.push(`.${F}{${le}}`),_.push(`<td ${Q} class="${F}"> ${M} </td>`)}else _.push(`<td ${Q}> ${M} </td>`);if(r)break}if(c.push(S),u.push(`<tr height=${I} style='height:${I}pt;'>${_.join(`
`)}</tr>`),r)break}let p={range:n,type:t,floatElementUuid:this.floatElementUuid},g=JSON.stringify(p),T=Ka(l.join(`
`),`
      ${Array.from(m).join(`
`)}
      ${u.join(`
`)}`,Ja(g)),y=`${c.map(L=>L.join("	")).join(`\r
`)}\r
`,x={[ct]:y,[ut]:T,[$e]:p,[Tt]:null},U="";if(this.floatElementUuid){let N=this.getDrawingList(this.getCurrentSheetId()).find(S=>S.uuid===this.floatElementUuid);if(N)if(N.type==="floating-picture"){let S=document.querySelector(`canvas[data-uuid="${N.uuid}"]`);S&&(S.toBlob(_=>{_&&(x[Tt]=_)}),U=S.toDataURL())}else U=N.imageSrc||"",x[Tt]=ec(U)}return[x,U]}pasteFloatElement(t,n){if(!t)return!1;if(n){let u=this.getActiveRange().range;return this.model.updateDrawing(t,{fromCol:u.col,fromRow:u.row,marginX:0,marginY:0}),this.floatElementUuid="",this.isCut=!1,this.emitChange(),!0}let o=this.getDrawingList(this.getCurrentSheetId()).find(u=>u.uuid===t);if(!o)return!1;let i=this.getCellSize({row:o.fromRow,col:o.fromCol,rowCount:1,colCount:1,sheetId:o.sheetId}),{marginX:s,marginY:a}=o,c=14;return s+c<i.width?s+=c:s-c>=0&&(s-=c),a+c<i.width?a+=c:a-c>=0&&(a-=c),this.addDrawing({...o,uuid:Ci(),marginX:s,marginY:a}),!0}paste(t){return this.floatElementUuid&&this.pasteFloatElement(this.floatElementUuid,this.isCut)?Promise.resolve():this.basePaste(t)}async basePaste(t){let n="",r="",o=null,i=null;if(t){n=t.clipboardData?.getData(ut)||"",r=t.clipboardData?.getData(ct)||"";let s=t.clipboardData?.getData($e)||"";s&&(o=JSON.parse(s)),o&&o.type==="cut"&&(t.clipboardData?.setData(ut,""),t.clipboardData?.setData(ct,""),t.clipboardData?.setData($e,""),t.clipboardData?.setData(Tt,"")),t.clipboardData?.files&&(i=t.clipboardData?.files)}else{let s=await this.hooks.paste();n=s[ut],r=s[ct],s[$e]&&(o=s[$e]),o&&o.type==="cut"&&this.hooks.copyOrCut({[ct]:"",[ut]:"",[$e]:null,[Tt]:null},"copy")}if(i){let s=[];for(let a of i){if(a.size<=0)continue;let c=a.name,u=a.type.slice(6);c=c.slice(0,-(u.length+1));let d=await Qa(a,!0);if(!d)continue;let l=await Za(d),f=this.getActiveRange().range;s.push({width:l.width,height:l.height,originHeight:l.height,originWidth:l.width,title:c,type:"floating-picture",uuid:Ci(),imageSrc:d,sheetId:f.sheetId,fromRow:f.row,fromCol:f.col,marginX:0,marginY:0})}if(s.length>0){this.addDrawing(...s);return}}if(!(o&&o.floatElementUuid&&this.pasteFloatElement(o.floatElementUuid,o.type==="cut"))){if(o){let s=this.model.pasteRange(o.range,o.type==="cut");this.setActiveRange(s);return}if(n=n.trim(),r=r.trim(),n){let s=this.parseHTML(n);if(s){this.setActiveRange(s);return}}if(r){let s=this.parseText(r);if(s){this.setActiveRange(s);return}}if(this.copyRange){let s=this.model.pasteRange(this.copyRange,this.isCut);this.setActiveRange(s),this.isCut&&(this.copyRange=void 0,this.isCut=!1);return}}}copy(t){return this.copyRange=this.getActiveRange().range,this.isCut=!1,this.baseCopy("copy",t)}cut(t){return this.copyRange=this.getActiveRange().range,this.isCut=!0,this.baseCopy("cut",t)}async baseCopy(t,n){let[r,o]=await this.getCopyData(t);n?(n.clipboardData?.setData(ut,r[ut]),n.clipboardData?.setData(ct,r[ct]),n.clipboardData?.setData($e,r[$e]?JSON.stringify(r[$e]):""),n.clipboardData?.setData(Tt,o)):this.hooks.copyOrCut(r,t),this.changeSet.add("antLine"),this.emitChange()}getCopyRange(){return this.copyRange}setCopyRange(t){this.copyRange=t}deleteAll(t){this.model.deleteAll(t),this.emitChange()}getDefineName(t){return this.model.getDefineName(t)}getDefineNameList(){return this.model.getDefineNameList()}setDefineName(t,n){let r=this.model.setDefineName(t,n);return this.emitChange(),r}checkDefineName(t){return this.model.checkDefineName(t)}getDrawingList(t){return this.model.getDrawingList(t)}addDrawing(...t){this.model.addDrawing(...t),this.emitChange()}updateDrawing(t,n){this.model.updateDrawing(t,n),this.emitChange()}deleteDrawing(t){this.model.deleteDrawing(t),this.emitChange()}getMergeCellList(t){return this.model.getMergeCellList(t)}addMergeCell(t,n){this.model.addMergeCell(t,n),this.emitChange()}deleteMergeCell(t){this.model.deleteMergeCell(t),this.emitChange()}setFloatElementUuid(t){this.floatElementUuid=t}};var Pd={async copyOrCut(){},async paste(){return{[ut]:"",[ct]:"",[$e]:null,[Tt]:null}},worker:sc};function hi(e=!1,t=Pd){if(!Wa()&&t===Pd)throw new Error("hooks must be provided in production or development environment");let n=new ic(t.worker),r=new Fr(n,t);return r.batchUpdate(()=>(r.addSheet(),!0),e),r}function Ua(e){let t=new BroadcastChannel("excel");Xa.on("modelChange",n=>{t.postMessage(n)}),t.onmessage=n=>{e.applyCommandList(n.data)}}if(typeof Worker!="function")throw new Error("Don't support Web Worker");location.hostname==="nusr.github.io"&&Pa({dsn:"https://b292d91ba509038c141ecfc7d10e7bb7@o4506851168092160.ingest.sentry.io/4506851171041280",integrations:[La(),Oa({maskAllText:!1,blockAllMedia:!1})],tracesSampleRate:1,tracePropagationTargets:["nusr.github.io"],replaysSessionSampleRate:.1,replaysOnErrorSampleRate:1});var iy=document.getElementById("root"),gi=hi(!0,{copyOrCut:wi,paste:xi,worker:tc(new Worker("./worker.js",{type:"module",name:"worker"}))});window.controller=gi;(0,Fd.createRoot)(iy).render(Ur.default.createElement(Ur.StrictMode,null,Ur.default.createElement(mi,{controller:gi})));gi.fromJSON(ki);Ua(gi);
//# sourceMappingURL=demo.js.map
