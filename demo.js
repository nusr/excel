/* 
MIT License

Copyright (c) 2020 Steve Xu

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.

*/
import{a as sc}from"./chunk-RTTUHE5M.js";import{a as ic,b as Ri}from"./chunk-XJBQF2IN.js";import{a as nc,b as rc,c as oc}from"./chunk-4AC4GP25.js";import{b as tc}from"./chunk-PRJU7QU5.js";import{A as Xa,D as Za,E as Qa,F as ec,a as yi,b as Bd,m as ct,n as ut,o as $e,p as Et,q as vi,r as Ci,s as Ka,t as Ja,w as Fr}from"./chunk-H47N346H.js";import{$ as bi,R as Ii,U as Wa,_ as za,aa as ja,ba as Ga,e as Ei,f as Ti,ga as qa,ha as Ya,ia as Va}from"./chunk-5HPRGV2K.js";import{c as Ur}from"./chunk-AI5EXC2Q.js";var ac=Object.prototype.toString;function Vt(e){switch(ac.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return Pe(e,Error)}}function dn(e,t){return ac.call(e)===`[object ${t}]`}function Br(e){return dn(e,"ErrorEvent")}function Hr(e){return dn(e,"DOMError")}function wi(e){return dn(e,"DOMException")}function ve(e){return dn(e,"String")}function pn(e){return typeof e=="object"&&e!==null&&"__sentry_template_string__"in e&&"__sentry_template_values__"in e}function Kt(e){return e===null||pn(e)||typeof e!="object"&&typeof e!="function"}function Ze(e){return dn(e,"Object")}function Jt(e){return typeof Event<"u"&&Pe(e,Event)}function xi(e){return typeof Element<"u"&&Pe(e,Element)}function ki(e){return dn(e,"RegExp")}function lt(e){return!!(e&&e.then&&typeof e.then=="function")}function Ai(e){return Ze(e)&&"nativeEvent"in e&&"preventDefault"in e&&"stopPropagation"in e}function Pe(e,t){try{return e instanceof t}catch{return!1}}function Bn(e){return!!(typeof e=="object"&&e!==null&&(e.__isVue||e._isVue))}function dt(e,t=0){return typeof e!="string"||t===0||e.length<=t?e:`${e.slice(0,t)}...`}function $r(e,t){if(!Array.isArray(e))return"";let n=[];for(let r=0;r<e.length;r++){let o=e[r];try{Bn(o)?n.push("[VueViewModel]"):n.push(String(o))}catch{n.push("[value cannot be serialized]")}}return n.join(t)}function cc(e,t,n=!1){return ve(e)?ki(t)?t.test(e):ve(t)?n?e===t:e.includes(t):!1:!1}function We(e,t=[],n=!1){return t.some(r=>cc(e,r,n))}function Mi(e,t,n=250,r,o,i,s){if(!i.exception||!i.exception.values||!s||!Pe(s.originalException,Error))return;let a=i.exception.values.length>0?i.exception.values[i.exception.values.length-1]:void 0;a&&(i.exception.values=Hd(Ni(e,t,o,s.originalException,r,i.exception.values,a,0),n))}function Ni(e,t,n,r,o,i,s,a){if(i.length>=n+1)return i;let c=[...i];if(Pe(r[o],Error)){uc(s,a);let u=e(t,r[o]),l=c.length;lc(u,o,l,a),c=Ni(e,t,n,r[o],o,[u,...c],u,l)}return Array.isArray(r.errors)&&r.errors.forEach((u,l)=>{if(Pe(u,Error)){uc(s,a);let d=e(t,u),p=c.length;lc(d,`errors[${l}]`,p,a),c=Ni(e,t,n,u,o,[d,...c],d,p)}}),c}function uc(e,t){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,...e.type==="AggregateError"&&{is_exception_group:!0},exception_id:t}}function lc(e,t,n,r){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,type:"chained",source:t,exception_id:n,parent_id:r}}function Hd(e,t){return e.map(n=>(n.value&&(n.value=dt(n.value,t)),n))}var ze="8.29.0";var w=globalThis;function kt(e,t,n){let r=n||w,o=r.__SENTRY__=r.__SENTRY__||{},i=o[ze]=o[ze]||{};return i[e]||(i[e]=t())}var fn=w,$d=80;function ye(e,t={}){if(!e)return"<unknown>";try{let n=e,r=5,o=[],i=0,s=0,a=" > ",c=a.length,u,l=Array.isArray(t)?t:t.keyAttrs,d=!Array.isArray(t)&&t.maxStringLength||$d;for(;n&&i++<r&&(u=Wd(n,l),!(u==="html"||i>1&&s+o.length*c+u.length>=d));)o.push(u),s+=u.length,n=n.parentNode;return o.reverse().join(a)}catch{return"<unknown>"}}function Wd(e,t){let n=e,r=[];if(!n||!n.tagName)return"";if(fn.HTMLElement&&n instanceof HTMLElement&&n.dataset){if(n.dataset.sentryComponent)return n.dataset.sentryComponent;if(n.dataset.sentryElement)return n.dataset.sentryElement}r.push(n.tagName.toLowerCase());let o=t&&t.length?t.filter(s=>n.getAttribute(s)).map(s=>[s,n.getAttribute(s)]):null;if(o&&o.length)o.forEach(s=>{r.push(`[${s[0]}="${s[1]}"]`)});else{n.id&&r.push(`#${n.id}`);let s=n.className;if(s&&ve(s)){let a=s.split(/\s+/);for(let c of a)r.push(`.${c}`)}}let i=["aria-label","type","name","title","alt"];for(let s of i){let a=n.getAttribute(s);a&&r.push(`[${s}="${a}"]`)}return r.join("")}function Hn(){try{return fn.document.location.href}catch{return""}}function Oi(e){return fn.document&&fn.document.querySelector?fn.document.querySelector(e):null}function $n(e){if(!fn.HTMLElement)return null;let t=e,n=5;for(let r=0;r<n;r++){if(!t)return null;if(t instanceof HTMLElement){if(t.dataset.sentryComponent)return t.dataset.sentryComponent;if(t.dataset.sentryElement)return t.dataset.sentryElement}t=t.parentNode}return null}var je=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;var zd="Sentry Logger ",Wn=["debug","info","warn","error","log","assert","trace"],mn={};function Ge(e){if(!("console"in w))return e();let t=w.console,n={},r=Object.keys(mn);r.forEach(o=>{let i=mn[o];n[o]=t[o],t[o]=i});try{return e()}finally{r.forEach(o=>{t[o]=n[o]})}}function jd(){let e=!1,t={enable:()=>{e=!0},disable:()=>{e=!1},isEnabled:()=>e};return je?Wn.forEach(n=>{t[n]=(...r)=>{e&&Ge(()=>{w.console[n](`${zd}[${n}]:`,...r)})}}):Wn.forEach(n=>{t[n]=()=>{}}),t}var h=kt("logger",jd);var Gd=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function qd(e){return e==="http"||e==="https"}function Qe(e,t=!1){let{host:n,path:r,pass:o,port:i,projectId:s,protocol:a,publicKey:c}=e;return`${a}://${c}${t&&o?`:${o}`:""}@${n}${i?`:${i}`:""}/${r&&`${r}/`}${s}`}function dc(e){let t=Gd.exec(e);if(!t){Ge(()=>{console.error(`Invalid Sentry Dsn: ${e}`)});return}let[n,r,o="",i="",s="",a=""]=t.slice(1),c="",u=a,l=u.split("/");if(l.length>1&&(c=l.slice(0,-1).join("/"),u=l.pop()),u){let d=u.match(/^\d+/);d&&(u=d[0])}return pc({host:i,pass:o,path:c,projectId:u,port:s,protocol:n,publicKey:r})}function pc(e){return{protocol:e.protocol,publicKey:e.publicKey||"",pass:e.pass||"",host:e.host,port:e.port||"",path:e.path||"",projectId:e.projectId}}function Yd(e){if(!je)return!0;let{port:t,projectId:n,protocol:r}=e;return["protocol","publicKey","host","projectId"].find(s=>e[s]?!1:(h.error(`Invalid Sentry Dsn: ${s} missing`),!0))?!1:n.match(/^\d+$/)?qd(r)?t&&isNaN(parseInt(t,10))?(h.error(`Invalid Sentry Dsn: Invalid port ${t}`),!1):!0:(h.error(`Invalid Sentry Dsn: Invalid protocol ${r}`),!1):(h.error(`Invalid Sentry Dsn: Invalid projectId ${n}`),!1)}function Wr(e){let t=typeof e=="string"?dc(e):pc(e);if(!(!t||!Yd(t)))return t}var Ee=class extends Error{constructor(t,n="warn"){super(t),this.message=t,this.name=new.target.prototype.constructor.name,Object.setPrototypeOf(this,new.target.prototype),this.logLevel=n}};function ue(e,t,n){if(!(t in e))return;let r=e[t],o=n(r);typeof o=="function"&&zr(o,r),e[t]=o}function le(e,t,n){try{Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0})}catch{je&&h.log(`Failed to add non-enumerable property "${t}" to object`,e)}}function zr(e,t){try{let n=t.prototype||{};e.prototype=t.prototype=n,le(e,"__sentry_original__",t)}catch{}}function Xt(e){return e.__sentry_original__}function Li(e){return Object.keys(e).map(t=>`${encodeURIComponent(t)}=${encodeURIComponent(e[t])}`).join("&")}function jr(e){if(Vt(e))return{message:e.message,name:e.name,stack:e.stack,...mc(e)};if(Jt(e)){let t={type:e.type,target:fc(e.target),currentTarget:fc(e.currentTarget),...mc(e)};return typeof CustomEvent<"u"&&Pe(e,CustomEvent)&&(t.detail=e.detail),t}else return e}function fc(e){try{return xi(e)?ye(e):Object.prototype.toString.call(e)}catch{return"<unknown>"}}function mc(e){if(typeof e=="object"&&e!==null){let t={};for(let n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}else return{}}function Pi(e,t=40){let n=Object.keys(jr(e));n.sort();let r=n[0];if(!r)return"[object has no keys]";if(r.length>=t)return dt(r,t);for(let o=n.length;o>0;o--){let i=n.slice(0,o).join(", ");if(!(i.length>t))return o===n.length?i:dt(i,t)}return""}function Y(e){return Di(e,new Map)}function Di(e,t){if(Vd(e)){let n=t.get(e);if(n!==void 0)return n;let r={};t.set(e,r);for(let o of Object.keys(e))typeof e[o]<"u"&&(r[o]=Di(e[o],t));return r}if(Array.isArray(e)){let n=t.get(e);if(n!==void 0)return n;let r=[];return t.set(e,r),e.forEach(o=>{r.push(Di(o,t))}),r}return e}function Vd(e){if(!Ze(e))return!1;try{let t=Object.getPrototypeOf(e).constructor.name;return!t||t==="Object"}catch{return!0}}var pt="?",hc=/\(error: (.*)\)/,gc=/captureMessage|captureException/;function qr(...e){let t=e.sort((n,r)=>n[0]-r[0]).map(n=>n[1]);return(n,r=0,o=0)=>{let i=[],s=n.split(`
`);for(let a=r;a<s.length;a++){let c=s[a];if(c.length>1024)continue;let u=hc.test(c)?c.replace(hc,"$1"):c;if(!u.match(/\S*Error: /)){for(let l of t){let d=l(u);if(d){i.push(d);break}}if(i.length>=50+o)break}}return Sc(i.slice(o))}}function Fi(e){return Array.isArray(e)?qr(...e):e}function Sc(e){if(!e.length)return[];let t=Array.from(e);return/sentryWrapped/.test(Gr(t).function||"")&&t.pop(),t.reverse(),gc.test(Gr(t).function||"")&&(t.pop(),gc.test(Gr(t).function||"")&&t.pop()),t.slice(0,50).map(n=>({...n,filename:n.filename||Gr(t).filename,function:n.function||pt}))}function Gr(e){return e[e.length-1]||{}}var Ui="<anonymous>";function Me(e){try{return!e||typeof e!="function"?Ui:e.name||Ui}catch{return Ui}}function Yr(e){let t=e.exception;if(t){let n=[];try{return t.values.forEach(r=>{r.stacktrace.frames&&n.push(...r.stacktrace.frames)}),n}catch{return}}}var Vr={},_c={};function Te(e,t){Vr[e]=Vr[e]||[],Vr[e].push(t)}function Ie(e,t){_c[e]||(t(),_c[e]=!0)}function de(e,t){let n=e&&Vr[e];if(n)for(let r of n)try{r(t)}catch(o){je&&h.error(`Error while triggering instrumentation handler.
Type: ${e}
Name: ${Me(r)}
Error:`,o)}}function Bi(e){let t="console";Te(t,e),Ie(t,Kd)}function Kd(){"console"in w&&Wn.forEach(function(e){e in w.console&&ue(w.console,e,function(t){return mn[e]=t,function(...n){de("console",{args:n,level:e});let o=mn[e];o&&o.apply(w.console,n)}})})}var Hi=w;function Kr(){if(!("fetch"in Hi))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch{return!1}}function zn(e){return e&&/^function\s+\w+\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}function $i(){if(typeof EdgeRuntime=="string")return!0;if(!Kr())return!1;if(zn(Hi.fetch))return!0;let e=!1,t=Hi.document;if(t&&typeof t.createElement=="function")try{let n=t.createElement("iframe");n.hidden=!0,t.head.appendChild(n),n.contentWindow&&n.contentWindow.fetch&&(e=zn(n.contentWindow.fetch)),t.head.removeChild(n)}catch(n){je&&h.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",n)}return e}var yc=1e3;function ft(){return Date.now()/yc}function Jd(){let{performance:e}=w;if(!e||!e.now)return ft;let t=Date.now()-e.now(),n=e.timeOrigin==null?t:e.timeOrigin;return()=>(n+e.now())/yc}var oe=Jd(),jn,ie=(()=>{let{performance:e}=w;if(!e||!e.now){jn="none";return}let t=3600*1e3,n=e.now(),r=Date.now(),o=e.timeOrigin?Math.abs(e.timeOrigin+n-r):t,i=o<t,s=e.timing&&e.timing.navigationStart,c=typeof s=="number"?Math.abs(s+n-r):t,u=c<t;return i||u?o<=c?(jn="timeOrigin",e.timeOrigin):(jn="navigationStart",s):(jn="dateNow",r)})();function Gn(e,t){let n="fetch";Te(n,e),Ie(n,()=>Tc(void 0,t))}function zi(e){let t="fetch-body-resolved";Te(t,e),Ie(t,()=>Tc(Zd))}function Tc(e,t=!1){t&&!$i()||ue(w,"fetch",function(n){return function(...r){let{method:o,url:i}=Qd(r),s={args:r,fetchData:{method:o,url:i},startTimestamp:oe()*1e3};e||de("fetch",{...s});let a=new Error().stack;return n.apply(w,r).then(async c=>(e?e(c):de("fetch",{...s,endTimestamp:oe()*1e3,response:c}),c),c=>{throw de("fetch",{...s,endTimestamp:oe()*1e3,error:c}),Vt(c)&&c.stack===void 0&&(c.stack=a,le(c,"framesToPop",1)),c})}})}async function Xd(e,t){if(e&&e.body&&e.body.getReader){let n=e.body.getReader();async function r({done:o}){if(o)return Promise.resolve();try{let i=await Promise.race([n.read(),new Promise(s=>{setTimeout(()=>{s({done:!0})},5e3)})]);await r(i)}catch{}}return n.read().then(r).then(t).catch(()=>{})}}async function Zd(e){let t;try{t=e.clone()}catch{return}await Xd(t,()=>{de("fetch-body-resolved",{endTimestamp:oe()*1e3,response:e})})}function Wi(e,t){return!!e&&typeof e=="object"&&!!e[t]}function Ec(e){return typeof e=="string"?e:e?Wi(e,"url")?e.url:e.toString?e.toString():"":""}function Qd(e){if(e.length===0)return{method:"GET",url:""};if(e.length===2){let[n,r]=e;return{url:Ec(n),method:Wi(r,"method")?String(r.method).toUpperCase():"GET"}}let t=e[0];return{url:Ec(t),method:Wi(t,"method")?String(t.method).toUpperCase():"GET"}}var Jr=null;function qn(e){let t="error";Te(t,e),Ie(t,ep)}function ep(){Jr=w.onerror,w.onerror=function(e,t,n,r,o){return de("error",{column:r,error:o,line:n,msg:e,url:t}),Jr&&!Jr.__SENTRY_LOADER__?Jr.apply(this,arguments):!1},w.onerror.__SENTRY_INSTRUMENTED__=!0}var Xr=null;function Yn(e){let t="unhandledrejection";Te(t,e),Ie(t,tp)}function tp(){Xr=w.onunhandledrejection,w.onunhandledrejection=function(e){return de("unhandledrejection",e),Xr&&!Xr.__SENTRY_LOADER__?Xr.apply(this,arguments):!0},w.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}function ji(){return typeof __SENTRY_BROWSER_BUNDLE__<"u"&&!!__SENTRY_BROWSER_BUNDLE__}function Gi(){return"npm"}function Ic(){return!ji()&&Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]"}function Zr(){return typeof window<"u"&&(!Ic()||np())}function np(){return w.process!==void 0&&w.process.type==="renderer"}function bc(){let e=typeof WeakSet=="function",t=e?new WeakSet:[];function n(o){if(e)return t.has(o)?!0:(t.add(o),!1);for(let i=0;i<t.length;i++)if(t[i]===o)return!0;return t.push(o),!1}function r(o){if(e)t.delete(o);else for(let i=0;i<t.length;i++)if(t[i]===o){t.splice(i,1);break}}return[n,r]}function W(){let e=w,t=e.crypto||e.msCrypto,n=()=>Math.random()*16;try{if(t&&t.randomUUID)return t.randomUUID().replace(/-/g,"");t&&t.getRandomValues&&(n=()=>{let r=new Uint8Array(1);return t.getRandomValues(r),r[0]})}catch{}return("10000000100040008000"+1e11).replace(/[018]/g,r=>(r^(n()&15)>>r/4).toString(16))}function vc(e){return e.exception&&e.exception.values?e.exception.values[0]:void 0}function et(e){let{message:t,event_id:n}=e;if(t)return t;let r=vc(e);return r?r.type&&r.value?`${r.type}: ${r.value}`:r.type||r.value||n||"<unknown>":n||"<unknown>"}function hn(e,t,n){let r=e.exception=e.exception||{},o=r.values=r.values||[],i=o[0]=o[0]||{};i.value||(i.value=t||""),i.type||(i.type=n||"Error")}function Tt(e,t){let n=vc(e);if(!n)return;let r={type:"generic",handled:!0},o=n.mechanism;if(n.mechanism={...r,...o,...t},t&&"data"in t){let i={...o&&o.data,...t.data};n.mechanism.data=i}}function Qr(e){if(e&&e.__sentry_captured__)return!0;try{le(e,"__sentry_captured__",!0)}catch{}return!1}function Vn(e){return Array.isArray(e)?e:[e]}function Oe(e,t=100,n=1/0){try{return qi("",e,t,n)}catch(r){return{ERROR:`**non-serializable** (${r})`}}}function eo(e,t=3,n=100*1024){let r=Oe(e,t);return sp(r)>n?eo(e,t-1,n):r}function qi(e,t,n=1/0,r=1/0,o=bc()){let[i,s]=o;if(t==null||["number","boolean","string"].includes(typeof t)&&!Number.isNaN(t))return t;let a=rp(e,t);if(!a.startsWith("[object "))return a;if(t.__sentry_skip_normalization__)return t;let c=typeof t.__sentry_override_normalization_depth__=="number"?t.__sentry_override_normalization_depth__:n;if(c===0)return a.replace("object ","");if(i(t))return"[Circular ~]";let u=t;if(u&&typeof u.toJSON=="function")try{let f=u.toJSON();return qi("",f,c-1,r,o)}catch{}let l=Array.isArray(t)?[]:{},d=0,p=jr(t);for(let f in p){if(!Object.prototype.hasOwnProperty.call(p,f))continue;if(d>=r){l[f]="[MaxProperties ~]";break}let m=p[f];l[f]=qi(f,m,c-1,r,o),d++}return s(t),l}function rp(e,t){try{if(e==="domain"&&t&&typeof t=="object"&&t._events)return"[Domain]";if(e==="domainEmitter")return"[DomainEmitter]";if(typeof global<"u"&&t===global)return"[Global]";if(typeof window<"u"&&t===window)return"[Window]";if(typeof document<"u"&&t===document)return"[Document]";if(Bn(t))return"[VueViewModel]";if(Ai(t))return"[SyntheticEvent]";if(typeof t=="number"&&t!==t)return"[NaN]";if(typeof t=="function")return`[Function: ${Me(t)}]`;if(typeof t=="symbol")return`[${String(t)}]`;if(typeof t=="bigint")return`[BigInt: ${String(t)}]`;let n=op(t);return/^HTML(\w*)Element$/.test(n)?`[HTMLElement: ${n}]`:`[object ${n}]`}catch(n){return`**non-serializable** (${n})`}}function op(e){let t=Object.getPrototypeOf(e);return t?t.constructor.name:"null prototype"}function ip(e){return~-encodeURI(e).split(/%..|./).length}function sp(e){return ip(JSON.stringify(e))}var It;(function(e){e[e.PENDING=0]="PENDING";let n=1;e[e.RESOLVED=n]="RESOLVED";let r=2;e[e.REJECTED=r]="REJECTED"})(It||(It={}));function Ce(e){return new tt(t=>{t(e)})}function At(e){return new tt((t,n)=>{n(e)})}var tt=class e{constructor(t){e.prototype.__init.call(this),e.prototype.__init2.call(this),e.prototype.__init3.call(this),e.prototype.__init4.call(this),this._state=It.PENDING,this._handlers=[];try{t(this._resolve,this._reject)}catch(n){this._reject(n)}}then(t,n){return new e((r,o)=>{this._handlers.push([!1,i=>{if(!t)r(i);else try{r(t(i))}catch(s){o(s)}},i=>{if(!n)o(i);else try{r(n(i))}catch(s){o(s)}}]),this._executeHandlers()})}catch(t){return this.then(n=>n,t)}finally(t){return new e((n,r)=>{let o,i;return this.then(s=>{i=!1,o=s,t&&t()},s=>{i=!0,o=s,t&&t()}).then(()=>{if(i){r(o);return}n(o)})})}__init(){this._resolve=t=>{this._setResult(It.RESOLVED,t)}}__init2(){this._reject=t=>{this._setResult(It.REJECTED,t)}}__init3(){this._setResult=(t,n)=>{if(this._state===It.PENDING){if(lt(n)){n.then(this._resolve,this._reject);return}this._state=t,this._value=n,this._executeHandlers()}}}__init4(){this._executeHandlers=()=>{if(this._state===It.PENDING)return;let t=this._handlers.slice();this._handlers=[],t.forEach(n=>{n[0]||(this._state===It.RESOLVED&&n[1](this._value),this._state===It.REJECTED&&n[2](this._value),n[0]=!0)})}}};function Yi(e){let t=[];function n(){return e===void 0||t.length<e}function r(s){return t.splice(t.indexOf(s),1)[0]||Promise.resolve(void 0)}function o(s){if(!n())return At(new Ee("Not adding Promise because buffer limit was reached."));let a=s();return t.indexOf(a)===-1&&t.push(a),a.then(()=>r(a)).then(null,()=>r(a).then(null,()=>{})),a}function i(s){return new tt((a,c)=>{let u=t.length;if(!u)return a(!0);let l=setTimeout(()=>{s&&s>0&&a(!1)},s);t.forEach(d=>{Ce(d).then(()=>{--u||(clearTimeout(l),a(!0))},c)})})}return{$:t,add:o,drain:i}}function qe(e){if(!e)return{};let t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};let n=t[6]||"",r=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],search:n,hash:r,relative:t[5]+n+r}}var Cc=["fatal","error","warning","log","info","debug"];function Vi(e){return e==="warn"?"warning":Cc.includes(e)?e:"log"}var gn="baggage",Ki="sentry-",wc=/^sentry-/,xc=8192;function Kn(e){let t=kc(e);if(!t)return;let n=Object.entries(t).reduce((r,[o,i])=>{if(o.match(wc)){let s=o.slice(Ki.length);r[s]=i}return r},{});if(Object.keys(n).length>0)return n}function Sn(e){if(!e)return;let t=Object.entries(e).reduce((n,[r,o])=>(o&&(n[`${Ki}${r}`]=o),n),{});return ap(t)}function kc(e){if(!(!e||!ve(e)&&!Array.isArray(e)))return Array.isArray(e)?e.reduce((t,n)=>{let r=Rc(n);return Object.entries(r).forEach(([o,i])=>{t[o]=i}),t},{}):Rc(e)}function Rc(e){return e.split(",").map(t=>t.split("=").map(n=>decodeURIComponent(n.trim()))).reduce((t,[n,r])=>(n&&r&&(t[n]=r),t),{})}function ap(e){if(Object.keys(e).length!==0)return Object.entries(e).reduce((t,[n,r],o)=>{let i=`${encodeURIComponent(n)}=${encodeURIComponent(r)}`,s=o===0?i:`${t},${i}`;return s.length>xc?(je&&h.warn(`Not adding key: ${n} with val: ${r} to baggage header due to exceeding baggage size limits.`),t):s},"")}var Ac=new RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");function Nc(e){if(!e)return;let t=e.match(Ac);if(!t)return;let n;return t[3]==="1"?n=!0:t[3]==="0"&&(n=!1),{traceId:t[1],parentSampled:n,parentSpanId:t[2]}}function Ji(e,t){let n=Nc(e),r=Kn(t),{traceId:o,parentSpanId:i,parentSampled:s}=n||{};return n?{traceId:o||W(),parentSpanId:i||W().substring(16),spanId:W().substring(16),sampled:s,dsc:r||{}}:{traceId:o||W(),spanId:W().substring(16)}}function Zt(e=W(),t=W().substring(16),n){let r="";return n!==void 0&&(r=n?"-1":"-0"),`${e}-${t}${r}`}function Ue(e,t=[]){return[e,t]}function Zi(e,t){let[n,r]=e;return[n,[...r,t]]}function to(e,t){let n=e[1];for(let r of n){let o=r[0].type;if(t(r,o))return!0}return!1}function Xi(e){return w.__SENTRY__&&w.__SENTRY__.encodePolyfill?w.__SENTRY__.encodePolyfill(e):new TextEncoder().encode(e)}function Qi(e){let[t,n]=e,r=JSON.stringify(t);function o(i){typeof r=="string"?r=typeof i=="string"?r+i:[Xi(r),i]:r.push(typeof i=="string"?Xi(i):i)}for(let i of n){let[s,a]=i;if(o(`
${JSON.stringify(s)}
`),typeof a=="string"||a instanceof Uint8Array)o(a);else{let c;try{c=JSON.stringify(a)}catch{c=JSON.stringify(Oe(a))}o(c)}}return typeof r=="string"?r:cp(r)}function cp(e){let t=e.reduce((o,i)=>o+i.length,0),n=new Uint8Array(t),r=0;for(let o of e)n.set(o,r),r+=o.length;return n}function es(e){return[{type:"span"},e]}function ts(e){let t=typeof e.data=="string"?Xi(e.data):e.data;return[Y({type:"attachment",length:t.length,filename:e.filename,content_type:e.contentType,attachment_type:e.attachmentType}),t]}var up={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",profile_chunk:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",statsd:"metric_bucket"};function no(e){return up[e]}function _n(e){if(!e||!e.sdk)return;let{name:t,version:n}=e.sdk;return{name:t,version:n}}function Jn(e,t,n,r){let o=e.sdkProcessingMetadata&&e.sdkProcessingMetadata.dynamicSamplingContext;return{event_id:e.event_id,sent_at:new Date().toISOString(),...t&&{sdk:t},...!!n&&r&&{dsn:Qe(r)},...o&&{trace:Y({...o})}}}function ns(e,t,n){let r=[{type:"client_report"},{timestamp:n||ft(),discarded_events:e}];return Ue(t?{dsn:t}:{},[r])}function Mc(e,t=Date.now()){let n=parseInt(`${e}`,10);if(!isNaN(n))return n*1e3;let r=Date.parse(`${e}`);return isNaN(r)?6e4:r-t}function Oc(e,t){return e[t]||e.all||0}function Xn(e,t,n=Date.now()){return Oc(e,t)>n}function Zn(e,{statusCode:t,headers:n},r=Date.now()){let o={...e},i=n&&n["x-sentry-rate-limits"],s=n&&n["retry-after"];if(i)for(let a of i.trim().split(",")){let[c,u,,,l]=a.split(":",5),d=parseInt(c,10),p=(isNaN(d)?60:d)*1e3;if(!u)o.all=r+p;else for(let f of u.split(";"))f==="metric_bucket"?(!l||l.split(";").includes("custom"))&&(o[f]=r+p):o[f]=r+p}else s?o.all=r+Mc(s,r):t===429&&(o.all=r+60*1e3);return o}function rs(e,t){return e??t()}function me(e){let t,n=e[0],r=1;for(;r<e.length;){let o=e[r],i=e[r+1];if(r+=2,(o==="optionalAccess"||o==="optionalCall")&&n==null)return;o==="access"||o==="optionalAccess"?(t=n,n=i(n)):(o==="call"||o==="optionalCall")&&(n=i((...s)=>n.call(t,...s)),t=void 0)}return n}function Qt(){return{traceId:W(),spanId:W().substring(16)}}var ro=w;function os(){let e=ro.chrome,t=e&&e.app&&e.app.runtime,n="history"in ro&&!!ro.history.pushState&&!!ro.history.replaceState;return!t&&n}var x=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;function nt(){return Qn(w),w}function Qn(e){let t=e.__SENTRY__=e.__SENTRY__||{};return t.version=t.version||ze,t[ze]=t[ze]||{}}function Dc(e){let t=oe(),n={sid:W(),init:!0,timestamp:t,started:t,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>lp(n)};return e&&bt(n,e),n}function bt(e,t={}){if(t.user&&(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),!e.did&&!t.did&&(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||oe(),t.abnormal_mechanism&&(e.abnormal_mechanism=t.abnormal_mechanism),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=t.sid.length===32?t.sid:W()),t.init!==void 0&&(e.init=t.init),!e.did&&t.did&&(e.did=`${t.did}`),typeof t.started=="number"&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if(typeof t.duration=="number")e.duration=t.duration;else{let n=e.timestamp-e.started;e.duration=n>=0?n:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),typeof t.errors=="number"&&(e.errors=t.errors),t.status&&(e.status=t.status)}function Lc(e,t){let n={};t?n={status:t}:e.status==="ok"&&(n={status:"exited"}),bt(e,n)}function lp(e){return Y({sid:`${e.sid}`,init:e.init,started:new Date(e.started*1e3).toISOString(),timestamp:new Date(e.timestamp*1e3).toISOString(),status:e.status,errors:e.errors,did:typeof e.did=="number"||typeof e.did=="string"?`${e.did}`:void 0,duration:e.duration,abnormal_mechanism:e.abnormal_mechanism,attrs:{release:e.release,environment:e.environment,ip_address:e.ipAddress,user_agent:e.userAgent}})}var is="_sentrySpan";function Nt(e,t){t?le(e,is,t):delete e[is]}function en(e){return e[is]}var dp=100,ss=class e{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext=Qt()}clone(){let t=new e;return t._breadcrumbs=[...this._breadcrumbs],t._tags={...this._tags},t._extra={...this._extra},t._contexts={...this._contexts},t._user=this._user,t._level=this._level,t._session=this._session,t._transactionName=this._transactionName,t._fingerprint=this._fingerprint,t._eventProcessors=[...this._eventProcessors],t._requestSession=this._requestSession,t._attachments=[...this._attachments],t._sdkProcessingMetadata={...this._sdkProcessingMetadata},t._propagationContext={...this._propagationContext},t._client=this._client,t._lastEventId=this._lastEventId,Nt(t,en(this)),t}setClient(t){this._client=t}setLastEventId(t){this._lastEventId=t}getClient(){return this._client}lastEventId(){return this._lastEventId}addScopeListener(t){this._scopeListeners.push(t)}addEventProcessor(t){return this._eventProcessors.push(t),this}setUser(t){return this._user=t||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&bt(this._session,{user:t}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(t){return this._requestSession=t,this}setTags(t){return this._tags={...this._tags,...t},this._notifyScopeListeners(),this}setTag(t,n){return this._tags={...this._tags,[t]:n},this._notifyScopeListeners(),this}setExtras(t){return this._extra={...this._extra,...t},this._notifyScopeListeners(),this}setExtra(t,n){return this._extra={...this._extra,[t]:n},this._notifyScopeListeners(),this}setFingerprint(t){return this._fingerprint=t,this._notifyScopeListeners(),this}setLevel(t){return this._level=t,this._notifyScopeListeners(),this}setTransactionName(t){return this._transactionName=t,this._notifyScopeListeners(),this}setContext(t,n){return n===null?delete this._contexts[t]:this._contexts[t]=n,this._notifyScopeListeners(),this}setSession(t){return t?this._session=t:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(t){if(!t)return this;let n=typeof t=="function"?t(this):t,[r,o]=n instanceof Fe?[n.getScopeData(),n.getRequestSession()]:Ze(n)?[t,t.requestSession]:[],{tags:i,extra:s,user:a,contexts:c,level:u,fingerprint:l=[],propagationContext:d}=r||{};return this._tags={...this._tags,...i},this._extra={...this._extra,...s},this._contexts={...this._contexts,...c},a&&Object.keys(a).length&&(this._user=a),u&&(this._level=u),l.length&&(this._fingerprint=l),d&&(this._propagationContext=d),o&&(this._requestSession=o),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._session=void 0,Nt(this,void 0),this._attachments=[],this._propagationContext=Qt(),this._notifyScopeListeners(),this}addBreadcrumb(t,n){let r=typeof n=="number"?n:dp;if(r<=0)return this;let o={timestamp:ft(),...t},i=this._breadcrumbs;return i.push(o),this._breadcrumbs=i.length>r?i.slice(-r):i,this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(t){return this._attachments.push(t),this}clearAttachments(){return this._attachments=[],this}getScopeData(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:en(this)}}setSDKProcessingMetadata(t){return this._sdkProcessingMetadata={...this._sdkProcessingMetadata,...t},this}setPropagationContext(t){return this._propagationContext=t,this}getPropagationContext(){return this._propagationContext}captureException(t,n){let r=n&&n.event_id?n.event_id:W();if(!this._client)return h.warn("No client configured on scope - will not capture exception!"),r;let o=new Error("Sentry syntheticException");return this._client.captureException(t,{originalException:t,syntheticException:o,...n,event_id:r},this),r}captureMessage(t,n,r){let o=r&&r.event_id?r.event_id:W();if(!this._client)return h.warn("No client configured on scope - will not capture message!"),o;let i=new Error(t);return this._client.captureMessage(t,n,{originalException:t,syntheticException:i,...r,event_id:o},this),o}captureEvent(t,n){let r=n&&n.event_id?n.event_id:W();return this._client?(this._client.captureEvent(t,{...n,event_id:r},this),r):(h.warn("No client configured on scope - will not capture event!"),r)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(t=>{t(this)}),this._notifyingListeners=!1)}},Fe=ss;function Pc(){return kt("defaultCurrentScope",()=>new Fe)}function Uc(){return kt("defaultIsolationScope",()=>new Fe)}var as=class{constructor(t,n){let r;t?r=t:r=new Fe;let o;n?o=n:o=new Fe,this._stack=[{scope:r}],this._isolationScope=o}withScope(t){let n=this._pushScope(),r;try{r=t(n)}catch(o){throw this._popScope(),o}return lt(r)?r.then(o=>(this._popScope(),o),o=>{throw this._popScope(),o}):(this._popScope(),r)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStackTop(){return this._stack[this._stack.length-1]}_pushScope(){let t=this.getScope().clone();return this._stack.push({client:this.getClient(),scope:t}),t}_popScope(){return this._stack.length<=1?!1:!!this._stack.pop()}};function yn(){let e=nt(),t=Qn(e);return t.stack=t.stack||new as(Pc(),Uc())}function pp(e){return yn().withScope(e)}function fp(e,t){let n=yn();return n.withScope(()=>(n.getStackTop().scope=e,t(e)))}function Fc(e){return yn().withScope(()=>e(yn().getIsolationScope()))}function Bc(){return{withIsolationScope:Fc,withScope:pp,withSetScope:fp,withSetIsolationScope:(e,t)=>Fc(t),getCurrentScope:()=>yn().getScope(),getIsolationScope:()=>yn().getIsolationScope()}}function Mt(e){let t=Qn(e);return t.acs?t.acs:Bc()}function B(){let e=nt();return Mt(e).getCurrentScope()}function se(){let e=nt();return Mt(e).getIsolationScope()}function oo(){return kt("globalScope",()=>new Fe)}function tn(...e){let t=nt(),n=Mt(t);if(e.length===2){let[r,o]=e;return r?n.withSetScope(r,o):n.withScope(o)}return n.withScope(e[0])}function R(){return B().getClient()}var mp="_sentryMetrics";function er(e){let t=e[mp];if(!t)return;let n={};for(let[,[r,o]]of t)(n[r]||(n[r]=[])).push(Y(o));return n}var be="sentry.source",En="sentry.sample_rate",Re="sentry.op",Q="sentry.origin",Tn="sentry.idle_span_finish_reason",Ot="sentry.measurement_unit",Dt="sentry.measurement_value",cs="sentry.profile_id",nn="sentry.exclusive_time";function us(e){if(e<400&&e>=100)return{code:1};if(e>=400&&e<500)switch(e){case 401:return{code:2,message:"unauthenticated"};case 403:return{code:2,message:"permission_denied"};case 404:return{code:2,message:"not_found"};case 409:return{code:2,message:"already_exists"};case 413:return{code:2,message:"failed_precondition"};case 429:return{code:2,message:"resource_exhausted"};case 499:return{code:2,message:"cancelled"};default:return{code:2,message:"invalid_argument"}}if(e>=500&&e<600)switch(e){case 501:return{code:2,message:"unimplemented"};case 503:return{code:2,message:"unavailable"};case 504:return{code:2,message:"deadline_exceeded"};default:return{code:2,message:"internal_error"}}return{code:2,message:"unknown_error"}}function In(e,t){e.setAttribute("http.response.status_code",t);let n=us(t);n.message!=="unknown_error"&&e.setStatus(n)}var io=0,ds=1;function $c(e){let{spanId:t,traceId:n}=e.spanContext(),{data:r,op:o,parent_span_id:i,status:s,origin:a}=M(e);return Y({parent_span_id:i,span_id:t,trace_id:n,data:r,op:o,status:s,origin:a})}function ps(e){let{spanId:t,traceId:n}=e.spanContext(),{parent_span_id:r}=M(e);return Y({parent_span_id:r,span_id:t,trace_id:n})}function bn(e){let{traceId:t,spanId:n}=e.spanContext(),r=Ye(e);return Zt(t,n,r)}function rt(e){return typeof e=="number"?Hc(e):Array.isArray(e)?e[0]+e[1]/1e9:e instanceof Date?Hc(e.getTime()):oe()}function Hc(e){return e>9999999999?e/1e3:e}function M(e){if(_p(e))return e.getSpanJSON();try{let{spanId:t,traceId:n}=e.spanContext();if(Sp(e)){let{attributes:r,startTime:o,name:i,endTime:s,parentSpanId:a,status:c}=e;return Y({span_id:t,trace_id:n,data:r,description:i,parent_span_id:a,start_timestamp:rt(o),timestamp:rt(s)||void 0,status:so(c),op:r[Re],origin:r[Q],_metrics_summary:er(e)})}return{span_id:t,trace_id:n}}catch{return{}}}function Sp(e){let t=e;return!!t.attributes&&!!t.startTime&&!!t.name&&!!t.endTime&&!!t.status}function _p(e){return typeof e.getSpanJSON=="function"}function Ye(e){let{traceFlags:t}=e.spanContext();return t===ds}function so(e){if(!(!e||e.code===0))return e.code===1?"ok":e.message||"unknown_error"}var rn="_sentryChildSpans",ls="_sentryRootSpan";function ao(e,t){let n=e[ls]||e;le(t,ls,n),e[rn]?e[rn].add(t):le(e,rn,new Set([t]))}function Wc(e,t){e[rn]&&e[rn].delete(t)}function Lt(e){let t=new Set;function n(r){if(!t.has(r)&&Ye(r)){t.add(r);let o=r[rn]?Array.from(r[rn]):[];for(let i of o)n(i)}}return n(e),Array.from(t)}function V(e){return e[ls]||e}function X(){let e=nt(),t=Mt(e);return t.getActiveSpan?t.getActiveSpan():en(B())}var zc=!1;function co(){zc||(zc=!0,qn(fs),Yn(fs))}function fs(){let e=X(),t=e&&V(e);if(t){let n="internal_error";x&&h.log(`[Tracing] Root span: ${n} -> Global error occured`),t.setStatus({code:2,message:n})}}fs.tag="sentry_tracingErrorCallback";var jc="_sentryScope",Gc="_sentryIsolationScope";function qc(e,t,n){e&&(le(e,Gc,n),le(e,jc,t))}function ms(e){return{scope:e[jc],isolationScope:e[Gc]}}function De(e){if(typeof __SENTRY_TRACING__=="boolean"&&!__SENTRY_TRACING__)return!1;let t=R(),n=e||t&&t.getOptions();return!!n&&(n.enableTracing||"tracesSampleRate"in n||"tracesSampler"in n)}var Be=class{constructor(t={}){this._traceId=t.traceId||W(),this._spanId=t.spanId||W().substring(16)}spanContext(){return{spanId:this._spanId,traceId:this._traceId,traceFlags:io}}end(t){}setAttribute(t,n){return this}setAttributes(t){return this}setStatus(t){return this}updateName(t){return this}isRecording(){return!1}addEvent(t,n,r){return this}addLink(t){return this}addLinks(t){return this}recordException(t,n){}};var vn="production";var Yc="_frozenDsc";function hs(e,t){le(e,Yc,t)}function Pt(e,t){let n=t.getOptions(),{publicKey:r}=t.getDsn()||{},o=Y({environment:n.environment||vn,release:n.release,public_key:r,trace_id:e});return t.emit("createDsc",o),o}function we(e){let t=R();if(!t)return{};let n=Pt(M(e).trace_id||"",t),r=V(e),o=r[Yc];if(o)return o;let i=r.spanContext().traceState,s=i&&i.get("sentry.dsc"),a=s&&Kn(s);if(a)return a;let c=M(r),u=c.data||{},l=u[En];l!=null&&(n.sample_rate=`${l}`);let d=u[be],p=c.description;return d!=="url"&&p&&(n.transaction=p),n.sampled=String(Ye(r)),t.emit("createDsc",n,r),n}function Vc(e){if(!x)return;let{description:t="< unknown name >",op:n="< unknown op >",parent_span_id:r}=M(e),{spanId:o}=e.spanContext(),i=Ye(e),s=V(e),a=s===e,c=`[Tracing] Starting ${i?"sampled":"unsampled"} ${a?"root ":""}span`,u=[`op: ${n}`,`name: ${t}`,`ID: ${o}`];if(r&&u.push(`parent ID: ${r}`),!a){let{op:l,description:d}=M(s);u.push(`root ID: ${s.spanContext().spanId}`),l&&u.push(`root op: ${l}`),d&&u.push(`root description: ${d}`)}h.log(`${c}
  ${u.join(`
  `)}`)}function Kc(e){if(!x)return;let{description:t="< unknown name >",op:n="< unknown op >"}=M(e),{spanId:r}=e.spanContext(),i=V(e)===e,s=`[Tracing] Finishing "${n}" ${i?"root ":""}span "${t}" with ID ${r}`;h.log(s)}function Ut(e){if(typeof e=="boolean")return Number(e);let t=typeof e=="string"?parseFloat(e):e;if(typeof t!="number"||isNaN(t)||t<0||t>1){x&&h.warn(`[Tracing] Given sample rate is invalid. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(e)} of type ${JSON.stringify(typeof e)}.`);return}return t}function Jc(e,t){if(!De(e))return[!1];let n;typeof e.tracesSampler=="function"?n=e.tracesSampler(t):t.parentSampled!==void 0?n=t.parentSampled:typeof e.tracesSampleRate<"u"?n=e.tracesSampleRate:n=1;let r=Ut(n);return r===void 0?(x&&h.warn("[Tracing] Discarding transaction because of invalid sample rate."),[!1]):r?Math.random()<r?[!0,r]:(x&&h.log(`[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ${Number(n)})`),[!1,r]):(x&&h.log(`[Tracing] Discarding transaction because ${typeof e.tracesSampler=="function"?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0"}`),[!1,r])}function yp(e,t){return t&&(e.sdk=e.sdk||{},e.sdk.name=e.sdk.name||t.name,e.sdk.version=e.sdk.version||t.version,e.sdk.integrations=[...e.sdk.integrations||[],...t.integrations||[]],e.sdk.packages=[...e.sdk.packages||[],...t.packages||[]]),e}function Xc(e,t,n,r){let o=_n(n),i={sent_at:new Date().toISOString(),...o&&{sdk:o},...!!r&&t&&{dsn:Qe(t)}},s="aggregates"in e?[{type:"sessions"},e]:[{type:"session"},e.toJSON()];return Ue(i,[s])}function Zc(e,t,n,r){let o=_n(n),i=e.type&&e.type!=="replay_event"?e.type:"event";yp(e,n&&n.sdk);let s=Jn(e,o,r,t);return delete e.sdkProcessingMetadata,Ue(s,[[{type:i},e]])}function Qc(e,t){function n(l){return!!l.trace_id&&!!l.public_key}let r=we(e[0]),o=t&&t.getDsn(),i=t&&t.getOptions().tunnel,s={sent_at:new Date().toISOString(),...n(r)&&{trace:r},...!!i&&o&&{dsn:Qe(o)}},a=t&&t.getOptions().beforeSendSpan,c=a?l=>a(M(l)):l=>M(l),u=[];for(let l of e){let d=c(l);d&&u.push(es(d))}return Ue(s,u)}function uo(e,t,n){let r=X(),o=r&&V(r);o&&o.addEvent(e,{[Dt]:t,[Ot]:n})}function lo(e){if(!e||e.length===0)return;let t={};return e.forEach(n=>{let r=n.attributes||{},o=r[Ot],i=r[Dt];typeof o=="string"&&typeof i=="number"&&(t[n.name]={value:i,unit:o})}),t}var eu=1e3,Cn=class{constructor(t={}){this._traceId=t.traceId||W(),this._spanId=t.spanId||W().substring(16),this._startTime=t.startTimestamp||oe(),this._attributes={},this.setAttributes({[Q]:"manual",[Re]:t.op,...t.attributes}),this._name=t.name,t.parentSpanId&&(this._parentSpanId=t.parentSpanId),"sampled"in t&&(this._sampled=t.sampled),t.endTimestamp&&(this._endTime=t.endTimestamp),this._events=[],this._isStandaloneSpan=t.isStandalone,this._endTime&&this._onSpanEnded()}addLink(t){return this}addLinks(t){return this}recordException(t,n){}spanContext(){let{_spanId:t,_traceId:n,_sampled:r}=this;return{spanId:t,traceId:n,traceFlags:r?ds:io}}setAttribute(t,n){return n===void 0?delete this._attributes[t]:this._attributes[t]=n,this}setAttributes(t){return Object.keys(t).forEach(n=>this.setAttribute(n,t[n])),this}updateStartTime(t){this._startTime=rt(t)}setStatus(t){return this._status=t,this}updateName(t){return this._name=t,this}end(t){this._endTime||(this._endTime=rt(t),Kc(this),this._onSpanEnded())}getSpanJSON(){return Y({data:this._attributes,description:this._name,op:this._attributes[Re],parent_span_id:this._parentSpanId,span_id:this._spanId,start_timestamp:this._startTime,status:so(this._status),timestamp:this._endTime,trace_id:this._traceId,origin:this._attributes[Q],_metrics_summary:er(this),profile_id:this._attributes[cs],exclusive_time:this._attributes[nn],measurements:lo(this._events),is_segment:this._isStandaloneSpan&&V(this)===this||void 0,segment_id:this._isStandaloneSpan?V(this).spanContext().spanId:void 0})}isRecording(){return!this._endTime&&!!this._sampled}addEvent(t,n,r){x&&h.log("[Tracing] Adding an event to span:",t);let o=tu(n)?n:r||oe(),i=tu(n)?{}:n||{},s={name:t,time:rt(o),attributes:i};return this._events.push(s),this}isStandaloneSpan(){return!!this._isStandaloneSpan}_onSpanEnded(){let t=R();if(t&&t.emit("spanEnd",this),!(this._isStandaloneSpan||this===V(this)))return;if(this._isStandaloneSpan){this._sampled?Tp(Qc([this],t)):(x&&h.log("[Tracing] Discarding standalone span because its trace was not chosen to be sampled."),t&&t.recordDroppedEvent("sample_rate","span"));return}let r=this._convertSpanToTransaction();r&&(ms(this).scope||B()).captureEvent(r)}_convertSpanToTransaction(){if(!nu(M(this)))return;this._name||(x&&h.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this._name="<unlabeled transaction>");let{scope:t,isolationScope:n}=ms(this),o=(t||B()).getClient()||R();if(this._sampled!==!0){x&&h.log("[Tracing] Discarding transaction because its trace was not chosen to be sampled."),o&&o.recordDroppedEvent("sample_rate","transaction");return}let s=Lt(this).filter(d=>d!==this&&!Ep(d)).map(d=>M(d)).filter(nu),a=this._attributes[be],c={contexts:{trace:$c(this)},spans:s.length>eu?s.sort((d,p)=>d.start_timestamp-p.start_timestamp).slice(0,eu):s,start_timestamp:this._startTime,timestamp:this._endTime,transaction:this._name,type:"transaction",sdkProcessingMetadata:{capturedSpanScope:t,capturedSpanIsolationScope:n,...Y({dynamicSamplingContext:we(this)})},_metrics_summary:er(this),...a&&{transaction_info:{source:a}}},u=lo(this._events);return u&&Object.keys(u).length&&(x&&h.log("[Measurements] Adding measurements to transaction event",JSON.stringify(u,void 0,2)),c.measurements=u),c}};function tu(e){return e&&typeof e=="number"||e instanceof Date||Array.isArray(e)}function nu(e){return!!e.start_timestamp&&!!e.timestamp&&!!e.span_id&&!!e.trace_id}function Ep(e){return e instanceof Cn&&e.isStandaloneSpan()}function Tp(e){let t=R();if(!t)return;let n=e[1];if(!n||n.length===0){t.recordDroppedEvent("before_send","span");return}let r=t.getTransport();r&&r.send(e).then(null,o=>{x&&h.error("Error while sending span:",o)})}var ou="__SENTRY_SUPPRESS_TRACING__";function xe(e){let t=iu();if(t.startInactiveSpan)return t.startInactiveSpan(e);let n=bp(e),{forceTransaction:r,parentSpan:o}=e;return(e.scope?s=>tn(e.scope,s):o!==void 0?s=>tr(o,s):s=>s())(()=>{let s=B(),a=Cp(s);return e.onlyIfParent&&!a?new Be:Ip({parentSpan:a,spanArguments:n,forceTransaction:r,scope:s})})}function tr(e,t){let n=iu();return n.withActiveSpan?n.withActiveSpan(e,t):tn(r=>(Nt(r,e||void 0),t(r)))}function Ip({parentSpan:e,spanArguments:t,forceTransaction:n,scope:r}){if(!De())return new Be;let o=se(),i;if(e&&!n)i=vp(e,r,t),ao(e,i);else if(e){let s=we(e),{traceId:a,spanId:c}=e.spanContext(),u=Ye(e);i=ru({traceId:a,parentSpanId:c,...t},r,u),hs(i,s)}else{let{traceId:s,dsc:a,parentSpanId:c,sampled:u}={...o.getPropagationContext(),...r.getPropagationContext()};i=ru({traceId:s,parentSpanId:c,...t},r,u),a&&hs(i,a)}return Vc(i),qc(i,r,o),i}function bp(e){let n={isStandalone:(e.experimental||{}).standalone,...e};if(e.startTime){let r={...n};return r.startTimestamp=rt(e.startTime),delete r.startTime,r}return n}function iu(){let e=nt();return Mt(e)}function ru(e,t,n){let r=R(),o=r&&r.getOptions()||{},{name:i="",attributes:s}=e,[a,c]=t.getScopeData().sdkProcessingMetadata[ou]?[!1]:Jc(o,{name:i,parentSampled:n,attributes:s,transactionContext:{name:i,parentSampled:n}}),u=new Cn({...e,attributes:{[be]:"custom",...e.attributes},sampled:a});return c!==void 0&&u.setAttribute(En,c),r&&r.emit("spanStart",u),u}function vp(e,t,n){let{spanId:r,traceId:o}=e.spanContext(),i=t.getScopeData().sdkProcessingMetadata[ou]?!1:Ye(e),s=i?new Cn({...n,parentSpanId:r,traceId:o,sampled:i}):new Be({traceId:o});ao(e,s);let a=R();return a&&(a.emit("spanStart",s),n.endTimestamp&&a.emit("spanEnd",s)),s}function Cp(e){let t=en(e);if(!t)return;let n=R();return(n?n.getOptions():{}).parentSpanIsAlwaysRootSpan?V(t):t}var Rn={idleTimeout:1e3,finalTimeout:3e4,childSpanTimeout:15e3},Rp="heartbeatFailed",wp="idleTimeout",xp="finalTimeout",kp="externalFinish";function po(e,t={}){let n=new Map,r=!1,o,i=kp,s=!t.disableAutoFinish,a=[],{idleTimeout:c=Rn.idleTimeout,finalTimeout:u=Rn.finalTimeout,childSpanTimeout:l=Rn.childSpanTimeout,beforeSpanEnd:d}=t,p=R();if(!p||!De())return new Be;let f=B(),m=X(),g=Ap(e);g.end=new Proxy(g.end,{apply(_,S,v){d&&d(g);let[$,...E]=v,b=$||oe(),L=rt(b),K=Lt(g).filter(J=>J!==g);if(!K.length)return A(L),Reflect.apply(_,S,[L,...E]);let Z=K.map(J=>M(J).timestamp).filter(J=>!!J),ce=Z.length?Math.max(...Z):void 0,U=M(g).start_timestamp,he=Math.min(U?U+u/1e3:1/0,Math.max(U||-1/0,Math.min(L,ce||1/0)));return A(he),Reflect.apply(_,S,[he,...E])}});function T(){o&&(clearTimeout(o),o=void 0)}function y(_){T(),o=setTimeout(()=>{!r&&n.size===0&&s&&(i=wp,g.end(_))},c)}function k(_){o=setTimeout(()=>{!r&&s&&(i=Rp,g.end(_))},l)}function F(_){T(),n.set(_,!0);let S=oe();k(S+l/1e3)}function C(_){if(n.has(_)&&n.delete(_),n.size===0){let S=oe();y(S+c/1e3)}}function A(_){r=!0,n.clear(),a.forEach(L=>L()),Nt(f,m);let S=M(g),{start_timestamp:v}=S;if(!v)return;(S.data||{})[Tn]||g.setAttribute(Tn,i),h.log(`[Tracing] Idle span "${S.op}" finished`);let E=Lt(g).filter(L=>L!==g),b=0;E.forEach(L=>{L.isRecording()&&(L.setStatus({code:2,message:"cancelled"}),L.end(_),x&&h.log("[Tracing] Cancelling span since span ended early",JSON.stringify(L,void 0,2)));let K=M(L),{timestamp:Z=0,start_timestamp:ce=0}=K,U=ce<=_,he=(u+c)/1e3,J=Z-ce<=he;if(x){let Ne=JSON.stringify(L,void 0,2);U?J||h.log("[Tracing] Discarding span since it finished after idle span final timeout",Ne):h.log("[Tracing] Discarding span since it happened after idle span was finished",Ne)}(!J||!U)&&(Wc(g,L),b++)}),b>0&&g.setAttribute("sentry.idle_span_discarded_spans",b)}return a.push(p.on("spanStart",_=>{if(r||_===g||M(_).timestamp)return;Lt(g).includes(_)&&F(_.spanContext().spanId)})),a.push(p.on("spanEnd",_=>{r||C(_.spanContext().spanId)})),a.push(p.on("idleSpanEnableAutoFinish",_=>{_===g&&(s=!0,y(),n.size&&k())})),t.disableAutoFinish||y(),setTimeout(()=>{r||(g.setStatus({code:2,message:"deadline_exceeded"}),i=xp,g.end())},u),g}function Ap(e){let t=xe(e);return Nt(B(),t),x&&h.log("[Tracing] Started span is an idle span"),t}function fo(e,t,n,r=0){return new tt((o,i)=>{let s=e[r];if(t===null||typeof s!="function")o(t);else{let a=s({...t},n);x&&s.id&&a===null&&h.log(`Event processor "${s.id}" dropped event`),lt(a)?a.then(c=>fo(e,c,n,r+1).then(o)).then(null,i):fo(e,a,n,r+1).then(o).then(null,i)}})}function su(e,t){let{fingerprint:n,span:r,breadcrumbs:o,sdkProcessingMetadata:i}=t;Np(e,t),r&&Dp(e,r),Lp(e,n),Mp(e,o),Op(e,i)}function gs(e,t){let{extra:n,tags:r,user:o,contexts:i,level:s,sdkProcessingMetadata:a,breadcrumbs:c,fingerprint:u,eventProcessors:l,attachments:d,propagationContext:p,transactionName:f,span:m}=t;nr(e,"extra",n),nr(e,"tags",r),nr(e,"user",o),nr(e,"contexts",i),nr(e,"sdkProcessingMetadata",a),s&&(e.level=s),f&&(e.transactionName=f),m&&(e.span=m),c.length&&(e.breadcrumbs=[...e.breadcrumbs,...c]),u.length&&(e.fingerprint=[...e.fingerprint,...u]),l.length&&(e.eventProcessors=[...e.eventProcessors,...l]),d.length&&(e.attachments=[...e.attachments,...d]),e.propagationContext={...e.propagationContext,...p}}function nr(e,t,n){if(n&&Object.keys(n).length){e[t]={...e[t]};for(let r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[t][r]=n[r])}}function Np(e,t){let{extra:n,tags:r,user:o,contexts:i,level:s,transactionName:a}=t,c=Y(n);c&&Object.keys(c).length&&(e.extra={...c,...e.extra});let u=Y(r);u&&Object.keys(u).length&&(e.tags={...u,...e.tags});let l=Y(o);l&&Object.keys(l).length&&(e.user={...l,...e.user});let d=Y(i);d&&Object.keys(d).length&&(e.contexts={...d,...e.contexts}),s&&(e.level=s),a&&e.type!=="transaction"&&(e.transaction=a)}function Mp(e,t){let n=[...e.breadcrumbs||[],...t];e.breadcrumbs=n.length?n:void 0}function Op(e,t){e.sdkProcessingMetadata={...e.sdkProcessingMetadata,...t}}function Dp(e,t){e.contexts={trace:ps(t),...e.contexts},e.sdkProcessingMetadata={dynamicSamplingContext:we(t),...e.sdkProcessingMetadata};let n=V(t),r=M(n).description;r&&!e.transaction&&e.type==="transaction"&&(e.transaction=r)}function Lp(e,t){e.fingerprint=e.fingerprint?Vn(e.fingerprint):[],t&&(e.fingerprint=e.fingerprint.concat(t)),e.fingerprint&&!e.fingerprint.length&&delete e.fingerprint}function rr(e,t,n,r,o,i){let{normalizeDepth:s=3,normalizeMaxBreadth:a=1e3}=e,c={...t,event_id:t.event_id||n.event_id||W(),timestamp:t.timestamp||ft()},u=n.integrations||e.integrations.map(T=>T.name);Pp(c,e),Bp(c,u),o&&o.emit("applyFrameMetadata",t),t.type===void 0&&Up(c,e.stackParser);let l=$p(r,n.captureContext);n.mechanism&&Tt(c,n.mechanism);let d=o?o.getEventProcessors():[],p=oo().getScopeData();if(i){let T=i.getScopeData();gs(p,T)}if(l){let T=l.getScopeData();gs(p,T)}let f=[...n.attachments||[],...p.attachments];f.length&&(n.attachments=f),su(c,p);let m=[...d,...p.eventProcessors];return fo(m,c,n).then(T=>(T&&Fp(T),typeof s=="number"&&s>0?Hp(T,s,a):T))}function Pp(e,t){let{environment:n,release:r,dist:o,maxValueLength:i=250}=t;"environment"in e||(e.environment="environment"in t?n:vn),e.release===void 0&&r!==void 0&&(e.release=r),e.dist===void 0&&o!==void 0&&(e.dist=o),e.message&&(e.message=dt(e.message,i));let s=e.exception&&e.exception.values&&e.exception.values[0];s&&s.value&&(s.value=dt(s.value,i));let a=e.request;a&&a.url&&(a.url=dt(a.url,i))}var au=new WeakMap;function Up(e,t){let n=w._sentryDebugIds;if(!n)return;let r,o=au.get(t);o?r=o:(r=new Map,au.set(t,r));let i=Object.entries(n).reduce((s,[a,c])=>{let u,l=r.get(a);l?u=l:(u=t(a),r.set(a,u));for(let d=u.length-1;d>=0;d--){let p=u[d];if(p.filename){s[p.filename]=c;break}}return s},{});try{e.exception.values.forEach(s=>{s.stacktrace.frames.forEach(a=>{a.filename&&(a.debug_id=i[a.filename])})})}catch{}}function Fp(e){let t={};try{e.exception.values.forEach(r=>{r.stacktrace.frames.forEach(o=>{o.debug_id&&(o.abs_path?t[o.abs_path]=o.debug_id:o.filename&&(t[o.filename]=o.debug_id),delete o.debug_id)})})}catch{}if(Object.keys(t).length===0)return;e.debug_meta=e.debug_meta||{},e.debug_meta.images=e.debug_meta.images||[];let n=e.debug_meta.images;Object.entries(t).forEach(([r,o])=>{n.push({type:"sourcemap",code_file:r,debug_id:o})})}function Bp(e,t){t.length>0&&(e.sdk=e.sdk||{},e.sdk.integrations=[...e.sdk.integrations||[],...t])}function Hp(e,t,n){if(!e)return null;let r={...e,...e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map(o=>({...o,...o.data&&{data:Oe(o.data,t,n)}}))},...e.user&&{user:Oe(e.user,t,n)},...e.contexts&&{contexts:Oe(e.contexts,t,n)},...e.extra&&{extra:Oe(e.extra,t,n)}};return e.contexts&&e.contexts.trace&&r.contexts&&(r.contexts.trace=e.contexts.trace,e.contexts.trace.data&&(r.contexts.trace.data=Oe(e.contexts.trace.data,t,n))),e.spans&&(r.spans=e.spans.map(o=>({...o,...o.data&&{data:Oe(o.data,t,n)}}))),r}function $p(e,t){if(!t)return e;let n=e?e.clone():new Fe;return n.update(t),n}function cu(e){if(e)return Wp(e)?{captureContext:e}:jp(e)?{captureContext:e}:e}function Wp(e){return e instanceof Fe||typeof e=="function"}var zp=["user","level","extra","contexts","tags","fingerprint","requestSession","propagationContext"];function jp(e){return Object.keys(e).some(t=>zp.includes(t))}function sn(e,t){return B().captureException(e,cu(t))}function or(e,t){return B().captureEvent(e,t)}function wn(e,t){se().setContext(e,t)}function mo(e){se().addEventProcessor(e)}function ir(e){let t=R(),n=se(),r=B(),{release:o,environment:i=vn}=t&&t.getOptions()||{},{userAgent:s}=w.navigator||{},a=Dc({release:o,environment:i,user:r.getUser()||n.getUser(),...s&&{userAgent:s},...e}),c=n.getSession();return c&&c.status==="ok"&&bt(c,{status:"exited"}),ho(),n.setSession(a),r.setSession(a),a}function ho(){let e=se(),t=B(),n=t.getSession()||e.getSession();n&&Lc(n),lu(),e.setSession(),t.setSession()}function lu(){let e=se(),t=B(),n=R(),r=t.getSession()||e.getSession();r&&n&&n.captureSession(r)}function sr(e=!1){if(e){ho();return}lu()}var Gp="7";function qp(e){let t=e.protocol?`${e.protocol}:`:"",n=e.port?`:${e.port}`:"";return`${t}//${e.host}${n}${e.path?`/${e.path}`:""}/api/`}function Yp(e){return`${qp(e)}${e.projectId}/envelope/`}function Vp(e,t){return Li({sentry_key:e.publicKey,sentry_version:Gp,...t&&{sentry_client:`${t.name}/${t.version}`}})}function du(e,t,n){return t||`${Yp(e)}?${Vp(e,n)}`}var pu=[];function Kp(e){let t={};return e.forEach(n=>{let{name:r}=n,o=t[r];o&&!o.isDefaultInstance&&n.isDefaultInstance||(t[r]=n)}),Object.values(t)}function Ss(e){let t=e.defaultIntegrations||[],n=e.integrations;t.forEach(s=>{s.isDefaultInstance=!0});let r;Array.isArray(n)?r=[...t,...n]:typeof n=="function"?r=Vn(n(t)):r=t;let o=Kp(r),i=o.findIndex(s=>s.name==="Debug");if(i>-1){let[s]=o.splice(i,1);o.push(s)}return o}function fu(e,t){let n={};return t.forEach(r=>{r&&ys(e,r,n)}),n}function _s(e,t){for(let n of t)n&&n.afterAllSetup&&n.afterAllSetup(e)}function ys(e,t,n){if(n[t.name]){x&&h.log(`Integration skipped because it was already installed: ${t.name}`);return}if(n[t.name]=t,pu.indexOf(t.name)===-1&&typeof t.setupOnce=="function"&&(t.setupOnce(),pu.push(t.name)),t.setup&&typeof t.setup=="function"&&t.setup(e),typeof t.preprocessEvent=="function"){let r=t.preprocessEvent.bind(t);e.on("preprocessEvent",(o,i)=>r(o,i,e))}if(typeof t.processEvent=="function"){let r=t.processEvent.bind(t),o=Object.assign((i,s)=>r(i,s,e),{id:t.name});e.addEventProcessor(o)}x&&h.log(`Integration installed: ${t.name}`)}var mu="Not capturing exception because it's already been captured.",ar=class{constructor(t){if(this._options=t,this._integrations={},this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],t.dsn?this._dsn=Wr(t.dsn):x&&h.warn("No DSN provided, client will not send events."),this._dsn){let n=du(this._dsn,t.tunnel,t._metadata?t._metadata.sdk:void 0);this._transport=t.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),...t.transportOptions,url:n})}}captureException(t,n,r){let o=W();if(Qr(t))return x&&h.log(mu),o;let i={event_id:o,...n};return this._process(this.eventFromException(t,i).then(s=>this._captureEvent(s,i,r))),i.event_id}captureMessage(t,n,r,o){let i={event_id:W(),...r},s=pn(t)?t:String(t),a=Kt(t)?this.eventFromMessage(s,n,i):this.eventFromException(t,i);return this._process(a.then(c=>this._captureEvent(c,i,o))),i.event_id}captureEvent(t,n,r){let o=W();if(n&&n.originalException&&Qr(n.originalException))return x&&h.log(mu),o;let i={event_id:o,...n},a=(t.sdkProcessingMetadata||{}).capturedSpanScope;return this._process(this._captureEvent(t,i,a||r)),i.event_id}captureSession(t){typeof t.release!="string"?x&&h.warn("Discarded session because of missing or non-string release"):(this.sendSession(t),bt(t,{init:!1}))}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(t){let n=this._transport;return n?(this.emit("flush"),this._isClientDoneProcessing(t).then(r=>n.flush(t).then(o=>r&&o))):Ce(!0)}close(t){return this.flush(t).then(n=>(this.getOptions().enabled=!1,this.emit("close"),n))}getEventProcessors(){return this._eventProcessors}addEventProcessor(t){this._eventProcessors.push(t)}init(){(this._isEnabled()||this._options.integrations.some(({name:t})=>t.startsWith("Spotlight")))&&this._setupIntegrations()}getIntegrationByName(t){return this._integrations[t]}addIntegration(t){let n=this._integrations[t.name];ys(this,t,this._integrations),n||_s(this,[t])}sendEvent(t,n={}){this.emit("beforeSendEvent",t,n);let r=Zc(t,this._dsn,this._options._metadata,this._options.tunnel);for(let i of n.attachments||[])r=Zi(r,ts(i));let o=this.sendEnvelope(r);o&&o.then(i=>this.emit("afterSendEvent",t,i),null)}sendSession(t){let n=Xc(t,this._dsn,this._options._metadata,this._options.tunnel);this.sendEnvelope(n)}recordDroppedEvent(t,n,r){if(this._options.sendClientReports){let o=typeof r=="number"?r:1,i=`${t}:${n}`;x&&h.log(`Recording outcome: "${i}"${o>1?` (${o} times)`:""}`),this._outcomes[i]=(this._outcomes[i]||0)+o}}on(t,n){let r=this._hooks[t]=this._hooks[t]||[];return r.push(n),()=>{let o=r.indexOf(n);o>-1&&r.splice(o,1)}}emit(t,...n){let r=this._hooks[t];r&&r.forEach(o=>o(...n))}sendEnvelope(t){return this.emit("beforeEnvelope",t),this._isEnabled()&&this._transport?this._transport.send(t).then(null,n=>(x&&h.error("Error while sending event:",n),n)):(x&&h.error("Transport disabled"),Ce({}))}_setupIntegrations(){let{integrations:t}=this._options;this._integrations=fu(this,t),_s(this,t)}_updateSessionFromEvent(t,n){let r=!1,o=!1,i=n.exception&&n.exception.values;if(i){o=!0;for(let c of i){let u=c.mechanism;if(u&&u.handled===!1){r=!0;break}}}let s=t.status==="ok";(s&&t.errors===0||s&&r)&&(bt(t,{...r&&{status:"crashed"},errors:t.errors||Number(o||r)}),this.captureSession(t))}_isClientDoneProcessing(t){return new tt(n=>{let r=0,o=1,i=setInterval(()=>{this._numProcessing==0?(clearInterval(i),n(!0)):(r+=o,t&&r>=t&&(clearInterval(i),n(!1)))},o)})}_isEnabled(){return this.getOptions().enabled!==!1&&this._transport!==void 0}_prepareEvent(t,n,r,o=se()){let i=this.getOptions(),s=Object.keys(this._integrations);return!n.integrations&&s.length>0&&(n.integrations=s),this.emit("preprocessEvent",t,n),t.type||o.setLastEventId(t.event_id||n.event_id),rr(i,t,n,r,this,o).then(a=>{if(a===null)return a;let c={...o.getPropagationContext(),...r?r.getPropagationContext():void 0};if(!(a.contexts&&a.contexts.trace)&&c){let{traceId:l,spanId:d,parentSpanId:p,dsc:f}=c;a.contexts={trace:Y({trace_id:l,span_id:d,parent_span_id:p}),...a.contexts};let m=f||Pt(l,this);a.sdkProcessingMetadata={dynamicSamplingContext:m,...a.sdkProcessingMetadata}}return a})}_captureEvent(t,n={},r){return this._processEvent(t,n,r).then(o=>o.event_id,o=>{if(x){let i=o;i.logLevel==="log"?h.log(i.message):h.warn(i)}})}_processEvent(t,n,r){let o=this.getOptions(),{sampleRate:i}=o,s=gu(t),a=hu(t),c=t.type||"error",u=`before send for type \`${c}\``,l=typeof i>"u"?void 0:Ut(i);if(a&&typeof l=="number"&&Math.random()>l)return this.recordDroppedEvent("sample_rate","error",t),At(new Ee(`Discarding event because it's not included in the random sample (sampling rate = ${i})`,"log"));let d=c==="replay_event"?"replay":c,f=(t.sdkProcessingMetadata||{}).capturedSpanIsolationScope;return this._prepareEvent(t,n,r,f).then(m=>{if(m===null)throw this.recordDroppedEvent("event_processor",d,t),new Ee("An event processor returned `null`, will not send event.","log");if(n.data&&n.data.__sentry__===!0)return m;let T=Xp(this,o,m,n);return Jp(T,u)}).then(m=>{if(m===null){if(this.recordDroppedEvent("before_send",d,t),s){let k=1+(t.spans||[]).length;this.recordDroppedEvent("before_send","span",k)}throw new Ee(`${u} returned \`null\`, will not send event.`,"log")}let g=r&&r.getSession();if(!s&&g&&this._updateSessionFromEvent(g,m),s){let y=m.sdkProcessingMetadata&&m.sdkProcessingMetadata.spanCountBeforeProcessing||0,k=m.spans?m.spans.length:0,F=y-k;F>0&&this.recordDroppedEvent("before_send","span",F)}let T=m.transaction_info;if(s&&T&&m.transaction!==t.transaction){let y="custom";m.transaction_info={...T,source:y}}return this.sendEvent(m,n),m}).then(null,m=>{throw m instanceof Ee?m:(this.captureException(m,{data:{__sentry__:!0},originalException:m}),new Ee(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.
Reason: ${m}`))})}_process(t){this._numProcessing++,t.then(n=>(this._numProcessing--,n),n=>(this._numProcessing--,n))}_clearOutcomes(){let t=this._outcomes;return this._outcomes={},Object.entries(t).map(([n,r])=>{let[o,i]=n.split(":");return{reason:o,category:i,quantity:r}})}_flushOutcomes(){x&&h.log("Flushing outcomes...");let t=this._clearOutcomes();if(t.length===0){x&&h.log("No outcomes to send");return}if(!this._dsn){x&&h.log("No dsn provided, will not send outcomes");return}x&&h.log("Sending outcomes:",t);let n=ns(t,this._options.tunnel&&Qe(this._dsn));this.sendEnvelope(n)}};function Jp(e,t){let n=`${t} must return \`null\` or a valid event.`;if(lt(e))return e.then(r=>{if(!Ze(r)&&r!==null)throw new Ee(n);return r},r=>{throw new Ee(`${t} rejected with ${r}`)});if(!Ze(e)&&e!==null)throw new Ee(n);return e}function Xp(e,t,n,r){let{beforeSend:o,beforeSendTransaction:i,beforeSendSpan:s}=t;if(hu(n)&&o)return o(n,r);if(gu(n)){if(n.spans&&s){let a=[];for(let c of n.spans){let u=s(c);u?a.push(u):e.recordDroppedEvent("before_send","span")}n.spans=a}if(i){if(n.spans){let a=n.spans.length;n.sdkProcessingMetadata={...n.sdkProcessingMetadata,spanCountBeforeProcessing:a}}return i(n,r)}}return n}function hu(e){return e.type===void 0}function gu(e){return e.type==="transaction"}function Es(e,t){t.debug===!0&&(x?h.enable():Ge(()=>{console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.")})),B().update(t.initialScope);let r=new e(t);return Ts(r),r.init(),r}function Ts(e){B().setClient(e)}var Zp=64;function go(e,t,n=Yi(e.bufferSize||Zp)){let r={},o=s=>n.drain(s);function i(s){let a=[];if(to(s,(d,p)=>{let f=no(p);if(Xn(r,f)){let m=Su(d,p);e.recordDroppedEvent("ratelimit_backoff",f,m)}else a.push(d)}),a.length===0)return Ce({});let c=Ue(s[0],a),u=d=>{to(c,(p,f)=>{let m=Su(p,f);e.recordDroppedEvent(d,no(f),m)})},l=()=>t({body:Qi(c)}).then(d=>(d.statusCode!==void 0&&(d.statusCode<200||d.statusCode>=300)&&x&&h.warn(`Sentry responded with status code ${d.statusCode} to sent event.`),r=Zn(r,d),d),d=>{throw u("network_error"),d});return n.add(l).then(d=>d,d=>{if(d instanceof Ee)return x&&h.error("Skipped sending event because buffer is full."),u("queue_overflow"),Ce({});throw d})}return{send:i,flush:o}}function Su(e,t){if(!(t!=="event"&&t!=="transaction"))return Array.isArray(e)?e[1]:void 0}function Is(e,t){let n=t&&t.getDsn(),r=t&&t.getOptions().tunnel;return ef(e,n)||Qp(e,r)}function Qp(e,t){return t?_u(e)===_u(t):!1}function ef(e,t){return t?e.includes(t.host):!1}function _u(e){return e[e.length-1]==="/"?e.slice(0,-1):e}function cr(e,t,n=[t],r="npm"){let o=e._metadata||{};o.sdk||(o.sdk={name:`sentry.javascript.${t}`,packages:n.map(i=>({name:`${r}:@sentry/${i}`,version:ze})),version:ze}),e._metadata=o}var tf=100;function Ve(e,t){let n=R(),r=se();if(!n)return;let{beforeBreadcrumb:o=null,maxBreadcrumbs:i=tf}=n.getOptions();if(i<=0)return;let a={timestamp:ft(),...e},c=o?Ge(()=>o(a,t)):a;c!==null&&(n.emit&&n.emit("beforeAddBreadcrumb",c,t),r.addBreadcrumb(c,i))}var yu,nf="FunctionToString",Eu=new WeakMap,rf=()=>({name:nf,setupOnce(){yu=Function.prototype.toString;try{Function.prototype.toString=function(...e){let t=Xt(this),n=Eu.has(R())&&t!==void 0?t:this;return yu.apply(n,e)}}catch{}},setup(e){Eu.set(e,!0)}}),So=rf;var of=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/,"undefined is not an object (evaluating 'a.L')",`can't redefine non-configurable property "solana"`,"vv().getRestrictions is not a function. (In 'vv().getRestrictions(1,a)', 'vv().getRestrictions' is undefined)","Can't find variable: _AutofillCallbackHandler"],sf="InboundFilters",af=(e={})=>({name:sf,processEvent(t,n,r){let o=r.getOptions(),i=cf(e,o);return uf(t,i)?null:t}}),yo=af;function cf(e={},t={}){return{allowUrls:[...e.allowUrls||[],...t.allowUrls||[]],denyUrls:[...e.denyUrls||[],...t.denyUrls||[]],ignoreErrors:[...e.ignoreErrors||[],...t.ignoreErrors||[],...e.disableErrorDefaults?[]:of],ignoreTransactions:[...e.ignoreTransactions||[],...t.ignoreTransactions||[]],ignoreInternal:e.ignoreInternal!==void 0?e.ignoreInternal:!0}}function uf(e,t){return t.ignoreInternal&&hf(e)?(x&&h.warn(`Event dropped due to being internal Sentry Error.
Event: ${et(e)}`),!0):lf(e,t.ignoreErrors)?(x&&h.warn(`Event dropped due to being matched by \`ignoreErrors\` option.
Event: ${et(e)}`),!0):Sf(e)?(x&&h.warn(`Event dropped due to not having an error message, error type or stacktrace.
Event: ${et(e)}`),!0):df(e,t.ignoreTransactions)?(x&&h.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.
Event: ${et(e)}`),!0):pf(e,t.denyUrls)?(x&&h.warn(`Event dropped due to being matched by \`denyUrls\` option.
Event: ${et(e)}.
Url: ${_o(e)}`),!0):ff(e,t.allowUrls)?!1:(x&&h.warn(`Event dropped due to not being matched by \`allowUrls\` option.
Event: ${et(e)}.
Url: ${_o(e)}`),!0)}function lf(e,t){return e.type||!t||!t.length?!1:mf(e).some(n=>We(n,t))}function df(e,t){if(e.type!=="transaction"||!t||!t.length)return!1;let n=e.transaction;return n?We(n,t):!1}function pf(e,t){if(!t||!t.length)return!1;let n=_o(e);return n?We(n,t):!1}function ff(e,t){if(!t||!t.length)return!0;let n=_o(e);return n?We(n,t):!0}function mf(e){let t=[];e.message&&t.push(e.message);let n;try{n=e.exception.values[e.exception.values.length-1]}catch{}return n&&n.value&&(t.push(n.value),n.type&&t.push(`${n.type}: ${n.value}`)),t}function hf(e){try{return e.exception.values[0].type==="SentryError"}catch{}return!1}function gf(e=[]){for(let t=e.length-1;t>=0;t--){let n=e[t];if(n&&n.filename!=="<anonymous>"&&n.filename!=="[native code]")return n.filename||null}return null}function _o(e){try{let t;try{t=e.exception.values[0].stacktrace.frames}catch{}return t?gf(t):null}catch{return x&&h.error(`Cannot extract url for event ${et(e)}`),null}}function Sf(e){return e.type||!e.exception||!e.exception.values||e.exception.values.length===0?!1:!e.message&&!e.exception.values.some(t=>t.stacktrace||t.type&&t.type!=="Error"||t.value)}var _f="Dedupe",yf=()=>{let e;return{name:_f,processEvent(t){if(t.type)return t;try{if(Ef(t,e))return x&&h.warn("Event dropped due to being a duplicate of previously captured event."),null}catch{}return e=t}}},Eo=yf;function Ef(e,t){return t?!!(Tf(e,t)||If(e,t)):!1}function Tf(e,t){let n=e.message,r=t.message;return!(!n&&!r||n&&!r||!n&&r||n!==r||!bu(e,t)||!Iu(e,t))}function If(e,t){let n=Tu(t),r=Tu(e);return!(!n||!r||n.type!==r.type||n.value!==r.value||!bu(e,t)||!Iu(e,t))}function Iu(e,t){let n=Yr(e),r=Yr(t);if(!n&&!r)return!0;if(n&&!r||!n&&r||(n=n,r=r,r.length!==n.length))return!1;for(let o=0;o<r.length;o++){let i=r[o],s=n[o];if(i.filename!==s.filename||i.lineno!==s.lineno||i.colno!==s.colno||i.function!==s.function)return!1}return!0}function bu(e,t){let n=e.fingerprint,r=t.fingerprint;if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;n=n,r=r;try{return n.join("")===r.join("")}catch{return!1}}function Tu(e){return e.exception&&e.exception.values&&e.exception.values[0]}function bs(e,t,n,r,o="auto.http.browser"){if(!e.fetchData)return;let i=De()&&t(e.fetchData.url);if(e.endTimestamp&&i){let m=e.fetchData.__span;if(!m)return;let g=r[m];g&&(vf(g,e),delete r[m]);return}let s=B(),a=R(),{method:c,url:u}=e.fetchData,l=bf(u),d=l?qe(l).host:void 0,p=!!X(),f=i&&p?xe({name:`${c} ${u}`,attributes:{url:u,type:"fetch","http.method":c,"http.url":l,"server.address":d,[Q]:o,[Re]:"http.client"}}):new Be;if(e.fetchData.__span=f.spanContext().spanId,r[f.spanContext().spanId]=f,n(e.fetchData.url)&&a){let m=e.args[0];e.args[1]=e.args[1]||{};let g=e.args[1];g.headers=vu(m,a,s,g,De()&&p?f:void 0)}return f}function vu(e,t,n,r,o){let i=se(),{traceId:s,spanId:a,sampled:c,dsc:u}={...i.getPropagationContext(),...n.getPropagationContext()},l=o?bn(o):Zt(s,a,c),d=Sn(u||(o?we(o):Pt(s,t))),p=r.headers||(typeof Request<"u"&&Pe(e,Request)?e.headers:void 0);if(p)if(typeof Headers<"u"&&Pe(p,Headers)){let f=new Headers(p);return f.append("sentry-trace",l),d&&f.append(gn,d),f}else if(Array.isArray(p)){let f=[...p,["sentry-trace",l]];return d&&f.push([gn,d]),f}else{let f="baggage"in p?p.baggage:void 0,m=[];return Array.isArray(f)?m.push(...f):f&&m.push(f),d&&m.push(d),{...p,"sentry-trace":l,baggage:m.length>0?m.join(","):void 0}}else return{"sentry-trace":l,baggage:d}}function bf(e){try{return new URL(e).href}catch{return}}function vf(e,t){if(t.response){In(e,t.response.status);let n=t.response&&t.response.headers&&t.response.headers.get("content-length");if(n){let r=parseInt(n);r>0&&e.setAttribute("http.response_content_length",r)}}else t.error&&e.setStatus({code:2,message:"internal_error"});e.end()}var N=w,vs=0;function Cs(){return vs>0}function Hf(){vs++,setTimeout(()=>{vs--})}function an(e,t={},n){if(typeof e!="function")return e;try{let o=e.__sentry_wrapped__;if(o)return o;if(Xt(e))return e}catch{return e}let r=function(){let o=Array.prototype.slice.call(arguments);try{n&&typeof n=="function"&&n.apply(this,arguments);let i=o.map(s=>an(s,t));return e.apply(this,i)}catch(i){throw Hf(),tn(s=>{s.addEventProcessor(a=>(t.mechanism&&(hn(a,void 0,void 0),Tt(a,t.mechanism)),a.extra={...a.extra,arguments:o},a)),sn(i)}),i}};try{for(let o in e)Object.prototype.hasOwnProperty.call(e,o)&&(r[o]=e[o])}catch{}zr(r,e),le(e,"__sentry_wrapped__",r);try{Object.getOwnPropertyDescriptor(r,"name").configurable&&Object.defineProperty(r,"name",{get(){return e.name}})}catch{}return r}var ge=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;function To(e,t){let n=xs(e,t),r={type:t&&t.name,value:Gf(t)};return n.length&&(r.stacktrace={frames:n}),r.type===void 0&&r.value===""&&(r.value="Unrecoverable error caught"),r}function $f(e,t,n,r){let o=R(),i=o&&o.getOptions().normalizeDepth,s=Vf(t),a={__serialized__:eo(t,i)};if(s)return{exception:{values:[To(e,s)]},extra:a};let c={exception:{values:[{type:Jt(t)?t.constructor.name:r?"UnhandledRejection":"Error",value:qf(t,{isUnhandledRejection:r})}]},extra:a};if(n){let u=xs(e,n);u.length&&(c.exception.values[0].stacktrace={frames:u})}return c}function Rs(e,t){return{exception:{values:[To(e,t)]}}}function xs(e,t){let n=t.stacktrace||t.stack||"",r=zf(t),o=jf(t);try{return e(n,r,o)}catch{}return[]}var Wf=/Minified React error #\d+;/i;function zf(e){return e&&Wf.test(e.message)?1:0}function jf(e){return typeof e.framesToPop=="number"?e.framesToPop:0}function Gf(e){let t=e&&e.message;return t?t.error&&typeof t.error.message=="string"?t.error.message:t:"No error message"}function wu(e,t,n,r){let o=n&&n.syntheticException||void 0,i=Io(e,t,o,r);return Tt(i),i.level="error",n&&n.event_id&&(i.event_id=n.event_id),Ce(i)}function xu(e,t,n="info",r,o){let i=r&&r.syntheticException||void 0,s=ws(e,t,i,o);return s.level=n,r&&r.event_id&&(s.event_id=r.event_id),Ce(s)}function Io(e,t,n,r,o){let i;if(Br(t)&&t.error)return Rs(e,t.error);if(Hr(t)||wi(t)){let s=t;if("stack"in t)i=Rs(e,t);else{let a=s.name||(Hr(s)?"DOMError":"DOMException"),c=s.message?`${a}: ${s.message}`:a;i=ws(e,c,n,r),hn(i,c)}return"code"in s&&(i.tags={...i.tags,"DOMException.code":`${s.code}`}),i}return Vt(t)?Rs(e,t):Ze(t)||Jt(t)?(i=$f(e,t,n,o),Tt(i,{synthetic:!0}),i):(i=ws(e,t,n,r),hn(i,`${t}`,void 0),Tt(i,{synthetic:!0}),i)}function ws(e,t,n,r){let o={};if(r&&n){let i=xs(e,n);i.length&&(o.exception={values:[{value:t,stacktrace:{frames:i}}]})}if(pn(t)){let{__sentry_template_string__:i,__sentry_template_values__:s}=t;return o.logentry={message:i,params:s},o}return o.message=t,o}function qf(e,{isUnhandledRejection:t}){let n=Pi(e),r=t?"promise rejection":"exception";return Br(e)?`Event \`ErrorEvent\` captured as ${r} with message \`${e.message}\``:Jt(e)?`Event \`${Yf(e)}\` (type=${e.type}) captured as ${r}`:`Object captured as ${r} with keys: ${n}`}function Yf(e){try{let t=Object.getPrototypeOf(e);return t?t.constructor.name:void 0}catch{}}function Vf(e){for(let t in e)if(Object.prototype.hasOwnProperty.call(e,t)){let n=e[t];if(n instanceof Error)return n}}function ku(e,{metadata:t,tunnel:n,dsn:r}){let o={event_id:e.event_id,sent_at:new Date().toISOString(),...t&&t.sdk&&{sdk:{name:t.sdk.name,version:t.sdk.version}},...!!n&&!!r&&{dsn:Qe(r)}},i=Kf(e);return Ue(o,[i])}function Kf(e){return[{type:"user_report"},e]}var bo=class extends ar{constructor(t){let n={parentSpanIsAlwaysRootSpan:!0,...t},r=N.SENTRY_SDK_SOURCE||Gi();cr(n,"browser",["browser"],r),super(n),n.sendClientReports&&N.document&&N.document.addEventListener("visibilitychange",()=>{N.document.visibilityState==="hidden"&&this._flushOutcomes()})}eventFromException(t,n){return wu(this._options.stackParser,t,n,this._options.attachStacktrace)}eventFromMessage(t,n="info",r){return xu(this._options.stackParser,t,n,r,this._options.attachStacktrace)}captureUserFeedback(t){if(!this._isEnabled()){ge&&h.warn("SDK not enabled, will not capture user feedback.");return}let n=ku(t,{metadata:this.getSdkMetadata(),dsn:this.getDsn(),tunnel:this.getOptions().tunnel});this.sendEnvelope(n)}_prepareEvent(t,n,r){return t.platform=t.platform||"javascript",super._prepareEvent(t,n,r)}};var Se=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;var Jf=(e,t)=>e>t[1]?"poor":e>t[0]?"needs-improvement":"good",Ke=(e,t,n,r)=>{let o,i;return s=>{t.value>=0&&(s||r)&&(i=t.value-(o||0),(i||o===void 0)&&(o=t.value,t.delta=i,t.rating=Jf(t.value,n),e(t)))}};var I=w;var Au=()=>`v3-${Date.now()}-${Math.floor(Math.random()*8999999999999)+1e12}`;var vt=()=>I.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0];var Ft=()=>{let e=vt();return e&&e.activationStart||0};var Je=(e,t)=>{let n=vt(),r="navigate";return n&&(I.document&&I.document.prerendering||Ft()>0?r="prerender":I.document&&I.document.wasDiscarded?r="restore":n.type&&(r=n.type.replace(/_/g,"-"))),{name:e,value:typeof t>"u"?-1:t,rating:"good",delta:0,entries:[],id:Au(),navigationType:r}};var Le=(e,t,n)=>{try{if(PerformanceObserver.supportedEntryTypes.includes(e)){let r=new PerformanceObserver(o=>{Promise.resolve().then(()=>{t(o.getEntries())})});return r.observe(Object.assign({type:e,buffered:!0},n||{})),r}}catch{}};var mt=e=>{let t=n=>{(n.type==="pagehide"||I.document&&I.document.visibilityState==="hidden")&&e(n)};I.document&&(addEventListener("visibilitychange",t,!0),addEventListener("pagehide",t,!0))};var xn=e=>{let t=!1;return n=>{t||(e(n),t=!0)}};var ur=-1,Xf=()=>{ur=I.document.visibilityState==="hidden"&&!I.document.prerendering?0:1/0},vo=e=>{I.document.visibilityState==="hidden"&&ur>-1&&(ur=e.type==="visibilitychange"?e.timeStamp:0,removeEventListener("visibilitychange",vo,!0),removeEventListener("prerenderingchange",vo,!0))},Zf=()=>{addEventListener("visibilitychange",vo,!0),addEventListener("prerenderingchange",vo,!0)},Bt=()=>(I.document&&ur<0&&(Xf(),Zf()),{get firstHiddenTime(){return ur}});var ht=e=>{I.document&&I.document.prerendering?addEventListener("prerenderingchange",()=>e(),!0):e()};var Qf=[1800,3e3],Nu=(e,t={})=>{ht(()=>{let n=Bt(),r=Je("FCP"),o,s=Le("paint",a=>{a.forEach(c=>{c.name==="first-contentful-paint"&&(s.disconnect(),c.startTime<n.firstHiddenTime&&(r.value=Math.max(c.startTime-Ft(),0),r.entries.push(c),o(!0)))})});s&&(o=Ke(e,r,Qf,t.reportAllChanges))})};var em=[.1,.25],Mu=(e,t={})=>{Nu(xn(()=>{let n=Je("CLS",0),r,o=0,i=[],s=c=>{c.forEach(u=>{if(!u.hadRecentInput){let l=i[0],d=i[i.length-1];o&&l&&d&&u.startTime-d.startTime<1e3&&u.startTime-l.startTime<5e3?(o+=u.value,i.push(u)):(o=u.value,i=[u])}}),o>n.value&&(n.value=o,n.entries=i,r())},a=Le("layout-shift",s);a&&(r=Ke(e,n,em,t.reportAllChanges),mt(()=>{s(a.takeRecords()),r(!0)}),setTimeout(r,0))}))};var tm=[100,300],Ou=(e,t={})=>{ht(()=>{let n=Bt(),r=Je("FID"),o,i=c=>{c.startTime<n.firstHiddenTime&&(r.value=c.processingStart-c.startTime,r.entries.push(c),o(!0))},s=c=>{c.forEach(i)},a=Le("first-input",s);o=Ke(e,r,tm,t.reportAllChanges),a&&mt(xn(()=>{s(a.takeRecords()),a.disconnect()}))})};var Du=0,ks=1/0,Co=0,nm=e=>{e.forEach(t=>{t.interactionId&&(ks=Math.min(ks,t.interactionId),Co=Math.max(Co,t.interactionId),Du=Co?(Co-ks)/7+1:0)})},As,Lu=()=>As?Du:performance.interactionCount||0,Pu=()=>{"interactionCount"in performance||As||(As=Le("event",nm,{type:"event",buffered:!0,durationThreshold:0}))};var rm=[200,500],om=0,Bu=()=>Lu()-om,Uu=10,Ct=[],Ns={},Fu=e=>{let t=Ct[Ct.length-1],n=Ns[e.interactionId];if(n||Ct.length<Uu||t&&e.duration>t.latency){if(n)n.entries.push(e),n.latency=Math.max(n.latency,e.duration);else{let r={id:e.interactionId,latency:e.duration,entries:[e]};Ns[r.id]=r,Ct.push(r)}Ct.sort((r,o)=>o.latency-r.latency),Ct.splice(Uu).forEach(r=>{delete Ns[r.id]})}},im=()=>{let e=Math.min(Ct.length-1,Math.floor(Bu()/50));return Ct[e]},Hu=(e,t={})=>{ht(()=>{Pu();let n=Je("INP"),r,o=s=>{s.forEach(c=>{c.interactionId&&Fu(c),c.entryType==="first-input"&&!Ct.some(l=>l.entries.some(d=>c.duration===d.duration&&c.startTime===d.startTime))&&Fu(c)});let a=im();a&&a.latency!==n.value&&(n.value=a.latency,n.entries=a.entries,r())},i=Le("event",o,{durationThreshold:t.durationThreshold!=null?t.durationThreshold:40});r=Ke(e,n,rm,t.reportAllChanges),i&&("PerformanceEventTiming"in I&&"interactionId"in PerformanceEventTiming.prototype&&i.observe({type:"first-input",buffered:!0}),mt(()=>{o(i.takeRecords()),n.value<0&&Bu()>0&&(n.value=0,n.entries=[]),r(!0)}))})};var sm=[2500,4e3],$u={},Wu=(e,t={})=>{ht(()=>{let n=Bt(),r=Je("LCP"),o,i=a=>{let c=a[a.length-1];c&&c.startTime<n.firstHiddenTime&&(r.value=Math.max(c.startTime-Ft(),0),r.entries=[c],o())},s=Le("largest-contentful-paint",i);if(s){o=Ke(e,r,sm,t.reportAllChanges);let a=xn(()=>{$u[r.id]||(i(s.takeRecords()),s.disconnect(),$u[r.id]=!0,o(!0))});["keydown","click"].forEach(c=>{I.document&&addEventListener(c,()=>setTimeout(a,0),!0)}),mt(a)}})};var am=[800,1800],Ms=e=>{I.document&&I.document.prerendering?ht(()=>Ms(e)):I.document&&I.document.readyState!=="complete"?addEventListener("load",()=>Ms(e),!0):setTimeout(e,0)},zu=(e,t={})=>{let n=Je("TTFB"),r=Ke(e,n,am,t.reportAllChanges);Ms(()=>{let o=vt();if(o){let i=o.responseStart;if(i<=0||i>performance.now())return;n.value=Math.max(i-Ft(),0),n.entries=[o],r(!0)}})};var lr={},Ro={},ju,Gu,qu,Yu,Vu;function cn(e,t=!1){return mr("cls",e,cm,ju,t)}function dr(e,t=!1){return mr("lcp",e,lm,qu,t)}function pr(e){return mr("fid",e,um,Gu)}function Os(e){return mr("ttfb",e,dm,Yu)}function fr(e){return mr("inp",e,pm,Vu)}function ot(e,t){return Ku(e,t),Ro[e]||(fm(e),Ro[e]=!0),Ju(e,t)}function kn(e,t){let n=lr[e];if(!(!n||!n.length))for(let r of n)try{r(t)}catch(o){Se&&h.error(`Error while triggering instrumentation handler.
Type: ${e}
Name: ${Me(r)}
Error:`,o)}}function cm(){return Mu(e=>{kn("cls",{metric:e}),ju=e},{reportAllChanges:!0})}function um(){return Ou(e=>{kn("fid",{metric:e}),Gu=e})}function lm(){return Wu(e=>{kn("lcp",{metric:e}),qu=e},{reportAllChanges:!0})}function dm(){return zu(e=>{kn("ttfb",{metric:e}),Yu=e})}function pm(){return Hu(e=>{kn("inp",{metric:e}),Vu=e})}function mr(e,t,n,r,o=!1){Ku(e,t);let i;return Ro[e]||(i=n(),Ro[e]=!0),r&&t({metric:r}),Ju(e,t,o?i:void 0)}function fm(e){let t={};e==="event"&&(t.durationThreshold=0),Le(e,n=>{kn(e,{entries:n})},t)}function Ku(e,t){lr[e]=lr[e]||[],lr[e].push(t)}function Ju(e,t,n){return()=>{n&&n();let r=lr[e];if(!r)return;let o=r.indexOf(t);o!==-1&&r.splice(o,1)}}function Xu(e){return"duration"in e}function wo(e){return typeof e=="number"&&isFinite(e)}function un(e,t,n,{...r}){let o=M(e).start_timestamp;return o&&o>t&&typeof e.updateStartTime=="function"&&e.updateStartTime(t),tr(e,()=>{let i=xe({startTime:t,...r});return i&&i.end(n),i})}function xo(e){let t=R();if(!t)return;let{name:n,transaction:r,attributes:o,startTime:i}=e,{release:s,environment:a}=t.getOptions(),c=t.getIntegrationByName("Replay"),u=c&&c.getReplayId(),l=B(),d=l.getUser(),p=d!==void 0?d.email||d.id||d.ip_address:void 0,f;try{f=l.getScopeData().contexts.profile.profile_id}catch{}let m={release:s,environment:a,user:p||void 0,profile_id:f||void 0,replay_id:u||void 0,transaction:r,"user_agent.original":I.navigator&&I.navigator.userAgent,...o};return xe({name:n,attributes:m,startTime:i,experimental:{standalone:!0}})}function hr(){return I&&I.addEventListener&&I.performance}function ne(e){return e/1e3}function Zu(){let e=0,t,n;if(!hm())return;let r=!1;function o(){r||(r=!0,n&&mm(e,t,n),i())}let i=cn(({metric:s})=>{let a=s.entries[s.entries.length-1];a&&(e=s.value,t=a)},!0);mt(()=>{o()}),setTimeout(()=>{let s=R(),a=me([s,"optionalAccess",d=>d.on,"call",d=>d("startNavigationSpan",()=>{o(),a&&a()})]),c=X(),u=c&&V(c),l=u&&M(u);l&&l.op==="pageload"&&(n=u.spanContext().spanId)},0)}function mm(e,t,n){Se&&h.log(`Sending CLS span (${e})`);let r=ne(ie)+(me([t,"optionalAccess",u=>u.startTime])||0),o=ne(me([t,"optionalAccess",u=>u.duration])||0),i=B().getScopeData().transactionName,s=t?ye(me([t,"access",u=>u.sources,"access",u=>u[0],"optionalAccess",u=>u.node])):"Layout shift",a=Y({[Q]:"auto.http.browser.cls",[Re]:"ui.webvital.cls",[nn]:me([t,"optionalAccess",u=>u.duration])||0,"sentry.pageload.span_id":n}),c=xo({name:s,transaction:i,attributes:a,startTime:r});me([c,"optionalAccess",u=>u.addEvent,"call",u=>u("cls",{[Ot]:"",[Dt]:e})]),me([c,"optionalAccess",u=>u.end,"call",u=>u(r+o)])}function hm(){try{return me([PerformanceObserver,"access",e=>e.supportedEntryTypes,"optionalAccess",e=>e.includes,"call",e=>e("layout-shift")])}catch{return!1}}var gm=2147483647,Qu=0,_e={},gt,gr;function Ls({recordClsStandaloneSpans:e}){let t=hr();if(t&&ie){t.mark&&I.performance.mark("sentry-tracing-init");let n=ym(),r=_m(),o=Em(),i=e?Zu():Sm();return()=>{n(),r(),o(),i&&i()}}return()=>{}}function Ps(){ot("longtask",({entries:e})=>{if(X())for(let t of e){let n=ne(ie+t.startTime),r=ne(t.duration),o=xe({name:"Main UI thread blocked",op:"ui.long-task",startTime:n,attributes:{[Q]:"auto.ui.browser.metrics"}});o&&o.end(n+r)}})}function Us(){new PerformanceObserver(t=>{if(X())for(let n of t.getEntries()){if(!n.scripts[0])continue;let r=ne(ie+n.startTime),o=ne(n.duration),i={[Q]:"auto.ui.browser.metrics"},s=n.scripts[0],{invoker:a,invokerType:c,sourceURL:u,sourceFunctionName:l,sourceCharPosition:d}=s;i["browser.script.invoker"]=a,i["browser.script.invoker_type"]=c,u&&(i["code.filepath"]=u),l&&(i["code.function"]=l),d!==-1&&(i["browser.script.source_char_position"]=d);let p=xe({name:"Main UI thread blocked",op:"ui.long-animation-frame",startTime:r,attributes:i});p&&p.end(r+o)}}).observe({type:"long-animation-frame",buffered:!0})}function Fs(){ot("event",({entries:e})=>{if(X()){for(let t of e)if(t.name==="click"){let n=ne(ie+t.startTime),r=ne(t.duration),o={name:ye(t.target),op:`ui.interaction.${t.name}`,startTime:n,attributes:{[Q]:"auto.ui.browser.metrics"}},i=$n(t.target);i&&(o.attributes["ui.component_name"]=i);let s=xe(o);s&&s.end(n+r)}}})}function Sm(){return cn(({metric:e})=>{let t=e.entries[e.entries.length-1];t&&(Se&&h.log(`[Measurements] Adding CLS ${e.value}`),_e.cls={value:e.value,unit:""},gr=t)},!0)}function _m(){return dr(({metric:e})=>{let t=e.entries[e.entries.length-1];t&&(Se&&h.log("[Measurements] Adding LCP"),_e.lcp={value:e.value,unit:"millisecond"},gt=t)},!0)}function ym(){return pr(({metric:e})=>{let t=e.entries[e.entries.length-1];if(!t)return;let n=ne(ie),r=ne(t.startTime);Se&&h.log("[Measurements] Adding FID"),_e.fid={value:e.value,unit:"millisecond"},_e["mark.fid"]={value:n+r,unit:"second"}})}function Em(){return Os(({metric:e})=>{e.entries[e.entries.length-1]&&(Se&&h.log("[Measurements] Adding TTFB"),_e.ttfb={value:e.value,unit:"millisecond"})})}function Bs(e,t){let n=hr();if(!n||!I.performance.getEntries||!ie)return;Se&&h.log("[Tracing] Adding & adjusting spans using Performance API");let r=ne(ie),o=n.getEntries(),{op:i,start_timestamp:s}=M(e);if(o.slice(Qu).forEach(a=>{let c=ne(a.startTime),u=ne(Math.max(0,a.duration));if(!(i==="navigation"&&s&&r+c<s))switch(a.entryType){case"navigation":{Im(e,a,r);break}case"mark":case"paint":case"measure":{Tm(e,a,c,u,r);let l=Bt(),d=a.startTime<l.firstHiddenTime;a.name==="first-paint"&&d&&(Se&&h.log("[Measurements] Adding FP"),_e.fp={value:a.startTime,unit:"millisecond"}),a.name==="first-contentful-paint"&&d&&(Se&&h.log("[Measurements] Adding FCP"),_e.fcp={value:a.startTime,unit:"millisecond"});break}case"resource":{vm(e,a,a.name,c,u,r);break}}}),Qu=Math.max(o.length-1,0),Cm(e),i==="pageload"){wm(_e);let a=_e["mark.fid"];a&&_e.fid&&(un(e,a.value,a.value+ne(_e.fid.value),{name:"first input delay",op:"ui.action",attributes:{[Q]:"auto.ui.browser.metrics"}}),delete _e["mark.fid"]),(!("fcp"in _e)||!t.recordClsOnPageloadSpan)&&delete _e.cls,Object.entries(_e).forEach(([c,u])=>{uo(c,u.value,u.unit)}),e.setAttribute("performance.timeOrigin",r),Rm(e)}gt=void 0,gr=void 0,_e={}}function Tm(e,t,n,r,o){let i=vt(),s=ne(i?i.requestStart:0),a=o+Math.max(n,s),c=o+n,u=c+r,l={[Q]:"auto.resource.browser.metrics"};return a!==c&&(l["sentry.browser.measure_happened_before_request"]=!0,l["sentry.browser.measure_start_time"]=a),un(e,a,u,{name:t.name,op:t.entryType,attributes:l}),a}function Im(e,t,n){["unloadEvent","redirect","domContentLoadedEvent","loadEvent","connect"].forEach(r=>{ko(e,t,r,n)}),ko(e,t,"secureConnection",n,"TLS/SSL","connectEnd"),ko(e,t,"fetch",n,"cache","domainLookupStart"),ko(e,t,"domainLookup",n,"DNS"),bm(e,t,n)}function ko(e,t,n,r,o,i){let s=i?t[i]:t[`${n}End`],a=t[`${n}Start`];!a||!s||un(e,r+ne(a),r+ne(s),{op:"browser",name:o||n,attributes:{[Q]:"auto.ui.browser.metrics"}})}function bm(e,t,n){let r=n+ne(t.requestStart),o=n+ne(t.responseEnd),i=n+ne(t.responseStart);t.responseEnd&&(un(e,r,o,{op:"browser",name:"request",attributes:{[Q]:"auto.ui.browser.metrics"}}),un(e,i,o,{op:"browser",name:"response",attributes:{[Q]:"auto.ui.browser.metrics"}}))}function vm(e,t,n,r,o,i){if(t.initiatorType==="xmlhttprequest"||t.initiatorType==="fetch")return;let s=qe(n),a={[Q]:"auto.resource.browser.metrics"};Ds(a,t,"transferSize","http.response_transfer_size"),Ds(a,t,"encodedBodySize","http.response_content_length"),Ds(a,t,"decodedBodySize","http.decoded_response_content_length"),"renderBlockingStatus"in t&&(a["resource.render_blocking_status"]=t.renderBlockingStatus),s.protocol&&(a["url.scheme"]=s.protocol.split(":").pop()),s.host&&(a["server.address"]=s.host),a["url.same_origin"]=n.includes(I.location.origin);let c=i+r,u=c+o;un(e,c,u,{name:n.replace(I.location.origin,""),op:t.initiatorType?`resource.${t.initiatorType}`:"resource.other",attributes:a})}function Cm(e){let t=I.navigator;if(!t)return;let n=t.connection;n&&(n.effectiveType&&e.setAttribute("effectiveConnectionType",n.effectiveType),n.type&&e.setAttribute("connectionType",n.type),wo(n.rtt)&&(_e["connection.rtt"]={value:n.rtt,unit:"millisecond"})),wo(t.deviceMemory)&&e.setAttribute("deviceMemory",`${t.deviceMemory} GB`),wo(t.hardwareConcurrency)&&e.setAttribute("hardwareConcurrency",String(t.hardwareConcurrency))}function Rm(e){gt&&(Se&&h.log("[Measurements] Adding LCP Data"),gt.element&&e.setAttribute("lcp.element",ye(gt.element)),gt.id&&e.setAttribute("lcp.id",gt.id),gt.url&&e.setAttribute("lcp.url",gt.url.trim().slice(0,200)),e.setAttribute("lcp.size",gt.size)),gr&&gr.sources&&(Se&&h.log("[Measurements] Adding CLS Data"),gr.sources.forEach((t,n)=>e.setAttribute(`cls.source.${n+1}`,ye(t.node))))}function Ds(e,t,n,r){let o=t[n];o!=null&&o<gm&&(e[r]=o)}function wm(e){let t=vt();if(!t)return;let{responseStart:n,requestStart:r}=t;r<=n&&(Se&&h.log("[Measurements] Adding TTFB Request Time"),e["ttfb.requestTime"]={value:n-r,unit:"millisecond"})}var xm=1e3,el,Hs,$s;function Sr(e){let t="dom";Te(t,e),Ie(t,km)}function km(){if(!I.document)return;let e=de.bind(null,"dom"),t=tl(e,!0);I.document.addEventListener("click",t,!1),I.document.addEventListener("keypress",t,!1),["EventTarget","Node"].forEach(n=>{let r=I[n]&&I[n].prototype;!r||!r.hasOwnProperty||!r.hasOwnProperty("addEventListener")||(ue(r,"addEventListener",function(o){return function(i,s,a){if(i==="click"||i=="keypress")try{let c=this,u=c.__sentry_instrumentation_handlers__=c.__sentry_instrumentation_handlers__||{},l=u[i]=u[i]||{refCount:0};if(!l.handler){let d=tl(e);l.handler=d,o.call(this,i,d,a)}l.refCount++}catch{}return o.call(this,i,s,a)}}),ue(r,"removeEventListener",function(o){return function(i,s,a){if(i==="click"||i=="keypress")try{let c=this,u=c.__sentry_instrumentation_handlers__||{},l=u[i];l&&(l.refCount--,l.refCount<=0&&(o.call(this,i,l.handler,a),l.handler=void 0,delete u[i]),Object.keys(u).length===0&&delete c.__sentry_instrumentation_handlers__)}catch{}return o.call(this,i,s,a)}}))})}function Am(e){if(e.type!==Hs)return!1;try{if(!e.target||e.target._sentryId!==$s)return!1}catch{}return!0}function Nm(e,t){return e!=="keypress"?!1:!t||!t.tagName?!0:!(t.tagName==="INPUT"||t.tagName==="TEXTAREA"||t.isContentEditable)}function tl(e,t=!1){return n=>{if(!n||n._sentryCaptured)return;let r=Mm(n);if(Nm(n.type,r))return;le(n,"_sentryCaptured",!0),r&&!r._sentryId&&le(r,"_sentryId",W());let o=n.type==="keypress"?"input":n.type;Am(n)||(e({event:n,name:o,global:t}),Hs=n.type,$s=r?r._sentryId:void 0),clearTimeout(el),el=I.setTimeout(()=>{$s=void 0,Hs=void 0},xm)}}function Mm(e){try{return e.target}catch{return null}}var Ao;function Rt(e){let t="history";Te(t,e),Ie(t,Om)}function Om(){if(!os())return;let e=I.onpopstate;I.onpopstate=function(...n){let r=I.location.href,o=Ao;if(Ao=r,de("history",{from:o,to:r}),e)try{return e.apply(this,n)}catch{}};function t(n){return function(...r){let o=r.length>2?r[2]:void 0;if(o){let i=Ao,s=String(o);Ao=s,de("history",{from:i,to:s})}return n.apply(this,r)}}ue(I.history,"pushState",t),ue(I.history,"replaceState",t)}var No={};function Mo(e){let t=No[e];if(t)return t;let n=I[e];if(zn(n))return No[e]=n.bind(I);let r=I.document;if(r&&typeof r.createElement=="function")try{let o=r.createElement("iframe");o.hidden=!0,r.head.appendChild(o);let i=o.contentWindow;i&&i[e]&&(n=i[e]),r.head.removeChild(o)}catch(o){Se&&h.warn(`Could not create sandbox iframe for ${e} check, bailing to window.${e}: `,o)}return n&&(No[e]=n.bind(I))}function Oo(e){No[e]=void 0}function Ht(...e){return Mo("setTimeout")(...e)}var it="__sentry_xhr_v3__";function _r(e){let t="xhr";Te(t,e),Ie(t,Dm)}function Dm(){if(!I.XMLHttpRequest)return;let e=XMLHttpRequest.prototype;e.open=new Proxy(e.open,{apply(t,n,r){let o=oe()*1e3,i=ve(r[0])?r[0].toUpperCase():void 0,s=Lm(r[1]);if(!i||!s)return t.apply(n,r);n[it]={method:i,url:s,request_headers:{}},i==="POST"&&s.match(/sentry_key/)&&(n.__sentry_own_request__=!0);let a=()=>{let c=n[it];if(c&&n.readyState===4){try{c.status_code=n.status}catch{}let u={endTimestamp:oe()*1e3,startTimestamp:o,xhr:n};de("xhr",u)}};return"onreadystatechange"in n&&typeof n.onreadystatechange=="function"?n.onreadystatechange=new Proxy(n.onreadystatechange,{apply(c,u,l){return a(),c.apply(u,l)}}):n.addEventListener("readystatechange",a),n.setRequestHeader=new Proxy(n.setRequestHeader,{apply(c,u,l){let[d,p]=l,f=u[it];return f&&ve(d)&&ve(p)&&(f.request_headers[d.toLowerCase()]=p),c.apply(u,l)}}),t.apply(n,r)}}),e.send=new Proxy(e.send,{apply(t,n,r){let o=n[it];if(!o)return t.apply(n,r);r[0]!==void 0&&(o.body=r[0]);let i={startTimestamp:oe()*1e3,xhr:n};return de("xhr",i),t.apply(n,r)}})}function Lm(e){if(ve(e))return e;try{return e.toString()}catch{}}var Ws=[],Do=new Map;function zs(){if(hr()&&ie){let t=Pm();return()=>{t()}}return()=>{}}var nl={click:"click",pointerdown:"click",pointerup:"click",mousedown:"click",mouseup:"click",touchstart:"click",touchend:"click",mouseover:"hover",mouseout:"hover",mouseenter:"hover",mouseleave:"hover",pointerover:"hover",pointerout:"hover",pointerenter:"hover",pointerleave:"hover",dragstart:"drag",dragend:"drag",drag:"drag",dragenter:"drag",dragleave:"drag",dragover:"drag",drop:"drag",keydown:"press",keyup:"press",keypress:"press",input:"press"};function Pm(){return fr(({metric:e})=>{if(e.value==null)return;let t=e.entries.find(m=>m.duration===e.value&&nl[m.name]);if(!t)return;let{interactionId:n}=t,r=nl[t.name],o=ne(ie+t.startTime),i=ne(e.value),s=X(),a=s?V(s):void 0,u=(n!=null?Do.get(n):void 0)||a,l=u?M(u).description:B().getScopeData().transactionName,d=ye(t.target),p=Y({[Q]:"auto.http.browser.inp",[Re]:`ui.interaction.${r}`,[nn]:t.duration}),f=xo({name:d,transaction:l,attributes:p,startTime:o});me([f,"optionalAccess",m=>m.addEvent,"call",m=>m("inp",{[Ot]:"millisecond",[Dt]:e.value})]),me([f,"optionalAccess",m=>m.end,"call",m=>m(o+i)])})}function js(e){let t=({entries:n})=>{let r=X(),o=r&&V(r);n.forEach(i=>{if(!Xu(i)||!o)return;let s=i.interactionId;if(s!=null&&!Do.has(s)){if(Ws.length>10){let a=Ws.shift();Do.delete(a)}Ws.push(s),Do.set(s,o)}})};ot("event",t),ot("first-input",t)}function rl(e,t=Mo("fetch")){let n=0,r=0;function o(i){let s=i.body.length;n+=s,r++;let a={body:i.body,method:"POST",referrerPolicy:"origin",headers:e.headers,keepalive:n<=6e4&&r<15,...e.fetchOptions};if(!t)return Oo("fetch"),At("No fetch implementation available");try{return t(e.url,a).then(c=>(n-=s,r--,{statusCode:c.status,headers:{"x-sentry-rate-limits":c.headers.get("X-Sentry-Rate-Limits"),"retry-after":c.headers.get("Retry-After")}}))}catch(c){return Oo("fetch"),n-=s,r--,At(c)}}return go(e,o)}var Um=30;var Fm=50;function Gs(e,t,n,r){let o={filename:e,function:t==="<anonymous>"?pt:t,in_app:!0};return n!==void 0&&(o.lineno=n),r!==void 0&&(o.colno=r),o}var Bm=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,Hm=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,$m=/\((\S*)(?::(\d+))(?::(\d+))\)/,Wm=e=>{let t=Bm.exec(e);if(t){let[,r,o,i]=t;return Gs(r,pt,+o,+i)}let n=Hm.exec(e);if(n){if(n[2]&&n[2].indexOf("eval")===0){let s=$m.exec(n[2]);s&&(n[2]=s[1],n[3]=s[2],n[4]=s[3])}let[o,i]=il(n[1]||pt,n[2]);return Gs(i,o,n[3]?+n[3]:void 0,n[4]?+n[4]:void 0)}},zm=[Um,Wm],jm=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,Gm=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,qm=e=>{let t=jm.exec(e);if(t){if(t[3]&&t[3].indexOf(" > eval")>-1){let i=Gm.exec(t[3]);i&&(t[1]=t[1]||"eval",t[3]=i[1],t[4]=i[2],t[5]="")}let r=t[3],o=t[1]||pt;return[o,r]=il(o,r),Gs(r,o,t[4]?+t[4]:void 0,t[5]?+t[5]:void 0)}},Ym=[Fm,qm];var Vm=[zm,Ym],ol=qr(...Vm),il=(e,t)=>{let n=e.indexOf("safari-extension")!==-1,r=e.indexOf("safari-web-extension")!==-1;return n||r?[e.indexOf("@")!==-1?e.split("@")[0]:pt,n?`safari-extension:${t}`:`safari-web-extension:${t}`]:[e,t]};var Lo=1024,Km="Breadcrumbs",Jm=(e={})=>{let t={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...e};return{name:Km,setup(n){t.console&&Bi(Qm(n)),t.dom&&Sr(Zm(n,t.dom)),t.xhr&&_r(eh(n)),t.fetch&&Gn(th(n)),t.history&&Rt(nh(n)),t.sentry&&n.on("beforeSendEvent",Xm(n))}}},sl=Jm;function Xm(e){return function(n){R()===e&&Ve({category:`sentry.${n.type==="transaction"?"transaction":"event"}`,event_id:n.event_id,level:n.level,message:et(n)},{event:n})}}function Zm(e,t){return function(r){if(R()!==e)return;let o,i,s=typeof t=="object"?t.serializeAttribute:void 0,a=typeof t=="object"&&typeof t.maxStringLength=="number"?t.maxStringLength:void 0;a&&a>Lo&&(ge&&h.warn(`\`dom.maxStringLength\` cannot exceed ${Lo}, but a value of ${a} was configured. Sentry will use ${Lo} instead.`),a=Lo),typeof s=="string"&&(s=[s]);try{let u=r.event,l=rh(u)?u.target:u;o=ye(l,{keyAttrs:s,maxStringLength:a}),i=$n(l)}catch{o="<unknown>"}if(o.length===0)return;let c={category:`ui.${r.name}`,message:o};i&&(c.data={"ui.component_name":i}),Ve(c,{event:r.event,name:r.name,global:r.global})}}function Qm(e){return function(n){if(R()!==e)return;let r={category:"console",data:{arguments:n.args,logger:"console"},level:Vi(n.level),message:$r(n.args," ")};if(n.level==="assert")if(n.args[0]===!1)r.message=`Assertion failed: ${$r(n.args.slice(1)," ")||"console.assert"}`,r.data.arguments=n.args.slice(1);else return;Ve(r,{input:n.args,level:n.level})}}function eh(e){return function(n){if(R()!==e)return;let{startTimestamp:r,endTimestamp:o}=n,i=n.xhr[it];if(!r||!o||!i)return;let{method:s,url:a,status_code:c,body:u}=i,l={method:s,url:a,status_code:c},d={xhr:n.xhr,input:u,startTimestamp:r,endTimestamp:o};Ve({category:"xhr",data:l,type:"http"},d)}}function th(e){return function(n){if(R()!==e)return;let{startTimestamp:r,endTimestamp:o}=n;if(o&&!(n.fetchData.url.match(/sentry_key/)&&n.fetchData.method==="POST"))if(n.error){let i=n.fetchData,s={data:n.error,input:n.args,startTimestamp:r,endTimestamp:o};Ve({category:"fetch",data:i,level:"error",type:"http"},s)}else{let i=n.response,s={...n.fetchData,status_code:i&&i.status},a={input:n.args,response:i,startTimestamp:r,endTimestamp:o};Ve({category:"fetch",data:s,type:"http"},a)}}}function nh(e){return function(n){if(R()!==e)return;let r=n.from,o=n.to,i=qe(N.location.href),s=r?qe(r):void 0,a=qe(o);(!s||!s.path)&&(s=i),i.protocol===a.protocol&&i.host===a.host&&(o=a.relative),i.protocol===s.protocol&&i.host===s.host&&(r=s.relative),Ve({category:"navigation",data:{from:r,to:o}})}}function rh(e){return!!e&&!!e.target}var oh=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],ih="BrowserApiErrors",sh=(e={})=>{let t={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,...e};return{name:ih,setupOnce(){t.setTimeout&&ue(N,"setTimeout",al),t.setInterval&&ue(N,"setInterval",al),t.requestAnimationFrame&&ue(N,"requestAnimationFrame",ah),t.XMLHttpRequest&&"XMLHttpRequest"in N&&ue(XMLHttpRequest.prototype,"send",ch);let n=t.eventTarget;n&&(Array.isArray(n)?n:oh).forEach(uh)}}},cl=sh;function al(e){return function(...t){let n=t[0];return t[0]=an(n,{mechanism:{data:{function:Me(e)},handled:!1,type:"instrument"}}),e.apply(this,t)}}function ah(e){return function(t){return e.apply(this,[an(t,{mechanism:{data:{function:"requestAnimationFrame",handler:Me(e)},handled:!1,type:"instrument"}})])}}function ch(e){return function(...t){let n=this;return["onload","onerror","onprogress","onreadystatechange"].forEach(o=>{o in n&&typeof n[o]=="function"&&ue(n,o,function(i){let s={mechanism:{data:{function:o,handler:Me(i)},handled:!1,type:"instrument"}},a=Xt(i);return a&&(s.mechanism.data.handler=Me(a)),an(i,s)})}),e.apply(this,t)}}function uh(e){let t=N,n=t[e]&&t[e].prototype;!n||!n.hasOwnProperty||!n.hasOwnProperty("addEventListener")||(ue(n,"addEventListener",function(r){return function(o,i,s){try{typeof i.handleEvent=="function"&&(i.handleEvent=an(i.handleEvent,{mechanism:{data:{function:"handleEvent",handler:Me(i),target:e},handled:!1,type:"instrument"}}))}catch{}return r.apply(this,[o,an(i,{mechanism:{data:{function:"addEventListener",handler:Me(i),target:e},handled:!1,type:"instrument"}}),s])}}),ue(n,"removeEventListener",function(r){return function(o,i,s){let a=i;try{let c=a&&a.__sentry_wrapped__;c&&r.call(this,o,c,s)}catch{}return r.call(this,o,a,s)}}))}var lh="GlobalHandlers",dh=(e={})=>{let t={onerror:!0,onunhandledrejection:!0,...e};return{name:lh,setupOnce(){Error.stackTraceLimit=50},setup(n){t.onerror&&(ph(n),ul("onerror")),t.onunhandledrejection&&(fh(n),ul("onunhandledrejection"))}}},ll=dh;function ph(e){qn(t=>{let{stackParser:n,attachStacktrace:r}=dl();if(R()!==e||Cs())return;let{msg:o,url:i,line:s,column:a,error:c}=t,u=gh(Io(n,c||o,void 0,r,!1),i,s,a);u.level="error",or(u,{originalException:c,mechanism:{handled:!1,type:"onerror"}})})}function fh(e){Yn(t=>{let{stackParser:n,attachStacktrace:r}=dl();if(R()!==e||Cs())return;let o=mh(t),i=Kt(o)?hh(o):Io(n,o,void 0,r,!0);i.level="error",or(i,{originalException:o,mechanism:{handled:!1,type:"onunhandledrejection"}})})}function mh(e){if(Kt(e))return e;try{if("reason"in e)return e.reason;if("detail"in e&&"reason"in e.detail)return e.detail.reason}catch{}return e}function hh(e){return{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(e)}`}]}}}function gh(e,t,n,r){let o=e.exception=e.exception||{},i=o.values=o.values||[],s=i[0]=i[0]||{},a=s.stacktrace=s.stacktrace||{},c=a.frames=a.frames||[],u=isNaN(parseInt(r,10))?void 0:r,l=isNaN(parseInt(n,10))?void 0:n,d=ve(t)&&t.length>0?t:Hn();return c.length===0&&c.push({colno:u,filename:d,function:pt,in_app:!0,lineno:l}),e}function ul(e){ge&&h.log(`Global Handler attached: ${e}`)}function dl(){let e=R();return e&&e.getOptions()||{stackParser:()=>[],attachStacktrace:!1}}var pl=()=>({name:"HttpContext",preprocessEvent(e){if(!N.navigator&&!N.location&&!N.document)return;let t=e.request&&e.request.url||N.location&&N.location.href,{referrer:n}=N.document||{},{userAgent:r}=N.navigator||{},o={...e.request&&e.request.headers,...n&&{Referer:n},...r&&{"User-Agent":r}},i={...e.request,...t&&{url:t},headers:o};e.request=i}});var Sh="cause",_h=5,yh="LinkedErrors",Eh=(e={})=>{let t=e.limit||_h,n=e.key||Sh;return{name:yh,preprocessEvent(r,o,i){let s=i.getOptions();Mi(To,s.stackParser,s.maxValueLength,n,t,r,o)}}},fl=Eh;function ml(e){return[yo(),So(),cl(),sl(),ll(),fl(),Eo(),pl()]}function Th(e={}){let t={defaultIntegrations:ml(),release:typeof __SENTRY_RELEASE__=="string"?__SENTRY_RELEASE__:N.SENTRY_RELEASE&&N.SENTRY_RELEASE.id?N.SENTRY_RELEASE.id:void 0,autoSessionTracking:!0,sendClientReports:!0};return e.defaultIntegrations==null&&delete e.defaultIntegrations,{...t,...e}}function Ih(){let e=typeof N.window<"u"&&N;if(!e)return!1;let t=e.chrome?"chrome":"browser",n=e[t],r=n&&n.runtime&&n.runtime.id,o=N.location&&N.location.href||"",i=["chrome-extension:","moz-extension:","ms-browser-extension:","safari-web-extension:"],s=!!r&&N===N.top&&i.some(c=>o.startsWith(`${c}//`)),a=typeof e.nw<"u";return!!r&&!s&&!a}function qs(e={}){let t=Th(e);if(Ih()){Ge(()=>{console.error("[Sentry] You cannot run Sentry this way in a browser extension, check: https://docs.sentry.io/platforms/javascript/best-practices/browser-extensions/")});return}ge&&(Kr()||h.warn("No Fetch API detected. The Sentry SDK requires a Fetch API compatible environment to send events. Please add a Fetch API polyfill."));let n={...t,stackParser:Fi(t.stackParser||ol),integrations:Ss(t),transport:t.transport||rl},r=Es(bo,n);return t.autoSessionTracking&&bh(),r}function bh(){if(typeof N.document>"u"){ge&&h.warn("Session tracking in non-browser environment with @sentry/browser is not supported.");return}ir({ignoreDuration:!0}),sr(),Rt(({from:e,to:t})=>{e!==void 0&&e!==t&&(ir({ignoreDuration:!0}),sr())})}var te=w,Ea="sentryReplaySession",vh="replay_event",Ta="Unable to send Replay",Ch=3e5,Rh=9e5,wh=5e3,xh=5500,kh=6e4,Ah=5e3,Nh=3,hl=15e4,Po=5e3,Mh=3e3,Oh=300,Ia=2e7,Dh=4999,Lh=15e3,gl=36e5;function Xs(e,t){return e??t()}function br(e){let t,n=e[0],r=1;for(;r<e.length;){let o=e[r],i=e[r+1];if(r+=2,(o==="optionalAccess"||o==="optionalCall")&&n==null)return;o==="access"||o==="optionalAccess"?(t=n,n=i(n)):(o==="call"||o==="optionalCall")&&(n=i((...s)=>n.call(t,...s)),t=void 0)}return n}var pe;(function(e){e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment"})(pe||(pe={}));function Ph(e){return e.nodeType===e.ELEMENT_NODE}function Er(e){let t=br([e,"optionalAccess",n=>n.host]);return br([t,"optionalAccess",n=>n.shadowRoot])===e}function Tr(e){return Object.prototype.toString.call(e)==="[object ShadowRoot]"}function Uh(e){return e.includes(" background-clip: text;")&&!e.includes(" -webkit-background-clip: text;")&&(e=e.replace(" background-clip: text;"," -webkit-background-clip: text; background-clip: text;")),e}function Fh(e){let{cssText:t}=e;if(t.split('"').length<3)return t;let n=["@import",`url(${JSON.stringify(e.href)})`];return e.layerName===""?n.push("layer"):e.layerName&&n.push(`layer(${e.layerName})`),e.supportsText&&n.push(`supports(${e.supportsText})`),e.media.length&&n.push(e.media.mediaText),n.join(" ")+";"}function $o(e){try{let t=e.rules||e.cssRules;return t?Uh(Array.from(t,Pl).join("")):null}catch{return null}}function Pl(e){let t;if(Hh(e))try{t=$o(e.styleSheet)||Fh(e)}catch{}else if($h(e)&&e.selectorText.includes(":"))return Bh(e.cssText);return t||e.cssText}function Bh(e){let t=/(\[(?:[\w-]+)[^\\])(:(?:[\w-]+)\])/gm;return e.replace(t,"$1\\$2")}function Hh(e){return"styleSheet"in e}function $h(e){return"selectorText"in e}var Wo=class{constructor(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}getId(t){if(!t)return-1;let n=br([this,"access",r=>r.getMeta,"call",r=>r(t),"optionalAccess",r=>r.id]);return Xs(n,()=>-1)}getNode(t){return this.idNodeMap.get(t)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(t){return this.nodeMetaMap.get(t)||null}removeNodeFromMap(t){let n=this.getId(t);this.idNodeMap.delete(n),t.childNodes&&t.childNodes.forEach(r=>this.removeNodeFromMap(r))}has(t){return this.idNodeMap.has(t)}hasNode(t){return this.nodeMetaMap.has(t)}add(t,n){let r=n.id;this.idNodeMap.set(r,t),this.nodeMetaMap.set(t,n)}replace(t,n){let r=this.getNode(t);if(r){let o=this.nodeMetaMap.get(r);o&&this.nodeMetaMap.set(n,o)}this.idNodeMap.set(t,n)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}};function Wh(){return new Wo}function ni({maskInputOptions:e,tagName:t,type:n}){return t==="OPTION"&&(t="SELECT"),!!(e[t.toLowerCase()]||n&&e[n]||n==="password"||t==="INPUT"&&!n&&e.text)}function vr({isMasked:e,element:t,value:n,maskInputFn:r}){let o=n||"";return e?(r&&(o=r(o,t)),"*".repeat(o.length)):o}function Pn(e){return e.toLowerCase()}function Zs(e){return e.toUpperCase()}var Sl="__rrweb_original__";function zh(e){let t=e.getContext("2d");if(!t)return!0;let n=50;for(let r=0;r<e.width;r+=n)for(let o=0;o<e.height;o+=n){let i=t.getImageData,s=Sl in i?i[Sl]:i;if(new Uint32Array(s.call(t,r,o,Math.min(n,e.width-r),Math.min(n,e.height-o)).data.buffer).some(c=>c!==0))return!1}return!0}function ba(e){let t=e.type;return e.hasAttribute("data-rr-is-password")?"password":t?Pn(t):null}function zo(e,t,n){return t==="INPUT"&&(n==="radio"||n==="checkbox")?e.getAttribute("value")||"":e.value}function Ul(e,t){let n;try{n=new URL(e,Xs(t,()=>window.location.href))}catch{return null}let r=/\.([0-9a-z]+)(?:$)/i,o=n.pathname.match(r);return Xs(br([o,"optionalAccess",i=>i[1]]),()=>null)}var _l={};function Fl(e){let t=_l[e];if(t)return t;let n=window.document,r=window[e];if(n&&typeof n.createElement=="function")try{let o=n.createElement("iframe");o.hidden=!0,n.head.appendChild(o);let i=o.contentWindow;i&&i[e]&&(r=i[e]),n.head.removeChild(o)}catch{}return _l[e]=r.bind(window)}function Qs(...e){return Fl("setTimeout")(...e)}function Bl(...e){return Fl("clearTimeout")(...e)}var jh=1,Gh=new RegExp("[^a-z0-9-_:]"),Cr=-2;function va(){return jh++}function qh(e){if(e instanceof HTMLFormElement)return"form";let t=Pn(e.tagName);return Gh.test(t)?"div":t}function Yh(e){let t="";return e.indexOf("//")>-1?t=e.split("/").slice(0,3).join("/"):t=e.split("/")[0],t=t.split("?")[0],t}var An,yl,Vh=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,Kh=/^(?:[a-z+]+:)?\/\//i,Jh=/^www\..*/i,Xh=/^(data:)([^,]*),(.*)/i;function jo(e,t){return(e||"").replace(Vh,(n,r,o,i,s,a)=>{let c=o||s||a,u=r||i||"";if(!c)return n;if(Kh.test(c)||Jh.test(c))return`url(${u}${c}${u})`;if(Xh.test(c))return`url(${u}${c}${u})`;if(c[0]==="/")return`url(${u}${Yh(t)+c}${u})`;let l=t.split("/"),d=c.split("/");l.pop();for(let p of d)p!=="."&&(p===".."?l.pop():l.push(p));return`url(${u}${l.join("/")}${u})`})}var Zh=/^[^ \t\n\r\u000c]+/,Qh=/^[, \t\n\r\u000c]+/;function eg(e,t){if(t.trim()==="")return t;let n=0;function r(i){let s,a=i.exec(t.substring(n));return a?(s=a[0],n+=s.length,s):""}let o=[];for(;r(Qh),!(n>=t.length);){let i=r(Zh);if(i.slice(-1)===",")i=Mn(e,i.substring(0,i.length-1)),o.push(i);else{let s="";i=Mn(e,i);let a=!1;for(;;){let c=t.charAt(n);if(c===""){o.push((i+s).trim());break}else if(a)c===")"&&(a=!1);else if(c===","){n+=1,o.push((i+s).trim());break}else c==="("&&(a=!0);s+=c,n+=1}}}return o.join(", ")}function Mn(e,t){if(!t||t.trim()==="")return t;let n=e.createElement("a");return n.href=t,n.href}function tg(e){return!!(e.tagName==="svg"||e.ownerSVGElement)}function Ca(){let e=document.createElement("a");return e.href="",e.href}function Hl(e,t,n,r,o,i){return r&&(n==="src"||n==="href"&&!(t==="use"&&r[0]==="#")||n==="xlink:href"&&r[0]!=="#"||n==="background"&&(t==="table"||t==="td"||t==="th")?Mn(e,r):n==="srcset"?eg(e,r):n==="style"?jo(r,Ca()):t==="object"&&n==="data"?Mn(e,r):typeof i=="function"?i(n,r,o):r)}function $l(e,t,n){return(e==="video"||e==="audio")&&t==="autoplay"}function ng(e,t,n,r){try{if(r&&e.matches(r))return!1;if(typeof t=="string"){if(e.classList.contains(t))return!0}else for(let o=e.classList.length;o--;){let i=e.classList[o];if(t.test(i))return!0}if(n)return e.matches(n)}catch{}return!1}function rg(e,t){for(let n=e.classList.length;n--;){let r=e.classList[n];if(t.test(r))return!0}return!1}function ln(e,t,n=1/0,r=0){return!e||e.nodeType!==e.ELEMENT_NODE||r>n?-1:t(e)?r:ln(e.parentNode,t,n,r+1)}function On(e,t){return n=>{let r=n;if(r===null)return!1;try{if(e){if(typeof e=="string"){if(r.matches(`.${e}`))return!0}else if(rg(r,e))return!0}return!!(t&&r.matches(t))}catch{return!1}}}function Un(e,t,n,r,o,i){try{let s=e.nodeType===e.ELEMENT_NODE?e:e.parentElement;if(s===null)return!1;if(s.tagName==="INPUT"){let u=s.getAttribute("autocomplete");if(["current-password","new-password","cc-number","cc-exp","cc-exp-month","cc-exp-year","cc-csc"].includes(u))return!0}let a=-1,c=-1;if(i){if(c=ln(s,On(r,o)),c<0)return!0;a=ln(s,On(t,n),c>=0?c:1/0)}else{if(a=ln(s,On(t,n)),a<0)return!1;c=ln(s,On(r,o),a>=0?a:1/0)}return a>=0?c>=0?a<=c:!0:c>=0?!1:!!i}catch{}return!!i}function og(e,t,n){let r=e.contentWindow;if(!r)return;let o=!1,i;try{i=r.document.readyState}catch{return}if(i!=="complete"){let a=Qs(()=>{o||(t(),o=!0)},n);e.addEventListener("load",()=>{Bl(a),o=!0,t()});return}let s="about:blank";if(r.location.href!==s||e.src===s||e.src==="")return Qs(t,0),e.addEventListener("load",t);e.addEventListener("load",t)}function ig(e,t,n){let r=!1,o;try{o=e.sheet}catch{return}if(o)return;let i=Qs(()=>{r||(t(),r=!0)},n);e.addEventListener("load",()=>{Bl(i),r=!0,t()})}function sg(e,t){let{doc:n,mirror:r,blockClass:o,blockSelector:i,unblockSelector:s,maskAllText:a,maskAttributeFn:c,maskTextClass:u,unmaskTextClass:l,maskTextSelector:d,unmaskTextSelector:p,inlineStylesheet:f,maskInputOptions:m={},maskTextFn:g,maskInputFn:T,dataURLOptions:y={},inlineImages:k,recordCanvas:F,keepIframeSrcFn:C,newlyAddedElement:A=!1}=t,_=ag(n,r);switch(e.nodeType){case e.DOCUMENT_NODE:return e.compatMode!=="CSS1Compat"?{type:pe.Document,childNodes:[],compatMode:e.compatMode}:{type:pe.Document,childNodes:[]};case e.DOCUMENT_TYPE_NODE:return{type:pe.DocumentType,name:e.name,publicId:e.publicId,systemId:e.systemId,rootId:_};case e.ELEMENT_NODE:return ug(e,{doc:n,blockClass:o,blockSelector:i,unblockSelector:s,inlineStylesheet:f,maskAttributeFn:c,maskInputOptions:m,maskInputFn:T,dataURLOptions:y,inlineImages:k,recordCanvas:F,keepIframeSrcFn:C,newlyAddedElement:A,rootId:_,maskAllText:a,maskTextClass:u,unmaskTextClass:l,maskTextSelector:d,unmaskTextSelector:p});case e.TEXT_NODE:return cg(e,{maskAllText:a,maskTextClass:u,unmaskTextClass:l,maskTextSelector:d,unmaskTextSelector:p,maskTextFn:g,maskInputOptions:m,maskInputFn:T,rootId:_});case e.CDATA_SECTION_NODE:return{type:pe.CDATA,textContent:"",rootId:_};case e.COMMENT_NODE:return{type:pe.Comment,textContent:e.textContent||"",rootId:_};default:return!1}}function ag(e,t){if(!t.hasNode(e))return;let n=t.getId(e);return n===1?void 0:n}function cg(e,t){let{maskAllText:n,maskTextClass:r,unmaskTextClass:o,maskTextSelector:i,unmaskTextSelector:s,maskTextFn:a,maskInputOptions:c,maskInputFn:u,rootId:l}=t,d=e.parentNode&&e.parentNode.tagName,p=e.textContent,f=d==="STYLE"?!0:void 0,m=d==="SCRIPT"?!0:void 0,g=d==="TEXTAREA"?!0:void 0;if(f&&p){try{e.nextSibling||e.previousSibling||br([e,"access",y=>y.parentNode,"access",y=>y.sheet,"optionalAccess",y=>y.cssRules])&&(p=$o(e.parentNode.sheet))}catch(y){console.warn(`Cannot get CSS styles from text's parentNode. Error: ${y}`,e)}p=jo(p,Ca())}m&&(p="SCRIPT_PLACEHOLDER");let T=Un(e,r,i,o,s,n);if(!f&&!m&&!g&&p&&T&&(p=a?a(p,e.parentElement):p.replace(/[\S]/g,"*")),g&&p&&(c.textarea||T)&&(p=u?u(p,e.parentNode):p.replace(/[\S]/g,"*")),d==="OPTION"&&p){let y=ni({type:null,tagName:d,maskInputOptions:c});p=vr({isMasked:Un(e,r,i,o,s,y),element:e,value:p,maskInputFn:u})}return{type:pe.Text,textContent:p||"",isStyle:f,rootId:l}}function ug(e,t){let{doc:n,blockClass:r,blockSelector:o,unblockSelector:i,inlineStylesheet:s,maskInputOptions:a={},maskAttributeFn:c,maskInputFn:u,dataURLOptions:l={},inlineImages:d,recordCanvas:p,keepIframeSrcFn:f,newlyAddedElement:m=!1,rootId:g,maskAllText:T,maskTextClass:y,unmaskTextClass:k,maskTextSelector:F,unmaskTextSelector:C}=t,A=ng(e,r,o,i),_=qh(e),S={},v=e.attributes.length;for(let E=0;E<v;E++){let b=e.attributes[E];b.name&&!$l(_,b.name,b.value)&&(S[b.name]=Hl(n,_,Pn(b.name),b.value,e,c))}if(_==="link"&&s){let E=Array.from(n.styleSheets).find(L=>L.href===e.href),b=null;E&&(b=$o(E)),b&&(delete S.rel,delete S.href,S._cssText=jo(b,E.href))}if(_==="style"&&e.sheet&&!(e.innerText||e.textContent||"").trim().length){let E=$o(e.sheet);E&&(S._cssText=jo(E,Ca()))}if(_==="input"||_==="textarea"||_==="select"||_==="option"){let E=e,b=ba(E),L=zo(E,Zs(_),b),K=E.checked;if(b!=="submit"&&b!=="button"&&L){let Z=Un(E,y,F,k,C,ni({type:b,tagName:Zs(_),maskInputOptions:a}));S.value=vr({isMasked:Z,element:E,value:L,maskInputFn:u})}K&&(S.checked=K)}if(_==="option"&&(e.selected&&!a.select?S.selected=!0:delete S.selected),_==="canvas"&&p){if(e.__context==="2d")zh(e)||(S.rr_dataURL=e.toDataURL(l.type,l.quality));else if(!("__context"in e)){let E=e.toDataURL(l.type,l.quality),b=document.createElement("canvas");b.width=e.width,b.height=e.height;let L=b.toDataURL(l.type,l.quality);E!==L&&(S.rr_dataURL=E)}}if(_==="img"&&d){An||(An=n.createElement("canvas"),yl=An.getContext("2d"));let E=e,b=E.crossOrigin;E.crossOrigin="anonymous";let L=()=>{E.removeEventListener("load",L);try{An.width=E.naturalWidth,An.height=E.naturalHeight,yl.drawImage(E,0,0),S.rr_dataURL=An.toDataURL(l.type,l.quality)}catch(K){console.warn(`Cannot inline img src=${E.currentSrc}! Error: ${K}`)}b?S.crossOrigin=b:E.removeAttribute("crossorigin")};E.complete&&E.naturalWidth!==0?L():E.addEventListener("load",L)}if((_==="audio"||_==="video")&&(S.rr_mediaState=e.paused?"paused":"played",S.rr_mediaCurrentTime=e.currentTime),m||(e.scrollLeft&&(S.rr_scrollLeft=e.scrollLeft),e.scrollTop&&(S.rr_scrollTop=e.scrollTop)),A){let{width:E,height:b}=e.getBoundingClientRect();S={class:S.class,rr_width:`${E}px`,rr_height:`${b}px`}}_==="iframe"&&!f(S.src)&&(!A&&!e.contentDocument&&(S.rr_src=S.src),delete S.src);let $;try{customElements.get(_)&&($=!0)}catch{}return{type:pe.Element,tagName:_,attributes:S,childNodes:[],isSVG:tg(e)||void 0,needBlock:A,rootId:g,isCustom:$}}function ee(e){return e==null?"":e.toLowerCase()}function lg(e,t){if(t.comment&&e.type===pe.Comment)return!0;if(e.type===pe.Element){if(t.script&&(e.tagName==="script"||e.tagName==="link"&&(e.attributes.rel==="preload"||e.attributes.rel==="modulepreload")&&e.attributes.as==="script"||e.tagName==="link"&&e.attributes.rel==="prefetch"&&typeof e.attributes.href=="string"&&Ul(e.attributes.href)==="js"))return!0;if(t.headFavicon&&(e.tagName==="link"&&e.attributes.rel==="shortcut icon"||e.tagName==="meta"&&(ee(e.attributes.name).match(/^msapplication-tile(image|color)$/)||ee(e.attributes.name)==="application-name"||ee(e.attributes.rel)==="icon"||ee(e.attributes.rel)==="apple-touch-icon"||ee(e.attributes.rel)==="shortcut icon")))return!0;if(e.tagName==="meta"){if(t.headMetaDescKeywords&&ee(e.attributes.name).match(/^description|keywords$/))return!0;if(t.headMetaSocial&&(ee(e.attributes.property).match(/^(og|twitter|fb):/)||ee(e.attributes.name).match(/^(og|twitter):/)||ee(e.attributes.name)==="pinterest"))return!0;if(t.headMetaRobots&&(ee(e.attributes.name)==="robots"||ee(e.attributes.name)==="googlebot"||ee(e.attributes.name)==="bingbot"))return!0;if(t.headMetaHttpEquiv&&e.attributes["http-equiv"]!==void 0)return!0;if(t.headMetaAuthorship&&(ee(e.attributes.name)==="author"||ee(e.attributes.name)==="generator"||ee(e.attributes.name)==="framework"||ee(e.attributes.name)==="publisher"||ee(e.attributes.name)==="progid"||ee(e.attributes.property).match(/^article:/)||ee(e.attributes.property).match(/^product:/)))return!0;if(t.headMetaVerification&&(ee(e.attributes.name)==="google-site-verification"||ee(e.attributes.name)==="yandex-verification"||ee(e.attributes.name)==="csrf-token"||ee(e.attributes.name)==="p:domain_verify"||ee(e.attributes.name)==="verify-v1"||ee(e.attributes.name)==="verification"||ee(e.attributes.name)==="shopify-checkout-api-token"))return!0}}return!1}function Dn(e,t){let{doc:n,mirror:r,blockClass:o,blockSelector:i,unblockSelector:s,maskAllText:a,maskTextClass:c,unmaskTextClass:u,maskTextSelector:l,unmaskTextSelector:d,skipChild:p=!1,inlineStylesheet:f=!0,maskInputOptions:m={},maskAttributeFn:g,maskTextFn:T,maskInputFn:y,slimDOMOptions:k,dataURLOptions:F={},inlineImages:C=!1,recordCanvas:A=!1,onSerialize:_,onIframeLoad:S,iframeLoadTimeout:v=5e3,onStylesheetLoad:$,stylesheetLoadTimeout:E=5e3,keepIframeSrcFn:b=()=>!1,newlyAddedElement:L=!1}=t,{preserveWhiteSpace:K=!0}=t,Z=sg(e,{doc:n,mirror:r,blockClass:o,blockSelector:i,maskAllText:a,unblockSelector:s,maskTextClass:c,unmaskTextClass:u,maskTextSelector:l,unmaskTextSelector:d,inlineStylesheet:f,maskInputOptions:m,maskAttributeFn:g,maskTextFn:T,maskInputFn:y,dataURLOptions:F,inlineImages:C,recordCanvas:A,keepIframeSrcFn:b,newlyAddedElement:L});if(!Z)return console.warn(e,"not serialized"),null;let ce;r.hasNode(e)?ce=r.getId(e):lg(Z,k)||!K&&Z.type===pe.Text&&!Z.isStyle&&!Z.textContent.replace(/^\s+|\s+$/gm,"").length?ce=Cr:ce=va();let U=Object.assign(Z,{id:ce});if(r.add(e,U),ce===Cr)return null;_&&_(e);let he=!p;if(U.type===pe.Element){he=he&&!U.needBlock,delete U.needBlock;let J=e.shadowRoot;J&&Tr(J)&&(U.isShadowHost=!0)}if((U.type===pe.Document||U.type===pe.Element)&&he){k.headWhitespace&&U.type===pe.Element&&U.tagName==="head"&&(K=!1);let J={doc:n,mirror:r,blockClass:o,blockSelector:i,maskAllText:a,unblockSelector:s,maskTextClass:c,unmaskTextClass:u,maskTextSelector:l,unmaskTextSelector:d,skipChild:p,inlineStylesheet:f,maskInputOptions:m,maskAttributeFn:g,maskTextFn:T,maskInputFn:y,slimDOMOptions:k,dataURLOptions:F,inlineImages:C,recordCanvas:A,preserveWhiteSpace:K,onSerialize:_,onIframeLoad:S,iframeLoadTimeout:v,onStylesheetLoad:$,stylesheetLoadTimeout:E,keepIframeSrcFn:b};for(let Ne of Array.from(e.childNodes)){let yt=Dn(Ne,J);yt&&U.childNodes.push(yt)}if(Ph(e)&&e.shadowRoot)for(let Ne of Array.from(e.shadowRoot.childNodes)){let yt=Dn(Ne,J);yt&&(Tr(e.shadowRoot)&&(yt.isShadow=!0),U.childNodes.push(yt))}}return e.parentNode&&Er(e.parentNode)&&Tr(e.parentNode)&&(U.isShadow=!0),U.type===pe.Element&&U.tagName==="iframe"&&og(e,()=>{let J=e.contentDocument;if(J&&S){let Ne=Dn(J,{doc:J,mirror:r,blockClass:o,blockSelector:i,unblockSelector:s,maskAllText:a,maskTextClass:c,unmaskTextClass:u,maskTextSelector:l,unmaskTextSelector:d,skipChild:!1,inlineStylesheet:f,maskInputOptions:m,maskAttributeFn:g,maskTextFn:T,maskInputFn:y,slimDOMOptions:k,dataURLOptions:F,inlineImages:C,recordCanvas:A,preserveWhiteSpace:K,onSerialize:_,onIframeLoad:S,iframeLoadTimeout:v,onStylesheetLoad:$,stylesheetLoadTimeout:E,keepIframeSrcFn:b});Ne&&S(e,Ne)}},v),U.type===pe.Element&&U.tagName==="link"&&typeof U.attributes.rel=="string"&&(U.attributes.rel==="stylesheet"||U.attributes.rel==="preload"&&typeof U.attributes.href=="string"&&Ul(U.attributes.href)==="css")&&ig(e,()=>{if($){let J=Dn(e,{doc:n,mirror:r,blockClass:o,blockSelector:i,unblockSelector:s,maskAllText:a,maskTextClass:c,unmaskTextClass:u,maskTextSelector:l,unmaskTextSelector:d,skipChild:!1,inlineStylesheet:f,maskInputOptions:m,maskAttributeFn:g,maskTextFn:T,maskInputFn:y,slimDOMOptions:k,dataURLOptions:F,inlineImages:C,recordCanvas:A,preserveWhiteSpace:K,onSerialize:_,onIframeLoad:S,iframeLoadTimeout:v,onStylesheetLoad:$,stylesheetLoadTimeout:E,keepIframeSrcFn:b});J&&$(e,J)}},E),U}function dg(e,t){let{mirror:n=new Wo,blockClass:r="rr-block",blockSelector:o=null,unblockSelector:i=null,maskAllText:s=!1,maskTextClass:a="rr-mask",unmaskTextClass:c=null,maskTextSelector:u=null,unmaskTextSelector:l=null,inlineStylesheet:d=!0,inlineImages:p=!1,recordCanvas:f=!1,maskAllInputs:m=!1,maskAttributeFn:g,maskTextFn:T,maskInputFn:y,slimDOM:k=!1,dataURLOptions:F,preserveWhiteSpace:C,onSerialize:A,onIframeLoad:_,iframeLoadTimeout:S,onStylesheetLoad:v,stylesheetLoadTimeout:$,keepIframeSrcFn:E=()=>!1}=t||{};return Dn(e,{doc:e,mirror:n,blockClass:r,blockSelector:o,unblockSelector:i,maskAllText:s,maskTextClass:a,unmaskTextClass:c,maskTextSelector:u,unmaskTextSelector:l,skipChild:!1,inlineStylesheet:d,maskInputOptions:m===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0}:m===!1?{}:m,maskAttributeFn:g,maskTextFn:T,maskInputFn:y,slimDOMOptions:k===!0||k==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:k==="all",headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:k===!1?{}:k,dataURLOptions:F,inlineImages:p,recordCanvas:f,preserveWhiteSpace:C,onSerialize:A,onIframeLoad:_,iframeLoadTimeout:S,onStylesheetLoad:v,stylesheetLoadTimeout:$,keepIframeSrcFn:E,newlyAddedElement:!1})}function $t(e){let t,n=e[0],r=1;for(;r<e.length;){let o=e[r],i=e[r+1];if(r+=2,(o==="optionalAccess"||o==="optionalCall")&&n==null)return;o==="access"||o==="optionalAccess"?(t=n,n=i(n)):(o==="call"||o==="optionalCall")&&(n=i((...s)=>n.call(t,...s)),t=void 0)}return n}function Ae(e,t,n=document){let r={capture:!0,passive:!0};return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t,r)}var Nn=`Please stop import mirror directly. Instead of that,\r
now you can use replayer.getMirror() to access the mirror instance of a replayer,\r
or you can use record.mirror to access the mirror instance during recording.`,El={map:{},getId(){return console.error(Nn),-1},getNode(){return console.error(Nn),null},removeNodeFromMap(){console.error(Nn)},has(){return console.error(Nn),!1},reset(){console.error(Nn)}};typeof window<"u"&&window.Proxy&&window.Reflect&&(El=new Proxy(El,{get(e,t,n){return t==="map"&&console.error(Nn),Reflect.get(e,t,n)}}));function Rr(e,t,n={}){let r=null,o=0;return function(...i){let s=Date.now();!o&&n.leading===!1&&(o=s);let a=t-(s-o),c=this;a<=0||a>t?(r&&(Sg(r),r=null),o=s,e.apply(c,i)):!r&&n.trailing!==!1&&(r=ri(()=>{o=n.leading===!1?0:Date.now(),r=null,e.apply(c,i)},a))}}function Wl(e,t,n,r,o=window){let i=o.Object.getOwnPropertyDescriptor(e,t);return o.Object.defineProperty(e,t,r?n:{set(s){ri(()=>{n.set.call(this,s)},0),i&&i.set&&i.set.call(this,s)}}),()=>Wl(e,t,i||{},!0)}function Ra(e,t,n){try{if(!(t in e))return()=>{};let r=e[t],o=n(r);return typeof o=="function"&&(o.prototype=o.prototype||{},Object.defineProperties(o,{__rrweb_original__:{enumerable:!1,value:r}})),e[t]=o,()=>{e[t]=r}}catch{return()=>{}}}var Go=Date.now;/[1-9][0-9]{12}/.test(Date.now().toString())||(Go=()=>new Date().getTime());function zl(e){let t=e.document;return{left:t.scrollingElement?t.scrollingElement.scrollLeft:e.pageXOffset!==void 0?e.pageXOffset:$t([t,"optionalAccess",n=>n.documentElement,"access",n=>n.scrollLeft])||$t([t,"optionalAccess",n=>n.body,"optionalAccess",n=>n.parentElement,"optionalAccess",n=>n.scrollLeft])||$t([t,"optionalAccess",n=>n.body,"optionalAccess",n=>n.scrollLeft])||0,top:t.scrollingElement?t.scrollingElement.scrollTop:e.pageYOffset!==void 0?e.pageYOffset:$t([t,"optionalAccess",n=>n.documentElement,"access",n=>n.scrollTop])||$t([t,"optionalAccess",n=>n.body,"optionalAccess",n=>n.parentElement,"optionalAccess",n=>n.scrollTop])||$t([t,"optionalAccess",n=>n.body,"optionalAccess",n=>n.scrollTop])||0}}function jl(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function Gl(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function ql(e){return e?e.nodeType===e.ELEMENT_NODE?e:e.parentElement:null}function He(e,t,n,r,o){if(!e)return!1;let i=ql(e);if(!i)return!1;let s=On(t,n);if(!o){let u=r&&i.matches(r);return s(i)&&!u}let a=ln(i,s),c=-1;return a<0?!1:(r&&(c=ln(i,On(null,r))),a>-1&&c<0?!0:a<c)}function pg(e,t){return t.getId(e)!==-1}function Ys(e,t){return t.getId(e)===Cr}function Yl(e,t){if(Er(e))return!1;let n=t.getId(e);return t.has(n)?e.parentNode&&e.parentNode.nodeType===e.DOCUMENT_NODE?!1:e.parentNode?Yl(e.parentNode,t):!0:!0}function ea(e){return!!e.changedTouches}function fg(e=window){"NodeList"in e&&!e.NodeList.prototype.forEach&&(e.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in e&&!e.DOMTokenList.prototype.forEach&&(e.DOMTokenList.prototype.forEach=Array.prototype.forEach),Node.prototype.contains||(Node.prototype.contains=(...t)=>{let n=t[0];if(!(0 in t))throw new TypeError("1 argument is required");do if(this===n)return!0;while(n=n&&n.parentNode);return!1})}function Vl(e,t){return!!(e.nodeName==="IFRAME"&&t.getMeta(e))}function Kl(e,t){return!!(e.nodeName==="LINK"&&e.nodeType===e.ELEMENT_NODE&&e.getAttribute&&e.getAttribute("rel")==="stylesheet"&&t.getMeta(e))}function ta(e){return!!$t([e,"optionalAccess",t=>t.shadowRoot])}var na=class{constructor(){this.id=1,this.styleIDMap=new WeakMap,this.idStyleMap=new Map}getId(t){return rs(this.styleIDMap.get(t),()=>-1)}has(t){return this.styleIDMap.has(t)}add(t,n){if(this.has(t))return this.getId(t);let r;return n===void 0?r=this.id++:r=n,this.styleIDMap.set(t,r),this.idStyleMap.set(r,t),r}getStyle(t){return this.idStyleMap.get(t)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}};function Jl(e){let t=null;return $t([e,"access",n=>n.getRootNode,"optionalCall",n=>n(),"optionalAccess",n=>n.nodeType])===Node.DOCUMENT_FRAGMENT_NODE&&e.getRootNode().host&&(t=e.getRootNode().host),t}function mg(e){let t=e,n;for(;n=Jl(t);)t=n;return t}function hg(e){let t=e.ownerDocument;if(!t)return!1;let n=mg(e);return t.contains(n)}function Xl(e){let t=e.ownerDocument;return t?t.contains(e)||hg(e):!1}var Tl={};function wa(e){let t=Tl[e];if(t)return t;let n=window.document,r=window[e];if(n&&typeof n.createElement=="function")try{let o=n.createElement("iframe");o.hidden=!0,n.head.appendChild(o);let i=o.contentWindow;i&&i[e]&&(r=i[e]),n.head.removeChild(o)}catch{}return Tl[e]=r.bind(window)}function gg(...e){return wa("requestAnimationFrame")(...e)}function ri(...e){return wa("setTimeout")(...e)}function Sg(...e){return wa("clearTimeout")(...e)}var H=(e=>(e[e.DomContentLoaded=0]="DomContentLoaded",e[e.Load=1]="Load",e[e.FullSnapshot=2]="FullSnapshot",e[e.IncrementalSnapshot=3]="IncrementalSnapshot",e[e.Meta=4]="Meta",e[e.Custom=5]="Custom",e[e.Plugin=6]="Plugin",e))(H||{}),P=(e=>(e[e.Mutation=0]="Mutation",e[e.MouseMove=1]="MouseMove",e[e.MouseInteraction=2]="MouseInteraction",e[e.Scroll=3]="Scroll",e[e.ViewportResize=4]="ViewportResize",e[e.Input=5]="Input",e[e.TouchMove=6]="TouchMove",e[e.MediaInteraction=7]="MediaInteraction",e[e.StyleSheetRule=8]="StyleSheetRule",e[e.CanvasMutation=9]="CanvasMutation",e[e.Font=10]="Font",e[e.Log=11]="Log",e[e.Drag=12]="Drag",e[e.StyleDeclaration=13]="StyleDeclaration",e[e.Selection=14]="Selection",e[e.AdoptedStyleSheet=15]="AdoptedStyleSheet",e[e.CustomElement=16]="CustomElement",e))(P||{}),ke=(e=>(e[e.MouseUp=0]="MouseUp",e[e.MouseDown=1]="MouseDown",e[e.Click=2]="Click",e[e.ContextMenu=3]="ContextMenu",e[e.DblClick=4]="DblClick",e[e.Focus=5]="Focus",e[e.Blur=6]="Blur",e[e.TouchStart=7]="TouchStart",e[e.TouchMove_Departed=8]="TouchMove_Departed",e[e.TouchEnd=9]="TouchEnd",e[e.TouchCancel=10]="TouchCancel",e))(ke||{}),wt=(e=>(e[e.Mouse=0]="Mouse",e[e.Pen=1]="Pen",e[e.Touch=2]="Touch",e))(wt||{});function _g(e){let t,n=e[0],r=1;for(;r<e.length;){let o=e[r],i=e[r+1];if(r+=2,(o==="optionalAccess"||o==="optionalCall")&&n==null)return;o==="access"||o==="optionalAccess"?(t=n,n=i(n)):(o==="call"||o==="optionalCall")&&(n=i((...s)=>n.call(t,...s)),t=void 0)}return n}function Il(e){return"__ln"in e}var ra=class{constructor(){this.length=0,this.head=null,this.tail=null}get(t){if(t>=this.length)throw new Error("Position outside of list range");let n=this.head;for(let r=0;r<t;r++)n=_g([n,"optionalAccess",o=>o.next])||null;return n}addNode(t){let n={value:t,previous:null,next:null};if(t.__ln=n,t.previousSibling&&Il(t.previousSibling)){let r=t.previousSibling.__ln.next;n.next=r,n.previous=t.previousSibling.__ln,t.previousSibling.__ln.next=n,r&&(r.previous=n)}else if(t.nextSibling&&Il(t.nextSibling)&&t.nextSibling.__ln.previous){let r=t.nextSibling.__ln.previous;n.previous=r,n.next=t.nextSibling.__ln,t.nextSibling.__ln.previous=n,r&&(r.next=n)}else this.head&&(this.head.previous=n),n.next=this.head,this.head=n;n.next===null&&(this.tail=n),this.length++}removeNode(t){let n=t.__ln;this.head&&(n.previous?(n.previous.next=n.next,n.next?n.next.previous=n.previous:this.tail=n.previous):(this.head=n.next,this.head?this.head.previous=null:this.tail=null),t.__ln&&delete t.__ln,this.length--)}},bl=(e,t)=>`${e}@${t}`,oa=class{constructor(){this.frozen=!1,this.locked=!1,this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.mapRemoves=[],this.movedMap={},this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.processMutations=t=>{t.forEach(this.processMutation),this.emit()},this.emit=()=>{if(this.frozen||this.locked)return;let t=[],n=new Set,r=new ra,o=c=>{let u=c,l=Cr;for(;l===Cr;)u=u&&u.nextSibling,l=u&&this.mirror.getId(u);return l},i=c=>{if(!c.parentNode||!Xl(c))return;let u=Er(c.parentNode)?this.mirror.getId(Jl(c)):this.mirror.getId(c.parentNode),l=o(c);if(u===-1||l===-1)return r.addNode(c);let d=Dn(c,{doc:this.doc,mirror:this.mirror,blockClass:this.blockClass,blockSelector:this.blockSelector,maskAllText:this.maskAllText,unblockSelector:this.unblockSelector,maskTextClass:this.maskTextClass,unmaskTextClass:this.unmaskTextClass,maskTextSelector:this.maskTextSelector,unmaskTextSelector:this.unmaskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:this.inlineStylesheet,maskInputOptions:this.maskInputOptions,maskAttributeFn:this.maskAttributeFn,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,dataURLOptions:this.dataURLOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,onSerialize:p=>{Vl(p,this.mirror)&&!He(p,this.blockClass,this.blockSelector,this.unblockSelector,!1)&&this.iframeManager.addIframe(p),Kl(p,this.mirror)&&this.stylesheetManager.trackLinkElement(p),ta(c)&&this.shadowDomManager.addShadowRoot(c.shadowRoot,this.doc)},onIframeLoad:(p,f)=>{He(p,this.blockClass,this.blockSelector,this.unblockSelector,!1)||(this.iframeManager.attachIframe(p,f),p.contentWindow&&this.canvasManager.addWindow(p.contentWindow),this.shadowDomManager.observeAttachShadow(p))},onStylesheetLoad:(p,f)=>{this.stylesheetManager.attachLinkElement(p,f)}});d&&(t.push({parentId:u,nextId:l,node:d}),n.add(d.id))};for(;this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(let c of this.movedSet)vl(this.removes,c,this.mirror)&&!this.movedSet.has(c.parentNode)||i(c);for(let c of this.addedSet)!Cl(this.droppedSet,c)&&!vl(this.removes,c,this.mirror)||Cl(this.movedSet,c)?i(c):this.droppedSet.add(c);let s=null;for(;r.length;){let c=null;if(s){let u=this.mirror.getId(s.value.parentNode),l=o(s.value);u!==-1&&l!==-1&&(c=s)}if(!c){let u=r.tail;for(;u;){let l=u;if(u=u.previous,l){let d=this.mirror.getId(l.value.parentNode);if(o(l.value)===-1)continue;if(d!==-1){c=l;break}else{let f=l.value;if(f.parentNode&&f.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE){let m=f.parentNode.host;if(this.mirror.getId(m)!==-1){c=l;break}}}}}}if(!c){for(;r.head;)r.removeNode(r.head.value);break}s=c.previous,r.removeNode(c.value),i(c.value)}let a={texts:this.texts.map(c=>({id:this.mirror.getId(c.node),value:c.value})).filter(c=>!n.has(c.id)).filter(c=>this.mirror.has(c.id)),attributes:this.attributes.map(c=>{let{attributes:u}=c;if(typeof u.style=="string"){let l=JSON.stringify(c.styleDiff),d=JSON.stringify(c._unchangedStyles);l.length<u.style.length&&(l+d).split("var(").length===u.style.split("var(").length&&(u.style=c.styleDiff)}return{id:this.mirror.getId(c.node),attributes:u}}).filter(c=>!n.has(c.id)).filter(c=>this.mirror.has(c.id)),removes:this.removes,adds:t};!a.texts.length&&!a.attributes.length&&!a.removes.length&&!a.adds.length||(this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.movedMap={},this.mutationCb(a))},this.processMutation=t=>{if(!Ys(t.target,this.mirror))switch(t.type){case"characterData":{let n=t.target.textContent;!He(t.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)&&n!==t.oldValue&&this.texts.push({value:Un(t.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,this.maskAllText)&&n?this.maskTextFn?this.maskTextFn(n,ql(t.target)):n.replace(/[\S]/g,"*"):n,node:t.target});break}case"attributes":{let n=t.target,r=t.attributeName,o=t.target.getAttribute(r);if(r==="value"){let s=ba(n),a=n.tagName;o=zo(n,a,s);let c=ni({maskInputOptions:this.maskInputOptions,tagName:a,type:s}),u=Un(t.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,c);o=vr({isMasked:u,element:n,value:o,maskInputFn:this.maskInputFn})}if(He(t.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||o===t.oldValue)return;let i=this.attributeMap.get(t.target);if(n.tagName==="IFRAME"&&r==="src"&&!this.keepIframeSrcFn(o))if(!n.contentDocument)r="rr_src";else return;if(i||(i={node:t.target,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(i),this.attributeMap.set(t.target,i)),r==="type"&&n.tagName==="INPUT"&&(t.oldValue||"").toLowerCase()==="password"&&n.setAttribute("data-rr-is-password","true"),!$l(n.tagName,r)&&(i.attributes[r]=Hl(this.doc,Pn(n.tagName),Pn(r),o,n,this.maskAttributeFn),r==="style")){if(!this.unattachedDoc)try{this.unattachedDoc=document.implementation.createHTMLDocument()}catch{this.unattachedDoc=this.doc}let s=this.unattachedDoc.createElement("span");t.oldValue&&s.setAttribute("style",t.oldValue);for(let a of Array.from(n.style)){let c=n.style.getPropertyValue(a),u=n.style.getPropertyPriority(a);c!==s.style.getPropertyValue(a)||u!==s.style.getPropertyPriority(a)?u===""?i.styleDiff[a]=c:i.styleDiff[a]=[c,u]:i._unchangedStyles[a]=[c,u]}for(let a of Array.from(s.style))n.style.getPropertyValue(a)===""&&(i.styleDiff[a]=!1)}break}case"childList":{if(He(t.target,this.blockClass,this.blockSelector,this.unblockSelector,!0))return;t.addedNodes.forEach(n=>this.genAdds(n,t.target)),t.removedNodes.forEach(n=>{let r=this.mirror.getId(n),o=Er(t.target)?this.mirror.getId(t.target.host):this.mirror.getId(t.target);He(t.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||Ys(n,this.mirror)||!pg(n,this.mirror)||(this.addedSet.has(n)?(ia(this.addedSet,n),this.droppedSet.add(n)):this.addedSet.has(t.target)&&r===-1||Yl(t.target,this.mirror)||(this.movedSet.has(n)&&this.movedMap[bl(r,o)]?ia(this.movedSet,n):this.removes.push({parentId:o,id:r,isShadow:Er(t.target)&&Tr(t.target)?!0:void 0})),this.mapRemoves.push(n))});break}}},this.genAdds=(t,n)=>{if(!this.processedNodeManager.inOtherBuffer(t,this)&&!(this.addedSet.has(t)||this.movedSet.has(t))){if(this.mirror.hasNode(t)){if(Ys(t,this.mirror))return;this.movedSet.add(t);let r=null;n&&this.mirror.hasNode(n)&&(r=this.mirror.getId(n)),r&&r!==-1&&(this.movedMap[bl(this.mirror.getId(t),r)]=!0)}else this.addedSet.add(t),this.droppedSet.delete(t);He(t,this.blockClass,this.blockSelector,this.unblockSelector,!1)||(t.childNodes.forEach(r=>this.genAdds(r)),ta(t)&&t.shadowRoot.childNodes.forEach(r=>{this.processedNodeManager.add(r,this),this.genAdds(r,t)}))}}}init(t){["mutationCb","blockClass","blockSelector","unblockSelector","maskAllText","maskTextClass","unmaskTextClass","maskTextSelector","unmaskTextSelector","inlineStylesheet","maskInputOptions","maskAttributeFn","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager","processedNodeManager"].forEach(n=>{this[n]=t[n]})}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}};function ia(e,t){e.delete(t),t.childNodes.forEach(n=>ia(e,n))}function vl(e,t,n){return e.length===0?!1:Zl(e,t,n)}function Zl(e,t,n){let{parentNode:r}=t;if(!r)return!1;let o=n.getId(r);return e.some(i=>i.id===o)?!0:Zl(e,r,n)}function Cl(e,t){return e.size===0?!1:Ql(e,t)}function Ql(e,t){let{parentNode:n}=t;return n?e.has(n)?!0:Ql(e,n):!1}var Ir;function yg(e){Ir=e}function Eg(){Ir=void 0}var j=e=>Ir?(...n)=>{try{return e(...n)}catch(r){if(Ir&&Ir(r)===!0)return()=>{};throw r}}:e;function at(e){let t,n=e[0],r=1;for(;r<e.length;){let o=e[r],i=e[r+1];if(r+=2,(o==="optionalAccess"||o==="optionalCall")&&n==null)return;o==="access"||o==="optionalAccess"?(t=n,n=i(n)):(o==="call"||o==="optionalCall")&&(n=i((...s)=>n.call(t,...s)),t=void 0)}return n}var Ln=[];function Ar(e){try{if("composedPath"in e){let t=e.composedPath();if(t.length)return t[0]}else if("path"in e&&e.path.length)return e.path[0]}catch{}return e&&e.target}function ed(e,t){let n=new oa;Ln.push(n),n.init(e);let r=window.MutationObserver||window.__rrMutationObserver,o=at([window,"optionalAccess",s=>s.Zone,"optionalAccess",s=>s.__symbol__,"optionalCall",s=>s("MutationObserver")]);o&&window[o]&&(r=window[o]);let i=new r(j(s=>{e.onMutation&&e.onMutation(s)===!1||n.processMutations.bind(n)(s)}));return i.observe(t,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),i}function Tg({mousemoveCb:e,sampling:t,doc:n,mirror:r}){if(t.mousemove===!1)return()=>{};let o=typeof t.mousemove=="number"?t.mousemove:50,i=typeof t.mousemoveCallback=="number"?t.mousemoveCallback:500,s=[],a,c=Rr(j(d=>{let p=Date.now()-a;e(s.map(f=>(f.timeOffset-=p,f)),d),s=[],a=null}),i),u=j(Rr(j(d=>{let p=Ar(d),{clientX:f,clientY:m}=ea(d)?d.changedTouches[0]:d;a||(a=Go()),s.push({x:f,y:m,id:r.getId(p),timeOffset:Go()-a}),c(typeof DragEvent<"u"&&d instanceof DragEvent?P.Drag:d instanceof MouseEvent?P.MouseMove:P.TouchMove)}),o,{trailing:!1})),l=[Ae("mousemove",u,n),Ae("touchmove",u,n),Ae("drag",u,n)];return j(()=>{l.forEach(d=>d())})}function Ig({mouseInteractionCb:e,doc:t,mirror:n,blockClass:r,blockSelector:o,unblockSelector:i,sampling:s}){if(s.mouseInteraction===!1)return()=>{};let a=s.mouseInteraction===!0||s.mouseInteraction===void 0?{}:s.mouseInteraction,c=[],u=null,l=d=>p=>{let f=Ar(p);if(He(f,r,o,i,!0))return;let m=null,g=d;if("pointerType"in p){switch(p.pointerType){case"mouse":m=wt.Mouse;break;case"touch":m=wt.Touch;break;case"pen":m=wt.Pen;break}m===wt.Touch?ke[d]===ke.MouseDown?g="TouchStart":ke[d]===ke.MouseUp&&(g="TouchEnd"):wt.Pen}else ea(p)&&(m=wt.Touch);m!==null?(u=m,(g.startsWith("Touch")&&m===wt.Touch||g.startsWith("Mouse")&&m===wt.Mouse)&&(m=null)):ke[d]===ke.Click&&(m=u,u=null);let T=ea(p)?p.changedTouches[0]:p;if(!T)return;let y=n.getId(f),{clientX:k,clientY:F}=T;j(e)({type:ke[g],id:y,x:k,y:F,...m!==null&&{pointerType:m}})};return Object.keys(ke).filter(d=>Number.isNaN(Number(d))&&!d.endsWith("_Departed")&&a[d]!==!1).forEach(d=>{let p=Pn(d),f=l(d);if(window.PointerEvent)switch(ke[d]){case ke.MouseDown:case ke.MouseUp:p=p.replace("mouse","pointer");break;case ke.TouchStart:case ke.TouchEnd:return}c.push(Ae(p,f,t))}),j(()=>{c.forEach(d=>d())})}function td({scrollCb:e,doc:t,mirror:n,blockClass:r,blockSelector:o,unblockSelector:i,sampling:s}){let a=j(Rr(j(c=>{let u=Ar(c);if(!u||He(u,r,o,i,!0))return;let l=n.getId(u);if(u===t&&t.defaultView){let d=zl(t.defaultView);e({id:l,x:d.left,y:d.top})}else e({id:l,x:u.scrollLeft,y:u.scrollTop})}),s.scroll||100));return Ae("scroll",a,t)}function bg({viewportResizeCb:e},{win:t}){let n=-1,r=-1,o=j(Rr(j(()=>{let i=jl(),s=Gl();(n!==i||r!==s)&&(e({width:Number(s),height:Number(i)}),n=i,r=s)}),200));return Ae("resize",o,t)}var vg=["INPUT","TEXTAREA","SELECT"],Rl=new WeakMap;function Cg({inputCb:e,doc:t,mirror:n,blockClass:r,blockSelector:o,unblockSelector:i,ignoreClass:s,ignoreSelector:a,maskInputOptions:c,maskInputFn:u,sampling:l,userTriggeredOnInput:d,maskTextClass:p,unmaskTextClass:f,maskTextSelector:m,unmaskTextSelector:g}){function T(S){let v=Ar(S),$=S.isTrusted,E=v&&Zs(v.tagName);if(E==="OPTION"&&(v=v.parentElement),!v||!E||vg.indexOf(E)<0||He(v,r,o,i,!0))return;let b=v;if(b.classList.contains(s)||a&&b.matches(a))return;let L=ba(v),K=zo(b,E,L),Z=!1,ce=ni({maskInputOptions:c,tagName:E,type:L}),U=Un(v,p,m,f,g,ce);(L==="radio"||L==="checkbox")&&(Z=v.checked),K=vr({isMasked:U,element:v,value:K,maskInputFn:u}),y(v,d?{text:K,isChecked:Z,userTriggered:$}:{text:K,isChecked:Z});let he=v.name;L==="radio"&&he&&Z&&t.querySelectorAll(`input[type="radio"][name="${he}"]`).forEach(J=>{if(J!==v){let Ne=vr({isMasked:U,element:J,value:zo(J,E,L),maskInputFn:u});y(J,d?{text:Ne,isChecked:!Z,userTriggered:!1}:{text:Ne,isChecked:!Z})}})}function y(S,v){let $=Rl.get(S);if(!$||$.text!==v.text||$.isChecked!==v.isChecked){Rl.set(S,v);let E=n.getId(S);j(e)({...v,id:E})}}let F=(l.input==="last"?["change"]:["input","change"]).map(S=>Ae(S,j(T),t)),C=t.defaultView;if(!C)return()=>{F.forEach(S=>S())};let A=C.Object.getOwnPropertyDescriptor(C.HTMLInputElement.prototype,"value"),_=[[C.HTMLInputElement.prototype,"value"],[C.HTMLInputElement.prototype,"checked"],[C.HTMLSelectElement.prototype,"value"],[C.HTMLTextAreaElement.prototype,"value"],[C.HTMLSelectElement.prototype,"selectedIndex"],[C.HTMLOptionElement.prototype,"selected"]];return A&&A.set&&F.push(..._.map(S=>Wl(S[0],S[1],{set(){j(T)({target:this,isTrusted:!1})}},!1,C))),j(()=>{F.forEach(S=>S())})}function qo(e){let t=[];function n(r,o){if(Uo("CSSGroupingRule")&&r.parentRule instanceof CSSGroupingRule||Uo("CSSMediaRule")&&r.parentRule instanceof CSSMediaRule||Uo("CSSSupportsRule")&&r.parentRule instanceof CSSSupportsRule||Uo("CSSConditionRule")&&r.parentRule instanceof CSSConditionRule){let s=Array.from(r.parentRule.cssRules).indexOf(r);o.unshift(s)}else if(r.parentStyleSheet){let s=Array.from(r.parentStyleSheet.cssRules).indexOf(r);o.unshift(s)}return o}return n(e,t)}function Wt(e,t,n){let r,o;return e?(e.ownerNode?r=t.getId(e.ownerNode):o=n.getId(e),{styleId:o,id:r}):{}}function Rg({styleSheetRuleCb:e,mirror:t,stylesheetManager:n},{win:r}){if(!r.CSSStyleSheet||!r.CSSStyleSheet.prototype)return()=>{};let o=r.CSSStyleSheet.prototype.insertRule;r.CSSStyleSheet.prototype.insertRule=new Proxy(o,{apply:j((l,d,p)=>{let[f,m]=p,{id:g,styleId:T}=Wt(d,t,n.styleMirror);return(g&&g!==-1||T&&T!==-1)&&e({id:g,styleId:T,adds:[{rule:f,index:m}]}),l.apply(d,p)})});let i=r.CSSStyleSheet.prototype.deleteRule;r.CSSStyleSheet.prototype.deleteRule=new Proxy(i,{apply:j((l,d,p)=>{let[f]=p,{id:m,styleId:g}=Wt(d,t,n.styleMirror);return(m&&m!==-1||g&&g!==-1)&&e({id:m,styleId:g,removes:[{index:f}]}),l.apply(d,p)})});let s;r.CSSStyleSheet.prototype.replace&&(s=r.CSSStyleSheet.prototype.replace,r.CSSStyleSheet.prototype.replace=new Proxy(s,{apply:j((l,d,p)=>{let[f]=p,{id:m,styleId:g}=Wt(d,t,n.styleMirror);return(m&&m!==-1||g&&g!==-1)&&e({id:m,styleId:g,replace:f}),l.apply(d,p)})}));let a;r.CSSStyleSheet.prototype.replaceSync&&(a=r.CSSStyleSheet.prototype.replaceSync,r.CSSStyleSheet.prototype.replaceSync=new Proxy(a,{apply:j((l,d,p)=>{let[f]=p,{id:m,styleId:g}=Wt(d,t,n.styleMirror);return(m&&m!==-1||g&&g!==-1)&&e({id:m,styleId:g,replaceSync:f}),l.apply(d,p)})}));let c={};Fo("CSSGroupingRule")?c.CSSGroupingRule=r.CSSGroupingRule:(Fo("CSSMediaRule")&&(c.CSSMediaRule=r.CSSMediaRule),Fo("CSSConditionRule")&&(c.CSSConditionRule=r.CSSConditionRule),Fo("CSSSupportsRule")&&(c.CSSSupportsRule=r.CSSSupportsRule));let u={};return Object.entries(c).forEach(([l,d])=>{u[l]={insertRule:d.prototype.insertRule,deleteRule:d.prototype.deleteRule},d.prototype.insertRule=new Proxy(u[l].insertRule,{apply:j((p,f,m)=>{let[g,T]=m,{id:y,styleId:k}=Wt(f.parentStyleSheet,t,n.styleMirror);return(y&&y!==-1||k&&k!==-1)&&e({id:y,styleId:k,adds:[{rule:g,index:[...qo(f),T||0]}]}),p.apply(f,m)})}),d.prototype.deleteRule=new Proxy(u[l].deleteRule,{apply:j((p,f,m)=>{let[g]=m,{id:T,styleId:y}=Wt(f.parentStyleSheet,t,n.styleMirror);return(T&&T!==-1||y&&y!==-1)&&e({id:T,styleId:y,removes:[{index:[...qo(f),g]}]}),p.apply(f,m)})})}),j(()=>{r.CSSStyleSheet.prototype.insertRule=o,r.CSSStyleSheet.prototype.deleteRule=i,s&&(r.CSSStyleSheet.prototype.replace=s),a&&(r.CSSStyleSheet.prototype.replaceSync=a),Object.entries(c).forEach(([l,d])=>{d.prototype.insertRule=u[l].insertRule,d.prototype.deleteRule=u[l].deleteRule})})}function nd({mirror:e,stylesheetManager:t},n){let r=null;n.nodeName==="#document"?r=e.getId(n):r=e.getId(n.host);let o=n.nodeName==="#document"?at([n,"access",s=>s.defaultView,"optionalAccess",s=>s.Document]):at([n,"access",s=>s.ownerDocument,"optionalAccess",s=>s.defaultView,"optionalAccess",s=>s.ShadowRoot]),i=at([o,"optionalAccess",s=>s.prototype])?Object.getOwnPropertyDescriptor(at([o,"optionalAccess",s=>s.prototype]),"adoptedStyleSheets"):void 0;return r===null||r===-1||!o||!i?()=>{}:(Object.defineProperty(n,"adoptedStyleSheets",{configurable:i.configurable,enumerable:i.enumerable,get(){return at([i,"access",s=>s.get,"optionalAccess",s=>s.call,"call",s=>s(this)])},set(s){let a=at([i,"access",c=>c.set,"optionalAccess",c=>c.call,"call",c=>c(this,s)]);if(r!==null&&r!==-1)try{t.adoptStyleSheets(s,r)}catch{}return a}}),j(()=>{Object.defineProperty(n,"adoptedStyleSheets",{configurable:i.configurable,enumerable:i.enumerable,get:i.get,set:i.set})}))}function wg({styleDeclarationCb:e,mirror:t,ignoreCSSAttributes:n,stylesheetManager:r},{win:o}){let i=o.CSSStyleDeclaration.prototype.setProperty;o.CSSStyleDeclaration.prototype.setProperty=new Proxy(i,{apply:j((a,c,u)=>{let[l,d,p]=u;if(n.has(l))return i.apply(c,[l,d,p]);let{id:f,styleId:m}=Wt(at([c,"access",g=>g.parentRule,"optionalAccess",g=>g.parentStyleSheet]),t,r.styleMirror);return(f&&f!==-1||m&&m!==-1)&&e({id:f,styleId:m,set:{property:l,value:d,priority:p},index:qo(c.parentRule)}),a.apply(c,u)})});let s=o.CSSStyleDeclaration.prototype.removeProperty;return o.CSSStyleDeclaration.prototype.removeProperty=new Proxy(s,{apply:j((a,c,u)=>{let[l]=u;if(n.has(l))return s.apply(c,[l]);let{id:d,styleId:p}=Wt(at([c,"access",f=>f.parentRule,"optionalAccess",f=>f.parentStyleSheet]),t,r.styleMirror);return(d&&d!==-1||p&&p!==-1)&&e({id:d,styleId:p,remove:{property:l},index:qo(c.parentRule)}),a.apply(c,u)})}),j(()=>{o.CSSStyleDeclaration.prototype.setProperty=i,o.CSSStyleDeclaration.prototype.removeProperty=s})}function xg({mediaInteractionCb:e,blockClass:t,blockSelector:n,unblockSelector:r,mirror:o,sampling:i,doc:s}){let a=j(u=>Rr(j(l=>{let d=Ar(l);if(!d||He(d,t,n,r,!0))return;let{currentTime:p,volume:f,muted:m,playbackRate:g}=d;e({type:u,id:o.getId(d),currentTime:p,volume:f,muted:m,playbackRate:g})}),i.media||500)),c=[Ae("play",a(0),s),Ae("pause",a(1),s),Ae("seeked",a(2),s),Ae("volumechange",a(3),s),Ae("ratechange",a(4),s)];return j(()=>{c.forEach(u=>u())})}function kg({fontCb:e,doc:t}){let n=t.defaultView;if(!n)return()=>{};let r=[],o=new WeakMap,i=n.FontFace;n.FontFace=function(c,u,l){let d=new i(c,u,l);return o.set(d,{family:c,buffer:typeof u!="string",descriptors:l,fontSource:typeof u=="string"?u:JSON.stringify(Array.from(new Uint8Array(u)))}),d};let s=Ra(t.fonts,"add",function(a){return function(c){return ri(j(()=>{let u=o.get(c);u&&(e(u),o.delete(c))}),0),a.apply(this,[c])}});return r.push(()=>{n.FontFace=i}),r.push(s),j(()=>{r.forEach(a=>a())})}function Ag(e){let{doc:t,mirror:n,blockClass:r,blockSelector:o,unblockSelector:i,selectionCb:s}=e,a=!0,c=j(()=>{let u=t.getSelection();if(!u||a&&at([u,"optionalAccess",p=>p.isCollapsed]))return;a=u.isCollapsed||!1;let l=[],d=u.rangeCount||0;for(let p=0;p<d;p++){let f=u.getRangeAt(p),{startContainer:m,startOffset:g,endContainer:T,endOffset:y}=f;He(m,r,o,i,!0)||He(T,r,o,i,!0)||l.push({start:n.getId(m),startOffset:g,end:n.getId(T),endOffset:y})}s({ranges:l})});return c(),Ae("selectionchange",c)}function Ng({doc:e,customElementCb:t}){let n=e.defaultView;return!n||!n.customElements?()=>{}:Ra(n.customElements,"define",function(o){return function(i,s,a){try{t({define:{name:i}})}catch{}return o.apply(this,[i,s,a])}})}function Mg(e,t={}){let n=e.doc.defaultView;if(!n)return()=>{};let r;e.recordDOM&&(r=ed(e,e.doc));let o=Tg(e),i=Ig(e),s=td(e),a=bg(e,{win:n}),c=Cg(e),u=xg(e),l=()=>{},d=()=>{},p=()=>{},f=()=>{};e.recordDOM&&(l=Rg(e,{win:n}),d=nd(e,e.doc),p=wg(e,{win:n}),e.collectFonts&&(f=kg(e)));let m=Ag(e),g=Ng(e),T=[];for(let y of e.plugins)T.push(y.observer(y.callback,n,y.options));return j(()=>{Ln.forEach(y=>y.reset()),at([r,"optionalAccess",y=>y.disconnect,"call",y=>y()]),o(),i(),s(),a(),c(),u(),l(),d(),p(),f(),m(),g(),T.forEach(y=>y())})}function Uo(e){return typeof window[e]<"u"}function Fo(e){return!!(typeof window[e]<"u"&&window[e].prototype&&"insertRule"in window[e].prototype&&"deleteRule"in window[e].prototype)}var wr=class{constructor(t){this.generateIdFn=t,this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap}getId(t,n,r,o){let i=r||this.getIdToRemoteIdMap(t),s=o||this.getRemoteIdToIdMap(t),a=i.get(n);return a||(a=this.generateIdFn(),i.set(n,a),s.set(a,n)),a}getIds(t,n){let r=this.getIdToRemoteIdMap(t),o=this.getRemoteIdToIdMap(t);return n.map(i=>this.getId(t,i,r,o))}getRemoteId(t,n,r){let o=r||this.getRemoteIdToIdMap(t);if(typeof n!="number")return n;let i=o.get(n);return i||-1}getRemoteIds(t,n){let r=this.getRemoteIdToIdMap(t);return n.map(o=>this.getRemoteId(t,o,r))}reset(t){if(!t){this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap;return}this.iframeIdToRemoteIdMap.delete(t),this.iframeRemoteIdToIdMap.delete(t)}getIdToRemoteIdMap(t){let n=this.iframeIdToRemoteIdMap.get(t);return n||(n=new Map,this.iframeIdToRemoteIdMap.set(t,n)),n}getRemoteIdToIdMap(t){let n=this.iframeRemoteIdToIdMap.get(t);return n||(n=new Map,this.iframeRemoteIdToIdMap.set(t,n)),n}};function wl(e){let t,n=e[0],r=1;for(;r<e.length;){let o=e[r],i=e[r+1];if(r+=2,(o==="optionalAccess"||o==="optionalCall")&&n==null)return;o==="access"||o==="optionalAccess"?(t=n,n=i(n)):(o==="call"||o==="optionalCall")&&(n=i((...s)=>n.call(t,...s)),t=void 0)}return n}var sa=class{constructor(){this.crossOriginIframeMirror=new wr(va),this.crossOriginIframeRootIdMap=new WeakMap}addIframe(){}addLoadListener(){}attachIframe(){}},aa=class{constructor(t){this.iframes=new WeakMap,this.crossOriginIframeMap=new WeakMap,this.crossOriginIframeMirror=new wr(va),this.crossOriginIframeRootIdMap=new WeakMap,this.mutationCb=t.mutationCb,this.wrappedEmit=t.wrappedEmit,this.stylesheetManager=t.stylesheetManager,this.recordCrossOriginIframes=t.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new wr(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=t.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}addIframe(t){this.iframes.set(t,!0),t.contentWindow&&this.crossOriginIframeMap.set(t.contentWindow,t)}addLoadListener(t){this.loadListener=t}attachIframe(t,n){this.mutationCb({adds:[{parentId:this.mirror.getId(t),nextId:null,node:n}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),wl([this,"access",r=>r.loadListener,"optionalCall",r=>r(t)]),t.contentDocument&&t.contentDocument.adoptedStyleSheets&&t.contentDocument.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(t.contentDocument.adoptedStyleSheets,this.mirror.getId(t.contentDocument))}handleMessage(t){let n=t;if(n.data.type!=="rrweb"||n.origin!==n.data.origin||!t.source)return;let o=this.crossOriginIframeMap.get(t.source);if(!o)return;let i=this.transformCrossOriginEvent(o,n.data.event);i&&this.wrappedEmit(i,n.data.isCheckout)}transformCrossOriginEvent(t,n){switch(n.type){case H.FullSnapshot:{this.crossOriginIframeMirror.reset(t),this.crossOriginIframeStyleMirror.reset(t),this.replaceIdOnNode(n.data.node,t);let r=n.data.node.id;return this.crossOriginIframeRootIdMap.set(t,r),this.patchRootIdOnNode(n.data.node,r),{timestamp:n.timestamp,type:H.IncrementalSnapshot,data:{source:P.Mutation,adds:[{parentId:this.mirror.getId(t),nextId:null,node:n.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}}}case H.Meta:case H.Load:case H.DomContentLoaded:return!1;case H.Plugin:return n;case H.Custom:return this.replaceIds(n.data.payload,t,["id","parentId","previousId","nextId"]),n;case H.IncrementalSnapshot:switch(n.data.source){case P.Mutation:return n.data.adds.forEach(r=>{this.replaceIds(r,t,["parentId","nextId","previousId"]),this.replaceIdOnNode(r.node,t);let o=this.crossOriginIframeRootIdMap.get(t);o&&this.patchRootIdOnNode(r.node,o)}),n.data.removes.forEach(r=>{this.replaceIds(r,t,["parentId","id"])}),n.data.attributes.forEach(r=>{this.replaceIds(r,t,["id"])}),n.data.texts.forEach(r=>{this.replaceIds(r,t,["id"])}),n;case P.Drag:case P.TouchMove:case P.MouseMove:return n.data.positions.forEach(r=>{this.replaceIds(r,t,["id"])}),n;case P.ViewportResize:return!1;case P.MediaInteraction:case P.MouseInteraction:case P.Scroll:case P.CanvasMutation:case P.Input:return this.replaceIds(n.data,t,["id"]),n;case P.StyleSheetRule:case P.StyleDeclaration:return this.replaceIds(n.data,t,["id"]),this.replaceStyleIds(n.data,t,["styleId"]),n;case P.Font:return n;case P.Selection:return n.data.ranges.forEach(r=>{this.replaceIds(r,t,["start","end"])}),n;case P.AdoptedStyleSheet:return this.replaceIds(n.data,t,["id"]),this.replaceStyleIds(n.data,t,["styleIds"]),wl([n,"access",r=>r.data,"access",r=>r.styles,"optionalAccess",r=>r.forEach,"call",r=>r(o=>{this.replaceStyleIds(o,t,["styleId"])})]),n}}return!1}replace(t,n,r,o){for(let i of o)!Array.isArray(n[i])&&typeof n[i]!="number"||(Array.isArray(n[i])?n[i]=t.getIds(r,n[i]):n[i]=t.getId(r,n[i]));return n}replaceIds(t,n,r){return this.replace(this.crossOriginIframeMirror,t,n,r)}replaceStyleIds(t,n,r){return this.replace(this.crossOriginIframeStyleMirror,t,n,r)}replaceIdOnNode(t,n){this.replaceIds(t,n,["id","rootId"]),"childNodes"in t&&t.childNodes.forEach(r=>{this.replaceIdOnNode(r,n)})}patchRootIdOnNode(t,n){t.type!==pe.Document&&!t.rootId&&(t.rootId=n),"childNodes"in t&&t.childNodes.forEach(r=>{this.patchRootIdOnNode(r,n)})}},ca=class{init(){}addShadowRoot(){}observeAttachShadow(){}reset(){}},ua=class{constructor(t){this.shadowDoms=new WeakSet,this.restoreHandlers=[],this.mutationCb=t.mutationCb,this.scrollCb=t.scrollCb,this.bypassOptions=t.bypassOptions,this.mirror=t.mirror,this.init()}init(){this.reset(),this.patchAttachShadow(Element,document)}addShadowRoot(t,n){if(!Tr(t)||this.shadowDoms.has(t))return;this.shadowDoms.add(t),this.bypassOptions.canvasManager.addShadowRoot(t);let r=ed({...this.bypassOptions,doc:n,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this},t);this.restoreHandlers.push(()=>r.disconnect()),this.restoreHandlers.push(td({...this.bypassOptions,scrollCb:this.scrollCb,doc:t,mirror:this.mirror})),ri(()=>{t.adoptedStyleSheets&&t.adoptedStyleSheets.length>0&&this.bypassOptions.stylesheetManager.adoptStyleSheets(t.adoptedStyleSheets,this.mirror.getId(t.host)),this.restoreHandlers.push(nd({mirror:this.mirror,stylesheetManager:this.bypassOptions.stylesheetManager},t))},0)}observeAttachShadow(t){!t.contentWindow||!t.contentDocument||this.patchAttachShadow(t.contentWindow.Element,t.contentDocument)}patchAttachShadow(t,n){let r=this;this.restoreHandlers.push(Ra(t.prototype,"attachShadow",function(o){return function(i){let s=o.call(this,i);return this.shadowRoot&&Xl(this)&&r.addShadowRoot(this.shadowRoot,n),s}}))}reset(){this.restoreHandlers.forEach(t=>{try{t()}catch{}}),this.restoreHandlers=[],this.shadowDoms=new WeakSet,this.bypassOptions.canvasManager.resetShadowRoots()}},Yo=class{reset(){}freeze(){}unfreeze(){}lock(){}unlock(){}snapshot(){}addWindow(){}addShadowRoot(){}resetShadowRoots(){}},la=class{constructor(t){this.trackedLinkElements=new WeakSet,this.styleMirror=new na,this.mutationCb=t.mutationCb,this.adoptedStyleSheetCb=t.adoptedStyleSheetCb}attachLinkElement(t,n){"_cssText"in n.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:n.id,attributes:n.attributes}]}),this.trackLinkElement(t)}trackLinkElement(t){this.trackedLinkElements.has(t)||(this.trackedLinkElements.add(t),this.trackStylesheetInLinkElement(t))}adoptStyleSheets(t,n){if(t.length===0)return;let r={id:n,styleIds:[]},o=[];for(let i of t){let s;this.styleMirror.has(i)?s=this.styleMirror.getId(i):(s=this.styleMirror.add(i),o.push({styleId:s,rules:Array.from(i.rules||CSSRule,(a,c)=>({rule:Pl(a),index:c}))})),r.styleIds.push(s)}o.length>0&&(r.styles=o),this.adoptedStyleSheetCb(r)}reset(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}trackStylesheetInLinkElement(t){}},da=class{constructor(){this.nodeMap=new WeakMap,this.loop=!0,this.periodicallyClear()}periodicallyClear(){gg(()=>{this.clear(),this.loop&&this.periodicallyClear()})}inOtherBuffer(t,n){let r=this.nodeMap.get(t);return r&&Array.from(r).some(o=>o!==n)}add(t,n){this.nodeMap.set(t,(this.nodeMap.get(t)||new Set).add(n))}clear(){this.nodeMap=new WeakMap}destroy(){this.loop=!1}},ae,Vo;try{if(Array.from([1],e=>e*2)[0]!==2){let e=document.createElement("iframe");document.body.appendChild(e),Array.from=me([e,"access",t=>t.contentWindow,"optionalAccess",t=>t.Array,"access",t=>t.from])||Array.from,document.body.removeChild(e)}}catch(e){console.debug("Unable to override Array.from",e)}var st=Wh();function xt(e={}){let{emit:t,checkoutEveryNms:n,checkoutEveryNth:r,blockClass:o="rr-block",blockSelector:i=null,unblockSelector:s=null,ignoreClass:a="rr-ignore",ignoreSelector:c=null,maskAllText:u=!1,maskTextClass:l="rr-mask",unmaskTextClass:d=null,maskTextSelector:p=null,unmaskTextSelector:f=null,inlineStylesheet:m=!0,maskAllInputs:g,maskInputOptions:T,slimDOMOptions:y,maskAttributeFn:k,maskInputFn:F,maskTextFn:C,maxCanvasSize:A=null,packFn:_,sampling:S={},dataURLOptions:v={},mousemoveWait:$,recordDOM:E=!0,recordCanvas:b=!1,recordCrossOriginIframes:L=!1,recordAfter:K=e.recordAfter==="DOMContentLoaded"?e.recordAfter:"load",userTriggeredOnInput:Z=!1,collectFonts:ce=!1,inlineImages:U=!1,plugins:he,keepIframeSrcFn:J=()=>!1,ignoreCSSAttributes:Ne=new Set([]),errorHandler:yt,onMutation:Ba,getCanvasManager:Ld}=e;yg(yt);let di=L?window.parent===window:!0,Dr=!1;if(!di)try{window.parent.document&&(Dr=!1)}catch{Dr=!0}if(di&&!t)throw new Error("emit function is required");$!==void 0&&S.mousemove===void 0&&(S.mousemove=$),st.reset();let pi=g===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,radio:!0,checkbox:!0}:T!==void 0?T:{},fi=y===!0||y==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:y==="all",headMetaDescKeywords:y==="all"}:y||{};fg();let mi,hi=0,Ha=G=>{for(let Xe of he||[])Xe.eventProcessor&&(G=Xe.eventProcessor(G));return _&&!Dr&&(G=_(G)),G};ae=(G,Xe)=>{let z=G;if(z.timestamp=Go(),me([Ln,"access",re=>re[0],"optionalAccess",re=>re.isFrozen,"call",re=>re()])&&z.type!==H.FullSnapshot&&!(z.type===H.IncrementalSnapshot&&z.data.source===P.Mutation)&&Ln.forEach(re=>re.unfreeze()),di)me([t,"optionalCall",re=>re(Ha(z),Xe)]);else if(Dr){let re={type:"rrweb",event:Ha(z),origin:window.location.origin,isCheckout:Xe};window.parent.postMessage(re,"*")}if(z.type===H.FullSnapshot)mi=z,hi=0;else if(z.type===H.IncrementalSnapshot){if(z.data.source===P.Mutation&&z.data.isAttachIframe)return;hi++;let re=r&&hi>=r,q=n&&mi&&z.timestamp-mi.timestamp>n;(re||q)&&_i(!0)}};let Lr=G=>{ae({type:H.IncrementalSnapshot,data:{source:P.Mutation,...G}})},$a=G=>ae({type:H.IncrementalSnapshot,data:{source:P.Scroll,...G}}),Pd=G=>ae({type:H.IncrementalSnapshot,data:{source:P.CanvasMutation,...G}}),Ud=G=>ae({type:H.IncrementalSnapshot,data:{source:P.AdoptedStyleSheet,...G}}),Gt=new la({mutationCb:Lr,adoptedStyleSheetCb:Ud}),qt=typeof __RRWEB_EXCLUDE_IFRAME__=="boolean"&&__RRWEB_EXCLUDE_IFRAME__?new sa:new aa({mirror:st,mutationCb:Lr,stylesheetManager:Gt,recordCrossOriginIframes:L,wrappedEmit:ae});for(let G of he||[])G.getMirror&&G.getMirror({nodeMirror:st,crossOriginIframeMirror:qt.crossOriginIframeMirror,crossOriginIframeStyleMirror:qt.crossOriginIframeStyleMirror});let gi=new da,Si=Dg(Ld,{mirror:st,win:window,mutationCb:G=>ae({type:H.IncrementalSnapshot,data:{source:P.CanvasMutation,...G}}),recordCanvas:b,blockClass:o,blockSelector:i,unblockSelector:s,maxCanvasSize:A,sampling:S.canvas,dataURLOptions:v,errorHandler:yt}),Pr=typeof __RRWEB_EXCLUDE_SHADOW_DOM__=="boolean"&&__RRWEB_EXCLUDE_SHADOW_DOM__?new ca:new ua({mutationCb:Lr,scrollCb:$a,bypassOptions:{onMutation:Ba,blockClass:o,blockSelector:i,unblockSelector:s,maskAllText:u,maskTextClass:l,unmaskTextClass:d,maskTextSelector:p,unmaskTextSelector:f,inlineStylesheet:m,maskInputOptions:pi,dataURLOptions:v,maskAttributeFn:k,maskTextFn:C,maskInputFn:F,recordCanvas:b,inlineImages:U,sampling:S,slimDOMOptions:fi,iframeManager:qt,stylesheetManager:Gt,canvasManager:Si,keepIframeSrcFn:J,processedNodeManager:gi},mirror:st}),_i=(G=!1)=>{if(!E)return;ae({type:H.Meta,data:{href:window.location.href,width:Gl(),height:jl()}},G),Gt.reset(),Pr.init(),Ln.forEach(z=>z.lock());let Xe=dg(document,{mirror:st,blockClass:o,blockSelector:i,unblockSelector:s,maskAllText:u,maskTextClass:l,unmaskTextClass:d,maskTextSelector:p,unmaskTextSelector:f,inlineStylesheet:m,maskAllInputs:pi,maskAttributeFn:k,maskInputFn:F,maskTextFn:C,slimDOM:fi,dataURLOptions:v,recordCanvas:b,inlineImages:U,onSerialize:z=>{Vl(z,st)&&qt.addIframe(z),Kl(z,st)&&Gt.trackLinkElement(z),ta(z)&&Pr.addShadowRoot(z.shadowRoot,document)},onIframeLoad:(z,re)=>{qt.attachIframe(z,re),z.contentWindow&&Si.addWindow(z.contentWindow),Pr.observeAttachShadow(z)},onStylesheetLoad:(z,re)=>{Gt.attachLinkElement(z,re)},keepIframeSrcFn:J});if(!Xe)return console.warn("Failed to snapshot the document");ae({type:H.FullSnapshot,data:{node:Xe,initialOffset:zl(window)}}),Ln.forEach(z=>z.unlock()),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&Gt.adoptStyleSheets(document.adoptedStyleSheets,st.getId(document))};Vo=_i;try{let G=[],Xe=re=>j(Mg)({onMutation:Ba,mutationCb:Lr,mousemoveCb:(q,Yt)=>ae({type:H.IncrementalSnapshot,data:{source:Yt,positions:q}}),mouseInteractionCb:q=>ae({type:H.IncrementalSnapshot,data:{source:P.MouseInteraction,...q}}),scrollCb:$a,viewportResizeCb:q=>ae({type:H.IncrementalSnapshot,data:{source:P.ViewportResize,...q}}),inputCb:q=>ae({type:H.IncrementalSnapshot,data:{source:P.Input,...q}}),mediaInteractionCb:q=>ae({type:H.IncrementalSnapshot,data:{source:P.MediaInteraction,...q}}),styleSheetRuleCb:q=>ae({type:H.IncrementalSnapshot,data:{source:P.StyleSheetRule,...q}}),styleDeclarationCb:q=>ae({type:H.IncrementalSnapshot,data:{source:P.StyleDeclaration,...q}}),canvasMutationCb:Pd,fontCb:q=>ae({type:H.IncrementalSnapshot,data:{source:P.Font,...q}}),selectionCb:q=>{ae({type:H.IncrementalSnapshot,data:{source:P.Selection,...q}})},customElementCb:q=>{ae({type:H.IncrementalSnapshot,data:{source:P.CustomElement,...q}})},blockClass:o,ignoreClass:a,ignoreSelector:c,maskAllText:u,maskTextClass:l,unmaskTextClass:d,maskTextSelector:p,unmaskTextSelector:f,maskInputOptions:pi,inlineStylesheet:m,sampling:S,recordDOM:E,recordCanvas:b,inlineImages:U,userTriggeredOnInput:Z,collectFonts:ce,doc:re,maskAttributeFn:k,maskInputFn:F,maskTextFn:C,keepIframeSrcFn:J,blockSelector:i,unblockSelector:s,slimDOMOptions:fi,dataURLOptions:v,mirror:st,iframeManager:qt,stylesheetManager:Gt,shadowDomManager:Pr,processedNodeManager:gi,canvasManager:Si,ignoreCSSAttributes:Ne,plugins:me([he,"optionalAccess",q=>q.filter,"call",q=>q(Yt=>Yt.observer),"optionalAccess",q=>q.map,"call",q=>q(Yt=>({observer:Yt.observer,options:Yt.options,callback:Fd=>ae({type:H.Plugin,data:{plugin:Yt.name,payload:Fd}})}))])||[]},{});qt.addLoadListener(re=>{try{G.push(Xe(re.contentDocument))}catch(q){console.warn(q)}});let z=()=>{_i(),G.push(Xe(document))};return document.readyState==="interactive"||document.readyState==="complete"?z():(G.push(Ae("DOMContentLoaded",()=>{ae({type:H.DomContentLoaded,data:{}}),K==="DOMContentLoaded"&&z()})),G.push(Ae("load",()=>{ae({type:H.Load,data:{}}),K==="load"&&z()},window))),()=>{G.forEach(re=>re()),gi.destroy(),Vo=void 0,Eg()}}catch(G){console.warn(G)}}function Og(e){if(!Vo)throw new Error("please take full snapshot after start recording");Vo(e)}xt.mirror=st;xt.takeFullSnapshot=Og;function Dg(e,t){try{return e?e(t):new Yo}catch{return console.warn("Unable to initialize CanvasManager"),new Yo}}var O=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,xl=["info","warn","error","log"],Ho="[Replay] ";function Vs(e,t="info"){Ve({category:"console",data:{logger:"replay"},level:t,message:`${Ho}${e}`},{level:t})}function Lg(){let e=!1,t=!1,n={exception:()=>{},infoTick:()=>{},setConfig:r=>{e=r.captureExceptions,t=r.traceInternals}};return O?(xl.forEach(r=>{n[r]=(...o)=>{h[r](Ho,...o),t&&Vs(o[0])}}),n.exception=(r,...o)=>{n.error&&n.error(...o),h.error(Ho,r),e?sn(r):t&&Vs(r)},n.infoTick=(...r)=>{h.info(Ho,...r),t&&setTimeout(()=>Vs(r[0]),0)}):xl.forEach(r=>{n[r]=()=>{}}),n}var D=Lg(),Pg=3,Ug=5;function xa(e){return e>9999999999?e:e*1e3}function Ks(e){return e>9999999999?e/1e3:e}function Nr(e,t){t.category!=="sentry.transaction"&&(["ui.click","ui.input"].includes(t.category)?e.triggerUserActivity():e.checkAndHandleExpiredSession(),e.addUpdate(()=>(e.throttledAddEvent({type:H.Custom,timestamp:(t.timestamp||0)*1e3,data:{tag:"breadcrumb",payload:Oe(t,10,1e3)}}),t.category==="console")))}var Fg="button,a";function rd(e){return e.closest(Fg)||e}function od(e){let t=id(e);return!t||!(t instanceof Element)?t:rd(t)}function id(e){return Bg(e)?e.target:e}function Bg(e){return typeof e=="object"&&!!e&&"target"in e}var zt;function Hg(e){return zt||(zt=[],$g()),zt.push(e),()=>{let t=zt?zt.indexOf(e):-1;t>-1&&zt.splice(t,1)}}function $g(){ue(te,"open",function(e){return function(...t){if(zt)try{zt.forEach(n=>n())}catch{}return e.apply(te,t)}})}var Wg=new Set([P.Mutation,P.StyleSheetRule,P.StyleDeclaration,P.AdoptedStyleSheet,P.CanvasMutation,P.Selection,P.MediaInteraction]);function zg(e,t,n){e.handleClick(t,n)}var pa=class{constructor(t,n,r=Nr){this._lastMutation=0,this._lastScroll=0,this._clicks=[],this._timeout=n.timeout/1e3,this._threshold=n.threshold/1e3,this._scollTimeout=n.scrollTimeout/1e3,this._replay=t,this._ignoreSelector=n.ignoreSelector,this._addBreadcrumbEvent=r}addListeners(){let t=Hg(()=>{this._lastMutation=kl()});this._teardown=()=>{t(),this._clicks=[],this._lastMutation=0,this._lastScroll=0}}removeListeners(){this._teardown&&this._teardown(),this._checkClickTimeout&&clearTimeout(this._checkClickTimeout)}handleClick(t,n){if(Gg(n,this._ignoreSelector)||!qg(t))return;let r={timestamp:Ks(t.timestamp),clickBreadcrumb:t,clickCount:0,node:n};this._clicks.some(o=>o.node===r.node&&Math.abs(o.timestamp-r.timestamp)<1)||(this._clicks.push(r),this._clicks.length===1&&this._scheduleCheckClicks())}registerMutation(t=Date.now()){this._lastMutation=Ks(t)}registerScroll(t=Date.now()){this._lastScroll=Ks(t)}registerClick(t){let n=rd(t);this._handleMultiClick(n)}_handleMultiClick(t){this._getClicks(t).forEach(n=>{n.clickCount++})}_getClicks(t){return this._clicks.filter(n=>n.node===t)}_checkClicks(){let t=[],n=kl();this._clicks.forEach(r=>{!r.mutationAfter&&this._lastMutation&&(r.mutationAfter=r.timestamp<=this._lastMutation?this._lastMutation-r.timestamp:void 0),!r.scrollAfter&&this._lastScroll&&(r.scrollAfter=r.timestamp<=this._lastScroll?this._lastScroll-r.timestamp:void 0),r.timestamp+this._timeout<=n&&t.push(r)});for(let r of t){let o=this._clicks.indexOf(r);o>-1&&(this._generateBreadcrumbs(r),this._clicks.splice(o,1))}this._clicks.length&&this._scheduleCheckClicks()}_generateBreadcrumbs(t){let n=this._replay,r=t.scrollAfter&&t.scrollAfter<=this._scollTimeout,o=t.mutationAfter&&t.mutationAfter<=this._threshold,i=!r&&!o,{clickCount:s,clickBreadcrumb:a}=t;if(i){let c=Math.min(t.mutationAfter||this._timeout,this._timeout)*1e3,u=c<this._timeout*1e3?"mutation":"timeout",l={type:"default",message:a.message,timestamp:a.timestamp,category:"ui.slowClickDetected",data:{...a.data,url:te.location.href,route:n.getCurrentRoute(),timeAfterClickMs:c,endReason:u,clickCount:s||1}};this._addBreadcrumbEvent(n,l);return}if(s>1){let c={type:"default",message:a.message,timestamp:a.timestamp,category:"ui.multiClick",data:{...a.data,url:te.location.href,route:n.getCurrentRoute(),clickCount:s,metric:!0}};this._addBreadcrumbEvent(n,c)}}_scheduleCheckClicks(){this._checkClickTimeout&&clearTimeout(this._checkClickTimeout),this._checkClickTimeout=Ht(()=>this._checkClicks(),1e3)}},jg=["A","BUTTON","INPUT"];function Gg(e,t){return!!(!jg.includes(e.tagName)||e.tagName==="INPUT"&&!["submit","button"].includes(e.getAttribute("type")||"")||e.tagName==="A"&&(e.hasAttribute("download")||e.hasAttribute("target")&&e.getAttribute("target")!=="_self")||t&&e.matches(t))}function qg(e){return!!(e.data&&typeof e.data.nodeId=="number"&&e.timestamp)}function kl(){return Date.now()/1e3}function Yg(e,t){try{if(!Vg(t))return;let{source:n}=t.data;if(Wg.has(n)&&e.registerMutation(t.timestamp),n===P.Scroll&&e.registerScroll(t.timestamp),Kg(t)){let{type:r,id:o}=t.data,i=xt.mirror.getNode(o);i instanceof HTMLElement&&r===ke.Click&&e.registerClick(i)}}catch{}}function Vg(e){return e.type===Pg}function Kg(e){return e.data.source===P.MouseInteraction}function St(e){return{timestamp:Date.now()/1e3,type:"default",...e}}var Ko;(function(e){e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment"})(Ko||(Ko={}));var Jg=new Set(["id","class","aria-label","role","name","alt","title","data-test-id","data-testid","disabled","aria-disabled","data-sentry-component"]);function Xg(e){let t={};!e["data-sentry-component"]&&e["data-sentry-element"]&&(e["data-sentry-component"]=e["data-sentry-element"]);for(let n in e)if(Jg.has(n)){let r=n;(n==="data-testid"||n==="data-test-id")&&(r="testId"),t[r]=e[n]}return t}var Zg=e=>t=>{if(!e.isEnabled())return;let n=Qg(t);if(!n)return;let r=t.name==="click",o=r?t.event:void 0;r&&e.clickDetector&&o&&o.target&&!o.altKey&&!o.metaKey&&!o.ctrlKey&&!o.shiftKey&&zg(e.clickDetector,n,od(t.event)),Nr(e,n)};function sd(e,t){let n=xt.mirror.getId(e),r=n&&xt.mirror.getNode(n),o=r&&xt.mirror.getMeta(r),i=o&&tS(o)?o:null;return{message:t,data:i?{nodeId:n,node:{id:n,tagName:i.tagName,textContent:Array.from(i.childNodes).map(s=>s.type===Ko.Text&&s.textContent).filter(Boolean).map(s=>s.trim()).join(""),attributes:Xg(i.attributes)}}:{}}}function Qg(e){let{target:t,message:n}=eS(e);return St({category:`ui.${e.name}`,...sd(t,n)})}function eS(e){let t=e.name==="click",n,r=null;try{r=t?od(e.event):id(e.event),n=ye(r,{maxStringLength:200})||"<unknown>"}catch{n="<unknown>"}return{target:r,message:n}}function tS(e){return e.type===Ko.Element}function nS(e,t){if(!e.isEnabled())return;e.updateUserActivity();let n=rS(t);n&&Nr(e,n)}function rS(e){let{metaKey:t,shiftKey:n,ctrlKey:r,altKey:o,key:i,target:s}=e;if(!s||oS(s)||!i)return null;let a=t||r||o,c=i.length===1;if(!a&&c)return null;let u=ye(s,{maxStringLength:200})||"<unknown>",l=sd(s,u);return St({category:"ui.keyDown",message:u,data:{...l.data,metaKey:t,shiftKey:n,ctrlKey:r,altKey:o,key:i}})}function oS(e){return e.tagName==="INPUT"||e.tagName==="TEXTAREA"||e.isContentEditable}var iS={resource:lS,paint:cS,navigation:uS};function Bo(e,t){return({metric:n})=>void t.replayPerformanceEntries.push(e(n))}function sS(e){return e.map(aS).filter(Boolean)}function aS(e){let t=iS[e.entryType];return t?t(e):null}function Fn(e){return((ie||te.performance.timeOrigin)+e)/1e3}function cS(e){let{duration:t,entryType:n,name:r,startTime:o}=e,i=Fn(o);return{type:n,name:r,start:i,end:i+t,data:void 0}}function uS(e){let{entryType:t,name:n,decodedBodySize:r,duration:o,domComplete:i,encodedBodySize:s,domContentLoadedEventStart:a,domContentLoadedEventEnd:c,domInteractive:u,loadEventStart:l,loadEventEnd:d,redirectCount:p,startTime:f,transferSize:m,type:g}=e;return o===0?null:{type:`${t}.${g}`,start:Fn(f),end:Fn(i),name:n,data:{size:m,decodedBodySize:r,encodedBodySize:s,duration:o,domInteractive:u,domContentLoadedEventStart:a,domContentLoadedEventEnd:c,loadEventStart:l,loadEventEnd:d,domComplete:i,redirectCount:p}}}function lS(e){let{entryType:t,initiatorType:n,name:r,responseEnd:o,startTime:i,decodedBodySize:s,encodedBodySize:a,responseStatus:c,transferSize:u}=e;return["fetch","xmlhttprequest"].includes(n)?null:{type:`${t}.${n}`,start:Fn(i),end:Fn(o),name:r,data:{size:u,statusCode:c,decodedBodySize:s,encodedBodySize:a}}}function dS(e){let t=e.entries[e.entries.length-1],n=t&&t.element?[t.element]:void 0;return oi(e,"largest-contentful-paint",n)}function pS(e){return e.sources!==void 0}function fS(e){let t=[],n=[];for(let r of e.entries)if(pS(r)){let o=[];for(let i of r.sources)if(i.node){n.push(i.node);let s=xt.mirror.getId(i.node);s&&o.push(s)}t.push({value:r.value,nodeIds:o.length?o:void 0})}return oi(e,"cumulative-layout-shift",n,t)}function mS(e){let t=e.entries[e.entries.length-1],n=t&&t.target?[t.target]:void 0;return oi(e,"first-input-delay",n)}function hS(e){let t=e.entries[e.entries.length-1],n=t&&t.target?[t.target]:void 0;return oi(e,"interaction-to-next-paint",n)}function oi(e,t,n,r){let o=e.value,i=e.rating,s=Fn(o);return{type:"web-vital",name:t,start:s,end:s,data:{value:o,size:o,rating:i,nodeIds:n?n.map(a=>xt.mirror.getId(a)):void 0,attributions:r}}}function gS(e){function t(o){e.performanceEntries.includes(o)||e.performanceEntries.push(o)}function n({entries:o}){o.forEach(t)}let r=[];return["navigation","paint","resource"].forEach(o=>{r.push(ot(o,n))}),r.push(dr(Bo(dS,e)),cn(Bo(fS,e)),pr(Bo(mS,e)),fr(Bo(hS,e))),()=>{r.forEach(o=>o())}}var SS='var t=Uint8Array,n=Uint16Array,r=Int32Array,e=new t([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),i=new t([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),a=new t([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),s=function(t,e){for(var i=new n(31),a=0;a<31;++a)i[a]=e+=1<<t[a-1];var s=new r(i[30]);for(a=1;a<30;++a)for(var o=i[a];o<i[a+1];++o)s[o]=o-i[a]<<5|a;return{b:i,r:s}},o=s(e,2),f=o.b,h=o.r;f[28]=258,h[258]=28;for(var l=s(i,0).r,u=new n(32768),c=0;c<32768;++c){var v=(43690&c)>>1|(21845&c)<<1;v=(61680&(v=(52428&v)>>2|(13107&v)<<2))>>4|(3855&v)<<4,u[c]=((65280&v)>>8|(255&v)<<8)>>1}var d=function(t,r,e){for(var i=t.length,a=0,s=new n(r);a<i;++a)t[a]&&++s[t[a]-1];var o,f=new n(r);for(a=1;a<r;++a)f[a]=f[a-1]+s[a-1]<<1;if(e){o=new n(1<<r);var h=15-r;for(a=0;a<i;++a)if(t[a])for(var l=a<<4|t[a],c=r-t[a],v=f[t[a]-1]++<<c,d=v|(1<<c)-1;v<=d;++v)o[u[v]>>h]=l}else for(o=new n(i),a=0;a<i;++a)t[a]&&(o[a]=u[f[t[a]-1]++]>>15-t[a]);return o},g=new t(288);for(c=0;c<144;++c)g[c]=8;for(c=144;c<256;++c)g[c]=9;for(c=256;c<280;++c)g[c]=7;for(c=280;c<288;++c)g[c]=8;var w=new t(32);for(c=0;c<32;++c)w[c]=5;var p=d(g,9,0),y=d(w,5,0),m=function(t){return(t+7)/8|0},b=function(n,r,e){return(null==r||r<0)&&(r=0),(null==e||e>n.length)&&(e=n.length),new t(n.subarray(r,e))},M=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],E=function(t,n,r){var e=new Error(n||M[t]);if(e.code=t,Error.captureStackTrace&&Error.captureStackTrace(e,E),!r)throw e;return e},z=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8},A=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8,t[e+2]|=r>>16},_=function(r,e){for(var i=[],a=0;a<r.length;++a)r[a]&&i.push({s:a,f:r[a]});var s=i.length,o=i.slice();if(!s)return{t:F,l:0};if(1==s){var f=new t(i[0].s+1);return f[i[0].s]=1,{t:f,l:1}}i.sort((function(t,n){return t.f-n.f})),i.push({s:-1,f:25001});var h=i[0],l=i[1],u=0,c=1,v=2;for(i[0]={s:-1,f:h.f+l.f,l:h,r:l};c!=s-1;)h=i[i[u].f<i[v].f?u++:v++],l=i[u!=c&&i[u].f<i[v].f?u++:v++],i[c++]={s:-1,f:h.f+l.f,l:h,r:l};var d=o[0].s;for(a=1;a<s;++a)o[a].s>d&&(d=o[a].s);var g=new n(d+1),w=x(i[c-1],g,0);if(w>e){a=0;var p=0,y=w-e,m=1<<y;for(o.sort((function(t,n){return g[n.s]-g[t.s]||t.f-n.f}));a<s;++a){var b=o[a].s;if(!(g[b]>e))break;p+=m-(1<<w-g[b]),g[b]=e}for(p>>=y;p>0;){var M=o[a].s;g[M]<e?p-=1<<e-g[M]++-1:++a}for(;a>=0&&p;--a){var E=o[a].s;g[E]==e&&(--g[E],++p)}w=e}return{t:new t(g),l:w}},x=function(t,n,r){return-1==t.s?Math.max(x(t.l,n,r+1),x(t.r,n,r+1)):n[t.s]=r},D=function(t){for(var r=t.length;r&&!t[--r];);for(var e=new n(++r),i=0,a=t[0],s=1,o=function(t){e[i++]=t},f=1;f<=r;++f)if(t[f]==a&&f!=r)++s;else{if(!a&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(a),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(a);s=1,a=t[f]}return{c:e.subarray(0,i),n:r}},T=function(t,n){for(var r=0,e=0;e<n.length;++e)r+=t[e]*n[e];return r},k=function(t,n,r){var e=r.length,i=m(n+2);t[i]=255&e,t[i+1]=e>>8,t[i+2]=255^t[i],t[i+3]=255^t[i+1];for(var a=0;a<e;++a)t[i+a+4]=r[a];return 8*(i+4+e)},C=function(t,r,s,o,f,h,l,u,c,v,m){z(r,m++,s),++f[256];for(var b=_(f,15),M=b.t,E=b.l,x=_(h,15),C=x.t,U=x.l,F=D(M),I=F.c,S=F.n,L=D(C),O=L.c,j=L.n,q=new n(19),B=0;B<I.length;++B)++q[31&I[B]];for(B=0;B<O.length;++B)++q[31&O[B]];for(var G=_(q,7),H=G.t,J=G.l,K=19;K>4&&!H[a[K-1]];--K);var N,P,Q,R,V=v+5<<3,W=T(f,g)+T(h,w)+l,X=T(f,M)+T(h,C)+l+14+3*K+T(q,H)+2*q[16]+3*q[17]+7*q[18];if(c>=0&&V<=W&&V<=X)return k(r,m,t.subarray(c,c+v));if(z(r,m,1+(X<W)),m+=2,X<W){N=d(M,E,0),P=M,Q=d(C,U,0),R=C;var Y=d(H,J,0);z(r,m,S-257),z(r,m+5,j-1),z(r,m+10,K-4),m+=14;for(B=0;B<K;++B)z(r,m+3*B,H[a[B]]);m+=3*K;for(var Z=[I,O],$=0;$<2;++$){var tt=Z[$];for(B=0;B<tt.length;++B){var nt=31&tt[B];z(r,m,Y[nt]),m+=H[nt],nt>15&&(z(r,m,tt[B]>>5&127),m+=tt[B]>>12)}}}else N=p,P=g,Q=y,R=w;for(B=0;B<u;++B){var rt=o[B];if(rt>255){A(r,m,N[(nt=rt>>18&31)+257]),m+=P[nt+257],nt>7&&(z(r,m,rt>>23&31),m+=e[nt]);var et=31&rt;A(r,m,Q[et]),m+=R[et],et>3&&(A(r,m,rt>>5&8191),m+=i[et])}else A(r,m,N[rt]),m+=P[rt]}return A(r,m,N[256]),m+P[256]},U=new r([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),F=new t(0),I=function(){for(var t=new Int32Array(256),n=0;n<256;++n){for(var r=n,e=9;--e;)r=(1&r&&-306674912)^r>>>1;t[n]=r}return t}(),S=function(){var t=-1;return{p:function(n){for(var r=t,e=0;e<n.length;++e)r=I[255&r^n[e]]^r>>>8;t=r},d:function(){return~t}}},L=function(){var t=1,n=0;return{p:function(r){for(var e=t,i=n,a=0|r.length,s=0;s!=a;){for(var o=Math.min(s+2655,a);s<o;++s)i+=e+=r[s];e=(65535&e)+15*(e>>16),i=(65535&i)+15*(i>>16)}t=e,n=i},d:function(){return(255&(t%=65521))<<24|(65280&t)<<8|(255&(n%=65521))<<8|n>>8}}},O=function(a,s,o,f,u){if(!u&&(u={l:1},s.dictionary)){var c=s.dictionary.subarray(-32768),v=new t(c.length+a.length);v.set(c),v.set(a,c.length),a=v,u.w=c.length}return function(a,s,o,f,u,c){var v=c.z||a.length,d=new t(f+v+5*(1+Math.ceil(v/7e3))+u),g=d.subarray(f,d.length-u),w=c.l,p=7&(c.r||0);if(s){p&&(g[0]=c.r>>3);for(var y=U[s-1],M=y>>13,E=8191&y,z=(1<<o)-1,A=c.p||new n(32768),_=c.h||new n(z+1),x=Math.ceil(o/3),D=2*x,T=function(t){return(a[t]^a[t+1]<<x^a[t+2]<<D)&z},F=new r(25e3),I=new n(288),S=new n(32),L=0,O=0,j=c.i||0,q=0,B=c.w||0,G=0;j+2<v;++j){var H=T(j),J=32767&j,K=_[H];if(A[J]=K,_[H]=J,B<=j){var N=v-j;if((L>7e3||q>24576)&&(N>423||!w)){p=C(a,g,0,F,I,S,O,q,G,j-G,p),q=L=O=0,G=j;for(var P=0;P<286;++P)I[P]=0;for(P=0;P<30;++P)S[P]=0}var Q=2,R=0,V=E,W=J-K&32767;if(N>2&&H==T(j-W))for(var X=Math.min(M,N)-1,Y=Math.min(32767,j),Z=Math.min(258,N);W<=Y&&--V&&J!=K;){if(a[j+Q]==a[j+Q-W]){for(var $=0;$<Z&&a[j+$]==a[j+$-W];++$);if($>Q){if(Q=$,R=W,$>X)break;var tt=Math.min(W,$-2),nt=0;for(P=0;P<tt;++P){var rt=j-W+P&32767,et=rt-A[rt]&32767;et>nt&&(nt=et,K=rt)}}}W+=(J=K)-(K=A[J])&32767}if(R){F[q++]=268435456|h[Q]<<18|l[R];var it=31&h[Q],at=31&l[R];O+=e[it]+i[at],++I[257+it],++S[at],B=j+Q,++L}else F[q++]=a[j],++I[a[j]]}}for(j=Math.max(j,B);j<v;++j)F[q++]=a[j],++I[a[j]];p=C(a,g,w,F,I,S,O,q,G,j-G,p),w||(c.r=7&p|g[p/8|0]<<3,p-=7,c.h=_,c.p=A,c.i=j,c.w=B)}else{for(j=c.w||0;j<v+w;j+=65535){var st=j+65535;st>=v&&(g[p/8|0]=w,st=v),p=k(g,p+1,a.subarray(j,st))}c.i=v}return b(d,0,f+m(p)+u)}(a,null==s.level?6:s.level,null==s.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(a.length)))):12+s.mem,o,f,u)},j=function(t,n,r){for(;r;++n)t[n]=r,r>>>=8},q=function(t,n){var r=n.filename;if(t[0]=31,t[1]=139,t[2]=8,t[8]=n.level<2?4:9==n.level?2:0,t[9]=3,0!=n.mtime&&j(t,4,Math.floor(new Date(n.mtime||Date.now())/1e3)),r){t[3]=8;for(var e=0;e<=r.length;++e)t[e+10]=r.charCodeAt(e)}},B=function(t){return 10+(t.filename?t.filename.length+1:0)},G=function(){function n(n,r){if("function"==typeof n&&(r=n,n={}),this.ondata=r,this.o=n||{},this.s={l:0,i:32768,w:32768,z:32768},this.b=new t(98304),this.o.dictionary){var e=this.o.dictionary.subarray(-32768);this.b.set(e,32768-e.length),this.s.i=32768-e.length}}return n.prototype.p=function(t,n){this.ondata(O(t,this.o,0,0,this.s),n)},n.prototype.push=function(n,r){this.ondata||E(5),this.s.l&&E(4);var e=n.length+this.s.z;if(e>this.b.length){if(e>2*this.b.length-32768){var i=new t(-32768&e);i.set(this.b.subarray(0,this.s.z)),this.b=i}var a=this.b.length-this.s.z;a&&(this.b.set(n.subarray(0,a),this.s.z),this.s.z=this.b.length,this.p(this.b,!1)),this.b.set(this.b.subarray(-32768)),this.b.set(n.subarray(a),32768),this.s.z=n.length-a+32768,this.s.i=32766,this.s.w=32768}else this.b.set(n,this.s.z),this.s.z+=n.length;this.s.l=1&r,(this.s.z>this.s.w+8191||r)&&(this.p(this.b,r||!1),this.s.w=this.s.i,this.s.i-=2)},n}();var H=function(){function t(t,n){this.c=L(),this.v=1,G.call(this,t,n)}return t.prototype.push=function(t,n){this.c.p(t),G.prototype.push.call(this,t,n)},t.prototype.p=function(t,n){var r=O(t,this.o,this.v&&(this.o.dictionary?6:2),n&&4,this.s);this.v&&(function(t,n){var r=n.level,e=0==r?0:r<6?1:9==r?3:2;if(t[0]=120,t[1]=e<<6|(n.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,n.dictionary){var i=L();i.p(n.dictionary),j(t,2,i.d())}}(r,this.o),this.v=0),n&&j(r,r.length-4,this.c.d()),this.ondata(r,n)},t}(),J="undefined"!=typeof TextEncoder&&new TextEncoder,K="undefined"!=typeof TextDecoder&&new TextDecoder;try{K.decode(F,{stream:!0})}catch(t){}var N=function(){function t(t){this.ondata=t}return t.prototype.push=function(t,n){this.ondata||E(5),this.d&&E(4),this.ondata(P(t),this.d=n||!1)},t}();function P(n,r){if(r){for(var e=new t(n.length),i=0;i<n.length;++i)e[i]=n.charCodeAt(i);return e}if(J)return J.encode(n);var a=n.length,s=new t(n.length+(n.length>>1)),o=0,f=function(t){s[o++]=t};for(i=0;i<a;++i){if(o+5>s.length){var h=new t(o+8+(a-i<<1));h.set(s),s=h}var l=n.charCodeAt(i);l<128||r?f(l):l<2048?(f(192|l>>6),f(128|63&l)):l>55295&&l<57344?(f(240|(l=65536+(1047552&l)|1023&n.charCodeAt(++i))>>18),f(128|l>>12&63),f(128|l>>6&63),f(128|63&l)):(f(224|l>>12),f(128|l>>6&63),f(128|63&l))}return b(s,0,o)}function Q(t){return function(t,n){n||(n={});var r=S(),e=t.length;r.p(t);var i=O(t,n,B(n),8),a=i.length;return q(i,n),j(i,a-8,r.d()),j(i,a-4,e),i}(P(t))}const R=new class{constructor(){this._init()}clear(){this._init()}addEvent(t){if(!t)throw new Error("Adding invalid event");const n=this._hasEvents?",":"";this.stream.push(n+t),this._hasEvents=!0}finish(){this.stream.push("]",!0);const t=function(t){let n=0;for(const r of t)n+=r.length;const r=new Uint8Array(n);for(let n=0,e=0,i=t.length;n<i;n++){const i=t[n];r.set(i,e),e+=i.length}return r}(this._deflatedData);return this._init(),t}_init(){this._hasEvents=!1,this._deflatedData=[],this.deflate=new H,this.deflate.ondata=(t,n)=>{this._deflatedData.push(t)},this.stream=new N(((t,n)=>{this.deflate.push(t,n)})),this.stream.push("[")}},V={clear:()=>{R.clear()},addEvent:t=>R.addEvent(t),finish:()=>R.finish(),compress:t=>Q(t)};addEventListener("message",(function(t){const n=t.data.method,r=t.data.id,e=t.data.arg;if(n in V&&"function"==typeof V[n])try{const t=V[n](e);postMessage({id:r,method:n,success:!0,response:t})}catch(t){postMessage({id:r,method:n,success:!1,response:t.message}),console.error(t)}})),postMessage({id:void 0,method:"init",success:!0,response:void 0});';function _S(){let e=new Blob([SS]);return URL.createObjectURL(e)}var xr=class extends Error{constructor(){super(`Event buffer exceeded maximum size of ${Ia}.`)}},Jo=class{constructor(){this.events=[],this._totalSize=0,this.hasCheckout=!1}get hasEvents(){return this.events.length>0}get type(){return"sync"}destroy(){this.events=[]}async addEvent(t){let n=JSON.stringify(t).length;if(this._totalSize+=n,this._totalSize>Ia)throw new xr;this.events.push(t)}finish(){return new Promise(t=>{let n=this.events;this.clear(),t(JSON.stringify(n))})}clear(){this.events=[],this._totalSize=0,this.hasCheckout=!1}getEarliestTimestamp(){let t=this.events.map(n=>n.timestamp).sort()[0];return t?xa(t):null}},fa=class{constructor(t){this._worker=t,this._id=0}ensureReady(){return this._ensureReadyPromise?this._ensureReadyPromise:(this._ensureReadyPromise=new Promise((t,n)=>{this._worker.addEventListener("message",({data:r})=>{r.success?t():n()},{once:!0}),this._worker.addEventListener("error",r=>{n(r)},{once:!0})}),this._ensureReadyPromise)}destroy(){O&&D.info("Destroying compression worker"),this._worker.terminate()}postMessage(t,n){let r=this._getAndIncrementId();return new Promise((o,i)=>{let s=({data:a})=>{let c=a;if(c.method===t&&c.id===r){if(this._worker.removeEventListener("message",s),!c.success){O&&D.error("Error in compression worker: ",c.response),i(new Error("Error in compression worker"));return}o(c.response)}};this._worker.addEventListener("message",s),this._worker.postMessage({id:r,method:t,arg:n})})}_getAndIncrementId(){return this._id++}},ma=class{constructor(t){this._worker=new fa(t),this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1}get hasEvents(){return!!this._earliestTimestamp}get type(){return"worker"}ensureReady(){return this._worker.ensureReady()}destroy(){this._worker.destroy()}addEvent(t){let n=xa(t.timestamp);(!this._earliestTimestamp||n<this._earliestTimestamp)&&(this._earliestTimestamp=n);let r=JSON.stringify(t);return this._totalSize+=r.length,this._totalSize>Ia?Promise.reject(new xr):this._sendEventToWorker(r)}finish(){return this._finishRequest()}clear(){this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1,this._worker.postMessage("clear").then(null,t=>{O&&D.exception(t,'Sending "clear" message to worker failed',t)})}getEarliestTimestamp(){return this._earliestTimestamp}_sendEventToWorker(t){return this._worker.postMessage("addEvent",t)}async _finishRequest(){let t=await this._worker.postMessage("finish");return this._earliestTimestamp=null,this._totalSize=0,t}},ha=class{constructor(t){this._fallback=new Jo,this._compression=new ma(t),this._used=this._fallback,this._ensureWorkerIsLoadedPromise=this._ensureWorkerIsLoaded()}get type(){return this._used.type}get hasEvents(){return this._used.hasEvents}get hasCheckout(){return this._used.hasCheckout}set hasCheckout(t){this._used.hasCheckout=t}destroy(){this._fallback.destroy(),this._compression.destroy()}clear(){return this._used.clear()}getEarliestTimestamp(){return this._used.getEarliestTimestamp()}addEvent(t){return this._used.addEvent(t)}async finish(){return await this.ensureWorkerIsLoaded(),this._used.finish()}ensureWorkerIsLoaded(){return this._ensureWorkerIsLoadedPromise}async _ensureWorkerIsLoaded(){try{await this._compression.ensureReady()}catch(t){O&&D.exception(t,"Failed to load the compression worker, falling back to simple buffer");return}await this._switchToCompressionWorker()}async _switchToCompressionWorker(){let{events:t,hasCheckout:n}=this._fallback,r=[];for(let o of t)r.push(this._compression.addEvent(o));this._compression.hasCheckout=n,this._used=this._compression;try{await Promise.all(r)}catch(o){O&&D.exception(o,"Failed to add events when switching buffers.")}}};function yS({useCompression:e,workerUrl:t}){if(e&&window.Worker){let n=ES(t);if(n)return n}return O&&D.info("Using simple buffer"),new Jo}function ES(e){try{let t=e||TS();if(!t)return;O&&D.info(`Using compression worker${e?` from ${e}`:""}`);let n=new Worker(t);return new ha(n)}catch(t){O&&D.exception(t,"Failed to create compression worker")}}function TS(){return typeof __SENTRY_EXCLUDE_REPLAY_WORKER__>"u"||!__SENTRY_EXCLUDE_REPLAY_WORKER__?_S():""}function ka(){try{return"sessionStorage"in te&&!!te.sessionStorage}catch{return!1}}function IS(e){bS(),e.session=void 0}function bS(){if(ka())try{te.sessionStorage.removeItem(Ea)}catch{}}function ad(e){return e===void 0?!1:Math.random()<e}function cd(e){let t=Date.now(),n=e.id||W(),r=e.started||t,o=e.lastActivity||t,i=e.segmentId||0,s=e.sampled,a=e.previousSessionId;return{id:n,started:r,lastActivity:o,segmentId:i,sampled:s,previousSessionId:a}}function Aa(e){if(ka())try{te.sessionStorage.setItem(Ea,JSON.stringify(e))}catch{}}function vS(e,t){return ad(e)?"session":t?"buffer":!1}function Al({sessionSampleRate:e,allowBuffering:t,stickySession:n=!1},{previousSessionId:r}={}){let o=vS(e,t),i=cd({sampled:o,previousSessionId:r});return n&&Aa(i),i}function CS(){if(!ka())return null;try{let e=te.sessionStorage.getItem(Ea);if(!e)return null;let t=JSON.parse(e);return O&&D.infoTick("Loading existing session"),cd(t)}catch{return null}}function ga(e,t,n=+new Date){return e===null||t===void 0||t<0?!0:t===0?!1:e+t<=n}function ud(e,{maxReplayDuration:t,sessionIdleExpire:n,targetTime:r=Date.now()}){return ga(e.started,t,r)||ga(e.lastActivity,n,r)}function ld(e,{sessionIdleExpire:t,maxReplayDuration:n}){return!(!ud(e,{sessionIdleExpire:t,maxReplayDuration:n})||e.sampled==="buffer"&&e.segmentId===0)}function Js({sessionIdleExpire:e,maxReplayDuration:t,previousSessionId:n},r){let o=r.stickySession&&CS();return o?ld(o,{sessionIdleExpire:e,maxReplayDuration:t})?(O&&D.infoTick("Session in sessionStorage is expired, creating new one..."),Al(r,{previousSessionId:o.id})):o:(O&&D.infoTick("Creating new session"),Al(r,{previousSessionId:n}))}function RS(e){return e.type===H.Custom}function Na(e,t,n){return pd(e,t)?(dd(e,t,n),!0):!1}function wS(e,t,n){return pd(e,t)?dd(e,t,n):Promise.resolve(null)}async function dd(e,t,n){if(!e.eventBuffer)return null;try{n&&e.recordingMode==="buffer"&&e.eventBuffer.clear(),n&&(e.eventBuffer.hasCheckout=!0);let r=e.getOptions(),o=xS(t,r.beforeAddRecordingEvent);return o?await e.eventBuffer.addEvent(o):void 0}catch(r){let o=r&&r instanceof xr?"addEventSizeExceeded":"addEvent";e.handleException(r),await e.stop({reason:o});let i=R();i&&i.recordDroppedEvent("internal_sdk_error","replay")}}function pd(e,t){if(!e.eventBuffer||e.isPaused()||!e.isEnabled())return!1;let n=xa(t.timestamp);return n+e.timeouts.sessionIdlePause<Date.now()?!1:n>e.getContext().initialTimestamp+e.getOptions().maxReplayDuration?(O&&D.infoTick(`Skipping event with timestamp ${n} because it is after maxReplayDuration`),!1):!0}function xS(e,t){try{if(typeof t=="function"&&RS(e))return t(e)}catch(n){return O&&D.exception(n,"An error occured in the `beforeAddRecordingEvent` callback, skipping the event..."),null}return e}function Ma(e){return!e.type}function Sa(e){return e.type==="transaction"}function kS(e){return e.type==="replay_event"}function Nl(e){return e.type==="feedback"}function AS(e){return(t,n)=>{if(!e.isEnabled()||!Ma(t)&&!Sa(t))return;let r=n&&n.statusCode;if(!(!r||r<200||r>=300)){if(Sa(t)){NS(e,t);return}MS(e,t)}}}function NS(e,t){let n=e.getContext();t.contexts&&t.contexts.trace&&t.contexts.trace.trace_id&&n.traceIds.size<100&&n.traceIds.add(t.contexts.trace.trace_id)}function MS(e,t){let n=e.getContext();if(t.event_id&&n.errorIds.size<100&&n.errorIds.add(t.event_id),e.recordingMode!=="buffer"||!t.tags||!t.tags.replayId)return;let{beforeErrorSampling:r}=e.getOptions();typeof r=="function"&&!r(t)||Ht(()=>{e.sendBufferedReplayOrFlush()})}function OS(e){return t=>{!e.isEnabled()||!Ma(t)||DS(e,t)}}function DS(e,t){let n=t.exception&&t.exception.values&&t.exception.values[0]&&t.exception.values[0].value;if(typeof n=="string"&&(n.match(/(reactjs\.org\/docs\/error-decoder\.html\?invariant=|react\.dev\/errors\/)(418|419|422|423|425)/)||n.match(/(does not match server-rendered HTML|Hydration failed because)/i))){let r=St({category:"replay.hydrate-error",data:{url:Hn()}});Nr(e,r)}}function LS(e){let t=R();t&&t.on("beforeAddBreadcrumb",n=>PS(e,n))}function PS(e,t){if(!e.isEnabled()||!fd(t))return;let n=US(t);n&&Nr(e,n)}function US(e){return!fd(e)||["fetch","xhr","sentry.event","sentry.transaction"].includes(e.category)||e.category.startsWith("ui.")?null:e.category==="console"?FS(e):St(e)}function FS(e){let t=e.data&&e.data.arguments;if(!Array.isArray(t)||t.length===0)return St(e);let n=!1,r=t.map(o=>{if(!o)return o;if(typeof o=="string")return o.length>Po?(n=!0,`${o.slice(0,Po)}\u2026`):o;if(typeof o=="object")try{let i=Oe(o,7);return JSON.stringify(i).length>Po?(n=!0,`${JSON.stringify(i,null,2).slice(0,Po)}\u2026`):i}catch{}return o});return St({...e,data:{...e.data,arguments:r,...n?{_meta:{warnings:["CONSOLE_ARG_TRUNCATED"]}}:{}}})}function fd(e){return!!e.category}function BS(e,t){return e.type||!e.exception||!e.exception.values||!e.exception.values.length?!1:!!(t.originalException&&t.originalException.__rrweb__)}function HS(e,t){e.triggerUserActivity(),e.addUpdate(()=>t.timestamp?(e.throttledAddEvent({type:H.Custom,timestamp:t.timestamp*1e3,data:{tag:"breadcrumb",payload:{timestamp:t.timestamp,type:"default",category:"sentry.feedback",data:{feedbackId:t.event_id}}}}),!1):!0)}function $S(e,t){return e.recordingMode!=="buffer"||t.message===Ta||!t.exception||t.type?!1:ad(e.getOptions().errorSampleRate)}function WS(e){return Object.assign((t,n)=>e.isEnabled()?kS(t)?(delete t.breadcrumbs,t):!Ma(t)&&!Sa(t)&&!Nl(t)||!e.checkAndHandleExpiredSession()?t:Nl(t)?(e.flush(),t.contexts.feedback.replay_id=e.getSessionId(),HS(e,t),t):BS(t,n)&&!e.getOptions()._experiments.captureExceptions?(O&&D.log("Ignoring error from rrweb internals",t),null):(($S(e,t)||e.recordingMode==="session")&&(t.tags={...t.tags,replayId:e.getSessionId()}),t):t,{id:"Replay"})}function ii(e,t){return t.map(({type:n,start:r,end:o,name:i,data:s})=>{let a=e.throttledAddEvent({type:H.Custom,timestamp:r,data:{tag:"performanceSpan",payload:{op:n,description:i,startTimestamp:r,endTimestamp:o,data:s}}});return typeof a=="string"?Promise.resolve(null):a})}function zS(e){let{from:t,to:n}=e,r=Date.now()/1e3;return{type:"navigation.push",start:r,end:r,name:n,data:{previous:t}}}function jS(e){return t=>{if(!e.isEnabled())return;let n=zS(t);n!==null&&(e.getContext().urls.push(n.name),e.triggerUserActivity(),e.addUpdate(()=>(ii(e,[n]),!1)))}}function GS(e,t){return O&&e.getOptions()._experiments.traceInternals?!1:Is(t,R())}function md(e,t){e.isEnabled()&&t!==null&&(GS(e,t.name)||e.addUpdate(()=>(ii(e,[t]),!0)))}function si(e){if(!e)return;let t=new TextEncoder;try{if(typeof e=="string")return t.encode(e).length;if(e instanceof URLSearchParams)return t.encode(e.toString()).length;if(e instanceof FormData){let n=_d(e);return t.encode(n).length}if(e instanceof Blob)return e.size;if(e instanceof ArrayBuffer)return e.byteLength}catch{}}function hd(e){if(!e)return;let t=parseInt(e,10);return isNaN(t)?void 0:t}function gd(e){try{if(typeof e=="string")return[e];if(e instanceof URLSearchParams)return[e.toString()];if(e instanceof FormData)return[_d(e)];if(!e)return[void 0]}catch(t){return O&&D.exception(t,"Failed to serialize body",e),[void 0,"BODY_PARSE_ERROR"]}return O&&D.info("Skipping network body because of body type",e),[void 0,"UNPARSEABLE_BODY_TYPE"]}function Xo(e,t){if(!e)return{headers:{},size:void 0,_meta:{warnings:[t]}};let n={...e._meta},r=n.warnings||[];return n.warnings=[...r,t],e._meta=n,e}function Sd(e,t){if(!t)return null;let{startTimestamp:n,endTimestamp:r,url:o,method:i,statusCode:s,request:a,response:c}=t;return{type:e,start:n/1e3,end:r/1e3,name:o,data:Y({method:i,statusCode:s,request:a,response:c})}}function kr(e){return{headers:{},size:e,_meta:{warnings:["URL_SKIPPED"]}}}function jt(e,t,n){if(!t&&Object.keys(e).length===0)return;if(!t)return{headers:e};if(!n)return{headers:e,size:t};let r={headers:e,size:t},{body:o,warnings:i}=qS(n);return r.body=o,i&&i.length>0&&(r._meta={warnings:i}),r}function _a(e,t){return Object.entries(e).reduce((n,[r,o])=>{let i=r.toLowerCase();return t.includes(i)&&e[r]&&(n[i]=o),n},{})}function _d(e){return new URLSearchParams(e).toString()}function qS(e){if(!e||typeof e!="string")return{body:e};let t=e.length>hl,n=YS(e);if(t){let r=e.slice(0,hl);return n?{body:r,warnings:["MAYBE_JSON_TRUNCATED"]}:{body:`${r}\u2026`,warnings:["TEXT_TRUNCATED"]}}if(n)try{return{body:JSON.parse(e)}}catch{}return{body:e}}function YS(e){let t=e[0],n=e[e.length-1];return t==="["&&n==="]"||t==="{"&&n==="}"}function Zo(e,t){let n=VS(e);return We(n,t)}function VS(e,t=te.document.baseURI){if(e.startsWith("http://")||e.startsWith("https://")||e.startsWith(te.location.origin))return e;let n=new URL(e,t);if(n.origin!==new URL(t).origin)return e;let r=n.href;return!e.endsWith("/")&&r.endsWith("/")?r.slice(0,-1):r}async function KS(e,t,n){try{let r=await XS(e,t,n),o=Sd("resource.fetch",r);md(n.replay,o)}catch(r){O&&D.exception(r,"Failed to capture fetch breadcrumb")}}function JS(e,t){let{input:n,response:r}=t,o=n?yd(n):void 0,i=si(o),s=r?hd(r.headers.get("content-length")):void 0;i!==void 0&&(e.data.request_body_size=i),s!==void 0&&(e.data.response_body_size=s)}async function XS(e,t,n){let r=Date.now(),{startTimestamp:o=r,endTimestamp:i=r}=t,{url:s,method:a,status_code:c=0,request_body_size:u,response_body_size:l}=e.data,d=Zo(s,n.networkDetailAllowUrls)&&!Zo(s,n.networkDetailDenyUrls),p=d?ZS(n,t.input,u):kr(u),f=await QS(d,n,t.response,l);return{startTimestamp:o,endTimestamp:i,url:s,method:a,statusCode:c,request:p,response:f}}function ZS({networkCaptureBodies:e,networkRequestHeaders:t},n,r){let o=n?n_(n,t):{};if(!e)return jt(o,r,void 0);let i=yd(n),[s,a]=gd(i),c=jt(o,r,s);return a?Xo(c,a):c}async function QS(e,{networkCaptureBodies:t,networkResponseHeaders:n},r,o){if(!e&&o!==void 0)return kr(o);let i=r?Ed(r.headers,n):{};if(!r||!t&&o!==void 0)return jt(i,o,void 0);let[s,a]=await t_(r),c=e_(s,{networkCaptureBodies:t,responseBodySize:o,captureDetails:e,headers:i});return a?Xo(c,a):c}function e_(e,{networkCaptureBodies:t,responseBodySize:n,captureDetails:r,headers:o}){try{let i=e&&e.length&&n===void 0?si(e):n;return r?t?jt(o,i,e):jt(o,i,void 0):kr(i)}catch(i){return O&&D.exception(i,"Failed to serialize response body"),jt(o,n,void 0)}}async function t_(e){let t=r_(e);if(!t)return[void 0,"BODY_PARSE_ERROR"];try{return[await o_(t)]}catch(n){return O&&D.exception(n,"Failed to get text body from response"),[void 0,"BODY_PARSE_ERROR"]}}function yd(e=[]){if(!(e.length!==2||typeof e[1]!="object"))return e[1].body}function Ed(e,t){let n={};return t.forEach(r=>{e.get(r)&&(n[r]=e.get(r))}),n}function n_(e,t){return e.length===1&&typeof e[0]!="string"?Ml(e[0],t):e.length===2?Ml(e[1],t):{}}function Ml(e,t){if(!e)return{};let n=e.headers;return n?n instanceof Headers?Ed(n,t):Array.isArray(n)?{}:_a(n,t):{}}function r_(e){try{return e.clone()}catch(t){O&&D.exception(t,"Failed to clone response body")}}function o_(e){return new Promise((t,n)=>{let r=Ht(()=>n(new Error("Timeout while trying to read response body")),500);i_(e).then(o=>t(o),o=>n(o)).finally(()=>clearTimeout(r))})}async function i_(e){return await e.text()}async function s_(e,t,n){try{let r=c_(e,t,n),o=Sd("resource.xhr",r);md(n.replay,o)}catch(r){O&&D.exception(r,"Failed to capture xhr breadcrumb")}}function a_(e,t){let{xhr:n,input:r}=t;if(!n)return;let o=si(r),i=n.getResponseHeader("content-length")?hd(n.getResponseHeader("content-length")):p_(n.response,n.responseType);o!==void 0&&(e.data.request_body_size=o),i!==void 0&&(e.data.response_body_size=i)}function c_(e,t,n){let r=Date.now(),{startTimestamp:o=r,endTimestamp:i=r,input:s,xhr:a}=t,{url:c,method:u,status_code:l=0,request_body_size:d,response_body_size:p}=e.data;if(!c)return null;if(!a||!Zo(c,n.networkDetailAllowUrls)||Zo(c,n.networkDetailDenyUrls)){let _=kr(d),S=kr(p);return{startTimestamp:o,endTimestamp:i,url:c,method:u,statusCode:l,request:_,response:S}}let f=a[it],m=f?_a(f.request_headers,n.networkRequestHeaders):{},g=_a(u_(a),n.networkResponseHeaders),[T,y]=n.networkCaptureBodies?gd(s):[void 0],[k,F]=n.networkCaptureBodies?l_(a):[void 0],C=jt(m,d,T),A=jt(g,p,k);return{startTimestamp:o,endTimestamp:i,url:c,method:u,statusCode:l,request:y?Xo(C,y):C,response:F?Xo(A,F):A}}function u_(e){let t=e.getAllResponseHeaders();return t?t.split(`\r
`).reduce((n,r)=>{let[o,i]=r.split(": ");return i&&(n[o.toLowerCase()]=i),n},{}):{}}function l_(e){let t=[];try{return[e.responseText]}catch(n){t.push(n)}try{return d_(e.response,e.responseType)}catch(n){t.push(n)}return O&&D.warn("Failed to get xhr response body",...t),[void 0]}function d_(e,t){try{if(typeof e=="string")return[e];if(e instanceof Document)return[e.body.outerHTML];if(t==="json"&&e&&typeof e=="object")return[JSON.stringify(e)];if(!e)return[void 0]}catch(n){return O&&D.exception(n,"Failed to serialize body",e),[void 0,"BODY_PARSE_ERROR"]}return O&&D.info("Skipping network body because of body type",e),[void 0,"UNPARSEABLE_BODY_TYPE"]}function p_(e,t){try{let n=t==="json"&&e&&typeof e=="object"?JSON.stringify(e):e;return si(n)}catch{return}}function f_(e){let t=R();try{let{networkDetailAllowUrls:n,networkDetailDenyUrls:r,networkCaptureBodies:o,networkRequestHeaders:i,networkResponseHeaders:s}=e.getOptions(),a={replay:e,networkDetailAllowUrls:n,networkDetailDenyUrls:r,networkCaptureBodies:o,networkRequestHeaders:i,networkResponseHeaders:s};t&&t.on("beforeAddBreadcrumb",(c,u)=>m_(a,c,u))}catch{}}function m_(e,t,n){if(t.data)try{h_(t)&&S_(n)&&(a_(t,n),s_(t,n,e)),g_(t)&&__(n)&&(JS(t,n),KS(t,n,e))}catch(r){O&&D.exception(r,"Error when enriching network breadcrumb")}}function h_(e){return e.category==="xhr"}function g_(e){return e.category==="fetch"}function S_(e){return e&&e.xhr}function __(e){return e&&e.response}function y_(e){let t=R();Sr(Zg(e)),Rt(jS(e)),LS(e),f_(e);let n=WS(e);mo(n),t&&(t.on("beforeSendEvent",OS(e)),t.on("afterSendEvent",AS(e)),t.on("createDsc",r=>{let o=e.getSessionId();o&&e.isEnabled()&&e.recordingMode==="session"&&e.checkAndHandleExpiredSession()&&(r.replay_id=o)}),t.on("spanStart",r=>{e.lastActiveSpan=r}),t.on("spanEnd",r=>{e.lastActiveSpan=r}),t.on("beforeSendFeedback",(r,o)=>{let i=e.getSessionId();o&&o.includeReplay&&e.isEnabled()&&i&&r.contexts&&r.contexts.feedback&&(r.contexts.feedback.replay_id=i)}))}async function E_(e){try{return Promise.all(ii(e,[T_(te.performance.memory)]))}catch{return[]}}function T_(e){let{jsHeapSizeLimit:t,totalJSHeapSize:n,usedJSHeapSize:r}=e,o=Date.now()/1e3;return{type:"memory",name:"memory",start:o,end:o,data:{memory:{jsHeapSizeLimit:t,totalJSHeapSize:n,usedJSHeapSize:r}}}}function I_(e,t,n){let r,o,i,s=n&&n.maxWait?Math.max(n.maxWait,t):0;function a(){return c(),r=e(),r}function c(){o!==void 0&&clearTimeout(o),i!==void 0&&clearTimeout(i),o=i=void 0}function u(){return o!==void 0||i!==void 0?a():r}function l(){return o&&clearTimeout(o),o=Ht(a,t),s&&i===void 0&&(i=Ht(a,s)),r}return l.cancel=c,l.flush=u,l}function b_(e){let t=!1;return(n,r)=>{if(!e.checkAndHandleExpiredSession()){O&&D.warn("Received replay event after session expired.");return}let o=r||!t;t=!0,e.clickDetector&&Yg(e.clickDetector,n),e.addUpdate(()=>{if(e.recordingMode==="buffer"&&o&&e.setInitialState(),!Na(e,n,o))return!0;if(!o)return!1;if(C_(e,o),e.session&&e.session.previousSessionId)return!0;if(e.recordingMode==="buffer"&&e.session&&e.eventBuffer){let i=e.eventBuffer.getEarliestTimestamp();i&&(O&&D.info(`Updating session start time to earliest event in buffer to ${new Date(i)}`),e.session.started=i,e.getOptions().stickySession&&Aa(e.session))}return e.recordingMode==="session"&&e.flush(),!0})}}function v_(e){let t=e.getOptions();return{type:H.Custom,timestamp:Date.now(),data:{tag:"options",payload:{shouldRecordCanvas:e.isRecordingCanvas(),sessionSampleRate:t.sessionSampleRate,errorSampleRate:t.errorSampleRate,useCompressionOption:t.useCompression,blockAllMedia:t.blockAllMedia,maskAllText:t.maskAllText,maskAllInputs:t.maskAllInputs,useCompression:e.eventBuffer?e.eventBuffer.type==="worker":!1,networkDetailHasUrls:t.networkDetailAllowUrls.length>0,networkCaptureBodies:t.networkCaptureBodies,networkRequestHasHeaders:t.networkRequestHeaders.length>0,networkResponseHasHeaders:t.networkResponseHeaders.length>0}}}}function C_(e,t){!t||!e.session||e.session.segmentId!==0||Na(e,v_(e),!1)}function R_(e,t,n,r){return Ue(Jn(e,_n(e),r,n),[[{type:"replay_event"},e],[{type:"replay_recording",length:typeof t=="string"?new TextEncoder().encode(t).length:t.length},t]])}function w_({recordingData:e,headers:t}){let n,r=`${JSON.stringify(t)}
`;if(typeof e=="string")n=`${r}${e}`;else{let i=new TextEncoder().encode(r);n=new Uint8Array(i.length+e.length),n.set(i),n.set(e,i.length)}return n}async function x_({client:e,scope:t,replayId:n,event:r}){let o=typeof e._integrations=="object"&&e._integrations!==null&&!Array.isArray(e._integrations)?Object.keys(e._integrations):void 0,i={event_id:n,integrations:o};e.emit("preprocessEvent",r,i);let s=await rr(e.getOptions(),r,i,t,e,se());if(!s)return null;s.platform=s.platform||"javascript";let a=e.getSdkMetadata(),{name:c,version:u}=a&&a.sdk||{};return s.sdk={...s.sdk,name:c||"sentry.javascript.unknown",version:u||"0.0.0"},s}async function k_({recordingData:e,replayId:t,segmentId:n,eventContext:r,timestamp:o,session:i}){let s=w_({recordingData:e,headers:{segment_id:n}}),{urls:a,errorIds:c,traceIds:u,initialTimestamp:l}=r,d=R(),p=B(),f=d&&d.getTransport(),m=d&&d.getDsn();if(!d||!f||!m||!i.sampled)return Ce({});let g={type:vh,replay_start_timestamp:l/1e3,timestamp:o/1e3,error_ids:c,trace_ids:u,urls:a,replay_id:t,segment_id:n,replay_type:i.sampled},T=await x_({scope:p,client:d,replayId:t,event:g});if(!T)return d.recordDroppedEvent("event_processor","replay",g),O&&D.info("An event processor returned `null`, will not send event."),Ce({});delete T.sdkProcessingMetadata;let y=R_(T,s,m,d.getOptions().tunnel),k;try{k=await f.send(y)}catch(C){let A=new Error(Ta);try{A.cause=C}catch{}throw A}if(typeof k.statusCode=="number"&&(k.statusCode<200||k.statusCode>=300))throw new Qo(k.statusCode);let F=Zn({},k);if(Xn(F,"replay"))throw new ei(F);return k}var Qo=class extends Error{constructor(t){super(`Transport returned status code ${t}`)}},ei=class extends Error{constructor(t){super("Rate limit hit"),this.rateLimits=t}};async function Td(e,t={count:0,interval:Ah}){let{recordingData:n,options:r}=e;if(n.length)try{return await k_(e),!0}catch(o){if(o instanceof Qo||o instanceof ei)throw o;if(wn("Replays",{_retryCount:t.count}),O&&r._experiments&&r._experiments.captureExceptions&&sn(o),t.count>=Nh){let i=new Error(`${Ta} - max retries exceeded`);try{i.cause=o}catch{}throw i}return t.interval*=++t.count,new Promise((i,s)=>{Ht(async()=>{try{await Td(e,t),i(!0)}catch(a){s(a)}},t.interval)})}}var Id="__THROTTLED",A_="__SKIPPED";function N_(e,t,n){let r=new Map,o=a=>{let c=a-n;r.forEach((u,l)=>{l<c&&r.delete(l)})},i=()=>[...r.values()].reduce((a,c)=>a+c,0),s=!1;return(...a)=>{let c=Math.floor(Date.now()/1e3);if(o(c),i()>=t){let l=s;return s=!0,l?A_:Id}s=!1;let u=r.get(c)||0;return r.set(c,u+1),e(...a)}}var ya=class e{constructor({options:t,recordingOptions:n}){e.prototype.__init.call(this),e.prototype.__init2.call(this),e.prototype.__init3.call(this),e.prototype.__init4.call(this),e.prototype.__init5.call(this),e.prototype.__init6.call(this),this.eventBuffer=null,this.performanceEntries=[],this.replayPerformanceEntries=[],this.recordingMode="session",this.timeouts={sessionIdlePause:Ch,sessionIdleExpire:Rh},this._lastActivity=Date.now(),this._isEnabled=!1,this._isPaused=!1,this._requiresManualStart=!1,this._hasInitializedCoreListeners=!1,this._context={errorIds:new Set,traceIds:new Set,urls:[],initialTimestamp:Date.now(),initialUrl:""},this._recordingOptions=n,this._options=t,this._debouncedFlush=I_(()=>this._flush(),this._options.flushMinDelay,{maxWait:this._options.flushMaxDelay}),this._throttledAddEvent=N_((s,a)=>wS(this,s,a),300,5);let{slowClickTimeout:r,slowClickIgnoreSelectors:o}=this.getOptions(),i=r?{threshold:Math.min(Mh,r),timeout:r,scrollTimeout:Oh,ignoreSelector:o?o.join(","):""}:void 0;if(i&&(this.clickDetector=new pa(this,i)),O){let s=t._experiments;D.setConfig({captureExceptions:!!s.captureExceptions,traceInternals:!!s.traceInternals})}}getContext(){return this._context}isEnabled(){return this._isEnabled}isPaused(){return this._isPaused}isRecordingCanvas(){return!!this._canvas}getOptions(){return this._options}handleException(t){O&&D.exception(t)}initializeSampling(t){let{errorSampleRate:n,sessionSampleRate:r}=this._options,o=n<=0&&r<=0;if(this._requiresManualStart=o,!o){if(this._initializeSessionForSampling(t),!this.session){O&&D.exception(new Error("Unable to initialize and create session"));return}this.session.sampled!==!1&&(this.recordingMode=this.session.sampled==="buffer"&&this.session.segmentId===0?"buffer":"session",O&&D.infoTick(`Starting replay in ${this.recordingMode} mode`),this._initializeRecording())}}start(){if(this._isEnabled&&this.recordingMode==="session"){O&&D.info("Recording is already in progress");return}if(this._isEnabled&&this.recordingMode==="buffer"){O&&D.info("Buffering is in progress, call `flush()` to save the replay");return}O&&D.infoTick("Starting replay in session mode"),this._updateUserActivity();let t=Js({maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire},{stickySession:this._options.stickySession,sessionSampleRate:1,allowBuffering:!1});this.session=t,this._initializeRecording()}startBuffering(){if(this._isEnabled){O&&D.info("Buffering is in progress, call `flush()` to save the replay");return}O&&D.infoTick("Starting replay in buffer mode");let t=Js({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration},{stickySession:this._options.stickySession,sessionSampleRate:0,allowBuffering:!0});this.session=t,this.recordingMode="buffer",this._initializeRecording()}startRecording(){try{let t=this._canvas;this._stopRecording=xt({...this._recordingOptions,...this.recordingMode==="buffer"&&{checkoutEveryNms:kh},emit:b_(this),onMutation:this._onMutationHandler,...t?{recordCanvas:t.recordCanvas,getCanvasManager:t.getCanvasManager,sampling:t.sampling,dataURLOptions:t.dataURLOptions}:{}})}catch(t){this.handleException(t)}}stopRecording(){try{return this._stopRecording&&(this._stopRecording(),this._stopRecording=void 0),!0}catch(t){return this.handleException(t),!1}}async stop({forceFlush:t=!1,reason:n}={}){if(this._isEnabled){this._isEnabled=!1;try{O&&D.info(`Stopping Replay${n?` triggered by ${n}`:""}`),this._removeListeners(),this.stopRecording(),this._debouncedFlush.cancel(),t&&await this._flush({force:!0}),this.eventBuffer&&this.eventBuffer.destroy(),this.eventBuffer=null,IS(this)}catch(r){this.handleException(r)}}}pause(){this._isPaused||(this._isPaused=!0,this.stopRecording(),O&&D.info("Pausing replay"))}resume(){!this._isPaused||!this._checkSession()||(this._isPaused=!1,this.startRecording(),O&&D.info("Resuming replay"))}async sendBufferedReplayOrFlush({continueRecording:t=!0}={}){if(this.recordingMode==="session")return this.flushImmediate();let n=Date.now();O&&D.info("Converting buffer to session"),await this.flushImmediate();let r=this.stopRecording();!t||!r||this.recordingMode!=="session"&&(this.recordingMode="session",this.session&&(this._updateUserActivity(n),this._updateSessionActivity(n),this._maybeSaveSession()),this.startRecording())}addUpdate(t){let n=t();this.recordingMode!=="buffer"&&n!==!0&&this._debouncedFlush()}triggerUserActivity(){if(this._updateUserActivity(),!this._stopRecording){if(!this._checkSession())return;this.resume();return}this.checkAndHandleExpiredSession(),this._updateSessionActivity()}updateUserActivity(){this._updateUserActivity(),this._updateSessionActivity()}conditionalFlush(){return this.recordingMode==="buffer"?Promise.resolve():this.flushImmediate()}flush(){return this._debouncedFlush()}flushImmediate(){return this._debouncedFlush(),this._debouncedFlush.flush()}cancelFlush(){this._debouncedFlush.cancel()}getSessionId(){return this.session&&this.session.id}checkAndHandleExpiredSession(){if(this._lastActivity&&ga(this._lastActivity,this.timeouts.sessionIdlePause)&&this.session&&this.session.sampled==="session"){this.pause();return}return!!this._checkSession()}setInitialState(){let t=`${te.location.pathname}${te.location.hash}${te.location.search}`,n=`${te.location.origin}${t}`;this.performanceEntries=[],this.replayPerformanceEntries=[],this._clearContext(),this._context.initialUrl=n,this._context.initialTimestamp=Date.now(),this._context.urls.push(n)}throttledAddEvent(t,n){let r=this._throttledAddEvent(t,n);if(r===Id){let o=St({category:"replay.throttled"});this.addUpdate(()=>!Na(this,{type:Ug,timestamp:o.timestamp||0,data:{tag:"breadcrumb",payload:o,metric:!0}}))}return r}getCurrentRoute(){let t=this.lastActiveSpan||X(),n=t&&V(t),o=(n&&M(n).data||{})[be];if(!(!n||!o||!["route","custom"].includes(o)))return M(n).description}_initializeRecording(){this.setInitialState(),this._updateSessionActivity(),this.eventBuffer=yS({useCompression:this._options.useCompression,workerUrl:this._options.workerUrl}),this._removeListeners(),this._addListeners(),this._isEnabled=!0,this._isPaused=!1,this.startRecording()}_initializeSessionForSampling(t){let n=this._options.errorSampleRate>0,r=Js({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration,previousSessionId:t},{stickySession:this._options.stickySession,sessionSampleRate:this._options.sessionSampleRate,allowBuffering:n});this.session=r}_checkSession(){if(!this.session)return!1;let t=this.session;return ld(t,{sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration})?(this._refreshSession(t),!1):!0}async _refreshSession(t){this._isEnabled&&(await this.stop({reason:"refresh session"}),this.initializeSampling(t.id))}_addListeners(){try{te.document.addEventListener("visibilitychange",this._handleVisibilityChange),te.addEventListener("blur",this._handleWindowBlur),te.addEventListener("focus",this._handleWindowFocus),te.addEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.addListeners(),this._hasInitializedCoreListeners||(y_(this),this._hasInitializedCoreListeners=!0)}catch(t){this.handleException(t)}this._performanceCleanupCallback=gS(this)}_removeListeners(){try{te.document.removeEventListener("visibilitychange",this._handleVisibilityChange),te.removeEventListener("blur",this._handleWindowBlur),te.removeEventListener("focus",this._handleWindowFocus),te.removeEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.removeListeners(),this._performanceCleanupCallback&&this._performanceCleanupCallback()}catch(t){this.handleException(t)}}__init(){this._handleVisibilityChange=()=>{te.document.visibilityState==="visible"?this._doChangeToForegroundTasks():this._doChangeToBackgroundTasks()}}__init2(){this._handleWindowBlur=()=>{let t=St({category:"ui.blur"});this._doChangeToBackgroundTasks(t)}}__init3(){this._handleWindowFocus=()=>{let t=St({category:"ui.focus"});this._doChangeToForegroundTasks(t)}}__init4(){this._handleKeyboardEvent=t=>{nS(this,t)}}_doChangeToBackgroundTasks(t){!this.session||ud(this.session,{maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire})||(t&&this._createCustomBreadcrumb(t),this.conditionalFlush())}_doChangeToForegroundTasks(t){if(!this.session)return;if(!this.checkAndHandleExpiredSession()){O&&D.info("Document has become active, but session has expired");return}t&&this._createCustomBreadcrumb(t)}_updateUserActivity(t=Date.now()){this._lastActivity=t}_updateSessionActivity(t=Date.now()){this.session&&(this.session.lastActivity=t,this._maybeSaveSession())}_createCustomBreadcrumb(t){this.addUpdate(()=>{this.throttledAddEvent({type:H.Custom,timestamp:t.timestamp||0,data:{tag:"breadcrumb",payload:t}})})}_addPerformanceEntries(){let t=sS(this.performanceEntries).concat(this.replayPerformanceEntries);return this.performanceEntries=[],this.replayPerformanceEntries=[],Promise.all(ii(this,t))}_clearContext(){this._context.errorIds.clear(),this._context.traceIds.clear(),this._context.urls=[]}_updateInitialTimestampFromEventBuffer(){let{session:t,eventBuffer:n}=this;if(!t||!n||this._requiresManualStart||t.segmentId)return;let r=n.getEarliestTimestamp();r&&r<this._context.initialTimestamp&&(this._context.initialTimestamp=r)}_popEventContext(){let t={initialTimestamp:this._context.initialTimestamp,initialUrl:this._context.initialUrl,errorIds:Array.from(this._context.errorIds),traceIds:Array.from(this._context.traceIds),urls:this._context.urls};return this._clearContext(),t}async _runFlush(){let t=this.getSessionId();if(!this.session||!this.eventBuffer||!t){O&&D.error("No session or eventBuffer found to flush.");return}if(await this._addPerformanceEntries(),!(!this.eventBuffer||!this.eventBuffer.hasEvents)&&(await E_(this),!!this.eventBuffer&&t===this.getSessionId()))try{this._updateInitialTimestampFromEventBuffer();let n=Date.now();if(n-this._context.initialTimestamp>this._options.maxReplayDuration+3e4)throw new Error("Session is too long, not sending replay");let r=this._popEventContext(),o=this.session.segmentId++;this._maybeSaveSession();let i=await this.eventBuffer.finish();await Td({replayId:t,recordingData:i,segmentId:o,eventContext:r,session:this.session,options:this.getOptions(),timestamp:n})}catch(n){this.handleException(n),this.stop({reason:"sendReplay"});let r=R();r&&r.recordDroppedEvent("send_error","replay")}}__init5(){this._flush=async({force:t=!1}={})=>{if(!this._isEnabled&&!t)return;if(!this.checkAndHandleExpiredSession()){O&&D.error("Attempting to finish replay event after session expired.");return}if(!this.session)return;let n=this.session.started,o=Date.now()-n;this._debouncedFlush.cancel();let i=o<this._options.minReplayDuration,s=o>this._options.maxReplayDuration+5e3;if(i||s){O&&D.info(`Session duration (${Math.floor(o/1e3)}s) is too ${i?"short":"long"}, not sending replay.`),i&&this._debouncedFlush();return}let a=this.eventBuffer;if(a&&this.session.segmentId===0&&!a.hasCheckout&&O&&D.info("Flushing initial segment without checkout."),!this._flushLock){this._flushLock=this._runFlush(),await this._flushLock,this._flushLock=void 0;return}try{await this._flushLock}catch(c){O&&D.error(c)}finally{this._debouncedFlush()}}}_maybeSaveSession(){this.session&&this._options.stickySession&&Aa(this.session)}__init6(){this._onMutationHandler=t=>{let n=t.length,r=this._options.mutationLimit,o=this._options.mutationBreadcrumbLimit,i=r&&n>r;if(n>o||i){let s=St({category:"replay.mutations",data:{count:n,limit:i}});this._createCustomBreadcrumb(s)}return i?(this.stop({reason:"mutationLimit",forceFlush:this.recordingMode==="session"}),!1):!0}}};function yr(e,t){return[...e,...t].join(",")}function M_({mask:e,unmask:t,block:n,unblock:r,ignore:o}){let i=['base[href="/"]'],s=yr(e,[".sentry-mask","[data-sentry-mask]"]),a=yr(t,[]);return{maskTextSelector:s,unmaskTextSelector:a,blockSelector:yr(n,[".sentry-block","[data-sentry-block]",...i]),unblockSelector:yr(r,[]),ignoreSelector:yr(o,[".sentry-ignore","[data-sentry-ignore]",'input[type="file"]'])}}function O_({el:e,key:t,maskAttributes:n,maskAllText:r,privacyOptions:o,value:i}){return!r||o.unmaskTextSelector&&e.matches(o.unmaskTextSelector)?i:n.includes(t)||t==="value"&&e.tagName==="INPUT"&&["submit","button"].includes(e.getAttribute("type")||"")?i.replace(/[\S]/g,"*"):i}var Ol='img,image,svg,video,object,picture,embed,map,audio,link[rel="icon"],link[rel="apple-touch-icon"]',D_=["content-length","content-type","accept"],Dl=!1,Oa=e=>new ti(e),ti=class e{static __initStatic(){this.id="Replay"}constructor({flushMinDelay:t=wh,flushMaxDelay:n=xh,minReplayDuration:r=Dh,maxReplayDuration:o=gl,stickySession:i=!0,useCompression:s=!0,workerUrl:a,_experiments:c={},maskAllText:u=!0,maskAllInputs:l=!0,blockAllMedia:d=!0,mutationBreadcrumbLimit:p=750,mutationLimit:f=1e4,slowClickTimeout:m=7e3,slowClickIgnoreSelectors:g=[],networkDetailAllowUrls:T=[],networkDetailDenyUrls:y=[],networkCaptureBodies:k=!0,networkRequestHeaders:F=[],networkResponseHeaders:C=[],mask:A=[],maskAttributes:_=["title","placeholder"],unmask:S=[],block:v=[],unblock:$=[],ignore:E=[],maskFn:b,beforeAddRecordingEvent:L,beforeErrorSampling:K}={}){this.name=e.id;let Z=M_({mask:A,unmask:S,block:v,unblock:$,ignore:E});if(this._recordingOptions={maskAllInputs:l,maskAllText:u,maskInputOptions:{password:!0},maskTextFn:b,maskInputFn:b,maskAttributeFn:(ce,U,he)=>O_({maskAttributes:_,maskAllText:u,privacyOptions:Z,key:ce,value:U,el:he}),...Z,slimDOMOptions:"all",inlineStylesheet:!0,inlineImages:!1,collectFonts:!0,errorHandler:ce=>{try{ce.__rrweb__=!0}catch{}}},this._initialOptions={flushMinDelay:t,flushMaxDelay:n,minReplayDuration:Math.min(r,Lh),maxReplayDuration:Math.min(o,gl),stickySession:i,useCompression:s,workerUrl:a,blockAllMedia:d,maskAllInputs:l,maskAllText:u,mutationBreadcrumbLimit:p,mutationLimit:f,slowClickTimeout:m,slowClickIgnoreSelectors:g,networkDetailAllowUrls:T,networkDetailDenyUrls:y,networkCaptureBodies:k,networkRequestHeaders:Ll(F),networkResponseHeaders:Ll(C),beforeAddRecordingEvent:L,beforeErrorSampling:K,_experiments:c},this._initialOptions.blockAllMedia&&(this._recordingOptions.blockSelector=this._recordingOptions.blockSelector?`${this._recordingOptions.blockSelector},${Ol}`:Ol),this._isInitialized&&Zr())throw new Error("Multiple Sentry Session Replay instances are not supported");this._isInitialized=!0}get _isInitialized(){return Dl}set _isInitialized(t){Dl=t}afterAllSetup(t){!Zr()||this._replay||(this._setup(t),this._initialize(t))}start(){this._replay&&this._replay.start()}startBuffering(){this._replay&&this._replay.startBuffering()}stop(){return this._replay?this._replay.stop({forceFlush:this._replay.recordingMode==="session"}):Promise.resolve()}flush(t){return this._replay?this._replay.isEnabled()?this._replay.sendBufferedReplayOrFlush(t):(this._replay.start(),Promise.resolve()):Promise.resolve()}getReplayId(){if(!(!this._replay||!this._replay.isEnabled()))return this._replay.getSessionId()}_initialize(t){this._replay&&(this._maybeLoadFromReplayCanvasIntegration(t),this._replay.initializeSampling())}_setup(t){let n=L_(this._initialOptions,t);this._replay=new ya({options:n,recordingOptions:this._recordingOptions})}_maybeLoadFromReplayCanvasIntegration(t){try{let n=t.getIntegrationByName("ReplayCanvas");if(!n)return;this._replay._canvas=n.getOptions()}catch{}}};ti.__initStatic();function L_(e,t){let n=t.getOptions(),r={sessionSampleRate:0,errorSampleRate:0,...Y(e)},o=Ut(n.replaysSessionSampleRate),i=Ut(n.replaysOnErrorSampleRate);return o==null&&i==null&&Ge(()=>{console.warn("Replay is disabled because neither `replaysSessionSampleRate` nor `replaysOnErrorSampleRate` are set.")}),o!=null&&(r.sessionSampleRate=o),i!=null&&(r.errorSampleRate=i),r}function Ll(e){return[...D_,...e.map(t=>t.toLowerCase())]}var bd=new WeakMap,Da=new Map,ai={traceFetch:!0,traceXHR:!0,enableHTTPTimings:!0};function Cd(e,t){let{traceFetch:n,traceXHR:r,shouldCreateSpanForRequest:o,enableHTTPTimings:i,tracePropagationTargets:s}={traceFetch:ai.traceFetch,traceXHR:ai.traceXHR,...t},a=typeof o=="function"?o:l=>!0,c=l=>B_(l,s),u={};n&&(e.addEventProcessor(l=>(l.type==="transaction"&&l.spans&&l.spans.forEach(d=>{if(d.op==="http.client"){let p=Da.get(d.span_id);p&&(d.timestamp=p/1e3,Da.delete(d.span_id))}}),l)),zi(l=>{if(l.response){let d=bd.get(l.response);d&&l.endTimestamp&&Da.set(d,l.endTimestamp)}}),Gn(l=>{let d=bs(l,a,c,u);if(l.response&&l.fetchData.__span&&bd.set(l.response,l.fetchData.__span),d){let p=Rd(l.fetchData.url),f=p?qe(p).host:void 0;d.setAttributes({"http.url":p,"server.address":f})}i&&d&&vd(d)})),r&&_r(l=>{let d=H_(l,a,c,u);i&&d&&vd(d)})}function P_(e){return e.entryType==="resource"&&"initiatorType"in e&&typeof e.nextHopProtocol=="string"&&(e.initiatorType==="fetch"||e.initiatorType==="xmlhttprequest")}function vd(e){let{url:t}=M(e).data||{};if(!t||typeof t!="string")return;let n=ot("resource",({entries:r})=>{r.forEach(o=>{P_(o)&&o.name.endsWith(t)&&(F_(o).forEach(s=>e.setAttribute(...s)),setTimeout(n))})})}function U_(e){let t="unknown",n="unknown",r="";for(let o of e){if(o==="/"){[t,n]=e.split("/");break}if(!isNaN(Number(o))){t=r==="h"?"http":r,n=e.split(r)[1];break}r+=o}return r===e&&(t=r),{name:t,version:n}}function _t(e=0){return((ie||performance.timeOrigin)+e)/1e3}function F_(e){let{name:t,version:n}=U_(e.nextHopProtocol),r=[];return r.push(["network.protocol.version",n],["network.protocol.name",t]),ie?[...r,["http.request.redirect_start",_t(e.redirectStart)],["http.request.fetch_start",_t(e.fetchStart)],["http.request.domain_lookup_start",_t(e.domainLookupStart)],["http.request.domain_lookup_end",_t(e.domainLookupEnd)],["http.request.connect_start",_t(e.connectStart)],["http.request.secure_connection_start",_t(e.secureConnectionStart)],["http.request.connection_end",_t(e.connectEnd)],["http.request.request_start",_t(e.requestStart)],["http.request.response_start",_t(e.responseStart)],["http.request.response_end",_t(e.responseEnd)]]:r}function B_(e,t){let n=N.location&&N.location.href;if(n){let r,o;try{r=new URL(e,n),o=new URL(n).origin}catch{return!1}let i=r.origin===o;return t?We(r.toString(),t)||i&&We(r.pathname,t):i}else{let r=!!e.match(/^\/(?!\/)/);return t?We(e,t):r}}function H_(e,t,n,r){let o=e.xhr,i=o&&o[it];if(!o||o.__sentry_own_request__||!i)return;let s=De()&&t(i.url);if(e.endTimestamp&&s){let p=o.__sentry_xhr_span_id__;if(!p)return;let f=r[p];f&&i.status_code!==void 0&&(In(f,i.status_code),f.end(),delete r[p]);return}let a=Rd(i.url),c=a?qe(a).host:void 0,u=!!X(),l=s&&u?xe({name:`${i.method} ${i.url}`,attributes:{type:"xhr","http.method":i.method,"http.url":a,url:i.url,"server.address":c,[Q]:"auto.http.browser",[Re]:"http.client"}}):new Be;o.__sentry_xhr_span_id__=l.spanContext().spanId,r[o.__sentry_xhr_span_id__]=l;let d=R();return o.setRequestHeader&&n(i.url)&&d&&$_(o,d,De()&&u?l:void 0),l}function $_(e,t,n){let r=B(),o=se(),{traceId:i,spanId:s,sampled:a,dsc:c}={...o.getPropagationContext(),...r.getPropagationContext()},u=n&&De()?bn(n):Zt(i,s,a),l=Sn(c||(n?we(n):Pt(i,t)));W_(e,u,l)}function W_(e,t,n){try{e.setRequestHeader("sentry-trace",t),n&&e.setRequestHeader(gn,n)}catch{}}function Rd(e){try{return new URL(e,N.location.origin).href}catch{return}}function wd(){N&&N.document?N.document.addEventListener("visibilitychange",()=>{let e=X();if(!e)return;let t=V(e);if(N.document.hidden&&t){let n="cancelled",{op:r,status:o}=M(t);ge&&h.log(`[Tracing] Transaction: ${n} -> since tab moved to the background, op: ${r}`),o||t.setStatus({code:2,message:n}),t.setAttribute("sentry.cancellation_reason","document.hidden"),t.end()}}):ge&&h.warn("[Tracing] Could not set up background tab detection due to lack of global document")}var z_="BrowserTracing",j_={...Rn,instrumentNavigation:!0,instrumentPageLoad:!0,markBackgroundSpan:!0,enableLongTask:!0,enableLongAnimationFrame:!0,enableInp:!0,_experiments:{},...ai},La=(e={})=>{co();let{enableInp:t,enableLongTask:n,enableLongAnimationFrame:r,_experiments:{enableInteractions:o,enableStandaloneClsSpans:i},beforeStartSpan:s,idleTimeout:a,finalTimeout:c,childSpanTimeout:u,markBackgroundSpan:l,traceFetch:d,traceXHR:p,shouldCreateSpanForRequest:f,enableHTTPTimings:m,instrumentPageLoad:g,instrumentNavigation:T}={...j_,...e},y=Ls({recordClsStandaloneSpans:i||!1});t&&zs(),r&&w.PerformanceObserver&&PerformanceObserver.supportedEntryTypes.includes("long-animation-frame")?Us():n&&Ps(),o&&Fs();let k={name:void 0,source:void 0};function F(C,A){let _=A.op==="pageload",S=s?s(A):A,v=S.attributes||{};A.name!==S.name&&(v[be]="custom",S.attributes=v),k.name=S.name,k.source=v[be];let $=po(S,{idleTimeout:a,finalTimeout:c,childSpanTimeout:u,disableAutoFinish:_,beforeSpanEnd:b=>{y(),Bs(b,{recordClsOnPageloadSpan:!i})}});function E(){["interactive","complete"].includes(N.document.readyState)&&C.emit("idleSpanEnableAutoFinish",$)}return _&&N.document&&(N.document.addEventListener("readystatechange",()=>{E()}),E()),$}return{name:z_,afterAllSetup(C){let A,_=N.location&&N.location.href;C.on("startNavigationSpan",S=>{R()===C&&(A&&!M(A).timestamp&&(ge&&h.log(`[Tracing] Finishing current root span with op: ${M(A).op}`),A.end()),A=F(C,{op:"navigation",...S}))}),C.on("startPageLoadSpan",(S,v={})=>{if(R()!==C)return;A&&!M(A).timestamp&&(ge&&h.log(`[Tracing] Finishing current root span with op: ${M(A).op}`),A.end());let $=v.sentryTrace||xd("sentry-trace"),E=v.baggage||xd("baggage"),b=Ji($,E);B().setPropagationContext(b),A=F(C,{op:"pageload",...S})}),C.on("spanEnd",S=>{let v=M(S).op;if(S!==V(S)||v!=="navigation"&&v!=="pageload")return;let $=B(),E=$.getPropagationContext();$.setPropagationContext({...E,sampled:E.sampled!==void 0?E.sampled:Ye(S),dsc:E.dsc||we(S)})}),N.location&&(g&&kd(C,{name:N.location.pathname,startTime:ie?ie/1e3:void 0,attributes:{[be]:"url",[Q]:"auto.pageload.browser"}}),T&&Rt(({to:S,from:v})=>{if(v===void 0&&_&&_.indexOf(S)!==-1){_=void 0;return}v!==S&&(_=void 0,Ad(C,{name:N.location.pathname,attributes:{[be]:"url",[Q]:"auto.navigation.browser"}}))})),l&&wd(),o&&G_(a,c,u,k),t&&js(),Cd(C,{traceFetch:d,traceXHR:p,tracePropagationTargets:C.getOptions().tracePropagationTargets,shouldCreateSpanForRequest:f,enableHTTPTimings:m})}}};function kd(e,t,n){e.emit("startPageLoadSpan",t,n),B().setTransactionName(t.name);let r=X();return(r&&M(r).op)==="pageload"?r:void 0}function Ad(e,t){se().setPropagationContext(Qt()),B().setPropagationContext(Qt()),e.emit("startNavigationSpan",t),B().setTransactionName(t.name);let n=X();return(n&&M(n).op)==="navigation"?n:void 0}function xd(e){let t=Oi(`meta[name=${e}]`);return t?t.getAttribute("content"):void 0}function G_(e,t,n,r){let o,i=()=>{let s="ui.action.click",a=X(),c=a&&V(a);if(c){let u=M(c).op;if(["navigation","pageload"].includes(u)){ge&&h.warn(`[Tracing] Did not create ${s} span because a pageload or navigation span is in progress.`);return}}if(o&&(o.setAttribute(Tn,"interactionInterrupted"),o.end(),o=void 0),!r.name){ge&&h.warn(`[Tracing] Did not create ${s} transaction because _latestRouteName is missing.`);return}o=po({name:r.name,op:s,attributes:{[be]:r.source||"url"}},{idleTimeout:e,finalTimeout:t,childSpanTimeout:n})};N.document&&addEventListener("click",i,{once:!1,capture:!0})}var Nd=Ur(yi(),1);function Pa(e){let t={...e};return cr(t,"react"),wn("react",{version:Nd.version}),qs(t)}var Dd=Ur(Bd()),Or=Ur(yi());var Md={"app-container":"S"};var fe=Ur(yi()),Y_=(0,fe.lazy)(()=>import("./FormulaBar-IBUJBNKE.js")),V_=(0,fe.lazy)(()=>import("./ToolBar-HOUXTLGE.js")),K_=(0,fe.lazy)(()=>import("./canvas-XPZSNUMH.js")),J_=(0,fe.lazy)(()=>import("./SheetBar-YX7FHDPS.js")),X_=(0,fe.lazy)(()=>import("./MenuBar-DQJRNCS4.js")),ci=(0,fe.memo)(({controller:e})=>fe.default.createElement("div",{className:Md["app-container"],"data-testid":"app-container"},fe.default.createElement(fe.Suspense,{fallback:fe.default.createElement("div",null,"loading")},fe.default.createElement(X_,{controller:e}),fe.default.createElement(V_,{controller:e}),fe.default.createElement(Y_,{controller:e}),fe.default.createElement(K_,{controller:e}),fe.default.createElement(J_,{controller:e}))));ci.displayName="App";var Ua={top:0,left:0,row:0,col:0,scrollLeft:0,scrollTop:0},Mr=class{constructor(t,n){this.scrollValue={};this.changeSet=new Set;this.floatElementUuid="";this.copyRange=void 0;this.isCut=!1;this.isNoChange=!1;this.deleteSheet=t=>{this.model.deleteSheet(t),this.emitChange()};this.getCell=t=>this.model.getCell(t);this.model=t,this.hooks=n}applyCommandList(t){this.model.applyCommandList(t)}getHooks(){return this.hooks}validateDefinedName(t){return this.model.validateDefinedName(t)}validateDrawing(t){return this.model.validateDrawing(t)}validateRange(t){return this.model.validateRange(t)}getCurrentSheetId(){return this.model.getCurrentSheetId()}getSheetList(){return this.model.getSheetList()}getSheetInfo(t){return this.model.getSheetInfo(t)}batchUpdate(t,n=!1){this.isNoChange=!0;let r=t();n&&this.changeSet.add("noHistory"),this.isNoChange=!1,r&&this.emitChange()}emitChange(){this.isNoChange||(this.model.emitChange(this.changeSet),this.changeSet=new Set)}getActiveRange(t){return this.model.getActiveRange(t)}setNextActiveCell(t){let{range:n,isMerged:r}=this.getActiveRange(),o=n.col,i=n.row,s=this.getSheetInfo(n.sheetId),a={...n,rowCount:1,colCount:1};if(t==="left"){for(o--;o>0&&this.getColWidth(o).len<=0;)o--;a.col=o}if(t==="right"){for(r?o=n.col+n.colCount:o++;o<s.colCount&&this.getColWidth(o).len<=0;)o++;a.col=o}if(t==="up"){for(i--;i>0&&this.getRowHeight(i).len<=0;)i--;a.row=i}if(t==="down"){for(r?i=n.row+n.rowCount:i++;i<s.rowCount&&this.getRowHeight(i).len<=0;)i++;a.row=i}this.setActiveRange(a)}setActiveRange(t){this.model.setActiveRange(t),this.emitChange()}setCurrentSheetId(t){this.model.setCurrentSheetId(t),this.setScroll(this.getScroll())}getWorksheet(t){return this.model.getWorksheet(t)}setWorksheet(t,n){this.model.setWorksheet(t,n),this.emitChange()}addSheet(){let t=this.model.addSheet();return this.setScroll({...Ua}),t}updateSheetInfo(t,n){this.model.updateSheetInfo(t,n),this.emitChange()}hideSheet(t){this.model.hideSheet(t),this.emitChange()}unhideSheet(t){this.model.unhideSheet(t),this.emitChange()}renameSheet(t,n){this.model.renameSheet(t,n),this.emitChange()}fromJSON(t){this.model.fromJSON(t),this.setScroll({...Ua})}toJSON(){return this.model.toJSON()}setCell(t,n,r){this.model.setCell(t,n,r),this.emitChange()}setCellValue(t,n){let r=this.getCell(n);if(rc(r?.style?.numberFormat)&&typeof t=="string"&&!isNaN(Date.parse(t))){let o=oc(new Date(t));this.model.setCellValue(o,n)}else this.model.setCellValue(t,n);this.emitChange()}updateCellStyle(t,n){this.model.updateCellStyle(t,n),this.emitChange()}canRedo(){return this.model.canRedo()}canUndo(){return this.model.canUndo()}undo(){this.model.undo(),this.changeSet.add("scroll"),this.changeSet.add("undo"),this.emitChange()}redo(){this.model.redo(),this.changeSet.add("scroll"),this.changeSet.add("redo"),this.emitChange()}getColWidth(t,n){return this.model.getColWidth(t,n)}setColWidth(t,n,r){this.model.setColWidth(t,n,r),this.emitChange()}getRowHeight(t,n){return this.model.getRowHeight(t,n)}setRowHeight(t,n,r){this.model.setRowHeight(t,n,r),this.emitChange()}getCellSize(t){return t.sheetId=t.sheetId||this.getCurrentSheetId(),this.getRangeSize(t)}getRangeSize(t){let{row:n,col:r,colCount:o,rowCount:i}=t,s=n,a=r,c=n+i,u=r+o,l=t.sheetId||this.getCurrentSheetId(),d=this.getSheetInfo(l);if(!d)return{width:0,height:0};qa(t)?(a=0,u=d.colCount,s=0,c=d.rowCount):Va(t)?(s=0,c=d.rowCount):Ya(t)&&(a=0,u=d.colCount);let p=0,f=0;for(;s<c;s++)f+=this.getRowHeight(s,l).len;for(;a<u;a++)p+=this.getColWidth(a,l).len;return{width:p,height:f}}computeCellPosition(t){let{row:n,col:r}=t,o=t.sheetId||this.model.getCurrentSheetId(),i=Fr.get(),s=this.getScroll(o),a=i.width,c=i.height,u=s.row,l=s.col;if(r>=s.col)for(;l<r;)a+=this.getColWidth(l,o).len,l++;else for(a=-i.width;l>r;)a-=this.getColWidth(l,o).len,l--;if(n>=s.row)for(;u<n;)c+=this.getRowHeight(u,o).len,u++;else for(c=-i.height;u>n;)c-=this.getRowHeight(u,o).len,u--;return{top:c,left:a}}addRow(t,n,r=!1){this.model.addRow(t,n,r),this.emitChange()}addCol(t,n,r=!1){this.model.addCol(t,n,r),this.emitChange()}deleteCol(t,n){this.model.deleteCol(t,n),this.emitChange()}deleteRow(t,n){this.model.deleteRow(t,n),this.emitChange()}hideCol(t,n){this.model.hideCol(t,n),this.emitChange()}hideRow(t,n){this.model.hideRow(t,n),this.emitChange()}getScroll(t){let n=t||this.model.getCurrentSheetId();return{...this.scrollValue[n]||{...Ua}}}setScroll(t){let n=this.model.getCurrentSheetId();this.scrollValue[n]={...t},t.row>9999?Fr.set({width:Math.floor(Ti*2),height:Ei}):Fr.set({width:Ti,height:Ei}),this.changeSet.add("scroll"),this.emitChange()}getPasteRange(t){let n=t.length,r=this.getActiveRange().range,o=Math.max(...t.map(i=>i.length));return{...r,rowCount:n,colCount:o}}parseText(t){let n=ja(t),r=this.getPasteRange(n);if(n.length>0)return this.model.setCell(n,[],r),r}parseHTML(t){let{textList:n,styleList:r,rowMap:o,colMap:i}=Ga(t),s=this.getPasteRange(n);for(let[a,c]of o.entries())this.model.setRowHeight(a,c);for(let[a,c]of i.entries())this.model.setColWidth(a,c);if(n.length>0||r.length>0)return this.model.setCell(n,r,s),s}async getCopyData(t){let{range:n,isMerged:r}=this.getActiveRange(),{row:o,col:i,rowCount:s,colCount:a}=n,c=[],u=[],l=1,d=[],p=this.model.getCurrentSheetId(),f=new Set;for(let C=o,A=o+s;C<A;C++){let _=[],S=[],v=bi(this.getRowHeight(C).len,"");for(let $=i,E=i+a;$<E;$++){let b=this.model.getCell({row:C,col:$,rowCount:1,colCount:1,sheetId:p});if(!b)continue;let L=nc(b.value,b.style?.numberFormat);_.push(L);let K=bi(this.getColWidth($).len,""),Z=`height=${v} width=${K} style='height:${v}pt;width:${K}pt;'`;if(f.add(`<col width=${K} style='width:${K}pt;'>`),b.style){let ce=za(b.style);L||(ce+="mso-pattern:black none;");let U=`xl${l++}`;d.push(`.${U}{${ce}}`),S.push(`<td ${Z} class="${U}"> ${L} </td>`)}else S.push(`<td ${Z}> ${L} </td>`);if(r)break}if(c.push(_),u.push(`<tr height=${v} style='height:${v}pt;'>${S.join(`
`)}</tr>`),r)break}let m={range:n,type:t,floatElementUuid:this.floatElementUuid},g=JSON.stringify(m),T=Ka(d.join(`
`),`
      ${Array.from(f).join(`
`)}
      ${u.join(`
`)}`,Ja(g)),y=`${c.map(C=>C.join("	")).join(`\r
`)}\r
`,k={[ct]:y,[ut]:T,[$e]:m,[Et]:null},F="";if(this.floatElementUuid){let A=this.getDrawingList(this.getCurrentSheetId()).find(_=>_.uuid===this.floatElementUuid);if(A)if(A.type==="floating-picture"){let _=document.querySelector(`canvas[data-uuid="${A.uuid}"]`);_&&(_.toBlob(S=>{S&&(k[Et]=S)}),F=_.toDataURL())}else F=A.imageSrc||"",k[Et]=ec(F)}return[k,F]}pasteFloatElement(t,n){if(!t)return!1;if(n){let u=this.getActiveRange().range;return this.model.updateDrawing(t,{fromCol:u.col,fromRow:u.row,marginX:0,marginY:0}),this.floatElementUuid="",this.isCut=!1,this.emitChange(),!0}let o=this.getDrawingList(this.getCurrentSheetId()).find(u=>u.uuid===t);if(!o)return!1;let i=this.getCellSize({row:o.fromRow,col:o.fromCol,rowCount:1,colCount:1,sheetId:o.sheetId}),{marginX:s,marginY:a}=o,c=14;return s+c<i.width?s+=c:s-c>=0&&(s-=c),a+c<i.width?a+=c:a-c>=0&&(a-=c),this.addDrawing({...o,uuid:Ii(),marginX:s,marginY:a}),!0}paste(t){return this.floatElementUuid&&this.pasteFloatElement(this.floatElementUuid,this.isCut)?Promise.resolve():this.basePaste(t)}async basePaste(t){let n="",r="",o=null,i=null;if(t){n=t.clipboardData?.getData(ut)||"",r=t.clipboardData?.getData(ct)||"";let s=t.clipboardData?.getData($e)||"";s&&(o=JSON.parse(s)),o&&o.type==="cut"&&(t.clipboardData?.setData(ut,""),t.clipboardData?.setData(ct,""),t.clipboardData?.setData($e,""),t.clipboardData?.setData(Et,"")),t.clipboardData?.files&&(i=t.clipboardData?.files)}else{let s=await this.hooks.paste();n=s[ut],r=s[ct],s[$e]&&(o=s[$e]),o&&o.type==="cut"&&this.hooks.copyOrCut({[ct]:"",[ut]:"",[$e]:null,[Et]:null},"copy")}if(i){let s=[];for(let a of i){if(a.size<=0)continue;let c=a.name,u=a.type.slice(6);c=c.slice(0,-(u.length+1));let l=await Za(a,!0);if(!l)continue;let d=await Qa(l),p=this.getActiveRange().range;s.push({width:d.width,height:d.height,originHeight:d.height,originWidth:d.width,title:c,type:"floating-picture",uuid:Ii(),imageSrc:l,sheetId:p.sheetId,fromRow:p.row,fromCol:p.col,marginX:0,marginY:0})}if(s.length>0){this.addDrawing(...s);return}}if(!(o&&o.floatElementUuid&&this.pasteFloatElement(o.floatElementUuid,o.type==="cut"))){if(o){let s=this.model.pasteRange(o.range,o.type==="cut");this.setActiveRange(s);return}if(n=n.trim(),r=r.trim(),n){let s=this.parseHTML(n);if(s){this.setActiveRange(s);return}}if(r){let s=this.parseText(r);if(s){this.setActiveRange(s);return}}if(this.copyRange){let s=this.model.pasteRange(this.copyRange,this.isCut);this.setActiveRange(s),this.isCut&&(this.copyRange=void 0,this.isCut=!1);return}}}copy(t){return this.copyRange=this.getActiveRange().range,this.isCut=!1,this.baseCopy("copy",t)}cut(t){return this.copyRange=this.getActiveRange().range,this.isCut=!0,this.baseCopy("cut",t)}async baseCopy(t,n){let[r,o]=await this.getCopyData(t);n?(n.clipboardData?.setData(ut,r[ut]),n.clipboardData?.setData(ct,r[ct]),n.clipboardData?.setData($e,r[$e]?JSON.stringify(r[$e]):""),n.clipboardData?.setData(Et,o)):this.hooks.copyOrCut(r,t),this.changeSet.add("antLine"),this.emitChange()}getCopyRange(){return this.copyRange}setCopyRange(t){this.copyRange=t}deleteAll(t){this.model.deleteAll(t),this.emitChange()}getDefineName(t){return this.model.getDefineName(t)}getDefineNameList(){return this.model.getDefineNameList()}setDefineName(t,n){let r=this.model.setDefineName(t,n);return this.emitChange(),r}checkDefineName(t){return this.model.checkDefineName(t)}getDrawingList(t){return this.model.getDrawingList(t)}addDrawing(...t){this.model.addDrawing(...t),this.emitChange()}updateDrawing(t,n){this.model.updateDrawing(t,n),this.emitChange()}deleteDrawing(t){this.model.deleteDrawing(t),this.emitChange()}getMergeCellList(t){return this.model.getMergeCellList(t)}addMergeCell(t,n){this.model.addMergeCell(t,n),this.emitChange()}deleteMergeCell(t){this.model.deleteMergeCell(t),this.emitChange()}setFloatElementUuid(t){this.floatElementUuid=t}};var Od={async copyOrCut(){},async paste(){return{[ut]:"",[ct]:"",[$e]:null,[Et]:null}},worker:sc};function ui(e=!1,t=Od){if(!Wa()&&t===Od)throw new Error("hooks must be provided in production or development environment");let n=new ic(t.worker),r=new Mr(n,t);return r.batchUpdate(()=>(r.addSheet(),!0),e),r}function Fa(e){let t=new BroadcastChannel("excel");Xa.on("modelChange",n=>{t.postMessage(n)}),t.onmessage=n=>{e.applyCommandList(n.data)}}if(typeof Worker!="function")throw new Error("Don't support Web Worker");location.hostname!=="localhost"&&Pa({dsn:"https://b292d91ba509038c141ecfc7d10e7bb7@o4506851168092160.ingest.sentry.io/4506851171041280",integrations:[La(),Oa({maskAllText:!1,blockAllMedia:!1})],tracesSampleRate:1,tracePropagationTargets:["nusr.github.io"],replaysSessionSampleRate:.1,replaysOnErrorSampleRate:1});var Z_=document.getElementById("root"),li=ui(!0,{copyOrCut:vi,paste:Ci,worker:tc(new Worker("./worker.js",{type:"module",name:"worker"}))});window.controller=li;(0,Dd.createRoot)(Z_).render(Or.default.createElement(Or.StrictMode,null,Or.default.createElement(ci,{controller:li})));li.fromJSON(Ri);Fa(li);
//# sourceMappingURL=demo.js.map
