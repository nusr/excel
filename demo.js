/* 
MIT License

Copyright (c) 2020 Steve Xu

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.

*/
import{a as hc}from"./chunk-3N5BLAQY.js";import{a as mc,b as ki}from"./chunk-CM3U7JAP.js";import{a as dc,b as fc,c as pc}from"./chunk-4ZOIIS26.js";import{b as lc}from"./chunk-PRJU7QU5.js";import{a as Ii,b as uf}from"./chunk-2WXICHEX.js";import{Ga as ct,Ha as ut,Ia as $e,Ja as Et,Ka as wi,La as xi,Ma as oc,Na as ic,U as Ci,Wa as Hr,X as Xa,_a as sc,ba as Za,bb as ac,ca as Ri,cb as cc,d as bi,da as Qa,db as uc,e as vi,ea as ec,la as tc,ma as nc,na as rc}from"./chunk-3OL4F4KC.js";import{c as Br}from"./chunk-AI5EXC2Q.js";var gc=Object.prototype.toString;function Jt(e){switch(gc.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return Le(e,Error)}}function pn(e,t){return gc.call(e)===`[object ${t}]`}function $r(e){return pn(e,"ErrorEvent")}function Wr(e){return pn(e,"DOMError")}function Ai(e){return pn(e,"DOMException")}function ve(e){return pn(e,"String")}function mn(e){return typeof e=="object"&&e!==null&&"__sentry_template_string__"in e&&"__sentry_template_values__"in e}function Kt(e){return e===null||mn(e)||typeof e!="object"&&typeof e!="function"}function Ze(e){return pn(e,"Object")}function Xt(e){return typeof Event<"u"&&Le(e,Event)}function Ni(e){return typeof Element<"u"&&Le(e,Element)}function Mi(e){return pn(e,"RegExp")}function lt(e){return!!(e&&e.then&&typeof e.then=="function")}function Oi(e){return Ze(e)&&"nativeEvent"in e&&"preventDefault"in e&&"stopPropagation"in e}function Le(e,t){try{return e instanceof t}catch{return!1}}function $n(e){return!!(typeof e=="object"&&e!==null&&(e.__isVue||e._isVue))}function dt(e,t=0){return typeof e!="string"||t===0||e.length<=t?e:`${e.slice(0,t)}...`}function zr(e,t){if(!Array.isArray(e))return"";let n=[];for(let r=0;r<e.length;r++){let o=e[r];try{$n(o)?n.push("[VueViewModel]"):n.push(String(o))}catch{n.push("[value cannot be serialized]")}}return n.join(t)}function Sc(e,t,n=!1){return ve(e)?Mi(t)?t.test(e):ve(t)?n?e===t:e.includes(t):!1:!1}function We(e,t=[],n=!1){return t.some(r=>Sc(e,r,n))}function Pi(e,t,n=250,r,o,i,s){if(!i.exception||!i.exception.values||!s||!Le(s.originalException,Error))return;let a=i.exception.values.length>0?i.exception.values[i.exception.values.length-1]:void 0;a&&(i.exception.values=lf(Di(e,t,o,s.originalException,r,i.exception.values,a,0),n))}function Di(e,t,n,r,o,i,s,a){if(i.length>=n+1)return i;let c=[...i];if(Le(r[o],Error)){_c(s,a);let u=e(t,r[o]),l=c.length;yc(u,o,l,a),c=Di(e,t,n,r[o],o,[u,...c],u,l)}return Array.isArray(r.errors)&&r.errors.forEach((u,l)=>{if(Le(u,Error)){_c(s,a);let d=e(t,u),f=c.length;yc(d,`errors[${l}]`,f,a),c=Di(e,t,n,u,o,[d,...c],d,f)}}),c}function _c(e,t){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,...e.type==="AggregateError"&&{is_exception_group:!0},exception_id:t}}function yc(e,t,n,r){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,type:"chained",source:t,exception_id:n,parent_id:r}}function lf(e,t){return e.map(n=>(n.value&&(n.value=dt(n.value,t)),n))}var ze="8.29.0";var w=globalThis;function At(e,t,n){let r=n||w,o=r.__SENTRY__=r.__SENTRY__||{},i=o[ze]=o[ze]||{};return i[e]||(i[e]=t())}var hn=w,df=80;function ye(e,t={}){if(!e)return"<unknown>";try{let n=e,r=5,o=[],i=0,s=0,a=" > ",c=a.length,u,l=Array.isArray(t)?t:t.keyAttrs,d=!Array.isArray(t)&&t.maxStringLength||df;for(;n&&i++<r&&(u=ff(n,l),!(u==="html"||i>1&&s+o.length*c+u.length>=d));)o.push(u),s+=u.length,n=n.parentNode;return o.reverse().join(a)}catch{return"<unknown>"}}function ff(e,t){let n=e,r=[];if(!n||!n.tagName)return"";if(hn.HTMLElement&&n instanceof HTMLElement&&n.dataset){if(n.dataset.sentryComponent)return n.dataset.sentryComponent;if(n.dataset.sentryElement)return n.dataset.sentryElement}r.push(n.tagName.toLowerCase());let o=t&&t.length?t.filter(s=>n.getAttribute(s)).map(s=>[s,n.getAttribute(s)]):null;if(o&&o.length)o.forEach(s=>{r.push(`[${s[0]}="${s[1]}"]`)});else{n.id&&r.push(`#${n.id}`);let s=n.className;if(s&&ve(s)){let a=s.split(/\s+/);for(let c of a)r.push(`.${c}`)}}let i=["aria-label","type","name","title","alt"];for(let s of i){let a=n.getAttribute(s);a&&r.push(`[${s}="${a}"]`)}return r.join("")}function Wn(){try{return hn.document.location.href}catch{return""}}function Li(e){return hn.document&&hn.document.querySelector?hn.document.querySelector(e):null}function zn(e){if(!hn.HTMLElement)return null;let t=e,n=5;for(let r=0;r<n;r++){if(!t)return null;if(t instanceof HTMLElement){if(t.dataset.sentryComponent)return t.dataset.sentryComponent;if(t.dataset.sentryElement)return t.dataset.sentryElement}t=t.parentNode}return null}var Ge=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;var pf="Sentry Logger ",Gn=["debug","info","warn","error","log","assert","trace"],gn={};function je(e){if(!("console"in w))return e();let t=w.console,n={},r=Object.keys(gn);r.forEach(o=>{let i=gn[o];n[o]=t[o],t[o]=i});try{return e()}finally{r.forEach(o=>{t[o]=n[o]})}}function mf(){let e=!1,t={enable:()=>{e=!0},disable:()=>{e=!1},isEnabled:()=>e};return Ge?Gn.forEach(n=>{t[n]=(...r)=>{e&&je(()=>{w.console[n](`${pf}[${n}]:`,...r)})}}):Gn.forEach(n=>{t[n]=()=>{}}),t}var h=At("logger",mf);var hf=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function gf(e){return e==="http"||e==="https"}function Qe(e,t=!1){let{host:n,path:r,pass:o,port:i,projectId:s,protocol:a,publicKey:c}=e;return`${a}://${c}${t&&o?`:${o}`:""}@${n}${i?`:${i}`:""}/${r&&`${r}/`}${s}`}function Ec(e){let t=hf.exec(e);if(!t){je(()=>{console.error(`Invalid Sentry Dsn: ${e}`)});return}let[n,r,o="",i="",s="",a=""]=t.slice(1),c="",u=a,l=u.split("/");if(l.length>1&&(c=l.slice(0,-1).join("/"),u=l.pop()),u){let d=u.match(/^\d+/);d&&(u=d[0])}return Tc({host:i,pass:o,path:c,projectId:u,port:s,protocol:n,publicKey:r})}function Tc(e){return{protocol:e.protocol,publicKey:e.publicKey||"",pass:e.pass||"",host:e.host,port:e.port||"",path:e.path||"",projectId:e.projectId}}function Sf(e){if(!Ge)return!0;let{port:t,projectId:n,protocol:r}=e;return["protocol","publicKey","host","projectId"].find(s=>e[s]?!1:(h.error(`Invalid Sentry Dsn: ${s} missing`),!0))?!1:n.match(/^\d+$/)?gf(r)?t&&isNaN(parseInt(t,10))?(h.error(`Invalid Sentry Dsn: Invalid port ${t}`),!1):!0:(h.error(`Invalid Sentry Dsn: Invalid protocol ${r}`),!1):(h.error(`Invalid Sentry Dsn: Invalid projectId ${n}`),!1)}function Gr(e){let t=typeof e=="string"?Ec(e):Tc(e);if(!(!t||!Sf(t)))return t}var Ee=class extends Error{constructor(t,n="warn"){super(t),this.message=t,this.name=new.target.prototype.constructor.name,Object.setPrototypeOf(this,new.target.prototype),this.logLevel=n}};function le(e,t,n){if(!(t in e))return;let r=e[t],o=n(r);typeof o=="function"&&jr(o,r),e[t]=o}function de(e,t,n){try{Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0})}catch{Ge&&h.log(`Failed to add non-enumerable property "${t}" to object`,e)}}function jr(e,t){try{let n=t.prototype||{};e.prototype=t.prototype=n,de(e,"__sentry_original__",t)}catch{}}function Zt(e){return e.__sentry_original__}function Ui(e){return Object.keys(e).map(t=>`${encodeURIComponent(t)}=${encodeURIComponent(e[t])}`).join("&")}function qr(e){if(Jt(e))return{message:e.message,name:e.name,stack:e.stack,...bc(e)};if(Xt(e)){let t={type:e.type,target:Ic(e.target),currentTarget:Ic(e.currentTarget),...bc(e)};return typeof CustomEvent<"u"&&Le(e,CustomEvent)&&(t.detail=e.detail),t}else return e}function Ic(e){try{return Ni(e)?ye(e):Object.prototype.toString.call(e)}catch{return"<unknown>"}}function bc(e){if(typeof e=="object"&&e!==null){let t={};for(let n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}else return{}}function Bi(e,t=40){let n=Object.keys(qr(e));n.sort();let r=n[0];if(!r)return"[object has no keys]";if(r.length>=t)return dt(r,t);for(let o=n.length;o>0;o--){let i=n.slice(0,o).join(", ");if(!(i.length>t))return o===n.length?i:dt(i,t)}return""}function J(e){return Fi(e,new Map)}function Fi(e,t){if(_f(e)){let n=t.get(e);if(n!==void 0)return n;let r={};t.set(e,r);for(let o of Object.keys(e))typeof e[o]<"u"&&(r[o]=Fi(e[o],t));return r}if(Array.isArray(e)){let n=t.get(e);if(n!==void 0)return n;let r=[];return t.set(e,r),e.forEach(o=>{r.push(Fi(o,t))}),r}return e}function _f(e){if(!Ze(e))return!1;try{let t=Object.getPrototypeOf(e).constructor.name;return!t||t==="Object"}catch{return!0}}var ft="?",vc=/\(error: (.*)\)/,Cc=/captureMessage|captureException/;function Vr(...e){let t=e.sort((n,r)=>n[0]-r[0]).map(n=>n[1]);return(n,r=0,o=0)=>{let i=[],s=n.split(`
`);for(let a=r;a<s.length;a++){let c=s[a];if(c.length>1024)continue;let u=vc.test(c)?c.replace(vc,"$1"):c;if(!u.match(/\S*Error: /)){for(let l of t){let d=l(u);if(d){i.push(d);break}}if(i.length>=50+o)break}}return Rc(i.slice(o))}}function $i(e){return Array.isArray(e)?Vr(...e):e}function Rc(e){if(!e.length)return[];let t=Array.from(e);return/sentryWrapped/.test(Yr(t).function||"")&&t.pop(),t.reverse(),Cc.test(Yr(t).function||"")&&(t.pop(),Cc.test(Yr(t).function||"")&&t.pop()),t.slice(0,50).map(n=>({...n,filename:n.filename||Yr(t).filename,function:n.function||ft}))}function Yr(e){return e[e.length-1]||{}}var Hi="<anonymous>";function Me(e){try{return!e||typeof e!="function"?Hi:e.name||Hi}catch{return Hi}}function Jr(e){let t=e.exception;if(t){let n=[];try{return t.values.forEach(r=>{r.stacktrace.frames&&n.push(...r.stacktrace.frames)}),n}catch{return}}}var Kr={},wc={};function Te(e,t){Kr[e]=Kr[e]||[],Kr[e].push(t)}function Ie(e,t){wc[e]||(t(),wc[e]=!0)}function fe(e,t){let n=e&&Kr[e];if(n)for(let r of n)try{r(t)}catch(o){Ge&&h.error(`Error while triggering instrumentation handler.
Type: ${e}
Name: ${Me(r)}
Error:`,o)}}function Wi(e){let t="console";Te(t,e),Ie(t,yf)}function yf(){"console"in w&&Gn.forEach(function(e){e in w.console&&le(w.console,e,function(t){return gn[e]=t,function(...n){fe("console",{args:n,level:e});let o=gn[e];o&&o.apply(w.console,n)}})})}var zi=w;function Xr(){if(!("fetch"in zi))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch{return!1}}function jn(e){return e&&/^function\s+\w+\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}function Gi(){if(typeof EdgeRuntime=="string")return!0;if(!Xr())return!1;if(jn(zi.fetch))return!0;let e=!1,t=zi.document;if(t&&typeof t.createElement=="function")try{let n=t.createElement("iframe");n.hidden=!0,t.head.appendChild(n),n.contentWindow&&n.contentWindow.fetch&&(e=jn(n.contentWindow.fetch)),t.head.removeChild(n)}catch(n){Ge&&h.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",n)}return e}var xc=1e3;function pt(){return Date.now()/xc}function Ef(){let{performance:e}=w;if(!e||!e.now)return pt;let t=Date.now()-e.now(),n=e.timeOrigin==null?t:e.timeOrigin;return()=>(n+e.now())/xc}var ee=Ef(),qn,oe=(()=>{let{performance:e}=w;if(!e||!e.now){qn="none";return}let t=3600*1e3,n=e.now(),r=Date.now(),o=e.timeOrigin?Math.abs(e.timeOrigin+n-r):t,i=o<t,s=e.timing&&e.timing.navigationStart,c=typeof s=="number"?Math.abs(s+n-r):t,u=c<t;return i||u?o<=c?(qn="timeOrigin",e.timeOrigin):(qn="navigationStart",s):(qn="dateNow",r)})();function Yn(e,t){let n="fetch";Te(n,e),Ie(n,()=>Ac(void 0,t))}function qi(e){let t="fetch-body-resolved";Te(t,e),Ie(t,()=>Ac(If))}function Ac(e,t=!1){t&&!Gi()||le(w,"fetch",function(n){return function(...r){let{method:o,url:i}=bf(r),s={args:r,fetchData:{method:o,url:i},startTimestamp:ee()*1e3};e||fe("fetch",{...s});let a=new Error().stack;return n.apply(w,r).then(async c=>(e?e(c):fe("fetch",{...s,endTimestamp:ee()*1e3,response:c}),c),c=>{throw fe("fetch",{...s,endTimestamp:ee()*1e3,error:c}),Jt(c)&&c.stack===void 0&&(c.stack=a,de(c,"framesToPop",1)),c})}})}async function Tf(e,t){if(e&&e.body&&e.body.getReader){let n=e.body.getReader();async function r({done:o}){if(o)return Promise.resolve();try{let i=await Promise.race([n.read(),new Promise(s=>{setTimeout(()=>{s({done:!0})},5e3)})]);await r(i)}catch{}}return n.read().then(r).then(t).catch(()=>{})}}async function If(e){let t;try{t=e.clone()}catch{return}await Tf(t,()=>{fe("fetch-body-resolved",{endTimestamp:ee()*1e3,response:e})})}function ji(e,t){return!!e&&typeof e=="object"&&!!e[t]}function kc(e){return typeof e=="string"?e:e?ji(e,"url")?e.url:e.toString?e.toString():"":""}function bf(e){if(e.length===0)return{method:"GET",url:""};if(e.length===2){let[n,r]=e;return{url:kc(n),method:ji(r,"method")?String(r.method).toUpperCase():"GET"}}let t=e[0];return{url:kc(t),method:ji(t,"method")?String(t.method).toUpperCase():"GET"}}var Zr=null;function Vn(e){let t="error";Te(t,e),Ie(t,vf)}function vf(){Zr=w.onerror,w.onerror=function(e,t,n,r,o){return fe("error",{column:r,error:o,line:n,msg:e,url:t}),Zr&&!Zr.__SENTRY_LOADER__?Zr.apply(this,arguments):!1},w.onerror.__SENTRY_INSTRUMENTED__=!0}var Qr=null;function Jn(e){let t="unhandledrejection";Te(t,e),Ie(t,Cf)}function Cf(){Qr=w.onunhandledrejection,w.onunhandledrejection=function(e){return fe("unhandledrejection",e),Qr&&!Qr.__SENTRY_LOADER__?Qr.apply(this,arguments):!0},w.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}function Yi(){return typeof __SENTRY_BROWSER_BUNDLE__<"u"&&!!__SENTRY_BROWSER_BUNDLE__}function Vi(){return"npm"}function Nc(){return!Yi()&&Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]"}function eo(){return typeof window<"u"&&(!Nc()||Rf())}function Rf(){return w.process!==void 0&&w.process.type==="renderer"}function Mc(){let e=typeof WeakSet=="function",t=e?new WeakSet:[];function n(o){if(e)return t.has(o)?!0:(t.add(o),!1);for(let i=0;i<t.length;i++)if(t[i]===o)return!0;return t.push(o),!1}function r(o){if(e)t.delete(o);else for(let i=0;i<t.length;i++)if(t[i]===o){t.splice(i,1);break}}return[n,r]}function $(){let e=w,t=e.crypto||e.msCrypto,n=()=>Math.random()*16;try{if(t&&t.randomUUID)return t.randomUUID().replace(/-/g,"");t&&t.getRandomValues&&(n=()=>{let r=new Uint8Array(1);return t.getRandomValues(r),r[0]})}catch{}return("10000000100040008000"+1e11).replace(/[018]/g,r=>(r^(n()&15)>>r/4).toString(16))}function Oc(e){return e.exception&&e.exception.values?e.exception.values[0]:void 0}function et(e){let{message:t,event_id:n}=e;if(t)return t;let r=Oc(e);return r?r.type&&r.value?`${r.type}: ${r.value}`:r.type||r.value||n||"<unknown>":n||"<unknown>"}function Sn(e,t,n){let r=e.exception=e.exception||{},o=r.values=r.values||[],i=o[0]=o[0]||{};i.value||(i.value=t||""),i.type||(i.type=n||"Error")}function Tt(e,t){let n=Oc(e);if(!n)return;let r={type:"generic",handled:!0},o=n.mechanism;if(n.mechanism={...r,...o,...t},t&&"data"in t){let i={...o&&o.data,...t.data};n.mechanism.data=i}}function to(e){if(e&&e.__sentry_captured__)return!0;try{de(e,"__sentry_captured__",!0)}catch{}return!1}function Kn(e){return Array.isArray(e)?e:[e]}function Oe(e,t=100,n=1/0){try{return Ji("",e,t,n)}catch(r){return{ERROR:`**non-serializable** (${r})`}}}function no(e,t=3,n=100*1024){let r=Oe(e,t);return Af(r)>n?no(e,t-1,n):r}function Ji(e,t,n=1/0,r=1/0,o=Mc()){let[i,s]=o;if(t==null||["number","boolean","string"].includes(typeof t)&&!Number.isNaN(t))return t;let a=wf(e,t);if(!a.startsWith("[object "))return a;if(t.__sentry_skip_normalization__)return t;let c=typeof t.__sentry_override_normalization_depth__=="number"?t.__sentry_override_normalization_depth__:n;if(c===0)return a.replace("object ","");if(i(t))return"[Circular ~]";let u=t;if(u&&typeof u.toJSON=="function")try{let p=u.toJSON();return Ji("",p,c-1,r,o)}catch{}let l=Array.isArray(t)?[]:{},d=0,f=qr(t);for(let p in f){if(!Object.prototype.hasOwnProperty.call(f,p))continue;if(d>=r){l[p]="[MaxProperties ~]";break}let m=f[p];l[p]=Ji(p,m,c-1,r,o),d++}return s(t),l}function wf(e,t){try{if(e==="domain"&&t&&typeof t=="object"&&t._events)return"[Domain]";if(e==="domainEmitter")return"[DomainEmitter]";if(typeof global<"u"&&t===global)return"[Global]";if(typeof window<"u"&&t===window)return"[Window]";if(typeof document<"u"&&t===document)return"[Document]";if($n(t))return"[VueViewModel]";if(Oi(t))return"[SyntheticEvent]";if(typeof t=="number"&&t!==t)return"[NaN]";if(typeof t=="function")return`[Function: ${Me(t)}]`;if(typeof t=="symbol")return`[${String(t)}]`;if(typeof t=="bigint")return`[BigInt: ${String(t)}]`;let n=xf(t);return/^HTML(\w*)Element$/.test(n)?`[HTMLElement: ${n}]`:`[object ${n}]`}catch(n){return`**non-serializable** (${n})`}}function xf(e){let t=Object.getPrototypeOf(e);return t?t.constructor.name:"null prototype"}function kf(e){return~-encodeURI(e).split(/%..|./).length}function Af(e){return kf(JSON.stringify(e))}var It;(function(e){e[e.PENDING=0]="PENDING";let n=1;e[e.RESOLVED=n]="RESOLVED";let r=2;e[e.REJECTED=r]="REJECTED"})(It||(It={}));function Ce(e){return new tt(t=>{t(e)})}function Nt(e){return new tt((t,n)=>{n(e)})}var tt=class e{constructor(t){e.prototype.__init.call(this),e.prototype.__init2.call(this),e.prototype.__init3.call(this),e.prototype.__init4.call(this),this._state=It.PENDING,this._handlers=[];try{t(this._resolve,this._reject)}catch(n){this._reject(n)}}then(t,n){return new e((r,o)=>{this._handlers.push([!1,i=>{if(!t)r(i);else try{r(t(i))}catch(s){o(s)}},i=>{if(!n)o(i);else try{r(n(i))}catch(s){o(s)}}]),this._executeHandlers()})}catch(t){return this.then(n=>n,t)}finally(t){return new e((n,r)=>{let o,i;return this.then(s=>{i=!1,o=s,t&&t()},s=>{i=!0,o=s,t&&t()}).then(()=>{if(i){r(o);return}n(o)})})}__init(){this._resolve=t=>{this._setResult(It.RESOLVED,t)}}__init2(){this._reject=t=>{this._setResult(It.REJECTED,t)}}__init3(){this._setResult=(t,n)=>{if(this._state===It.PENDING){if(lt(n)){n.then(this._resolve,this._reject);return}this._state=t,this._value=n,this._executeHandlers()}}}__init4(){this._executeHandlers=()=>{if(this._state===It.PENDING)return;let t=this._handlers.slice();this._handlers=[],t.forEach(n=>{n[0]||(this._state===It.RESOLVED&&n[1](this._value),this._state===It.REJECTED&&n[2](this._value),n[0]=!0)})}}};function Ki(e){let t=[];function n(){return e===void 0||t.length<e}function r(s){return t.splice(t.indexOf(s),1)[0]||Promise.resolve(void 0)}function o(s){if(!n())return Nt(new Ee("Not adding Promise because buffer limit was reached."));let a=s();return t.indexOf(a)===-1&&t.push(a),a.then(()=>r(a)).then(null,()=>r(a).then(null,()=>{})),a}function i(s){return new tt((a,c)=>{let u=t.length;if(!u)return a(!0);let l=setTimeout(()=>{s&&s>0&&a(!1)},s);t.forEach(d=>{Ce(d).then(()=>{--u||(clearTimeout(l),a(!0))},c)})})}return{$:t,add:o,drain:i}}function qe(e){if(!e)return{};let t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};let n=t[6]||"",r=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],search:n,hash:r,relative:t[5]+n+r}}var Dc=["fatal","error","warning","log","info","debug"];function Xi(e){return e==="warn"?"warning":Dc.includes(e)?e:"log"}var _n="baggage",Zi="sentry-",Lc=/^sentry-/,Fc=8192;function Xn(e){let t=Uc(e);if(!t)return;let n=Object.entries(t).reduce((r,[o,i])=>{if(o.match(Lc)){let s=o.slice(Zi.length);r[s]=i}return r},{});if(Object.keys(n).length>0)return n}function yn(e){if(!e)return;let t=Object.entries(e).reduce((n,[r,o])=>(o&&(n[`${Zi}${r}`]=o),n),{});return Nf(t)}function Uc(e){if(!(!e||!ve(e)&&!Array.isArray(e)))return Array.isArray(e)?e.reduce((t,n)=>{let r=Pc(n);return Object.entries(r).forEach(([o,i])=>{t[o]=i}),t},{}):Pc(e)}function Pc(e){return e.split(",").map(t=>t.split("=").map(n=>decodeURIComponent(n.trim()))).reduce((t,[n,r])=>(n&&r&&(t[n]=r),t),{})}function Nf(e){if(Object.keys(e).length!==0)return Object.entries(e).reduce((t,[n,r],o)=>{let i=`${encodeURIComponent(n)}=${encodeURIComponent(r)}`,s=o===0?i:`${t},${i}`;return s.length>Fc?(Ge&&h.warn(`Not adding key: ${n} with val: ${r} to baggage header due to exceeding baggage size limits.`),t):s},"")}var Bc=new RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");function Hc(e){if(!e)return;let t=e.match(Bc);if(!t)return;let n;return t[3]==="1"?n=!0:t[3]==="0"&&(n=!1),{traceId:t[1],parentSampled:n,parentSpanId:t[2]}}function Qi(e,t){let n=Hc(e),r=Xn(t),{traceId:o,parentSpanId:i,parentSampled:s}=n||{};return n?{traceId:o||$(),parentSpanId:i||$().substring(16),spanId:$().substring(16),sampled:s,dsc:r||{}}:{traceId:o||$(),spanId:$().substring(16)}}function Qt(e=$(),t=$().substring(16),n){let r="";return n!==void 0&&(r=n?"-1":"-0"),`${e}-${t}${r}`}function Fe(e,t=[]){return[e,t]}function ts(e,t){let[n,r]=e;return[n,[...r,t]]}function En(e,t){let n=e[1];for(let r of n){let o=r[0].type;if(t(r,o))return!0}return!1}function es(e){return w.__SENTRY__&&w.__SENTRY__.encodePolyfill?w.__SENTRY__.encodePolyfill(e):new TextEncoder().encode(e)}function ns(e){let[t,n]=e,r=JSON.stringify(t);function o(i){typeof r=="string"?r=typeof i=="string"?r+i:[es(r),i]:r.push(typeof i=="string"?es(i):i)}for(let i of n){let[s,a]=i;if(o(`
${JSON.stringify(s)}
`),typeof a=="string"||a instanceof Uint8Array)o(a);else{let c;try{c=JSON.stringify(a)}catch{c=JSON.stringify(Oe(a))}o(c)}}return typeof r=="string"?r:Mf(r)}function Mf(e){let t=e.reduce((o,i)=>o+i.length,0),n=new Uint8Array(t),r=0;for(let o of e)n.set(o,r),r+=o.length;return n}function rs(e){return[{type:"span"},e]}function os(e){let t=typeof e.data=="string"?es(e.data):e.data;return[J({type:"attachment",length:t.length,filename:e.filename,content_type:e.contentType,attachment_type:e.attachmentType}),t]}var Of={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",profile_chunk:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",statsd:"metric_bucket"};function ro(e){return Of[e]}function Tn(e){if(!e||!e.sdk)return;let{name:t,version:n}=e.sdk;return{name:t,version:n}}function Zn(e,t,n,r){let o=e.sdkProcessingMetadata&&e.sdkProcessingMetadata.dynamicSamplingContext;return{event_id:e.event_id,sent_at:new Date().toISOString(),...t&&{sdk:t},...!!n&&r&&{dsn:Qe(r)},...o&&{trace:J({...o})}}}function is(e,t,n){let r=[{type:"client_report"},{timestamp:n||pt(),discarded_events:e}];return Fe(t?{dsn:t}:{},[r])}function $c(e,t=Date.now()){let n=parseInt(`${e}`,10);if(!isNaN(n))return n*1e3;let r=Date.parse(`${e}`);return isNaN(r)?6e4:r-t}function Wc(e,t){return e[t]||e.all||0}function Qn(e,t,n=Date.now()){return Wc(e,t)>n}function er(e,{statusCode:t,headers:n},r=Date.now()){let o={...e},i=n&&n["x-sentry-rate-limits"],s=n&&n["retry-after"];if(i)for(let a of i.trim().split(",")){let[c,u,,,l]=a.split(":",5),d=parseInt(c,10),f=(isNaN(d)?60:d)*1e3;if(!u)o.all=r+f;else for(let p of u.split(";"))p==="metric_bucket"?(!l||l.split(";").includes("custom"))&&(o[p]=r+f):o[p]=r+f}else s?o.all=r+$c(s,r):t===429&&(o.all=r+60*1e3);return o}function ss(e,t){return e??t()}function he(e){let t,n=e[0],r=1;for(;r<e.length;){let o=e[r],i=e[r+1];if(r+=2,(o==="optionalAccess"||o==="optionalCall")&&n==null)return;o==="access"||o==="optionalAccess"?(t=n,n=i(n)):(o==="call"||o==="optionalCall")&&(n=i((...s)=>n.call(t,...s)),t=void 0)}return n}function en(){return{traceId:$(),spanId:$().substring(16)}}var oo=w;function as(){let e=oo.chrome,t=e&&e.app&&e.app.runtime,n="history"in oo&&!!oo.history.pushState&&!!oo.history.replaceState;return!t&&n}var A=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;function nt(){return tr(w),w}function tr(e){let t=e.__SENTRY__=e.__SENTRY__||{};return t.version=t.version||ze,t[ze]=t[ze]||{}}function zc(e){let t=ee(),n={sid:$(),init:!0,timestamp:t,started:t,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>Df(n)};return e&&bt(n,e),n}function bt(e,t={}){if(t.user&&(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),!e.did&&!t.did&&(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||ee(),t.abnormal_mechanism&&(e.abnormal_mechanism=t.abnormal_mechanism),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=t.sid.length===32?t.sid:$()),t.init!==void 0&&(e.init=t.init),!e.did&&t.did&&(e.did=`${t.did}`),typeof t.started=="number"&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if(typeof t.duration=="number")e.duration=t.duration;else{let n=e.timestamp-e.started;e.duration=n>=0?n:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),typeof t.errors=="number"&&(e.errors=t.errors),t.status&&(e.status=t.status)}function Gc(e,t){let n={};t?n={status:t}:e.status==="ok"&&(n={status:"exited"}),bt(e,n)}function Df(e){return J({sid:`${e.sid}`,init:e.init,started:new Date(e.started*1e3).toISOString(),timestamp:new Date(e.timestamp*1e3).toISOString(),status:e.status,errors:e.errors,did:typeof e.did=="number"||typeof e.did=="string"?`${e.did}`:void 0,duration:e.duration,abnormal_mechanism:e.abnormal_mechanism,attrs:{release:e.release,environment:e.environment,ip_address:e.ipAddress,user_agent:e.userAgent}})}var cs="_sentrySpan";function Mt(e,t){t?de(e,cs,t):delete e[cs]}function tn(e){return e[cs]}var Pf=100,us=class e{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext=en()}clone(){let t=new e;return t._breadcrumbs=[...this._breadcrumbs],t._tags={...this._tags},t._extra={...this._extra},t._contexts={...this._contexts},t._user=this._user,t._level=this._level,t._session=this._session,t._transactionName=this._transactionName,t._fingerprint=this._fingerprint,t._eventProcessors=[...this._eventProcessors],t._requestSession=this._requestSession,t._attachments=[...this._attachments],t._sdkProcessingMetadata={...this._sdkProcessingMetadata},t._propagationContext={...this._propagationContext},t._client=this._client,t._lastEventId=this._lastEventId,Mt(t,tn(this)),t}setClient(t){this._client=t}setLastEventId(t){this._lastEventId=t}getClient(){return this._client}lastEventId(){return this._lastEventId}addScopeListener(t){this._scopeListeners.push(t)}addEventProcessor(t){return this._eventProcessors.push(t),this}setUser(t){return this._user=t||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&bt(this._session,{user:t}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(t){return this._requestSession=t,this}setTags(t){return this._tags={...this._tags,...t},this._notifyScopeListeners(),this}setTag(t,n){return this._tags={...this._tags,[t]:n},this._notifyScopeListeners(),this}setExtras(t){return this._extra={...this._extra,...t},this._notifyScopeListeners(),this}setExtra(t,n){return this._extra={...this._extra,[t]:n},this._notifyScopeListeners(),this}setFingerprint(t){return this._fingerprint=t,this._notifyScopeListeners(),this}setLevel(t){return this._level=t,this._notifyScopeListeners(),this}setTransactionName(t){return this._transactionName=t,this._notifyScopeListeners(),this}setContext(t,n){return n===null?delete this._contexts[t]:this._contexts[t]=n,this._notifyScopeListeners(),this}setSession(t){return t?this._session=t:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(t){if(!t)return this;let n=typeof t=="function"?t(this):t,[r,o]=n instanceof Ue?[n.getScopeData(),n.getRequestSession()]:Ze(n)?[t,t.requestSession]:[],{tags:i,extra:s,user:a,contexts:c,level:u,fingerprint:l=[],propagationContext:d}=r||{};return this._tags={...this._tags,...i},this._extra={...this._extra,...s},this._contexts={...this._contexts,...c},a&&Object.keys(a).length&&(this._user=a),u&&(this._level=u),l.length&&(this._fingerprint=l),d&&(this._propagationContext=d),o&&(this._requestSession=o),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._session=void 0,Mt(this,void 0),this._attachments=[],this._propagationContext=en(),this._notifyScopeListeners(),this}addBreadcrumb(t,n){let r=typeof n=="number"?n:Pf;if(r<=0)return this;let o={timestamp:pt(),...t},i=this._breadcrumbs;return i.push(o),this._breadcrumbs=i.length>r?i.slice(-r):i,this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(t){return this._attachments.push(t),this}clearAttachments(){return this._attachments=[],this}getScopeData(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:tn(this)}}setSDKProcessingMetadata(t){return this._sdkProcessingMetadata={...this._sdkProcessingMetadata,...t},this}setPropagationContext(t){return this._propagationContext=t,this}getPropagationContext(){return this._propagationContext}captureException(t,n){let r=n&&n.event_id?n.event_id:$();if(!this._client)return h.warn("No client configured on scope - will not capture exception!"),r;let o=new Error("Sentry syntheticException");return this._client.captureException(t,{originalException:t,syntheticException:o,...n,event_id:r},this),r}captureMessage(t,n,r){let o=r&&r.event_id?r.event_id:$();if(!this._client)return h.warn("No client configured on scope - will not capture message!"),o;let i=new Error(t);return this._client.captureMessage(t,n,{originalException:t,syntheticException:i,...r,event_id:o},this),o}captureEvent(t,n){let r=n&&n.event_id?n.event_id:$();return this._client?(this._client.captureEvent(t,{...n,event_id:r},this),r):(h.warn("No client configured on scope - will not capture event!"),r)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(t=>{t(this)}),this._notifyingListeners=!1)}},Ue=us;function jc(){return At("defaultCurrentScope",()=>new Ue)}function qc(){return At("defaultIsolationScope",()=>new Ue)}var ls=class{constructor(t,n){let r;t?r=t:r=new Ue;let o;n?o=n:o=new Ue,this._stack=[{scope:r}],this._isolationScope=o}withScope(t){let n=this._pushScope(),r;try{r=t(n)}catch(o){throw this._popScope(),o}return lt(r)?r.then(o=>(this._popScope(),o),o=>{throw this._popScope(),o}):(this._popScope(),r)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStackTop(){return this._stack[this._stack.length-1]}_pushScope(){let t=this.getScope().clone();return this._stack.push({client:this.getClient(),scope:t}),t}_popScope(){return this._stack.length<=1?!1:!!this._stack.pop()}};function In(){let e=nt(),t=tr(e);return t.stack=t.stack||new ls(jc(),qc())}function Lf(e){return In().withScope(e)}function Ff(e,t){let n=In();return n.withScope(()=>(n.getStackTop().scope=e,t(e)))}function Yc(e){return In().withScope(()=>e(In().getIsolationScope()))}function Vc(){return{withIsolationScope:Yc,withScope:Lf,withSetScope:Ff,withSetIsolationScope:(e,t)=>Yc(t),getCurrentScope:()=>In().getScope(),getIsolationScope:()=>In().getIsolationScope()}}function Ot(e){let t=tr(e);return t.acs?t.acs:Vc()}function F(){let e=nt();return Ot(e).getCurrentScope()}function ae(){let e=nt();return Ot(e).getIsolationScope()}function io(){return At("globalScope",()=>new Ue)}function nn(...e){let t=nt(),n=Ot(t);if(e.length===2){let[r,o]=e;return r?n.withSetScope(r,o):n.withScope(o)}return n.withScope(e[0])}function v(){return F().getClient()}var Uf="_sentryMetrics";function nr(e){let t=e[Uf];if(!t)return;let n={};for(let[,[r,o]]of t)(n[r]||(n[r]=[])).push(J(o));return n}var be="sentry.source",bn="sentry.sample_rate",Re="sentry.op",te="sentry.origin",vn="sentry.idle_span_finish_reason",Dt="sentry.measurement_unit",Pt="sentry.measurement_value",ds="sentry.profile_id",rn="sentry.exclusive_time";function fs(e){if(e<400&&e>=100)return{code:1};if(e>=400&&e<500)switch(e){case 401:return{code:2,message:"unauthenticated"};case 403:return{code:2,message:"permission_denied"};case 404:return{code:2,message:"not_found"};case 409:return{code:2,message:"already_exists"};case 413:return{code:2,message:"failed_precondition"};case 429:return{code:2,message:"resource_exhausted"};case 499:return{code:2,message:"cancelled"};default:return{code:2,message:"invalid_argument"}}if(e>=500&&e<600)switch(e){case 501:return{code:2,message:"unimplemented"};case 503:return{code:2,message:"unavailable"};case 504:return{code:2,message:"deadline_exceeded"};default:return{code:2,message:"internal_error"}}return{code:2,message:"unknown_error"}}function Cn(e,t){e.setAttribute("http.response.status_code",t);let n=fs(t);n.message!=="unknown_error"&&e.setStatus(n)}var so=0,ms=1;function Kc(e){let{spanId:t,traceId:n}=e.spanContext(),{data:r,op:o,parent_span_id:i,status:s,origin:a}=x(e);return J({parent_span_id:i,span_id:t,trace_id:n,data:r,op:o,status:s,origin:a})}function hs(e){let{spanId:t,traceId:n}=e.spanContext(),{parent_span_id:r}=x(e);return J({parent_span_id:r,span_id:t,trace_id:n})}function Rn(e){let{traceId:t,spanId:n}=e.spanContext(),r=Ye(e);return Qt(t,n,r)}function rt(e){return typeof e=="number"?Jc(e):Array.isArray(e)?e[0]+e[1]/1e9:e instanceof Date?Jc(e.getTime()):ee()}function Jc(e){return e>9999999999?e/1e3:e}function x(e){if(Wf(e))return e.getSpanJSON();try{let{spanId:t,traceId:n}=e.spanContext();if($f(e)){let{attributes:r,startTime:o,name:i,endTime:s,parentSpanId:a,status:c}=e;return J({span_id:t,trace_id:n,data:r,description:i,parent_span_id:a,start_timestamp:rt(o),timestamp:rt(s)||void 0,status:ao(c),op:r[Re],origin:r[te],_metrics_summary:nr(e)})}return{span_id:t,trace_id:n}}catch{return{}}}function $f(e){let t=e;return!!t.attributes&&!!t.startTime&&!!t.name&&!!t.endTime&&!!t.status}function Wf(e){return typeof e.getSpanJSON=="function"}function Ye(e){let{traceFlags:t}=e.spanContext();return t===ms}function ao(e){if(!(!e||e.code===0))return e.code===1?"ok":e.message||"unknown_error"}var on="_sentryChildSpans",ps="_sentryRootSpan";function co(e,t){let n=e[ps]||e;de(t,ps,n),e[on]?e[on].add(t):de(e,on,new Set([t]))}function Xc(e,t){e[on]&&e[on].delete(t)}function Lt(e){let t=new Set;function n(r){if(!t.has(r)&&Ye(r)){t.add(r);let o=r[on]?Array.from(r[on]):[];for(let i of o)n(i)}}return n(e),Array.from(t)}function j(e){return e[ps]||e}function K(){let e=nt(),t=Ot(e);return t.getActiveSpan?t.getActiveSpan():tn(F())}var Zc=!1;function uo(){Zc||(Zc=!0,Vn(gs),Jn(gs))}function gs(){let e=K(),t=e&&j(e);if(t){let n="internal_error";A&&h.log(`[Tracing] Root span: ${n} -> Global error occured`),t.setStatus({code:2,message:n})}}gs.tag="sentry_tracingErrorCallback";var Qc="_sentryScope",eu="_sentryIsolationScope";function tu(e,t,n){e&&(de(e,eu,n),de(e,Qc,t))}function Ss(e){return{scope:e[Qc],isolationScope:e[eu]}}function De(e){if(typeof __SENTRY_TRACING__=="boolean"&&!__SENTRY_TRACING__)return!1;let t=v(),n=e||t&&t.getOptions();return!!n&&(n.enableTracing||"tracesSampleRate"in n||"tracesSampler"in n)}var Be=class{constructor(t={}){this._traceId=t.traceId||$(),this._spanId=t.spanId||$().substring(16)}spanContext(){return{spanId:this._spanId,traceId:this._traceId,traceFlags:so}}end(t){}setAttribute(t,n){return this}setAttributes(t){return this}setStatus(t){return this}updateName(t){return this}isRecording(){return!1}addEvent(t,n,r){return this}addLink(t){return this}addLinks(t){return this}recordException(t,n){}};var vt="production";var nu="_frozenDsc";function _s(e,t){de(e,nu,t)}function Ft(e,t){let n=t.getOptions(),{publicKey:r}=t.getDsn()||{},o=J({environment:n.environment||vt,release:n.release,public_key:r,trace_id:e});return t.emit("createDsc",o),o}function we(e){let t=v();if(!t)return{};let n=Ft(x(e).trace_id||"",t),r=j(e),o=r[nu];if(o)return o;let i=r.spanContext().traceState,s=i&&i.get("sentry.dsc"),a=s&&Xn(s);if(a)return a;let c=x(r),u=c.data||{},l=u[bn];l!=null&&(n.sample_rate=`${l}`);let d=u[be],f=c.description;return d!=="url"&&f&&(n.transaction=f),n.sampled=String(Ye(r)),t.emit("createDsc",n,r),n}function ru(e){if(!A)return;let{description:t="< unknown name >",op:n="< unknown op >",parent_span_id:r}=x(e),{spanId:o}=e.spanContext(),i=Ye(e),s=j(e),a=s===e,c=`[Tracing] Starting ${i?"sampled":"unsampled"} ${a?"root ":""}span`,u=[`op: ${n}`,`name: ${t}`,`ID: ${o}`];if(r&&u.push(`parent ID: ${r}`),!a){let{op:l,description:d}=x(s);u.push(`root ID: ${s.spanContext().spanId}`),l&&u.push(`root op: ${l}`),d&&u.push(`root description: ${d}`)}h.log(`${c}
  ${u.join(`
  `)}`)}function ou(e){if(!A)return;let{description:t="< unknown name >",op:n="< unknown op >"}=x(e),{spanId:r}=e.spanContext(),i=j(e)===e,s=`[Tracing] Finishing "${n}" ${i?"root ":""}span "${t}" with ID ${r}`;h.log(s)}function Ut(e){if(typeof e=="boolean")return Number(e);let t=typeof e=="string"?parseFloat(e):e;if(typeof t!="number"||isNaN(t)||t<0||t>1){A&&h.warn(`[Tracing] Given sample rate is invalid. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(e)} of type ${JSON.stringify(typeof e)}.`);return}return t}function iu(e,t){if(!De(e))return[!1];let n;typeof e.tracesSampler=="function"?n=e.tracesSampler(t):t.parentSampled!==void 0?n=t.parentSampled:typeof e.tracesSampleRate<"u"?n=e.tracesSampleRate:n=1;let r=Ut(n);return r===void 0?(A&&h.warn("[Tracing] Discarding transaction because of invalid sample rate."),[!1]):r?Math.random()<r?[!0,r]:(A&&h.log(`[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ${Number(n)})`),[!1,r]):(A&&h.log(`[Tracing] Discarding transaction because ${typeof e.tracesSampler=="function"?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0"}`),[!1,r])}function zf(e,t){return t&&(e.sdk=e.sdk||{},e.sdk.name=e.sdk.name||t.name,e.sdk.version=e.sdk.version||t.version,e.sdk.integrations=[...e.sdk.integrations||[],...t.integrations||[]],e.sdk.packages=[...e.sdk.packages||[],...t.packages||[]]),e}function su(e,t,n,r){let o=Tn(n),i={sent_at:new Date().toISOString(),...o&&{sdk:o},...!!r&&t&&{dsn:Qe(t)}},s="aggregates"in e?[{type:"sessions"},e]:[{type:"session"},e.toJSON()];return Fe(i,[s])}function au(e,t,n,r){let o=Tn(n),i=e.type&&e.type!=="replay_event"?e.type:"event";zf(e,n&&n.sdk);let s=Zn(e,o,r,t);return delete e.sdkProcessingMetadata,Fe(s,[[{type:i},e]])}function cu(e,t){function n(l){return!!l.trace_id&&!!l.public_key}let r=we(e[0]),o=t&&t.getDsn(),i=t&&t.getOptions().tunnel,s={sent_at:new Date().toISOString(),...n(r)&&{trace:r},...!!i&&o&&{dsn:Qe(o)}},a=t&&t.getOptions().beforeSendSpan,c=a?l=>a(x(l)):l=>x(l),u=[];for(let l of e){let d=c(l);d&&u.push(rs(d))}return Fe(s,u)}function lo(e,t,n){let r=K(),o=r&&j(r);o&&o.addEvent(e,{[Pt]:t,[Dt]:n})}function fo(e){if(!e||e.length===0)return;let t={};return e.forEach(n=>{let r=n.attributes||{},o=r[Dt],i=r[Pt];typeof o=="string"&&typeof i=="number"&&(t[n.name]={value:i,unit:o})}),t}var uu=1e3,wn=class{constructor(t={}){this._traceId=t.traceId||$(),this._spanId=t.spanId||$().substring(16),this._startTime=t.startTimestamp||ee(),this._attributes={},this.setAttributes({[te]:"manual",[Re]:t.op,...t.attributes}),this._name=t.name,t.parentSpanId&&(this._parentSpanId=t.parentSpanId),"sampled"in t&&(this._sampled=t.sampled),t.endTimestamp&&(this._endTime=t.endTimestamp),this._events=[],this._isStandaloneSpan=t.isStandalone,this._endTime&&this._onSpanEnded()}addLink(t){return this}addLinks(t){return this}recordException(t,n){}spanContext(){let{_spanId:t,_traceId:n,_sampled:r}=this;return{spanId:t,traceId:n,traceFlags:r?ms:so}}setAttribute(t,n){return n===void 0?delete this._attributes[t]:this._attributes[t]=n,this}setAttributes(t){return Object.keys(t).forEach(n=>this.setAttribute(n,t[n])),this}updateStartTime(t){this._startTime=rt(t)}setStatus(t){return this._status=t,this}updateName(t){return this._name=t,this}end(t){this._endTime||(this._endTime=rt(t),ou(this),this._onSpanEnded())}getSpanJSON(){return J({data:this._attributes,description:this._name,op:this._attributes[Re],parent_span_id:this._parentSpanId,span_id:this._spanId,start_timestamp:this._startTime,status:ao(this._status),timestamp:this._endTime,trace_id:this._traceId,origin:this._attributes[te],_metrics_summary:nr(this),profile_id:this._attributes[ds],exclusive_time:this._attributes[rn],measurements:fo(this._events),is_segment:this._isStandaloneSpan&&j(this)===this||void 0,segment_id:this._isStandaloneSpan?j(this).spanContext().spanId:void 0})}isRecording(){return!this._endTime&&!!this._sampled}addEvent(t,n,r){A&&h.log("[Tracing] Adding an event to span:",t);let o=lu(n)?n:r||ee(),i=lu(n)?{}:n||{},s={name:t,time:rt(o),attributes:i};return this._events.push(s),this}isStandaloneSpan(){return!!this._isStandaloneSpan}_onSpanEnded(){let t=v();if(t&&t.emit("spanEnd",this),!(this._isStandaloneSpan||this===j(this)))return;if(this._isStandaloneSpan){this._sampled?jf(cu([this],t)):(A&&h.log("[Tracing] Discarding standalone span because its trace was not chosen to be sampled."),t&&t.recordDroppedEvent("sample_rate","span"));return}let r=this._convertSpanToTransaction();r&&(Ss(this).scope||F()).captureEvent(r)}_convertSpanToTransaction(){if(!du(x(this)))return;this._name||(A&&h.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this._name="<unlabeled transaction>");let{scope:t,isolationScope:n}=Ss(this),o=(t||F()).getClient()||v();if(this._sampled!==!0){A&&h.log("[Tracing] Discarding transaction because its trace was not chosen to be sampled."),o&&o.recordDroppedEvent("sample_rate","transaction");return}let s=Lt(this).filter(d=>d!==this&&!Gf(d)).map(d=>x(d)).filter(du),a=this._attributes[be],c={contexts:{trace:Kc(this)},spans:s.length>uu?s.sort((d,f)=>d.start_timestamp-f.start_timestamp).slice(0,uu):s,start_timestamp:this._startTime,timestamp:this._endTime,transaction:this._name,type:"transaction",sdkProcessingMetadata:{capturedSpanScope:t,capturedSpanIsolationScope:n,...J({dynamicSamplingContext:we(this)})},_metrics_summary:nr(this),...a&&{transaction_info:{source:a}}},u=fo(this._events);return u&&Object.keys(u).length&&(A&&h.log("[Measurements] Adding measurements to transaction event",JSON.stringify(u,void 0,2)),c.measurements=u),c}};function lu(e){return e&&typeof e=="number"||e instanceof Date||Array.isArray(e)}function du(e){return!!e.start_timestamp&&!!e.timestamp&&!!e.span_id&&!!e.trace_id}function Gf(e){return e instanceof wn&&e.isStandaloneSpan()}function jf(e){let t=v();if(!t)return;let n=e[1];if(!n||n.length===0){t.recordDroppedEvent("before_send","span");return}let r=t.getTransport();r&&r.send(e).then(null,o=>{A&&h.error("Error while sending span:",o)})}var pu="__SENTRY_SUPPRESS_TRACING__";function xe(e){let t=mu();if(t.startInactiveSpan)return t.startInactiveSpan(e);let n=Yf(e),{forceTransaction:r,parentSpan:o}=e;return(e.scope?s=>nn(e.scope,s):o!==void 0?s=>rr(o,s):s=>s())(()=>{let s=F(),a=Jf(s);return e.onlyIfParent&&!a?new Be:qf({parentSpan:a,spanArguments:n,forceTransaction:r,scope:s})})}function rr(e,t){let n=mu();return n.withActiveSpan?n.withActiveSpan(e,t):nn(r=>(Mt(r,e||void 0),t(r)))}function qf({parentSpan:e,spanArguments:t,forceTransaction:n,scope:r}){if(!De())return new Be;let o=ae(),i;if(e&&!n)i=Vf(e,r,t),co(e,i);else if(e){let s=we(e),{traceId:a,spanId:c}=e.spanContext(),u=Ye(e);i=fu({traceId:a,parentSpanId:c,...t},r,u),_s(i,s)}else{let{traceId:s,dsc:a,parentSpanId:c,sampled:u}={...o.getPropagationContext(),...r.getPropagationContext()};i=fu({traceId:s,parentSpanId:c,...t},r,u),a&&_s(i,a)}return ru(i),tu(i,r,o),i}function Yf(e){let n={isStandalone:(e.experimental||{}).standalone,...e};if(e.startTime){let r={...n};return r.startTimestamp=rt(e.startTime),delete r.startTime,r}return n}function mu(){let e=nt();return Ot(e)}function fu(e,t,n){let r=v(),o=r&&r.getOptions()||{},{name:i="",attributes:s}=e,[a,c]=t.getScopeData().sdkProcessingMetadata[pu]?[!1]:iu(o,{name:i,parentSampled:n,attributes:s,transactionContext:{name:i,parentSampled:n}}),u=new wn({...e,attributes:{[be]:"custom",...e.attributes},sampled:a});return c!==void 0&&u.setAttribute(bn,c),r&&r.emit("spanStart",u),u}function Vf(e,t,n){let{spanId:r,traceId:o}=e.spanContext(),i=t.getScopeData().sdkProcessingMetadata[pu]?!1:Ye(e),s=i?new wn({...n,parentSpanId:r,traceId:o,sampled:i}):new Be({traceId:o});co(e,s);let a=v();return a&&(a.emit("spanStart",s),n.endTimestamp&&a.emit("spanEnd",s)),s}function Jf(e){let t=tn(e);if(!t)return;let n=v();return(n?n.getOptions():{}).parentSpanIsAlwaysRootSpan?j(t):t}var xn={idleTimeout:1e3,finalTimeout:3e4,childSpanTimeout:15e3},Kf="heartbeatFailed",Xf="idleTimeout",Zf="finalTimeout",Qf="externalFinish";function po(e,t={}){let n=new Map,r=!1,o,i=Qf,s=!t.disableAutoFinish,a=[],{idleTimeout:c=xn.idleTimeout,finalTimeout:u=xn.finalTimeout,childSpanTimeout:l=xn.childSpanTimeout,beforeSpanEnd:d}=t,f=v();if(!f||!De())return new Be;let p=F(),m=K(),g=ep(e);g.end=new Proxy(g.end,{apply(_,S,R){d&&d(g);let[z,...E]=R,C=z||ee(),P=rt(C),X=Lt(g).filter(Z=>Z!==g);if(!X.length)return M(P),Reflect.apply(_,S,[P,...E]);let Q=X.map(Z=>x(Z).timestamp).filter(Z=>!!Z),ue=Q.length?Math.max(...Q):void 0,U=x(g).start_timestamp,ge=Math.min(U?U+u/1e3:1/0,Math.max(U||-1/0,Math.min(P,ue||1/0)));return M(ge),Reflect.apply(_,S,[ge,...E])}});function T(){o&&(clearTimeout(o),o=void 0)}function y(_){T(),o=setTimeout(()=>{!r&&n.size===0&&s&&(i=Xf,g.end(_))},c)}function N(_){o=setTimeout(()=>{!r&&s&&(i=Kf,g.end(_))},l)}function B(_){T(),n.set(_,!0);let S=ee();N(S+l/1e3)}function k(_){if(n.has(_)&&n.delete(_),n.size===0){let S=ee();y(S+c/1e3)}}function M(_){r=!0,n.clear(),a.forEach(P=>P()),Mt(p,m);let S=x(g),{start_timestamp:R}=S;if(!R)return;(S.data||{})[vn]||g.setAttribute(vn,i),h.log(`[Tracing] Idle span "${S.op}" finished`);let E=Lt(g).filter(P=>P!==g),C=0;E.forEach(P=>{P.isRecording()&&(P.setStatus({code:2,message:"cancelled"}),P.end(_),A&&h.log("[Tracing] Cancelling span since span ended early",JSON.stringify(P,void 0,2)));let X=x(P),{timestamp:Q=0,start_timestamp:ue=0}=X,U=ue<=_,ge=(u+c)/1e3,Z=Q-ue<=ge;if(A){let Ne=JSON.stringify(P,void 0,2);U?Z||h.log("[Tracing] Discarding span since it finished after idle span final timeout",Ne):h.log("[Tracing] Discarding span since it happened after idle span was finished",Ne)}(!Z||!U)&&(Xc(g,P),C++)}),C>0&&g.setAttribute("sentry.idle_span_discarded_spans",C)}return a.push(f.on("spanStart",_=>{if(r||_===g||x(_).timestamp)return;Lt(g).includes(_)&&B(_.spanContext().spanId)})),a.push(f.on("spanEnd",_=>{r||k(_.spanContext().spanId)})),a.push(f.on("idleSpanEnableAutoFinish",_=>{_===g&&(s=!0,y(),n.size&&N())})),t.disableAutoFinish||y(),setTimeout(()=>{r||(g.setStatus({code:2,message:"deadline_exceeded"}),i=Zf,g.end())},u),g}function ep(e){let t=xe(e);return Mt(F(),t),A&&h.log("[Tracing] Started span is an idle span"),t}function mo(e,t,n,r=0){return new tt((o,i)=>{let s=e[r];if(t===null||typeof s!="function")o(t);else{let a=s({...t},n);A&&s.id&&a===null&&h.log(`Event processor "${s.id}" dropped event`),lt(a)?a.then(c=>mo(e,c,n,r+1).then(o)).then(null,i):mo(e,a,n,r+1).then(o).then(null,i)}})}function hu(e,t){let{fingerprint:n,span:r,breadcrumbs:o,sdkProcessingMetadata:i}=t;tp(e,t),r&&op(e,r),ip(e,n),np(e,o),rp(e,i)}function ys(e,t){let{extra:n,tags:r,user:o,contexts:i,level:s,sdkProcessingMetadata:a,breadcrumbs:c,fingerprint:u,eventProcessors:l,attachments:d,propagationContext:f,transactionName:p,span:m}=t;or(e,"extra",n),or(e,"tags",r),or(e,"user",o),or(e,"contexts",i),or(e,"sdkProcessingMetadata",a),s&&(e.level=s),p&&(e.transactionName=p),m&&(e.span=m),c.length&&(e.breadcrumbs=[...e.breadcrumbs,...c]),u.length&&(e.fingerprint=[...e.fingerprint,...u]),l.length&&(e.eventProcessors=[...e.eventProcessors,...l]),d.length&&(e.attachments=[...e.attachments,...d]),e.propagationContext={...e.propagationContext,...f}}function or(e,t,n){if(n&&Object.keys(n).length){e[t]={...e[t]};for(let r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[t][r]=n[r])}}function tp(e,t){let{extra:n,tags:r,user:o,contexts:i,level:s,transactionName:a}=t,c=J(n);c&&Object.keys(c).length&&(e.extra={...c,...e.extra});let u=J(r);u&&Object.keys(u).length&&(e.tags={...u,...e.tags});let l=J(o);l&&Object.keys(l).length&&(e.user={...l,...e.user});let d=J(i);d&&Object.keys(d).length&&(e.contexts={...d,...e.contexts}),s&&(e.level=s),a&&e.type!=="transaction"&&(e.transaction=a)}function np(e,t){let n=[...e.breadcrumbs||[],...t];e.breadcrumbs=n.length?n:void 0}function rp(e,t){e.sdkProcessingMetadata={...e.sdkProcessingMetadata,...t}}function op(e,t){e.contexts={trace:hs(t),...e.contexts},e.sdkProcessingMetadata={dynamicSamplingContext:we(t),...e.sdkProcessingMetadata};let n=j(t),r=x(n).description;r&&!e.transaction&&e.type==="transaction"&&(e.transaction=r)}function ip(e,t){e.fingerprint=e.fingerprint?Kn(e.fingerprint):[],t&&(e.fingerprint=e.fingerprint.concat(t)),e.fingerprint&&!e.fingerprint.length&&delete e.fingerprint}function ir(e,t,n,r,o,i){let{normalizeDepth:s=3,normalizeMaxBreadth:a=1e3}=e,c={...t,event_id:t.event_id||n.event_id||$(),timestamp:t.timestamp||pt()},u=n.integrations||e.integrations.map(T=>T.name);sp(c,e),up(c,u),o&&o.emit("applyFrameMetadata",t),t.type===void 0&&ap(c,e.stackParser);let l=dp(r,n.captureContext);n.mechanism&&Tt(c,n.mechanism);let d=o?o.getEventProcessors():[],f=io().getScopeData();if(i){let T=i.getScopeData();ys(f,T)}if(l){let T=l.getScopeData();ys(f,T)}let p=[...n.attachments||[],...f.attachments];p.length&&(n.attachments=p),hu(c,f);let m=[...d,...f.eventProcessors];return mo(m,c,n).then(T=>(T&&cp(T),typeof s=="number"&&s>0?lp(T,s,a):T))}function sp(e,t){let{environment:n,release:r,dist:o,maxValueLength:i=250}=t;"environment"in e||(e.environment="environment"in t?n:vt),e.release===void 0&&r!==void 0&&(e.release=r),e.dist===void 0&&o!==void 0&&(e.dist=o),e.message&&(e.message=dt(e.message,i));let s=e.exception&&e.exception.values&&e.exception.values[0];s&&s.value&&(s.value=dt(s.value,i));let a=e.request;a&&a.url&&(a.url=dt(a.url,i))}var gu=new WeakMap;function ap(e,t){let n=w._sentryDebugIds;if(!n)return;let r,o=gu.get(t);o?r=o:(r=new Map,gu.set(t,r));let i=Object.entries(n).reduce((s,[a,c])=>{let u,l=r.get(a);l?u=l:(u=t(a),r.set(a,u));for(let d=u.length-1;d>=0;d--){let f=u[d];if(f.filename){s[f.filename]=c;break}}return s},{});try{e.exception.values.forEach(s=>{s.stacktrace.frames.forEach(a=>{a.filename&&(a.debug_id=i[a.filename])})})}catch{}}function cp(e){let t={};try{e.exception.values.forEach(r=>{r.stacktrace.frames.forEach(o=>{o.debug_id&&(o.abs_path?t[o.abs_path]=o.debug_id:o.filename&&(t[o.filename]=o.debug_id),delete o.debug_id)})})}catch{}if(Object.keys(t).length===0)return;e.debug_meta=e.debug_meta||{},e.debug_meta.images=e.debug_meta.images||[];let n=e.debug_meta.images;Object.entries(t).forEach(([r,o])=>{n.push({type:"sourcemap",code_file:r,debug_id:o})})}function up(e,t){t.length>0&&(e.sdk=e.sdk||{},e.sdk.integrations=[...e.sdk.integrations||[],...t])}function lp(e,t,n){if(!e)return null;let r={...e,...e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map(o=>({...o,...o.data&&{data:Oe(o.data,t,n)}}))},...e.user&&{user:Oe(e.user,t,n)},...e.contexts&&{contexts:Oe(e.contexts,t,n)},...e.extra&&{extra:Oe(e.extra,t,n)}};return e.contexts&&e.contexts.trace&&r.contexts&&(r.contexts.trace=e.contexts.trace,e.contexts.trace.data&&(r.contexts.trace.data=Oe(e.contexts.trace.data,t,n))),e.spans&&(r.spans=e.spans.map(o=>({...o,...o.data&&{data:Oe(o.data,t,n)}}))),r}function dp(e,t){if(!t)return e;let n=e?e.clone():new Ue;return n.update(t),n}function Su(e){if(e)return fp(e)?{captureContext:e}:mp(e)?{captureContext:e}:e}function fp(e){return e instanceof Ue||typeof e=="function"}var pp=["user","level","extra","contexts","tags","fingerprint","requestSession","propagationContext"];function mp(e){return Object.keys(e).some(t=>pp.includes(t))}function an(e,t){return F().captureException(e,Su(t))}function sr(e,t){return F().captureEvent(e,t)}function kn(e,t){ae().setContext(e,t)}function ho(e){ae().addEventProcessor(e)}function ar(e){let t=v(),n=ae(),r=F(),{release:o,environment:i=vt}=t&&t.getOptions()||{},{userAgent:s}=w.navigator||{},a=zc({release:o,environment:i,user:r.getUser()||n.getUser(),...s&&{userAgent:s},...e}),c=n.getSession();return c&&c.status==="ok"&&bt(c,{status:"exited"}),go(),n.setSession(a),r.setSession(a),a}function go(){let e=ae(),t=F(),n=t.getSession()||e.getSession();n&&Gc(n),yu(),e.setSession(),t.setSession()}function yu(){let e=ae(),t=F(),n=v(),r=t.getSession()||e.getSession();r&&n&&n.captureSession(r)}function cr(e=!1){if(e){go();return}yu()}var hp="7";function gp(e){let t=e.protocol?`${e.protocol}:`:"",n=e.port?`:${e.port}`:"";return`${t}//${e.host}${n}${e.path?`/${e.path}`:""}/api/`}function Sp(e){return`${gp(e)}${e.projectId}/envelope/`}function _p(e,t){return Ui({sentry_key:e.publicKey,sentry_version:hp,...t&&{sentry_client:`${t.name}/${t.version}`}})}function Eu(e,t,n){return t||`${Sp(e)}?${_p(e,n)}`}var Tu=[];function yp(e){let t={};return e.forEach(n=>{let{name:r}=n,o=t[r];o&&!o.isDefaultInstance&&n.isDefaultInstance||(t[r]=n)}),Object.values(t)}function Es(e){let t=e.defaultIntegrations||[],n=e.integrations;t.forEach(s=>{s.isDefaultInstance=!0});let r;Array.isArray(n)?r=[...t,...n]:typeof n=="function"?r=Kn(n(t)):r=t;let o=yp(r),i=o.findIndex(s=>s.name==="Debug");if(i>-1){let[s]=o.splice(i,1);o.push(s)}return o}function Iu(e,t){let n={};return t.forEach(r=>{r&&Is(e,r,n)}),n}function Ts(e,t){for(let n of t)n&&n.afterAllSetup&&n.afterAllSetup(e)}function Is(e,t,n){if(n[t.name]){A&&h.log(`Integration skipped because it was already installed: ${t.name}`);return}if(n[t.name]=t,Tu.indexOf(t.name)===-1&&typeof t.setupOnce=="function"&&(t.setupOnce(),Tu.push(t.name)),t.setup&&typeof t.setup=="function"&&t.setup(e),typeof t.preprocessEvent=="function"){let r=t.preprocessEvent.bind(t);e.on("preprocessEvent",(o,i)=>r(o,i,e))}if(typeof t.processEvent=="function"){let r=t.processEvent.bind(t),o=Object.assign((i,s)=>r(i,s,e),{id:t.name});e.addEventProcessor(o)}A&&h.log(`Integration installed: ${t.name}`)}var bu="Not capturing exception because it's already been captured.",ur=class{constructor(t){if(this._options=t,this._integrations={},this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],t.dsn?this._dsn=Gr(t.dsn):A&&h.warn("No DSN provided, client will not send events."),this._dsn){let n=Eu(this._dsn,t.tunnel,t._metadata?t._metadata.sdk:void 0);this._transport=t.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),...t.transportOptions,url:n})}}captureException(t,n,r){let o=$();if(to(t))return A&&h.log(bu),o;let i={event_id:o,...n};return this._process(this.eventFromException(t,i).then(s=>this._captureEvent(s,i,r))),i.event_id}captureMessage(t,n,r,o){let i={event_id:$(),...r},s=mn(t)?t:String(t),a=Kt(t)?this.eventFromMessage(s,n,i):this.eventFromException(t,i);return this._process(a.then(c=>this._captureEvent(c,i,o))),i.event_id}captureEvent(t,n,r){let o=$();if(n&&n.originalException&&to(n.originalException))return A&&h.log(bu),o;let i={event_id:o,...n},a=(t.sdkProcessingMetadata||{}).capturedSpanScope;return this._process(this._captureEvent(t,i,a||r)),i.event_id}captureSession(t){typeof t.release!="string"?A&&h.warn("Discarded session because of missing or non-string release"):(this.sendSession(t),bt(t,{init:!1}))}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(t){let n=this._transport;return n?(this.emit("flush"),this._isClientDoneProcessing(t).then(r=>n.flush(t).then(o=>r&&o))):Ce(!0)}close(t){return this.flush(t).then(n=>(this.getOptions().enabled=!1,this.emit("close"),n))}getEventProcessors(){return this._eventProcessors}addEventProcessor(t){this._eventProcessors.push(t)}init(){(this._isEnabled()||this._options.integrations.some(({name:t})=>t.startsWith("Spotlight")))&&this._setupIntegrations()}getIntegrationByName(t){return this._integrations[t]}addIntegration(t){let n=this._integrations[t.name];Is(this,t,this._integrations),n||Ts(this,[t])}sendEvent(t,n={}){this.emit("beforeSendEvent",t,n);let r=au(t,this._dsn,this._options._metadata,this._options.tunnel);for(let i of n.attachments||[])r=ts(r,os(i));let o=this.sendEnvelope(r);o&&o.then(i=>this.emit("afterSendEvent",t,i),null)}sendSession(t){let n=su(t,this._dsn,this._options._metadata,this._options.tunnel);this.sendEnvelope(n)}recordDroppedEvent(t,n,r){if(this._options.sendClientReports){let o=typeof r=="number"?r:1,i=`${t}:${n}`;A&&h.log(`Recording outcome: "${i}"${o>1?` (${o} times)`:""}`),this._outcomes[i]=(this._outcomes[i]||0)+o}}on(t,n){let r=this._hooks[t]=this._hooks[t]||[];return r.push(n),()=>{let o=r.indexOf(n);o>-1&&r.splice(o,1)}}emit(t,...n){let r=this._hooks[t];r&&r.forEach(o=>o(...n))}sendEnvelope(t){return this.emit("beforeEnvelope",t),this._isEnabled()&&this._transport?this._transport.send(t).then(null,n=>(A&&h.error("Error while sending event:",n),n)):(A&&h.error("Transport disabled"),Ce({}))}_setupIntegrations(){let{integrations:t}=this._options;this._integrations=Iu(this,t),Ts(this,t)}_updateSessionFromEvent(t,n){let r=!1,o=!1,i=n.exception&&n.exception.values;if(i){o=!0;for(let c of i){let u=c.mechanism;if(u&&u.handled===!1){r=!0;break}}}let s=t.status==="ok";(s&&t.errors===0||s&&r)&&(bt(t,{...r&&{status:"crashed"},errors:t.errors||Number(o||r)}),this.captureSession(t))}_isClientDoneProcessing(t){return new tt(n=>{let r=0,o=1,i=setInterval(()=>{this._numProcessing==0?(clearInterval(i),n(!0)):(r+=o,t&&r>=t&&(clearInterval(i),n(!1)))},o)})}_isEnabled(){return this.getOptions().enabled!==!1&&this._transport!==void 0}_prepareEvent(t,n,r,o=ae()){let i=this.getOptions(),s=Object.keys(this._integrations);return!n.integrations&&s.length>0&&(n.integrations=s),this.emit("preprocessEvent",t,n),t.type||o.setLastEventId(t.event_id||n.event_id),ir(i,t,n,r,this,o).then(a=>{if(a===null)return a;let c={...o.getPropagationContext(),...r?r.getPropagationContext():void 0};if(!(a.contexts&&a.contexts.trace)&&c){let{traceId:l,spanId:d,parentSpanId:f,dsc:p}=c;a.contexts={trace:J({trace_id:l,span_id:d,parent_span_id:f}),...a.contexts};let m=p||Ft(l,this);a.sdkProcessingMetadata={dynamicSamplingContext:m,...a.sdkProcessingMetadata}}return a})}_captureEvent(t,n={},r){return this._processEvent(t,n,r).then(o=>o.event_id,o=>{if(A){let i=o;i.logLevel==="log"?h.log(i.message):h.warn(i)}})}_processEvent(t,n,r){let o=this.getOptions(),{sampleRate:i}=o,s=Cu(t),a=vu(t),c=t.type||"error",u=`before send for type \`${c}\``,l=typeof i>"u"?void 0:Ut(i);if(a&&typeof l=="number"&&Math.random()>l)return this.recordDroppedEvent("sample_rate","error",t),Nt(new Ee(`Discarding event because it's not included in the random sample (sampling rate = ${i})`,"log"));let d=c==="replay_event"?"replay":c,p=(t.sdkProcessingMetadata||{}).capturedSpanIsolationScope;return this._prepareEvent(t,n,r,p).then(m=>{if(m===null)throw this.recordDroppedEvent("event_processor",d,t),new Ee("An event processor returned `null`, will not send event.","log");if(n.data&&n.data.__sentry__===!0)return m;let T=Tp(this,o,m,n);return Ep(T,u)}).then(m=>{if(m===null){if(this.recordDroppedEvent("before_send",d,t),s){let N=1+(t.spans||[]).length;this.recordDroppedEvent("before_send","span",N)}throw new Ee(`${u} returned \`null\`, will not send event.`,"log")}let g=r&&r.getSession();if(!s&&g&&this._updateSessionFromEvent(g,m),s){let y=m.sdkProcessingMetadata&&m.sdkProcessingMetadata.spanCountBeforeProcessing||0,N=m.spans?m.spans.length:0,B=y-N;B>0&&this.recordDroppedEvent("before_send","span",B)}let T=m.transaction_info;if(s&&T&&m.transaction!==t.transaction){let y="custom";m.transaction_info={...T,source:y}}return this.sendEvent(m,n),m}).then(null,m=>{throw m instanceof Ee?m:(this.captureException(m,{data:{__sentry__:!0},originalException:m}),new Ee(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.
Reason: ${m}`))})}_process(t){this._numProcessing++,t.then(n=>(this._numProcessing--,n),n=>(this._numProcessing--,n))}_clearOutcomes(){let t=this._outcomes;return this._outcomes={},Object.entries(t).map(([n,r])=>{let[o,i]=n.split(":");return{reason:o,category:i,quantity:r}})}_flushOutcomes(){A&&h.log("Flushing outcomes...");let t=this._clearOutcomes();if(t.length===0){A&&h.log("No outcomes to send");return}if(!this._dsn){A&&h.log("No dsn provided, will not send outcomes");return}A&&h.log("Sending outcomes:",t);let n=is(t,this._options.tunnel&&Qe(this._dsn));this.sendEnvelope(n)}};function Ep(e,t){let n=`${t} must return \`null\` or a valid event.`;if(lt(e))return e.then(r=>{if(!Ze(r)&&r!==null)throw new Ee(n);return r},r=>{throw new Ee(`${t} rejected with ${r}`)});if(!Ze(e)&&e!==null)throw new Ee(n);return e}function Tp(e,t,n,r){let{beforeSend:o,beforeSendTransaction:i,beforeSendSpan:s}=t;if(vu(n)&&o)return o(n,r);if(Cu(n)){if(n.spans&&s){let a=[];for(let c of n.spans){let u=s(c);u?a.push(u):e.recordDroppedEvent("before_send","span")}n.spans=a}if(i){if(n.spans){let a=n.spans.length;n.sdkProcessingMetadata={...n.sdkProcessingMetadata,spanCountBeforeProcessing:a}}return i(n,r)}}return n}function vu(e){return e.type===void 0}function Cu(e){return e.type==="transaction"}function bs(e,t){t.debug===!0&&(A?h.enable():je(()=>{console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.")})),F().update(t.initialScope);let r=new e(t);return vs(r),r.init(),r}function vs(e){F().setClient(e)}var Ip=64;function So(e,t,n=Ki(e.bufferSize||Ip)){let r={},o=s=>n.drain(s);function i(s){let a=[];if(En(s,(d,f)=>{let p=ro(f);if(Qn(r,p)){let m=Ru(d,f);e.recordDroppedEvent("ratelimit_backoff",p,m)}else a.push(d)}),a.length===0)return Ce({});let c=Fe(s[0],a),u=d=>{En(c,(f,p)=>{let m=Ru(f,p);e.recordDroppedEvent(d,ro(p),m)})},l=()=>t({body:ns(c)}).then(d=>(d.statusCode!==void 0&&(d.statusCode<200||d.statusCode>=300)&&A&&h.warn(`Sentry responded with status code ${d.statusCode} to sent event.`),r=er(r,d),d),d=>{throw u("network_error"),d});return n.add(l).then(d=>d,d=>{if(d instanceof Ee)return A&&h.error("Skipped sending event because buffer is full."),u("queue_overflow"),Ce({});throw d})}return{send:i,flush:o}}function Ru(e,t){if(!(t!=="event"&&t!=="transaction"))return Array.isArray(e)?e[1]:void 0}function Cs(e,t){let n=t&&t.getDsn(),r=t&&t.getOptions().tunnel;return vp(e,n)||bp(e,r)}function bp(e,t){return t?wu(e)===wu(t):!1}function vp(e,t){return t?e.includes(t.host):!1}function wu(e){return e[e.length-1]==="/"?e.slice(0,-1):e}function lr(e,t,n=[t],r="npm"){let o=e._metadata||{};o.sdk||(o.sdk={name:`sentry.javascript.${t}`,packages:n.map(i=>({name:`${r}:@sentry/${i}`,version:ze})),version:ze}),e._metadata=o}var Cp=100;function Ve(e,t){let n=v(),r=ae();if(!n)return;let{beforeBreadcrumb:o=null,maxBreadcrumbs:i=Cp}=n.getOptions();if(i<=0)return;let a={timestamp:pt(),...e},c=o?je(()=>o(a,t)):a;c!==null&&(n.emit&&n.emit("beforeAddBreadcrumb",c,t),r.addBreadcrumb(c,i))}var xu,Rp="FunctionToString",ku=new WeakMap,wp=()=>({name:Rp,setupOnce(){xu=Function.prototype.toString;try{Function.prototype.toString=function(...e){let t=Zt(this),n=ku.has(v())&&t!==void 0?t:this;return xu.apply(n,e)}}catch{}},setup(e){ku.set(e,!0)}}),_o=wp;var xp=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/,"undefined is not an object (evaluating 'a.L')",`can't redefine non-configurable property "solana"`,"vv().getRestrictions is not a function. (In 'vv().getRestrictions(1,a)', 'vv().getRestrictions' is undefined)","Can't find variable: _AutofillCallbackHandler"],kp="InboundFilters",Ap=(e={})=>({name:kp,processEvent(t,n,r){let o=r.getOptions(),i=Np(e,o);return Mp(t,i)?null:t}}),Eo=Ap;function Np(e={},t={}){return{allowUrls:[...e.allowUrls||[],...t.allowUrls||[]],denyUrls:[...e.denyUrls||[],...t.denyUrls||[]],ignoreErrors:[...e.ignoreErrors||[],...t.ignoreErrors||[],...e.disableErrorDefaults?[]:xp],ignoreTransactions:[...e.ignoreTransactions||[],...t.ignoreTransactions||[]],ignoreInternal:e.ignoreInternal!==void 0?e.ignoreInternal:!0}}function Mp(e,t){return t.ignoreInternal&&Up(e)?(A&&h.warn(`Event dropped due to being internal Sentry Error.
Event: ${et(e)}`),!0):Op(e,t.ignoreErrors)?(A&&h.warn(`Event dropped due to being matched by \`ignoreErrors\` option.
Event: ${et(e)}`),!0):Hp(e)?(A&&h.warn(`Event dropped due to not having an error message, error type or stacktrace.
Event: ${et(e)}`),!0):Dp(e,t.ignoreTransactions)?(A&&h.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.
Event: ${et(e)}`),!0):Pp(e,t.denyUrls)?(A&&h.warn(`Event dropped due to being matched by \`denyUrls\` option.
Event: ${et(e)}.
Url: ${yo(e)}`),!0):Lp(e,t.allowUrls)?!1:(A&&h.warn(`Event dropped due to not being matched by \`allowUrls\` option.
Event: ${et(e)}.
Url: ${yo(e)}`),!0)}function Op(e,t){return e.type||!t||!t.length?!1:Fp(e).some(n=>We(n,t))}function Dp(e,t){if(e.type!=="transaction"||!t||!t.length)return!1;let n=e.transaction;return n?We(n,t):!1}function Pp(e,t){if(!t||!t.length)return!1;let n=yo(e);return n?We(n,t):!1}function Lp(e,t){if(!t||!t.length)return!0;let n=yo(e);return n?We(n,t):!0}function Fp(e){let t=[];e.message&&t.push(e.message);let n;try{n=e.exception.values[e.exception.values.length-1]}catch{}return n&&n.value&&(t.push(n.value),n.type&&t.push(`${n.type}: ${n.value}`)),t}function Up(e){try{return e.exception.values[0].type==="SentryError"}catch{}return!1}function Bp(e=[]){for(let t=e.length-1;t>=0;t--){let n=e[t];if(n&&n.filename!=="<anonymous>"&&n.filename!=="[native code]")return n.filename||null}return null}function yo(e){try{let t;try{t=e.exception.values[0].stacktrace.frames}catch{}return t?Bp(t):null}catch{return A&&h.error(`Cannot extract url for event ${et(e)}`),null}}function Hp(e){return e.type||!e.exception||!e.exception.values||e.exception.values.length===0?!1:!e.message&&!e.exception.values.some(t=>t.stacktrace||t.type&&t.type!=="Error"||t.value)}var $p="Dedupe",Wp=()=>{let e;return{name:$p,processEvent(t){if(t.type)return t;try{if(zp(t,e))return A&&h.warn("Event dropped due to being a duplicate of previously captured event."),null}catch{}return e=t}}},To=Wp;function zp(e,t){return t?!!(Gp(e,t)||jp(e,t)):!1}function Gp(e,t){let n=e.message,r=t.message;return!(!n&&!r||n&&!r||!n&&r||n!==r||!Mu(e,t)||!Nu(e,t))}function jp(e,t){let n=Au(t),r=Au(e);return!(!n||!r||n.type!==r.type||n.value!==r.value||!Mu(e,t)||!Nu(e,t))}function Nu(e,t){let n=Jr(e),r=Jr(t);if(!n&&!r)return!0;if(n&&!r||!n&&r||(n=n,r=r,r.length!==n.length))return!1;for(let o=0;o<r.length;o++){let i=r[o],s=n[o];if(i.filename!==s.filename||i.lineno!==s.lineno||i.colno!==s.colno||i.function!==s.function)return!1}return!0}function Mu(e,t){let n=e.fingerprint,r=t.fingerprint;if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;n=n,r=r;try{return n.join("")===r.join("")}catch{return!1}}function Au(e){return e.exception&&e.exception.values&&e.exception.values[0]}function Rs(e,t,n,r,o="auto.http.browser"){if(!e.fetchData)return;let i=De()&&t(e.fetchData.url);if(e.endTimestamp&&i){let m=e.fetchData.__span;if(!m)return;let g=r[m];g&&(Yp(g,e),delete r[m]);return}let s=F(),a=v(),{method:c,url:u}=e.fetchData,l=qp(u),d=l?qe(l).host:void 0,f=!!K(),p=i&&f?xe({name:`${c} ${u}`,attributes:{url:u,type:"fetch","http.method":c,"http.url":l,"server.address":d,[te]:o,[Re]:"http.client"}}):new Be;if(e.fetchData.__span=p.spanContext().spanId,r[p.spanContext().spanId]=p,n(e.fetchData.url)&&a){let m=e.args[0];e.args[1]=e.args[1]||{};let g=e.args[1];g.headers=Ou(m,a,s,g,De()&&f?p:void 0)}return p}function Ou(e,t,n,r,o){let i=ae(),{traceId:s,spanId:a,sampled:c,dsc:u}={...i.getPropagationContext(),...n.getPropagationContext()},l=o?Rn(o):Qt(s,a,c),d=yn(u||(o?we(o):Ft(s,t))),f=r.headers||(typeof Request<"u"&&Le(e,Request)?e.headers:void 0);if(f)if(typeof Headers<"u"&&Le(f,Headers)){let p=new Headers(f);return p.append("sentry-trace",l),d&&p.append(_n,d),p}else if(Array.isArray(f)){let p=[...f,["sentry-trace",l]];return d&&p.push([_n,d]),p}else{let p="baggage"in f?f.baggage:void 0,m=[];return Array.isArray(p)?m.push(...p):p&&m.push(p),d&&m.push(d),{...f,"sentry-trace":l,baggage:m.length>0?m.join(","):void 0}}else return{"sentry-trace":l,baggage:d}}function qp(e){try{return new URL(e).href}catch{return}}function Yp(e,t){if(t.response){Cn(e,t.response.status);let n=t.response&&t.response.headers&&t.response.headers.get("content-length");if(n){let r=parseInt(n);r>0&&e.setAttribute("http.response_content_length",r)}}else t.error&&e.setStatus({code:2,message:"internal_error"});e.end()}var I=w,xs=0;function ks(){return xs>0}function um(){xs++,setTimeout(()=>{xs--})}function cn(e,t={},n){if(typeof e!="function")return e;try{let o=e.__sentry_wrapped__;if(o)return o;if(Zt(e))return e}catch{return e}let r=function(){let o=Array.prototype.slice.call(arguments);try{n&&typeof n=="function"&&n.apply(this,arguments);let i=o.map(s=>cn(s,t));return e.apply(this,i)}catch(i){throw um(),nn(s=>{s.addEventProcessor(a=>(t.mechanism&&(Sn(a,void 0,void 0),Tt(a,t.mechanism)),a.extra={...a.extra,arguments:o},a)),an(i)}),i}};try{for(let o in e)Object.prototype.hasOwnProperty.call(e,o)&&(r[o]=e[o])}catch{}jr(r,e),de(e,"__sentry_wrapped__",r);try{Object.getOwnPropertyDescriptor(r,"name").configurable&&Object.defineProperty(r,"name",{get(){return e.name}})}catch{}return r}var H=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;function Io(e,t){let n=Ms(e,t),r={type:t&&t.name,value:mm(t)};return n.length&&(r.stacktrace={frames:n}),r.type===void 0&&r.value===""&&(r.value="Unrecoverable error caught"),r}function lm(e,t,n,r){let o=v(),i=o&&o.getOptions().normalizeDepth,s=Sm(t),a={__serialized__:no(t,i)};if(s)return{exception:{values:[Io(e,s)]},extra:a};let c={exception:{values:[{type:Xt(t)?t.constructor.name:r?"UnhandledRejection":"Error",value:hm(t,{isUnhandledRejection:r})}]},extra:a};if(n){let u=Ms(e,n);u.length&&(c.exception.values[0].stacktrace={frames:u})}return c}function As(e,t){return{exception:{values:[Io(e,t)]}}}function Ms(e,t){let n=t.stacktrace||t.stack||"",r=fm(t),o=pm(t);try{return e(n,r,o)}catch{}return[]}var dm=/Minified React error #\d+;/i;function fm(e){return e&&dm.test(e.message)?1:0}function pm(e){return typeof e.framesToPop=="number"?e.framesToPop:0}function mm(e){let t=e&&e.message;return t?t.error&&typeof t.error.message=="string"?t.error.message:t:"No error message"}function Pu(e,t,n,r){let o=n&&n.syntheticException||void 0,i=bo(e,t,o,r);return Tt(i),i.level="error",n&&n.event_id&&(i.event_id=n.event_id),Ce(i)}function Lu(e,t,n="info",r,o){let i=r&&r.syntheticException||void 0,s=Ns(e,t,i,o);return s.level=n,r&&r.event_id&&(s.event_id=r.event_id),Ce(s)}function bo(e,t,n,r,o){let i;if($r(t)&&t.error)return As(e,t.error);if(Wr(t)||Ai(t)){let s=t;if("stack"in t)i=As(e,t);else{let a=s.name||(Wr(s)?"DOMError":"DOMException"),c=s.message?`${a}: ${s.message}`:a;i=Ns(e,c,n,r),Sn(i,c)}return"code"in s&&(i.tags={...i.tags,"DOMException.code":`${s.code}`}),i}return Jt(t)?As(e,t):Ze(t)||Xt(t)?(i=lm(e,t,n,o),Tt(i,{synthetic:!0}),i):(i=Ns(e,t,n,r),Sn(i,`${t}`,void 0),Tt(i,{synthetic:!0}),i)}function Ns(e,t,n,r){let o={};if(r&&n){let i=Ms(e,n);i.length&&(o.exception={values:[{value:t,stacktrace:{frames:i}}]})}if(mn(t)){let{__sentry_template_string__:i,__sentry_template_values__:s}=t;return o.logentry={message:i,params:s},o}return o.message=t,o}function hm(e,{isUnhandledRejection:t}){let n=Bi(e),r=t?"promise rejection":"exception";return $r(e)?`Event \`ErrorEvent\` captured as ${r} with message \`${e.message}\``:Xt(e)?`Event \`${gm(e)}\` (type=${e.type}) captured as ${r}`:`Object captured as ${r} with keys: ${n}`}function gm(e){try{let t=Object.getPrototypeOf(e);return t?t.constructor.name:void 0}catch{}}function Sm(e){for(let t in e)if(Object.prototype.hasOwnProperty.call(e,t)){let n=e[t];if(n instanceof Error)return n}}function Fu(e,{metadata:t,tunnel:n,dsn:r}){let o={event_id:e.event_id,sent_at:new Date().toISOString(),...t&&t.sdk&&{sdk:{name:t.sdk.name,version:t.sdk.version}},...!!n&&!!r&&{dsn:Qe(r)}},i=_m(e);return Fe(o,[i])}function _m(e){return[{type:"user_report"},e]}var vo=class extends ur{constructor(t){let n={parentSpanIsAlwaysRootSpan:!0,...t},r=I.SENTRY_SDK_SOURCE||Vi();lr(n,"browser",["browser"],r),super(n),n.sendClientReports&&I.document&&I.document.addEventListener("visibilitychange",()=>{I.document.visibilityState==="hidden"&&this._flushOutcomes()})}eventFromException(t,n){return Pu(this._options.stackParser,t,n,this._options.attachStacktrace)}eventFromMessage(t,n="info",r){return Lu(this._options.stackParser,t,n,r,this._options.attachStacktrace)}captureUserFeedback(t){if(!this._isEnabled()){H&&h.warn("SDK not enabled, will not capture user feedback.");return}let n=Fu(t,{metadata:this.getSdkMetadata(),dsn:this.getDsn(),tunnel:this.getOptions().tunnel});this.sendEnvelope(n)}_prepareEvent(t,n,r){return t.platform=t.platform||"javascript",super._prepareEvent(t,n,r)}};var Se=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;var ym=(e,t)=>e>t[1]?"poor":e>t[0]?"needs-improvement":"good",Je=(e,t,n,r)=>{let o,i;return s=>{t.value>=0&&(s||r)&&(i=t.value-(o||0),(i||o===void 0)&&(o=t.value,t.delta=i,t.rating=ym(t.value,n),e(t)))}};var b=w;var Uu=()=>`v3-${Date.now()}-${Math.floor(Math.random()*8999999999999)+1e12}`;var Ct=()=>b.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0];var Bt=()=>{let e=Ct();return e&&e.activationStart||0};var Ke=(e,t)=>{let n=Ct(),r="navigate";return n&&(b.document&&b.document.prerendering||Bt()>0?r="prerender":b.document&&b.document.wasDiscarded?r="restore":n.type&&(r=n.type.replace(/_/g,"-"))),{name:e,value:typeof t>"u"?-1:t,rating:"good",delta:0,entries:[],id:Uu(),navigationType:r}};var Pe=(e,t,n)=>{try{if(PerformanceObserver.supportedEntryTypes.includes(e)){let r=new PerformanceObserver(o=>{Promise.resolve().then(()=>{t(o.getEntries())})});return r.observe(Object.assign({type:e,buffered:!0},n||{})),r}}catch{}};var mt=e=>{let t=n=>{(n.type==="pagehide"||b.document&&b.document.visibilityState==="hidden")&&e(n)};b.document&&(addEventListener("visibilitychange",t,!0),addEventListener("pagehide",t,!0))};var An=e=>{let t=!1;return n=>{t||(e(n),t=!0)}};var dr=-1,Em=()=>{dr=b.document.visibilityState==="hidden"&&!b.document.prerendering?0:1/0},Co=e=>{b.document.visibilityState==="hidden"&&dr>-1&&(dr=e.type==="visibilitychange"?e.timeStamp:0,removeEventListener("visibilitychange",Co,!0),removeEventListener("prerenderingchange",Co,!0))},Tm=()=>{addEventListener("visibilitychange",Co,!0),addEventListener("prerenderingchange",Co,!0)},Ht=()=>(b.document&&dr<0&&(Em(),Tm()),{get firstHiddenTime(){return dr}});var ht=e=>{b.document&&b.document.prerendering?addEventListener("prerenderingchange",()=>e(),!0):e()};var Im=[1800,3e3],Bu=(e,t={})=>{ht(()=>{let n=Ht(),r=Ke("FCP"),o,s=Pe("paint",a=>{a.forEach(c=>{c.name==="first-contentful-paint"&&(s.disconnect(),c.startTime<n.firstHiddenTime&&(r.value=Math.max(c.startTime-Bt(),0),r.entries.push(c),o(!0)))})});s&&(o=Je(e,r,Im,t.reportAllChanges))})};var bm=[.1,.25],Hu=(e,t={})=>{Bu(An(()=>{let n=Ke("CLS",0),r,o=0,i=[],s=c=>{c.forEach(u=>{if(!u.hadRecentInput){let l=i[0],d=i[i.length-1];o&&l&&d&&u.startTime-d.startTime<1e3&&u.startTime-l.startTime<5e3?(o+=u.value,i.push(u)):(o=u.value,i=[u])}}),o>n.value&&(n.value=o,n.entries=i,r())},a=Pe("layout-shift",s);a&&(r=Je(e,n,bm,t.reportAllChanges),mt(()=>{s(a.takeRecords()),r(!0)}),setTimeout(r,0))}))};var vm=[100,300],$u=(e,t={})=>{ht(()=>{let n=Ht(),r=Ke("FID"),o,i=c=>{c.startTime<n.firstHiddenTime&&(r.value=c.processingStart-c.startTime,r.entries.push(c),o(!0))},s=c=>{c.forEach(i)},a=Pe("first-input",s);o=Je(e,r,vm,t.reportAllChanges),a&&mt(An(()=>{s(a.takeRecords()),a.disconnect()}))})};var Wu=0,Os=1/0,Ro=0,Cm=e=>{e.forEach(t=>{t.interactionId&&(Os=Math.min(Os,t.interactionId),Ro=Math.max(Ro,t.interactionId),Wu=Ro?(Ro-Os)/7+1:0)})},Ds,zu=()=>Ds?Wu:performance.interactionCount||0,Gu=()=>{"interactionCount"in performance||Ds||(Ds=Pe("event",Cm,{type:"event",buffered:!0,durationThreshold:0}))};var Rm=[200,500],wm=0,Yu=()=>zu()-wm,ju=10,Rt=[],Ps={},qu=e=>{let t=Rt[Rt.length-1],n=Ps[e.interactionId];if(n||Rt.length<ju||t&&e.duration>t.latency){if(n)n.entries.push(e),n.latency=Math.max(n.latency,e.duration);else{let r={id:e.interactionId,latency:e.duration,entries:[e]};Ps[r.id]=r,Rt.push(r)}Rt.sort((r,o)=>o.latency-r.latency),Rt.splice(ju).forEach(r=>{delete Ps[r.id]})}},xm=()=>{let e=Math.min(Rt.length-1,Math.floor(Yu()/50));return Rt[e]},Vu=(e,t={})=>{ht(()=>{Gu();let n=Ke("INP"),r,o=s=>{s.forEach(c=>{c.interactionId&&qu(c),c.entryType==="first-input"&&!Rt.some(l=>l.entries.some(d=>c.duration===d.duration&&c.startTime===d.startTime))&&qu(c)});let a=xm();a&&a.latency!==n.value&&(n.value=a.latency,n.entries=a.entries,r())},i=Pe("event",o,{durationThreshold:t.durationThreshold!=null?t.durationThreshold:40});r=Je(e,n,Rm,t.reportAllChanges),i&&("PerformanceEventTiming"in b&&"interactionId"in PerformanceEventTiming.prototype&&i.observe({type:"first-input",buffered:!0}),mt(()=>{o(i.takeRecords()),n.value<0&&Yu()>0&&(n.value=0,n.entries=[]),r(!0)}))})};var km=[2500,4e3],Ju={},Ku=(e,t={})=>{ht(()=>{let n=Ht(),r=Ke("LCP"),o,i=a=>{let c=a[a.length-1];c&&c.startTime<n.firstHiddenTime&&(r.value=Math.max(c.startTime-Bt(),0),r.entries=[c],o())},s=Pe("largest-contentful-paint",i);if(s){o=Je(e,r,km,t.reportAllChanges);let a=An(()=>{Ju[r.id]||(i(s.takeRecords()),s.disconnect(),Ju[r.id]=!0,o(!0))});["keydown","click"].forEach(c=>{b.document&&addEventListener(c,()=>setTimeout(a,0),!0)}),mt(a)}})};var Am=[800,1800],Ls=e=>{b.document&&b.document.prerendering?ht(()=>Ls(e)):b.document&&b.document.readyState!=="complete"?addEventListener("load",()=>Ls(e),!0):setTimeout(e,0)},Xu=(e,t={})=>{let n=Ke("TTFB"),r=Je(e,n,Am,t.reportAllChanges);Ls(()=>{let o=Ct();if(o){let i=o.responseStart;if(i<=0||i>performance.now())return;n.value=Math.max(i-Bt(),0),n.entries=[o],r(!0)}})};var fr={},wo={},Zu,Qu,el,tl,nl;function un(e,t=!1){return gr("cls",e,Nm,Zu,t)}function pr(e,t=!1){return gr("lcp",e,Om,el,t)}function mr(e){return gr("fid",e,Mm,Qu)}function Fs(e){return gr("ttfb",e,Dm,tl)}function hr(e){return gr("inp",e,Pm,nl)}function ot(e,t){return rl(e,t),wo[e]||(Lm(e),wo[e]=!0),ol(e,t)}function Nn(e,t){let n=fr[e];if(!(!n||!n.length))for(let r of n)try{r(t)}catch(o){Se&&h.error(`Error while triggering instrumentation handler.
Type: ${e}
Name: ${Me(r)}
Error:`,o)}}function Nm(){return Hu(e=>{Nn("cls",{metric:e}),Zu=e},{reportAllChanges:!0})}function Mm(){return $u(e=>{Nn("fid",{metric:e}),Qu=e})}function Om(){return Ku(e=>{Nn("lcp",{metric:e}),el=e},{reportAllChanges:!0})}function Dm(){return Xu(e=>{Nn("ttfb",{metric:e}),tl=e})}function Pm(){return Vu(e=>{Nn("inp",{metric:e}),nl=e})}function gr(e,t,n,r,o=!1){rl(e,t);let i;return wo[e]||(i=n(),wo[e]=!0),r&&t({metric:r}),ol(e,t,o?i:void 0)}function Lm(e){let t={};e==="event"&&(t.durationThreshold=0),Pe(e,n=>{Nn(e,{entries:n})},t)}function rl(e,t){fr[e]=fr[e]||[],fr[e].push(t)}function ol(e,t,n){return()=>{n&&n();let r=fr[e];if(!r)return;let o=r.indexOf(t);o!==-1&&r.splice(o,1)}}function il(e){return"duration"in e}function xo(e){return typeof e=="number"&&isFinite(e)}function ln(e,t,n,{...r}){let o=x(e).start_timestamp;return o&&o>t&&typeof e.updateStartTime=="function"&&e.updateStartTime(t),rr(e,()=>{let i=xe({startTime:t,...r});return i&&i.end(n),i})}function ko(e){let t=v();if(!t)return;let{name:n,transaction:r,attributes:o,startTime:i}=e,{release:s,environment:a}=t.getOptions(),c=t.getIntegrationByName("Replay"),u=c&&c.getReplayId(),l=F(),d=l.getUser(),f=d!==void 0?d.email||d.id||d.ip_address:void 0,p;try{p=l.getScopeData().contexts.profile.profile_id}catch{}let m={release:s,environment:a,user:f||void 0,profile_id:p||void 0,replay_id:u||void 0,transaction:r,"user_agent.original":b.navigator&&b.navigator.userAgent,...o};return xe({name:n,attributes:m,startTime:i,experimental:{standalone:!0}})}function Sr(){return b&&b.addEventListener&&b.performance}function ie(e){return e/1e3}function sl(){let e=0,t,n;if(!Um())return;let r=!1;function o(){r||(r=!0,n&&Fm(e,t,n),i())}let i=un(({metric:s})=>{let a=s.entries[s.entries.length-1];a&&(e=s.value,t=a)},!0);mt(()=>{o()}),setTimeout(()=>{let s=v(),a=he([s,"optionalAccess",d=>d.on,"call",d=>d("startNavigationSpan",()=>{o(),a&&a()})]),c=K(),u=c&&j(c),l=u&&x(u);l&&l.op==="pageload"&&(n=u.spanContext().spanId)},0)}function Fm(e,t,n){Se&&h.log(`Sending CLS span (${e})`);let r=ie(oe)+(he([t,"optionalAccess",u=>u.startTime])||0),o=ie(he([t,"optionalAccess",u=>u.duration])||0),i=F().getScopeData().transactionName,s=t?ye(he([t,"access",u=>u.sources,"access",u=>u[0],"optionalAccess",u=>u.node])):"Layout shift",a=J({[te]:"auto.http.browser.cls",[Re]:"ui.webvital.cls",[rn]:he([t,"optionalAccess",u=>u.duration])||0,"sentry.pageload.span_id":n}),c=ko({name:s,transaction:i,attributes:a,startTime:r});he([c,"optionalAccess",u=>u.addEvent,"call",u=>u("cls",{[Dt]:"",[Pt]:e})]),he([c,"optionalAccess",u=>u.end,"call",u=>u(r+o)])}function Um(){try{return he([PerformanceObserver,"access",e=>e.supportedEntryTypes,"optionalAccess",e=>e.includes,"call",e=>e("layout-shift")])}catch{return!1}}var Bm=2147483647,al=0,_e={},gt,_r;function Bs({recordClsStandaloneSpans:e}){let t=Sr();if(t&&oe){t.mark&&b.performance.mark("sentry-tracing-init");let n=Wm(),r=$m(),o=zm(),i=e?sl():Hm();return()=>{n(),r(),o(),i&&i()}}return()=>{}}function Hs(){ot("longtask",({entries:e})=>{if(K())for(let t of e){let n=ie(oe+t.startTime),r=ie(t.duration),o=xe({name:"Main UI thread blocked",op:"ui.long-task",startTime:n,attributes:{[te]:"auto.ui.browser.metrics"}});o&&o.end(n+r)}})}function $s(){new PerformanceObserver(t=>{if(K())for(let n of t.getEntries()){if(!n.scripts[0])continue;let r=ie(oe+n.startTime),o=ie(n.duration),i={[te]:"auto.ui.browser.metrics"},s=n.scripts[0],{invoker:a,invokerType:c,sourceURL:u,sourceFunctionName:l,sourceCharPosition:d}=s;i["browser.script.invoker"]=a,i["browser.script.invoker_type"]=c,u&&(i["code.filepath"]=u),l&&(i["code.function"]=l),d!==-1&&(i["browser.script.source_char_position"]=d);let f=xe({name:"Main UI thread blocked",op:"ui.long-animation-frame",startTime:r,attributes:i});f&&f.end(r+o)}}).observe({type:"long-animation-frame",buffered:!0})}function Ws(){ot("event",({entries:e})=>{if(K()){for(let t of e)if(t.name==="click"){let n=ie(oe+t.startTime),r=ie(t.duration),o={name:ye(t.target),op:`ui.interaction.${t.name}`,startTime:n,attributes:{[te]:"auto.ui.browser.metrics"}},i=zn(t.target);i&&(o.attributes["ui.component_name"]=i);let s=xe(o);s&&s.end(n+r)}}})}function Hm(){return un(({metric:e})=>{let t=e.entries[e.entries.length-1];t&&(Se&&h.log(`[Measurements] Adding CLS ${e.value}`),_e.cls={value:e.value,unit:""},_r=t)},!0)}function $m(){return pr(({metric:e})=>{let t=e.entries[e.entries.length-1];t&&(Se&&h.log("[Measurements] Adding LCP"),_e.lcp={value:e.value,unit:"millisecond"},gt=t)},!0)}function Wm(){return mr(({metric:e})=>{let t=e.entries[e.entries.length-1];if(!t)return;let n=ie(oe),r=ie(t.startTime);Se&&h.log("[Measurements] Adding FID"),_e.fid={value:e.value,unit:"millisecond"},_e["mark.fid"]={value:n+r,unit:"second"}})}function zm(){return Fs(({metric:e})=>{e.entries[e.entries.length-1]&&(Se&&h.log("[Measurements] Adding TTFB"),_e.ttfb={value:e.value,unit:"millisecond"})})}function zs(e,t){let n=Sr();if(!n||!b.performance.getEntries||!oe)return;Se&&h.log("[Tracing] Adding & adjusting spans using Performance API");let r=ie(oe),o=n.getEntries(),{op:i,start_timestamp:s}=x(e);if(o.slice(al).forEach(a=>{let c=ie(a.startTime),u=ie(Math.max(0,a.duration));if(!(i==="navigation"&&s&&r+c<s))switch(a.entryType){case"navigation":{jm(e,a,r);break}case"mark":case"paint":case"measure":{Gm(e,a,c,u,r);let l=Ht(),d=a.startTime<l.firstHiddenTime;a.name==="first-paint"&&d&&(Se&&h.log("[Measurements] Adding FP"),_e.fp={value:a.startTime,unit:"millisecond"}),a.name==="first-contentful-paint"&&d&&(Se&&h.log("[Measurements] Adding FCP"),_e.fcp={value:a.startTime,unit:"millisecond"});break}case"resource":{Ym(e,a,a.name,c,u,r);break}}}),al=Math.max(o.length-1,0),Vm(e),i==="pageload"){Km(_e);let a=_e["mark.fid"];a&&_e.fid&&(ln(e,a.value,a.value+ie(_e.fid.value),{name:"first input delay",op:"ui.action",attributes:{[te]:"auto.ui.browser.metrics"}}),delete _e["mark.fid"]),(!("fcp"in _e)||!t.recordClsOnPageloadSpan)&&delete _e.cls,Object.entries(_e).forEach(([c,u])=>{lo(c,u.value,u.unit)}),e.setAttribute("performance.timeOrigin",r),Jm(e)}gt=void 0,_r=void 0,_e={}}function Gm(e,t,n,r,o){let i=Ct(),s=ie(i?i.requestStart:0),a=o+Math.max(n,s),c=o+n,u=c+r,l={[te]:"auto.resource.browser.metrics"};return a!==c&&(l["sentry.browser.measure_happened_before_request"]=!0,l["sentry.browser.measure_start_time"]=a),ln(e,a,u,{name:t.name,op:t.entryType,attributes:l}),a}function jm(e,t,n){["unloadEvent","redirect","domContentLoadedEvent","loadEvent","connect"].forEach(r=>{Ao(e,t,r,n)}),Ao(e,t,"secureConnection",n,"TLS/SSL","connectEnd"),Ao(e,t,"fetch",n,"cache","domainLookupStart"),Ao(e,t,"domainLookup",n,"DNS"),qm(e,t,n)}function Ao(e,t,n,r,o,i){let s=i?t[i]:t[`${n}End`],a=t[`${n}Start`];!a||!s||ln(e,r+ie(a),r+ie(s),{op:"browser",name:o||n,attributes:{[te]:"auto.ui.browser.metrics"}})}function qm(e,t,n){let r=n+ie(t.requestStart),o=n+ie(t.responseEnd),i=n+ie(t.responseStart);t.responseEnd&&(ln(e,r,o,{op:"browser",name:"request",attributes:{[te]:"auto.ui.browser.metrics"}}),ln(e,i,o,{op:"browser",name:"response",attributes:{[te]:"auto.ui.browser.metrics"}}))}function Ym(e,t,n,r,o,i){if(t.initiatorType==="xmlhttprequest"||t.initiatorType==="fetch")return;let s=qe(n),a={[te]:"auto.resource.browser.metrics"};Us(a,t,"transferSize","http.response_transfer_size"),Us(a,t,"encodedBodySize","http.response_content_length"),Us(a,t,"decodedBodySize","http.decoded_response_content_length"),"renderBlockingStatus"in t&&(a["resource.render_blocking_status"]=t.renderBlockingStatus),s.protocol&&(a["url.scheme"]=s.protocol.split(":").pop()),s.host&&(a["server.address"]=s.host),a["url.same_origin"]=n.includes(b.location.origin);let c=i+r,u=c+o;ln(e,c,u,{name:n.replace(b.location.origin,""),op:t.initiatorType?`resource.${t.initiatorType}`:"resource.other",attributes:a})}function Vm(e){let t=b.navigator;if(!t)return;let n=t.connection;n&&(n.effectiveType&&e.setAttribute("effectiveConnectionType",n.effectiveType),n.type&&e.setAttribute("connectionType",n.type),xo(n.rtt)&&(_e["connection.rtt"]={value:n.rtt,unit:"millisecond"})),xo(t.deviceMemory)&&e.setAttribute("deviceMemory",`${t.deviceMemory} GB`),xo(t.hardwareConcurrency)&&e.setAttribute("hardwareConcurrency",String(t.hardwareConcurrency))}function Jm(e){gt&&(Se&&h.log("[Measurements] Adding LCP Data"),gt.element&&e.setAttribute("lcp.element",ye(gt.element)),gt.id&&e.setAttribute("lcp.id",gt.id),gt.url&&e.setAttribute("lcp.url",gt.url.trim().slice(0,200)),e.setAttribute("lcp.size",gt.size)),_r&&_r.sources&&(Se&&h.log("[Measurements] Adding CLS Data"),_r.sources.forEach((t,n)=>e.setAttribute(`cls.source.${n+1}`,ye(t.node))))}function Us(e,t,n,r){let o=t[n];o!=null&&o<Bm&&(e[r]=o)}function Km(e){let t=Ct();if(!t)return;let{responseStart:n,requestStart:r}=t;r<=n&&(Se&&h.log("[Measurements] Adding TTFB Request Time"),e["ttfb.requestTime"]={value:n-r,unit:"millisecond"})}var Xm=1e3,cl,Gs,js;function yr(e){let t="dom";Te(t,e),Ie(t,Zm)}function Zm(){if(!b.document)return;let e=fe.bind(null,"dom"),t=ul(e,!0);b.document.addEventListener("click",t,!1),b.document.addEventListener("keypress",t,!1),["EventTarget","Node"].forEach(n=>{let r=b[n]&&b[n].prototype;!r||!r.hasOwnProperty||!r.hasOwnProperty("addEventListener")||(le(r,"addEventListener",function(o){return function(i,s,a){if(i==="click"||i=="keypress")try{let c=this,u=c.__sentry_instrumentation_handlers__=c.__sentry_instrumentation_handlers__||{},l=u[i]=u[i]||{refCount:0};if(!l.handler){let d=ul(e);l.handler=d,o.call(this,i,d,a)}l.refCount++}catch{}return o.call(this,i,s,a)}}),le(r,"removeEventListener",function(o){return function(i,s,a){if(i==="click"||i=="keypress")try{let c=this,u=c.__sentry_instrumentation_handlers__||{},l=u[i];l&&(l.refCount--,l.refCount<=0&&(o.call(this,i,l.handler,a),l.handler=void 0,delete u[i]),Object.keys(u).length===0&&delete c.__sentry_instrumentation_handlers__)}catch{}return o.call(this,i,s,a)}}))})}function Qm(e){if(e.type!==Gs)return!1;try{if(!e.target||e.target._sentryId!==js)return!1}catch{}return!0}function eh(e,t){return e!=="keypress"?!1:!t||!t.tagName?!0:!(t.tagName==="INPUT"||t.tagName==="TEXTAREA"||t.isContentEditable)}function ul(e,t=!1){return n=>{if(!n||n._sentryCaptured)return;let r=th(n);if(eh(n.type,r))return;de(n,"_sentryCaptured",!0),r&&!r._sentryId&&de(r,"_sentryId",$());let o=n.type==="keypress"?"input":n.type;Qm(n)||(e({event:n,name:o,global:t}),Gs=n.type,js=r?r._sentryId:void 0),clearTimeout(cl),cl=b.setTimeout(()=>{js=void 0,Gs=void 0},Xm)}}function th(e){try{return e.target}catch{return null}}var No;function wt(e){let t="history";Te(t,e),Ie(t,nh)}function nh(){if(!as())return;let e=b.onpopstate;b.onpopstate=function(...n){let r=b.location.href,o=No;if(No=r,fe("history",{from:o,to:r}),e)try{return e.apply(this,n)}catch{}};function t(n){return function(...r){let o=r.length>2?r[2]:void 0;if(o){let i=No,s=String(o);No=s,fe("history",{from:i,to:s})}return n.apply(this,r)}}le(b.history,"pushState",t),le(b.history,"replaceState",t)}var Mo={};function Oo(e){let t=Mo[e];if(t)return t;let n=b[e];if(jn(n))return Mo[e]=n.bind(b);let r=b.document;if(r&&typeof r.createElement=="function")try{let o=r.createElement("iframe");o.hidden=!0,r.head.appendChild(o);let i=o.contentWindow;i&&i[e]&&(n=i[e]),r.head.removeChild(o)}catch(o){Se&&h.warn(`Could not create sandbox iframe for ${e} check, bailing to window.${e}: `,o)}return n&&(Mo[e]=n.bind(b))}function Do(e){Mo[e]=void 0}function $t(...e){return Oo("setTimeout")(...e)}var it="__sentry_xhr_v3__";function Er(e){let t="xhr";Te(t,e),Ie(t,rh)}function rh(){if(!b.XMLHttpRequest)return;let e=XMLHttpRequest.prototype;e.open=new Proxy(e.open,{apply(t,n,r){let o=ee()*1e3,i=ve(r[0])?r[0].toUpperCase():void 0,s=oh(r[1]);if(!i||!s)return t.apply(n,r);n[it]={method:i,url:s,request_headers:{}},i==="POST"&&s.match(/sentry_key/)&&(n.__sentry_own_request__=!0);let a=()=>{let c=n[it];if(c&&n.readyState===4){try{c.status_code=n.status}catch{}let u={endTimestamp:ee()*1e3,startTimestamp:o,xhr:n};fe("xhr",u)}};return"onreadystatechange"in n&&typeof n.onreadystatechange=="function"?n.onreadystatechange=new Proxy(n.onreadystatechange,{apply(c,u,l){return a(),c.apply(u,l)}}):n.addEventListener("readystatechange",a),n.setRequestHeader=new Proxy(n.setRequestHeader,{apply(c,u,l){let[d,f]=l,p=u[it];return p&&ve(d)&&ve(f)&&(p.request_headers[d.toLowerCase()]=f),c.apply(u,l)}}),t.apply(n,r)}}),e.send=new Proxy(e.send,{apply(t,n,r){let o=n[it];if(!o)return t.apply(n,r);r[0]!==void 0&&(o.body=r[0]);let i={startTimestamp:ee()*1e3,xhr:n};return fe("xhr",i),t.apply(n,r)}})}function oh(e){if(ve(e))return e;try{return e.toString()}catch{}}var qs=[],Po=new Map;function Ys(){if(Sr()&&oe){let t=ih();return()=>{t()}}return()=>{}}var ll={click:"click",pointerdown:"click",pointerup:"click",mousedown:"click",mouseup:"click",touchstart:"click",touchend:"click",mouseover:"hover",mouseout:"hover",mouseenter:"hover",mouseleave:"hover",pointerover:"hover",pointerout:"hover",pointerenter:"hover",pointerleave:"hover",dragstart:"drag",dragend:"drag",drag:"drag",dragenter:"drag",dragleave:"drag",dragover:"drag",drop:"drag",keydown:"press",keyup:"press",keypress:"press",input:"press"};function ih(){return hr(({metric:e})=>{if(e.value==null)return;let t=e.entries.find(m=>m.duration===e.value&&ll[m.name]);if(!t)return;let{interactionId:n}=t,r=ll[t.name],o=ie(oe+t.startTime),i=ie(e.value),s=K(),a=s?j(s):void 0,u=(n!=null?Po.get(n):void 0)||a,l=u?x(u).description:F().getScopeData().transactionName,d=ye(t.target),f=J({[te]:"auto.http.browser.inp",[Re]:`ui.interaction.${r}`,[rn]:t.duration}),p=ko({name:d,transaction:l,attributes:f,startTime:o});he([p,"optionalAccess",m=>m.addEvent,"call",m=>m("inp",{[Dt]:"millisecond",[Pt]:e.value})]),he([p,"optionalAccess",m=>m.end,"call",m=>m(o+i)])})}function Vs(e){let t=({entries:n})=>{let r=K(),o=r&&j(r);n.forEach(i=>{if(!il(i)||!o)return;let s=i.interactionId;if(s!=null&&!Po.has(s)){if(qs.length>10){let a=qs.shift();Po.delete(a)}qs.push(s),Po.set(s,o)}})};ot("event",t),ot("first-input",t)}function dl(e,t=Oo("fetch")){let n=0,r=0;function o(i){let s=i.body.length;n+=s,r++;let a={body:i.body,method:"POST",referrerPolicy:"origin",headers:e.headers,keepalive:n<=6e4&&r<15,...e.fetchOptions};if(!t)return Do("fetch"),Nt("No fetch implementation available");try{return t(e.url,a).then(c=>(n-=s,r--,{statusCode:c.status,headers:{"x-sentry-rate-limits":c.headers.get("X-Sentry-Rate-Limits"),"retry-after":c.headers.get("Retry-After")}}))}catch(c){return Do("fetch"),n-=s,r--,Nt(c)}}return So(e,o)}var sh=30;var ah=50;function Js(e,t,n,r){let o={filename:e,function:t==="<anonymous>"?ft:t,in_app:!0};return n!==void 0&&(o.lineno=n),r!==void 0&&(o.colno=r),o}var ch=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,uh=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,lh=/\((\S*)(?::(\d+))(?::(\d+))\)/,dh=e=>{let t=ch.exec(e);if(t){let[,r,o,i]=t;return Js(r,ft,+o,+i)}let n=uh.exec(e);if(n){if(n[2]&&n[2].indexOf("eval")===0){let s=lh.exec(n[2]);s&&(n[2]=s[1],n[3]=s[2],n[4]=s[3])}let[o,i]=pl(n[1]||ft,n[2]);return Js(i,o,n[3]?+n[3]:void 0,n[4]?+n[4]:void 0)}},fh=[sh,dh],ph=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,mh=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,hh=e=>{let t=ph.exec(e);if(t){if(t[3]&&t[3].indexOf(" > eval")>-1){let i=mh.exec(t[3]);i&&(t[1]=t[1]||"eval",t[3]=i[1],t[4]=i[2],t[5]="")}let r=t[3],o=t[1]||ft;return[o,r]=pl(o,r),Js(r,o,t[4]?+t[4]:void 0,t[5]?+t[5]:void 0)}},gh=[ah,hh];var Sh=[fh,gh],fl=Vr(...Sh),pl=(e,t)=>{let n=e.indexOf("safari-extension")!==-1,r=e.indexOf("safari-web-extension")!==-1;return n||r?[e.indexOf("@")!==-1?e.split("@")[0]:ft,n?`safari-extension:${t}`:`safari-web-extension:${t}`]:[e,t]};var Lo=1024,_h="Breadcrumbs",yh=(e={})=>{let t={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...e};return{name:_h,setup(n){t.console&&Wi(Ih(n)),t.dom&&yr(Th(n,t.dom)),t.xhr&&Er(bh(n)),t.fetch&&Yn(vh(n)),t.history&&wt(Ch(n)),t.sentry&&n.on("beforeSendEvent",Eh(n))}}},ml=yh;function Eh(e){return function(n){v()===e&&Ve({category:`sentry.${n.type==="transaction"?"transaction":"event"}`,event_id:n.event_id,level:n.level,message:et(n)},{event:n})}}function Th(e,t){return function(r){if(v()!==e)return;let o,i,s=typeof t=="object"?t.serializeAttribute:void 0,a=typeof t=="object"&&typeof t.maxStringLength=="number"?t.maxStringLength:void 0;a&&a>Lo&&(H&&h.warn(`\`dom.maxStringLength\` cannot exceed ${Lo}, but a value of ${a} was configured. Sentry will use ${Lo} instead.`),a=Lo),typeof s=="string"&&(s=[s]);try{let u=r.event,l=Rh(u)?u.target:u;o=ye(l,{keyAttrs:s,maxStringLength:a}),i=zn(l)}catch{o="<unknown>"}if(o.length===0)return;let c={category:`ui.${r.name}`,message:o};i&&(c.data={"ui.component_name":i}),Ve(c,{event:r.event,name:r.name,global:r.global})}}function Ih(e){return function(n){if(v()!==e)return;let r={category:"console",data:{arguments:n.args,logger:"console"},level:Xi(n.level),message:zr(n.args," ")};if(n.level==="assert")if(n.args[0]===!1)r.message=`Assertion failed: ${zr(n.args.slice(1)," ")||"console.assert"}`,r.data.arguments=n.args.slice(1);else return;Ve(r,{input:n.args,level:n.level})}}function bh(e){return function(n){if(v()!==e)return;let{startTimestamp:r,endTimestamp:o}=n,i=n.xhr[it];if(!r||!o||!i)return;let{method:s,url:a,status_code:c,body:u}=i,l={method:s,url:a,status_code:c},d={xhr:n.xhr,input:u,startTimestamp:r,endTimestamp:o};Ve({category:"xhr",data:l,type:"http"},d)}}function vh(e){return function(n){if(v()!==e)return;let{startTimestamp:r,endTimestamp:o}=n;if(o&&!(n.fetchData.url.match(/sentry_key/)&&n.fetchData.method==="POST"))if(n.error){let i=n.fetchData,s={data:n.error,input:n.args,startTimestamp:r,endTimestamp:o};Ve({category:"fetch",data:i,level:"error",type:"http"},s)}else{let i=n.response,s={...n.fetchData,status_code:i&&i.status},a={input:n.args,response:i,startTimestamp:r,endTimestamp:o};Ve({category:"fetch",data:s,type:"http"},a)}}}function Ch(e){return function(n){if(v()!==e)return;let r=n.from,o=n.to,i=qe(I.location.href),s=r?qe(r):void 0,a=qe(o);(!s||!s.path)&&(s=i),i.protocol===a.protocol&&i.host===a.host&&(o=a.relative),i.protocol===s.protocol&&i.host===s.host&&(r=s.relative),Ve({category:"navigation",data:{from:r,to:o}})}}function Rh(e){return!!e&&!!e.target}var wh=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],xh="BrowserApiErrors",kh=(e={})=>{let t={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,...e};return{name:xh,setupOnce(){t.setTimeout&&le(I,"setTimeout",hl),t.setInterval&&le(I,"setInterval",hl),t.requestAnimationFrame&&le(I,"requestAnimationFrame",Ah),t.XMLHttpRequest&&"XMLHttpRequest"in I&&le(XMLHttpRequest.prototype,"send",Nh);let n=t.eventTarget;n&&(Array.isArray(n)?n:wh).forEach(Mh)}}},gl=kh;function hl(e){return function(...t){let n=t[0];return t[0]=cn(n,{mechanism:{data:{function:Me(e)},handled:!1,type:"instrument"}}),e.apply(this,t)}}function Ah(e){return function(t){return e.apply(this,[cn(t,{mechanism:{data:{function:"requestAnimationFrame",handler:Me(e)},handled:!1,type:"instrument"}})])}}function Nh(e){return function(...t){let n=this;return["onload","onerror","onprogress","onreadystatechange"].forEach(o=>{o in n&&typeof n[o]=="function"&&le(n,o,function(i){let s={mechanism:{data:{function:o,handler:Me(i)},handled:!1,type:"instrument"}},a=Zt(i);return a&&(s.mechanism.data.handler=Me(a)),cn(i,s)})}),e.apply(this,t)}}function Mh(e){let t=I,n=t[e]&&t[e].prototype;!n||!n.hasOwnProperty||!n.hasOwnProperty("addEventListener")||(le(n,"addEventListener",function(r){return function(o,i,s){try{typeof i.handleEvent=="function"&&(i.handleEvent=cn(i.handleEvent,{mechanism:{data:{function:"handleEvent",handler:Me(i),target:e},handled:!1,type:"instrument"}}))}catch{}return r.apply(this,[o,cn(i,{mechanism:{data:{function:"addEventListener",handler:Me(i),target:e},handled:!1,type:"instrument"}}),s])}}),le(n,"removeEventListener",function(r){return function(o,i,s){let a=i;try{let c=a&&a.__sentry_wrapped__;c&&r.call(this,o,c,s)}catch{}return r.call(this,o,a,s)}}))}var Oh="GlobalHandlers",Dh=(e={})=>{let t={onerror:!0,onunhandledrejection:!0,...e};return{name:Oh,setupOnce(){Error.stackTraceLimit=50},setup(n){t.onerror&&(Ph(n),Sl("onerror")),t.onunhandledrejection&&(Lh(n),Sl("onunhandledrejection"))}}},_l=Dh;function Ph(e){Vn(t=>{let{stackParser:n,attachStacktrace:r}=yl();if(v()!==e||ks())return;let{msg:o,url:i,line:s,column:a,error:c}=t,u=Bh(bo(n,c||o,void 0,r,!1),i,s,a);u.level="error",sr(u,{originalException:c,mechanism:{handled:!1,type:"onerror"}})})}function Lh(e){Jn(t=>{let{stackParser:n,attachStacktrace:r}=yl();if(v()!==e||ks())return;let o=Fh(t),i=Kt(o)?Uh(o):bo(n,o,void 0,r,!0);i.level="error",sr(i,{originalException:o,mechanism:{handled:!1,type:"onunhandledrejection"}})})}function Fh(e){if(Kt(e))return e;try{if("reason"in e)return e.reason;if("detail"in e&&"reason"in e.detail)return e.detail.reason}catch{}return e}function Uh(e){return{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(e)}`}]}}}function Bh(e,t,n,r){let o=e.exception=e.exception||{},i=o.values=o.values||[],s=i[0]=i[0]||{},a=s.stacktrace=s.stacktrace||{},c=a.frames=a.frames||[],u=isNaN(parseInt(r,10))?void 0:r,l=isNaN(parseInt(n,10))?void 0:n,d=ve(t)&&t.length>0?t:Wn();return c.length===0&&c.push({colno:u,filename:d,function:ft,in_app:!0,lineno:l}),e}function Sl(e){H&&h.log(`Global Handler attached: ${e}`)}function yl(){let e=v();return e&&e.getOptions()||{stackParser:()=>[],attachStacktrace:!1}}var El=()=>({name:"HttpContext",preprocessEvent(e){if(!I.navigator&&!I.location&&!I.document)return;let t=e.request&&e.request.url||I.location&&I.location.href,{referrer:n}=I.document||{},{userAgent:r}=I.navigator||{},o={...e.request&&e.request.headers,...n&&{Referer:n},...r&&{"User-Agent":r}},i={...e.request,...t&&{url:t},headers:o};e.request=i}});var Hh="cause",$h=5,Wh="LinkedErrors",zh=(e={})=>{let t=e.limit||$h,n=e.key||Hh;return{name:Wh,preprocessEvent(r,o,i){let s=i.getOptions();Pi(Io,s.stackParser,s.maxValueLength,n,t,r,o)}}},Tl=zh;function Il(e){return[Eo(),_o(),gl(),ml(),_l(),Tl(),To(),El()]}function Gh(e={}){let t={defaultIntegrations:Il(),release:typeof __SENTRY_RELEASE__=="string"?__SENTRY_RELEASE__:I.SENTRY_RELEASE&&I.SENTRY_RELEASE.id?I.SENTRY_RELEASE.id:void 0,autoSessionTracking:!0,sendClientReports:!0};return e.defaultIntegrations==null&&delete e.defaultIntegrations,{...t,...e}}function jh(){let e=typeof I.window<"u"&&I;if(!e)return!1;let t=e.chrome?"chrome":"browser",n=e[t],r=n&&n.runtime&&n.runtime.id,o=I.location&&I.location.href||"",i=["chrome-extension:","moz-extension:","ms-browser-extension:","safari-web-extension:"],s=!!r&&I===I.top&&i.some(c=>o.startsWith(`${c}//`)),a=typeof e.nw<"u";return!!r&&!s&&!a}function Ks(e={}){let t=Gh(e);if(jh()){je(()=>{console.error("[Sentry] You cannot run Sentry this way in a browser extension, check: https://docs.sentry.io/platforms/javascript/best-practices/browser-extensions/")});return}H&&(Xr()||h.warn("No Fetch API detected. The Sentry SDK requires a Fetch API compatible environment to send events. Please add a Fetch API polyfill."));let n={...t,stackParser:$i(t.stackParser||fl),integrations:Es(t),transport:t.transport||dl},r=bs(vo,n);return t.autoSessionTracking&&qh(),r}function qh(){if(typeof I.document>"u"){H&&h.warn("Session tracking in non-browser environment with @sentry/browser is not supported.");return}ar({ignoreDuration:!0}),cr(),wt(({from:e,to:t})=>{e!==void 0&&e!==t&&(ar({ignoreDuration:!0}),cr())})}var re=w,va="sentryReplaySession",Yh="replay_event",Ca="Unable to send Replay",Vh=3e5,Jh=9e5,Kh=5e3,Xh=5500,Zh=6e4,Qh=5e3,eg=3,bl=15e4,Fo=5e3,tg=3e3,ng=300,Ra=2e7,rg=4999,og=15e3,vl=36e5;function ta(e,t){return e??t()}function Cr(e){let t,n=e[0],r=1;for(;r<e.length;){let o=e[r],i=e[r+1];if(r+=2,(o==="optionalAccess"||o==="optionalCall")&&n==null)return;o==="access"||o==="optionalAccess"?(t=n,n=i(n)):(o==="call"||o==="optionalCall")&&(n=i((...s)=>n.call(t,...s)),t=void 0)}return n}var pe;(function(e){e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment"})(pe||(pe={}));function ig(e){return e.nodeType===e.ELEMENT_NODE}function Ir(e){let t=Cr([e,"optionalAccess",n=>n.host]);return Cr([t,"optionalAccess",n=>n.shadowRoot])===e}function br(e){return Object.prototype.toString.call(e)==="[object ShadowRoot]"}function sg(e){return e.includes(" background-clip: text;")&&!e.includes(" -webkit-background-clip: text;")&&(e=e.replace(" background-clip: text;"," -webkit-background-clip: text; background-clip: text;")),e}function ag(e){let{cssText:t}=e;if(t.split('"').length<3)return t;let n=["@import",`url(${JSON.stringify(e.href)})`];return e.layerName===""?n.push("layer"):e.layerName&&n.push(`layer(${e.layerName})`),e.supportsText&&n.push(`supports(${e.supportsText})`),e.media.length&&n.push(e.media.mediaText),n.join(" ")+";"}function Wo(e){try{let t=e.rules||e.cssRules;return t?sg(Array.from(t,Gl).join("")):null}catch{return null}}function Gl(e){let t;if(ug(e))try{t=Wo(e.styleSheet)||ag(e)}catch{}else if(lg(e)&&e.selectorText.includes(":"))return cg(e.cssText);return t||e.cssText}function cg(e){let t=/(\[(?:[\w-]+)[^\\])(:(?:[\w-]+)\])/gm;return e.replace(t,"$1\\$2")}function ug(e){return"styleSheet"in e}function lg(e){return"selectorText"in e}var zo=class{constructor(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}getId(t){if(!t)return-1;let n=Cr([this,"access",r=>r.getMeta,"call",r=>r(t),"optionalAccess",r=>r.id]);return ta(n,()=>-1)}getNode(t){return this.idNodeMap.get(t)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(t){return this.nodeMetaMap.get(t)||null}removeNodeFromMap(t){let n=this.getId(t);this.idNodeMap.delete(n),t.childNodes&&t.childNodes.forEach(r=>this.removeNodeFromMap(r))}has(t){return this.idNodeMap.has(t)}hasNode(t){return this.nodeMetaMap.has(t)}add(t,n){let r=n.id;this.idNodeMap.set(r,t),this.nodeMetaMap.set(t,n)}replace(t,n){let r=this.getNode(t);if(r){let o=this.nodeMetaMap.get(r);o&&this.nodeMetaMap.set(n,o)}this.idNodeMap.set(t,n)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}};function dg(){return new zo}function ri({maskInputOptions:e,tagName:t,type:n}){return t==="OPTION"&&(t="SELECT"),!!(e[t.toLowerCase()]||n&&e[n]||n==="password"||t==="INPUT"&&!n&&e.text)}function Rr({isMasked:e,element:t,value:n,maskInputFn:r}){let o=n||"";return e?(r&&(o=r(o,t)),"*".repeat(o.length)):o}function Un(e){return e.toLowerCase()}function na(e){return e.toUpperCase()}var Cl="__rrweb_original__";function fg(e){let t=e.getContext("2d");if(!t)return!0;let n=50;for(let r=0;r<e.width;r+=n)for(let o=0;o<e.height;o+=n){let i=t.getImageData,s=Cl in i?i[Cl]:i;if(new Uint32Array(s.call(t,r,o,Math.min(n,e.width-r),Math.min(n,e.height-o)).data.buffer).some(c=>c!==0))return!1}return!0}function wa(e){let t=e.type;return e.hasAttribute("data-rr-is-password")?"password":t?Un(t):null}function Go(e,t,n){return t==="INPUT"&&(n==="radio"||n==="checkbox")?e.getAttribute("value")||"":e.value}function jl(e,t){let n;try{n=new URL(e,ta(t,()=>window.location.href))}catch{return null}let r=/\.([0-9a-z]+)(?:$)/i,o=n.pathname.match(r);return ta(Cr([o,"optionalAccess",i=>i[1]]),()=>null)}var Rl={};function ql(e){let t=Rl[e];if(t)return t;let n=window.document,r=window[e];if(n&&typeof n.createElement=="function")try{let o=n.createElement("iframe");o.hidden=!0,n.head.appendChild(o);let i=o.contentWindow;i&&i[e]&&(r=i[e]),n.head.removeChild(o)}catch{}return Rl[e]=r.bind(window)}function ra(...e){return ql("setTimeout")(...e)}function Yl(...e){return ql("clearTimeout")(...e)}var pg=1,mg=new RegExp("[^a-z0-9-_:]"),wr=-2;function xa(){return pg++}function hg(e){if(e instanceof HTMLFormElement)return"form";let t=Un(e.tagName);return mg.test(t)?"div":t}function gg(e){let t="";return e.indexOf("//")>-1?t=e.split("/").slice(0,3).join("/"):t=e.split("/")[0],t=t.split("?")[0],t}var Mn,wl,Sg=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,_g=/^(?:[a-z+]+:)?\/\//i,yg=/^www\..*/i,Eg=/^(data:)([^,]*),(.*)/i;function jo(e,t){return(e||"").replace(Sg,(n,r,o,i,s,a)=>{let c=o||s||a,u=r||i||"";if(!c)return n;if(_g.test(c)||yg.test(c))return`url(${u}${c}${u})`;if(Eg.test(c))return`url(${u}${c}${u})`;if(c[0]==="/")return`url(${u}${gg(t)+c}${u})`;let l=t.split("/"),d=c.split("/");l.pop();for(let f of d)f!=="."&&(f===".."?l.pop():l.push(f));return`url(${u}${l.join("/")}${u})`})}var Tg=/^[^ \t\n\r\u000c]+/,Ig=/^[, \t\n\r\u000c]+/;function bg(e,t){if(t.trim()==="")return t;let n=0;function r(i){let s,a=i.exec(t.substring(n));return a?(s=a[0],n+=s.length,s):""}let o=[];for(;r(Ig),!(n>=t.length);){let i=r(Tg);if(i.slice(-1)===",")i=Dn(e,i.substring(0,i.length-1)),o.push(i);else{let s="";i=Dn(e,i);let a=!1;for(;;){let c=t.charAt(n);if(c===""){o.push((i+s).trim());break}else if(a)c===")"&&(a=!1);else if(c===","){n+=1,o.push((i+s).trim());break}else c==="("&&(a=!0);s+=c,n+=1}}}return o.join(", ")}function Dn(e,t){if(!t||t.trim()==="")return t;let n=e.createElement("a");return n.href=t,n.href}function vg(e){return!!(e.tagName==="svg"||e.ownerSVGElement)}function ka(){let e=document.createElement("a");return e.href="",e.href}function Vl(e,t,n,r,o,i){return r&&(n==="src"||n==="href"&&!(t==="use"&&r[0]==="#")||n==="xlink:href"&&r[0]!=="#"||n==="background"&&(t==="table"||t==="td"||t==="th")?Dn(e,r):n==="srcset"?bg(e,r):n==="style"?jo(r,ka()):t==="object"&&n==="data"?Dn(e,r):typeof i=="function"?i(n,r,o):r)}function Jl(e,t,n){return(e==="video"||e==="audio")&&t==="autoplay"}function Cg(e,t,n,r){try{if(r&&e.matches(r))return!1;if(typeof t=="string"){if(e.classList.contains(t))return!0}else for(let o=e.classList.length;o--;){let i=e.classList[o];if(t.test(i))return!0}if(n)return e.matches(n)}catch{}return!1}function Rg(e,t){for(let n=e.classList.length;n--;){let r=e.classList[n];if(t.test(r))return!0}return!1}function dn(e,t,n=1/0,r=0){return!e||e.nodeType!==e.ELEMENT_NODE||r>n?-1:t(e)?r:dn(e.parentNode,t,n,r+1)}function Pn(e,t){return n=>{let r=n;if(r===null)return!1;try{if(e){if(typeof e=="string"){if(r.matches(`.${e}`))return!0}else if(Rg(r,e))return!0}return!!(t&&r.matches(t))}catch{return!1}}}function Bn(e,t,n,r,o,i){try{let s=e.nodeType===e.ELEMENT_NODE?e:e.parentElement;if(s===null)return!1;if(s.tagName==="INPUT"){let u=s.getAttribute("autocomplete");if(["current-password","new-password","cc-number","cc-exp","cc-exp-month","cc-exp-year","cc-csc"].includes(u))return!0}let a=-1,c=-1;if(i){if(c=dn(s,Pn(r,o)),c<0)return!0;a=dn(s,Pn(t,n),c>=0?c:1/0)}else{if(a=dn(s,Pn(t,n)),a<0)return!1;c=dn(s,Pn(r,o),a>=0?a:1/0)}return a>=0?c>=0?a<=c:!0:c>=0?!1:!!i}catch{}return!!i}function wg(e,t,n){let r=e.contentWindow;if(!r)return;let o=!1,i;try{i=r.document.readyState}catch{return}if(i!=="complete"){let a=ra(()=>{o||(t(),o=!0)},n);e.addEventListener("load",()=>{Yl(a),o=!0,t()});return}let s="about:blank";if(r.location.href!==s||e.src===s||e.src==="")return ra(t,0),e.addEventListener("load",t);e.addEventListener("load",t)}function xg(e,t,n){let r=!1,o;try{o=e.sheet}catch{return}if(o)return;let i=ra(()=>{r||(t(),r=!0)},n);e.addEventListener("load",()=>{Yl(i),r=!0,t()})}function kg(e,t){let{doc:n,mirror:r,blockClass:o,blockSelector:i,unblockSelector:s,maskAllText:a,maskAttributeFn:c,maskTextClass:u,unmaskTextClass:l,maskTextSelector:d,unmaskTextSelector:f,inlineStylesheet:p,maskInputOptions:m={},maskTextFn:g,maskInputFn:T,dataURLOptions:y={},inlineImages:N,recordCanvas:B,keepIframeSrcFn:k,newlyAddedElement:M=!1}=t,_=Ag(n,r);switch(e.nodeType){case e.DOCUMENT_NODE:return e.compatMode!=="CSS1Compat"?{type:pe.Document,childNodes:[],compatMode:e.compatMode}:{type:pe.Document,childNodes:[]};case e.DOCUMENT_TYPE_NODE:return{type:pe.DocumentType,name:e.name,publicId:e.publicId,systemId:e.systemId,rootId:_};case e.ELEMENT_NODE:return Mg(e,{doc:n,blockClass:o,blockSelector:i,unblockSelector:s,inlineStylesheet:p,maskAttributeFn:c,maskInputOptions:m,maskInputFn:T,dataURLOptions:y,inlineImages:N,recordCanvas:B,keepIframeSrcFn:k,newlyAddedElement:M,rootId:_,maskAllText:a,maskTextClass:u,unmaskTextClass:l,maskTextSelector:d,unmaskTextSelector:f});case e.TEXT_NODE:return Ng(e,{maskAllText:a,maskTextClass:u,unmaskTextClass:l,maskTextSelector:d,unmaskTextSelector:f,maskTextFn:g,maskInputOptions:m,maskInputFn:T,rootId:_});case e.CDATA_SECTION_NODE:return{type:pe.CDATA,textContent:"",rootId:_};case e.COMMENT_NODE:return{type:pe.Comment,textContent:e.textContent||"",rootId:_};default:return!1}}function Ag(e,t){if(!t.hasNode(e))return;let n=t.getId(e);return n===1?void 0:n}function Ng(e,t){let{maskAllText:n,maskTextClass:r,unmaskTextClass:o,maskTextSelector:i,unmaskTextSelector:s,maskTextFn:a,maskInputOptions:c,maskInputFn:u,rootId:l}=t,d=e.parentNode&&e.parentNode.tagName,f=e.textContent,p=d==="STYLE"?!0:void 0,m=d==="SCRIPT"?!0:void 0,g=d==="TEXTAREA"?!0:void 0;if(p&&f){try{e.nextSibling||e.previousSibling||Cr([e,"access",y=>y.parentNode,"access",y=>y.sheet,"optionalAccess",y=>y.cssRules])&&(f=Wo(e.parentNode.sheet))}catch(y){console.warn(`Cannot get CSS styles from text's parentNode. Error: ${y}`,e)}f=jo(f,ka())}m&&(f="SCRIPT_PLACEHOLDER");let T=Bn(e,r,i,o,s,n);if(!p&&!m&&!g&&f&&T&&(f=a?a(f,e.parentElement):f.replace(/[\S]/g,"*")),g&&f&&(c.textarea||T)&&(f=u?u(f,e.parentNode):f.replace(/[\S]/g,"*")),d==="OPTION"&&f){let y=ri({type:null,tagName:d,maskInputOptions:c});f=Rr({isMasked:Bn(e,r,i,o,s,y),element:e,value:f,maskInputFn:u})}return{type:pe.Text,textContent:f||"",isStyle:p,rootId:l}}function Mg(e,t){let{doc:n,blockClass:r,blockSelector:o,unblockSelector:i,inlineStylesheet:s,maskInputOptions:a={},maskAttributeFn:c,maskInputFn:u,dataURLOptions:l={},inlineImages:d,recordCanvas:f,keepIframeSrcFn:p,newlyAddedElement:m=!1,rootId:g,maskAllText:T,maskTextClass:y,unmaskTextClass:N,maskTextSelector:B,unmaskTextSelector:k}=t,M=Cg(e,r,o,i),_=hg(e),S={},R=e.attributes.length;for(let E=0;E<R;E++){let C=e.attributes[E];C.name&&!Jl(_,C.name,C.value)&&(S[C.name]=Vl(n,_,Un(C.name),C.value,e,c))}if(_==="link"&&s){let E=Array.from(n.styleSheets).find(P=>P.href===e.href),C=null;E&&(C=Wo(E)),C&&(delete S.rel,delete S.href,S._cssText=jo(C,E.href))}if(_==="style"&&e.sheet&&!(e.innerText||e.textContent||"").trim().length){let E=Wo(e.sheet);E&&(S._cssText=jo(E,ka()))}if(_==="input"||_==="textarea"||_==="select"||_==="option"){let E=e,C=wa(E),P=Go(E,na(_),C),X=E.checked;if(C!=="submit"&&C!=="button"&&P){let Q=Bn(E,y,B,N,k,ri({type:C,tagName:na(_),maskInputOptions:a}));S.value=Rr({isMasked:Q,element:E,value:P,maskInputFn:u})}X&&(S.checked=X)}if(_==="option"&&(e.selected&&!a.select?S.selected=!0:delete S.selected),_==="canvas"&&f){if(e.__context==="2d")fg(e)||(S.rr_dataURL=e.toDataURL(l.type,l.quality));else if(!("__context"in e)){let E=e.toDataURL(l.type,l.quality),C=document.createElement("canvas");C.width=e.width,C.height=e.height;let P=C.toDataURL(l.type,l.quality);E!==P&&(S.rr_dataURL=E)}}if(_==="img"&&d){Mn||(Mn=n.createElement("canvas"),wl=Mn.getContext("2d"));let E=e,C=E.crossOrigin;E.crossOrigin="anonymous";let P=()=>{E.removeEventListener("load",P);try{Mn.width=E.naturalWidth,Mn.height=E.naturalHeight,wl.drawImage(E,0,0),S.rr_dataURL=Mn.toDataURL(l.type,l.quality)}catch(X){console.warn(`Cannot inline img src=${E.currentSrc}! Error: ${X}`)}C?S.crossOrigin=C:E.removeAttribute("crossorigin")};E.complete&&E.naturalWidth!==0?P():E.addEventListener("load",P)}if((_==="audio"||_==="video")&&(S.rr_mediaState=e.paused?"paused":"played",S.rr_mediaCurrentTime=e.currentTime),m||(e.scrollLeft&&(S.rr_scrollLeft=e.scrollLeft),e.scrollTop&&(S.rr_scrollTop=e.scrollTop)),M){let{width:E,height:C}=e.getBoundingClientRect();S={class:S.class,rr_width:`${E}px`,rr_height:`${C}px`}}_==="iframe"&&!p(S.src)&&(!M&&!e.contentDocument&&(S.rr_src=S.src),delete S.src);let z;try{customElements.get(_)&&(z=!0)}catch{}return{type:pe.Element,tagName:_,attributes:S,childNodes:[],isSVG:vg(e)||void 0,needBlock:M,rootId:g,isCustom:z}}function ne(e){return e==null?"":e.toLowerCase()}function Og(e,t){if(t.comment&&e.type===pe.Comment)return!0;if(e.type===pe.Element){if(t.script&&(e.tagName==="script"||e.tagName==="link"&&(e.attributes.rel==="preload"||e.attributes.rel==="modulepreload")&&e.attributes.as==="script"||e.tagName==="link"&&e.attributes.rel==="prefetch"&&typeof e.attributes.href=="string"&&jl(e.attributes.href)==="js"))return!0;if(t.headFavicon&&(e.tagName==="link"&&e.attributes.rel==="shortcut icon"||e.tagName==="meta"&&(ne(e.attributes.name).match(/^msapplication-tile(image|color)$/)||ne(e.attributes.name)==="application-name"||ne(e.attributes.rel)==="icon"||ne(e.attributes.rel)==="apple-touch-icon"||ne(e.attributes.rel)==="shortcut icon")))return!0;if(e.tagName==="meta"){if(t.headMetaDescKeywords&&ne(e.attributes.name).match(/^description|keywords$/))return!0;if(t.headMetaSocial&&(ne(e.attributes.property).match(/^(og|twitter|fb):/)||ne(e.attributes.name).match(/^(og|twitter):/)||ne(e.attributes.name)==="pinterest"))return!0;if(t.headMetaRobots&&(ne(e.attributes.name)==="robots"||ne(e.attributes.name)==="googlebot"||ne(e.attributes.name)==="bingbot"))return!0;if(t.headMetaHttpEquiv&&e.attributes["http-equiv"]!==void 0)return!0;if(t.headMetaAuthorship&&(ne(e.attributes.name)==="author"||ne(e.attributes.name)==="generator"||ne(e.attributes.name)==="framework"||ne(e.attributes.name)==="publisher"||ne(e.attributes.name)==="progid"||ne(e.attributes.property).match(/^article:/)||ne(e.attributes.property).match(/^product:/)))return!0;if(t.headMetaVerification&&(ne(e.attributes.name)==="google-site-verification"||ne(e.attributes.name)==="yandex-verification"||ne(e.attributes.name)==="csrf-token"||ne(e.attributes.name)==="p:domain_verify"||ne(e.attributes.name)==="verify-v1"||ne(e.attributes.name)==="verification"||ne(e.attributes.name)==="shopify-checkout-api-token"))return!0}}return!1}function Ln(e,t){let{doc:n,mirror:r,blockClass:o,blockSelector:i,unblockSelector:s,maskAllText:a,maskTextClass:c,unmaskTextClass:u,maskTextSelector:l,unmaskTextSelector:d,skipChild:f=!1,inlineStylesheet:p=!0,maskInputOptions:m={},maskAttributeFn:g,maskTextFn:T,maskInputFn:y,slimDOMOptions:N,dataURLOptions:B={},inlineImages:k=!1,recordCanvas:M=!1,onSerialize:_,onIframeLoad:S,iframeLoadTimeout:R=5e3,onStylesheetLoad:z,stylesheetLoadTimeout:E=5e3,keepIframeSrcFn:C=()=>!1,newlyAddedElement:P=!1}=t,{preserveWhiteSpace:X=!0}=t,Q=kg(e,{doc:n,mirror:r,blockClass:o,blockSelector:i,maskAllText:a,unblockSelector:s,maskTextClass:c,unmaskTextClass:u,maskTextSelector:l,unmaskTextSelector:d,inlineStylesheet:p,maskInputOptions:m,maskAttributeFn:g,maskTextFn:T,maskInputFn:y,dataURLOptions:B,inlineImages:k,recordCanvas:M,keepIframeSrcFn:C,newlyAddedElement:P});if(!Q)return console.warn(e,"not serialized"),null;let ue;r.hasNode(e)?ue=r.getId(e):Og(Q,N)||!X&&Q.type===pe.Text&&!Q.isStyle&&!Q.textContent.replace(/^\s+|\s+$/gm,"").length?ue=wr:ue=xa();let U=Object.assign(Q,{id:ue});if(r.add(e,U),ue===wr)return null;_&&_(e);let ge=!f;if(U.type===pe.Element){ge=ge&&!U.needBlock,delete U.needBlock;let Z=e.shadowRoot;Z&&br(Z)&&(U.isShadowHost=!0)}if((U.type===pe.Document||U.type===pe.Element)&&ge){N.headWhitespace&&U.type===pe.Element&&U.tagName==="head"&&(X=!1);let Z={doc:n,mirror:r,blockClass:o,blockSelector:i,maskAllText:a,unblockSelector:s,maskTextClass:c,unmaskTextClass:u,maskTextSelector:l,unmaskTextSelector:d,skipChild:f,inlineStylesheet:p,maskInputOptions:m,maskAttributeFn:g,maskTextFn:T,maskInputFn:y,slimDOMOptions:N,dataURLOptions:B,inlineImages:k,recordCanvas:M,preserveWhiteSpace:X,onSerialize:_,onIframeLoad:S,iframeLoadTimeout:R,onStylesheetLoad:z,stylesheetLoadTimeout:E,keepIframeSrcFn:C};for(let Ne of Array.from(e.childNodes)){let yt=Ln(Ne,Z);yt&&U.childNodes.push(yt)}if(ig(e)&&e.shadowRoot)for(let Ne of Array.from(e.shadowRoot.childNodes)){let yt=Ln(Ne,Z);yt&&(br(e.shadowRoot)&&(yt.isShadow=!0),U.childNodes.push(yt))}}return e.parentNode&&Ir(e.parentNode)&&br(e.parentNode)&&(U.isShadow=!0),U.type===pe.Element&&U.tagName==="iframe"&&wg(e,()=>{let Z=e.contentDocument;if(Z&&S){let Ne=Ln(Z,{doc:Z,mirror:r,blockClass:o,blockSelector:i,unblockSelector:s,maskAllText:a,maskTextClass:c,unmaskTextClass:u,maskTextSelector:l,unmaskTextSelector:d,skipChild:!1,inlineStylesheet:p,maskInputOptions:m,maskAttributeFn:g,maskTextFn:T,maskInputFn:y,slimDOMOptions:N,dataURLOptions:B,inlineImages:k,recordCanvas:M,preserveWhiteSpace:X,onSerialize:_,onIframeLoad:S,iframeLoadTimeout:R,onStylesheetLoad:z,stylesheetLoadTimeout:E,keepIframeSrcFn:C});Ne&&S(e,Ne)}},R),U.type===pe.Element&&U.tagName==="link"&&typeof U.attributes.rel=="string"&&(U.attributes.rel==="stylesheet"||U.attributes.rel==="preload"&&typeof U.attributes.href=="string"&&jl(U.attributes.href)==="css")&&xg(e,()=>{if(z){let Z=Ln(e,{doc:n,mirror:r,blockClass:o,blockSelector:i,unblockSelector:s,maskAllText:a,maskTextClass:c,unmaskTextClass:u,maskTextSelector:l,unmaskTextSelector:d,skipChild:!1,inlineStylesheet:p,maskInputOptions:m,maskAttributeFn:g,maskTextFn:T,maskInputFn:y,slimDOMOptions:N,dataURLOptions:B,inlineImages:k,recordCanvas:M,preserveWhiteSpace:X,onSerialize:_,onIframeLoad:S,iframeLoadTimeout:R,onStylesheetLoad:z,stylesheetLoadTimeout:E,keepIframeSrcFn:C});Z&&z(e,Z)}},E),U}function Dg(e,t){let{mirror:n=new zo,blockClass:r="rr-block",blockSelector:o=null,unblockSelector:i=null,maskAllText:s=!1,maskTextClass:a="rr-mask",unmaskTextClass:c=null,maskTextSelector:u=null,unmaskTextSelector:l=null,inlineStylesheet:d=!0,inlineImages:f=!1,recordCanvas:p=!1,maskAllInputs:m=!1,maskAttributeFn:g,maskTextFn:T,maskInputFn:y,slimDOM:N=!1,dataURLOptions:B,preserveWhiteSpace:k,onSerialize:M,onIframeLoad:_,iframeLoadTimeout:S,onStylesheetLoad:R,stylesheetLoadTimeout:z,keepIframeSrcFn:E=()=>!1}=t||{};return Ln(e,{doc:e,mirror:n,blockClass:r,blockSelector:o,unblockSelector:i,maskAllText:s,maskTextClass:a,unmaskTextClass:c,maskTextSelector:u,unmaskTextSelector:l,skipChild:!1,inlineStylesheet:d,maskInputOptions:m===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0}:m===!1?{}:m,maskAttributeFn:g,maskTextFn:T,maskInputFn:y,slimDOMOptions:N===!0||N==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:N==="all",headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:N===!1?{}:N,dataURLOptions:B,inlineImages:f,recordCanvas:p,preserveWhiteSpace:k,onSerialize:M,onIframeLoad:_,iframeLoadTimeout:S,onStylesheetLoad:R,stylesheetLoadTimeout:z,keepIframeSrcFn:E,newlyAddedElement:!1})}function Wt(e){let t,n=e[0],r=1;for(;r<e.length;){let o=e[r],i=e[r+1];if(r+=2,(o==="optionalAccess"||o==="optionalCall")&&n==null)return;o==="access"||o==="optionalAccess"?(t=n,n=i(n)):(o==="call"||o==="optionalCall")&&(n=i((...s)=>n.call(t,...s)),t=void 0)}return n}function Ae(e,t,n=document){let r={capture:!0,passive:!0};return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t,r)}var On=`Please stop import mirror directly. Instead of that,\r
now you can use replayer.getMirror() to access the mirror instance of a replayer,\r
or you can use record.mirror to access the mirror instance during recording.`,xl={map:{},getId(){return console.error(On),-1},getNode(){return console.error(On),null},removeNodeFromMap(){console.error(On)},has(){return console.error(On),!1},reset(){console.error(On)}};typeof window<"u"&&window.Proxy&&window.Reflect&&(xl=new Proxy(xl,{get(e,t,n){return t==="map"&&console.error(On),Reflect.get(e,t,n)}}));function xr(e,t,n={}){let r=null,o=0;return function(...i){let s=Date.now();!o&&n.leading===!1&&(o=s);let a=t-(s-o),c=this;a<=0||a>t?(r&&(Hg(r),r=null),o=s,e.apply(c,i)):!r&&n.trailing!==!1&&(r=oi(()=>{o=n.leading===!1?0:Date.now(),r=null,e.apply(c,i)},a))}}function Kl(e,t,n,r,o=window){let i=o.Object.getOwnPropertyDescriptor(e,t);return o.Object.defineProperty(e,t,r?n:{set(s){oi(()=>{n.set.call(this,s)},0),i&&i.set&&i.set.call(this,s)}}),()=>Kl(e,t,i||{},!0)}function Aa(e,t,n){try{if(!(t in e))return()=>{};let r=e[t],o=n(r);return typeof o=="function"&&(o.prototype=o.prototype||{},Object.defineProperties(o,{__rrweb_original__:{enumerable:!1,value:r}})),e[t]=o,()=>{e[t]=r}}catch{return()=>{}}}var qo=Date.now;/[1-9][0-9]{12}/.test(Date.now().toString())||(qo=()=>new Date().getTime());function Xl(e){let t=e.document;return{left:t.scrollingElement?t.scrollingElement.scrollLeft:e.pageXOffset!==void 0?e.pageXOffset:Wt([t,"optionalAccess",n=>n.documentElement,"access",n=>n.scrollLeft])||Wt([t,"optionalAccess",n=>n.body,"optionalAccess",n=>n.parentElement,"optionalAccess",n=>n.scrollLeft])||Wt([t,"optionalAccess",n=>n.body,"optionalAccess",n=>n.scrollLeft])||0,top:t.scrollingElement?t.scrollingElement.scrollTop:e.pageYOffset!==void 0?e.pageYOffset:Wt([t,"optionalAccess",n=>n.documentElement,"access",n=>n.scrollTop])||Wt([t,"optionalAccess",n=>n.body,"optionalAccess",n=>n.parentElement,"optionalAccess",n=>n.scrollTop])||Wt([t,"optionalAccess",n=>n.body,"optionalAccess",n=>n.scrollTop])||0}}function Zl(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function Ql(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function ed(e){return e?e.nodeType===e.ELEMENT_NODE?e:e.parentElement:null}function He(e,t,n,r,o){if(!e)return!1;let i=ed(e);if(!i)return!1;let s=Pn(t,n);if(!o){let u=r&&i.matches(r);return s(i)&&!u}let a=dn(i,s),c=-1;return a<0?!1:(r&&(c=dn(i,Pn(null,r))),a>-1&&c<0?!0:a<c)}function Pg(e,t){return t.getId(e)!==-1}function Xs(e,t){return t.getId(e)===wr}function td(e,t){if(Ir(e))return!1;let n=t.getId(e);return t.has(n)?e.parentNode&&e.parentNode.nodeType===e.DOCUMENT_NODE?!1:e.parentNode?td(e.parentNode,t):!0:!0}function oa(e){return!!e.changedTouches}function Lg(e=window){"NodeList"in e&&!e.NodeList.prototype.forEach&&(e.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in e&&!e.DOMTokenList.prototype.forEach&&(e.DOMTokenList.prototype.forEach=Array.prototype.forEach),Node.prototype.contains||(Node.prototype.contains=(...t)=>{let n=t[0];if(!(0 in t))throw new TypeError("1 argument is required");do if(this===n)return!0;while(n=n&&n.parentNode);return!1})}function nd(e,t){return!!(e.nodeName==="IFRAME"&&t.getMeta(e))}function rd(e,t){return!!(e.nodeName==="LINK"&&e.nodeType===e.ELEMENT_NODE&&e.getAttribute&&e.getAttribute("rel")==="stylesheet"&&t.getMeta(e))}function ia(e){return!!Wt([e,"optionalAccess",t=>t.shadowRoot])}var sa=class{constructor(){this.id=1,this.styleIDMap=new WeakMap,this.idStyleMap=new Map}getId(t){return ss(this.styleIDMap.get(t),()=>-1)}has(t){return this.styleIDMap.has(t)}add(t,n){if(this.has(t))return this.getId(t);let r;return n===void 0?r=this.id++:r=n,this.styleIDMap.set(t,r),this.idStyleMap.set(r,t),r}getStyle(t){return this.idStyleMap.get(t)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}};function od(e){let t=null;return Wt([e,"access",n=>n.getRootNode,"optionalCall",n=>n(),"optionalAccess",n=>n.nodeType])===Node.DOCUMENT_FRAGMENT_NODE&&e.getRootNode().host&&(t=e.getRootNode().host),t}function Fg(e){let t=e,n;for(;n=od(t);)t=n;return t}function Ug(e){let t=e.ownerDocument;if(!t)return!1;let n=Fg(e);return t.contains(n)}function id(e){let t=e.ownerDocument;return t?t.contains(e)||Ug(e):!1}var kl={};function Na(e){let t=kl[e];if(t)return t;let n=window.document,r=window[e];if(n&&typeof n.createElement=="function")try{let o=n.createElement("iframe");o.hidden=!0,n.head.appendChild(o);let i=o.contentWindow;i&&i[e]&&(r=i[e]),n.head.removeChild(o)}catch{}return kl[e]=r.bind(window)}function Bg(...e){return Na("requestAnimationFrame")(...e)}function oi(...e){return Na("setTimeout")(...e)}function Hg(...e){return Na("clearTimeout")(...e)}var W=(e=>(e[e.DomContentLoaded=0]="DomContentLoaded",e[e.Load=1]="Load",e[e.FullSnapshot=2]="FullSnapshot",e[e.IncrementalSnapshot=3]="IncrementalSnapshot",e[e.Meta=4]="Meta",e[e.Custom=5]="Custom",e[e.Plugin=6]="Plugin",e))(W||{}),L=(e=>(e[e.Mutation=0]="Mutation",e[e.MouseMove=1]="MouseMove",e[e.MouseInteraction=2]="MouseInteraction",e[e.Scroll=3]="Scroll",e[e.ViewportResize=4]="ViewportResize",e[e.Input=5]="Input",e[e.TouchMove=6]="TouchMove",e[e.MediaInteraction=7]="MediaInteraction",e[e.StyleSheetRule=8]="StyleSheetRule",e[e.CanvasMutation=9]="CanvasMutation",e[e.Font=10]="Font",e[e.Log=11]="Log",e[e.Drag=12]="Drag",e[e.StyleDeclaration=13]="StyleDeclaration",e[e.Selection=14]="Selection",e[e.AdoptedStyleSheet=15]="AdoptedStyleSheet",e[e.CustomElement=16]="CustomElement",e))(L||{}),ke=(e=>(e[e.MouseUp=0]="MouseUp",e[e.MouseDown=1]="MouseDown",e[e.Click=2]="Click",e[e.ContextMenu=3]="ContextMenu",e[e.DblClick=4]="DblClick",e[e.Focus=5]="Focus",e[e.Blur=6]="Blur",e[e.TouchStart=7]="TouchStart",e[e.TouchMove_Departed=8]="TouchMove_Departed",e[e.TouchEnd=9]="TouchEnd",e[e.TouchCancel=10]="TouchCancel",e))(ke||{}),xt=(e=>(e[e.Mouse=0]="Mouse",e[e.Pen=1]="Pen",e[e.Touch=2]="Touch",e))(xt||{});function $g(e){let t,n=e[0],r=1;for(;r<e.length;){let o=e[r],i=e[r+1];if(r+=2,(o==="optionalAccess"||o==="optionalCall")&&n==null)return;o==="access"||o==="optionalAccess"?(t=n,n=i(n)):(o==="call"||o==="optionalCall")&&(n=i((...s)=>n.call(t,...s)),t=void 0)}return n}function Al(e){return"__ln"in e}var aa=class{constructor(){this.length=0,this.head=null,this.tail=null}get(t){if(t>=this.length)throw new Error("Position outside of list range");let n=this.head;for(let r=0;r<t;r++)n=$g([n,"optionalAccess",o=>o.next])||null;return n}addNode(t){let n={value:t,previous:null,next:null};if(t.__ln=n,t.previousSibling&&Al(t.previousSibling)){let r=t.previousSibling.__ln.next;n.next=r,n.previous=t.previousSibling.__ln,t.previousSibling.__ln.next=n,r&&(r.previous=n)}else if(t.nextSibling&&Al(t.nextSibling)&&t.nextSibling.__ln.previous){let r=t.nextSibling.__ln.previous;n.previous=r,n.next=t.nextSibling.__ln,t.nextSibling.__ln.previous=n,r&&(r.next=n)}else this.head&&(this.head.previous=n),n.next=this.head,this.head=n;n.next===null&&(this.tail=n),this.length++}removeNode(t){let n=t.__ln;this.head&&(n.previous?(n.previous.next=n.next,n.next?n.next.previous=n.previous:this.tail=n.previous):(this.head=n.next,this.head?this.head.previous=null:this.tail=null),t.__ln&&delete t.__ln,this.length--)}},Nl=(e,t)=>`${e}@${t}`,ca=class{constructor(){this.frozen=!1,this.locked=!1,this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.mapRemoves=[],this.movedMap={},this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.processMutations=t=>{t.forEach(this.processMutation),this.emit()},this.emit=()=>{if(this.frozen||this.locked)return;let t=[],n=new Set,r=new aa,o=c=>{let u=c,l=wr;for(;l===wr;)u=u&&u.nextSibling,l=u&&this.mirror.getId(u);return l},i=c=>{if(!c.parentNode||!id(c))return;let u=Ir(c.parentNode)?this.mirror.getId(od(c)):this.mirror.getId(c.parentNode),l=o(c);if(u===-1||l===-1)return r.addNode(c);let d=Ln(c,{doc:this.doc,mirror:this.mirror,blockClass:this.blockClass,blockSelector:this.blockSelector,maskAllText:this.maskAllText,unblockSelector:this.unblockSelector,maskTextClass:this.maskTextClass,unmaskTextClass:this.unmaskTextClass,maskTextSelector:this.maskTextSelector,unmaskTextSelector:this.unmaskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:this.inlineStylesheet,maskInputOptions:this.maskInputOptions,maskAttributeFn:this.maskAttributeFn,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,dataURLOptions:this.dataURLOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,onSerialize:f=>{nd(f,this.mirror)&&!He(f,this.blockClass,this.blockSelector,this.unblockSelector,!1)&&this.iframeManager.addIframe(f),rd(f,this.mirror)&&this.stylesheetManager.trackLinkElement(f),ia(c)&&this.shadowDomManager.addShadowRoot(c.shadowRoot,this.doc)},onIframeLoad:(f,p)=>{He(f,this.blockClass,this.blockSelector,this.unblockSelector,!1)||(this.iframeManager.attachIframe(f,p),f.contentWindow&&this.canvasManager.addWindow(f.contentWindow),this.shadowDomManager.observeAttachShadow(f))},onStylesheetLoad:(f,p)=>{this.stylesheetManager.attachLinkElement(f,p)}});d&&(t.push({parentId:u,nextId:l,node:d}),n.add(d.id))};for(;this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(let c of this.movedSet)Ml(this.removes,c,this.mirror)&&!this.movedSet.has(c.parentNode)||i(c);for(let c of this.addedSet)!Ol(this.droppedSet,c)&&!Ml(this.removes,c,this.mirror)||Ol(this.movedSet,c)?i(c):this.droppedSet.add(c);let s=null;for(;r.length;){let c=null;if(s){let u=this.mirror.getId(s.value.parentNode),l=o(s.value);u!==-1&&l!==-1&&(c=s)}if(!c){let u=r.tail;for(;u;){let l=u;if(u=u.previous,l){let d=this.mirror.getId(l.value.parentNode);if(o(l.value)===-1)continue;if(d!==-1){c=l;break}else{let p=l.value;if(p.parentNode&&p.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE){let m=p.parentNode.host;if(this.mirror.getId(m)!==-1){c=l;break}}}}}}if(!c){for(;r.head;)r.removeNode(r.head.value);break}s=c.previous,r.removeNode(c.value),i(c.value)}let a={texts:this.texts.map(c=>({id:this.mirror.getId(c.node),value:c.value})).filter(c=>!n.has(c.id)).filter(c=>this.mirror.has(c.id)),attributes:this.attributes.map(c=>{let{attributes:u}=c;if(typeof u.style=="string"){let l=JSON.stringify(c.styleDiff),d=JSON.stringify(c._unchangedStyles);l.length<u.style.length&&(l+d).split("var(").length===u.style.split("var(").length&&(u.style=c.styleDiff)}return{id:this.mirror.getId(c.node),attributes:u}}).filter(c=>!n.has(c.id)).filter(c=>this.mirror.has(c.id)),removes:this.removes,adds:t};!a.texts.length&&!a.attributes.length&&!a.removes.length&&!a.adds.length||(this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.movedMap={},this.mutationCb(a))},this.processMutation=t=>{if(!Xs(t.target,this.mirror))switch(t.type){case"characterData":{let n=t.target.textContent;!He(t.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)&&n!==t.oldValue&&this.texts.push({value:Bn(t.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,this.maskAllText)&&n?this.maskTextFn?this.maskTextFn(n,ed(t.target)):n.replace(/[\S]/g,"*"):n,node:t.target});break}case"attributes":{let n=t.target,r=t.attributeName,o=t.target.getAttribute(r);if(r==="value"){let s=wa(n),a=n.tagName;o=Go(n,a,s);let c=ri({maskInputOptions:this.maskInputOptions,tagName:a,type:s}),u=Bn(t.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,c);o=Rr({isMasked:u,element:n,value:o,maskInputFn:this.maskInputFn})}if(He(t.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||o===t.oldValue)return;let i=this.attributeMap.get(t.target);if(n.tagName==="IFRAME"&&r==="src"&&!this.keepIframeSrcFn(o))if(!n.contentDocument)r="rr_src";else return;if(i||(i={node:t.target,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(i),this.attributeMap.set(t.target,i)),r==="type"&&n.tagName==="INPUT"&&(t.oldValue||"").toLowerCase()==="password"&&n.setAttribute("data-rr-is-password","true"),!Jl(n.tagName,r)&&(i.attributes[r]=Vl(this.doc,Un(n.tagName),Un(r),o,n,this.maskAttributeFn),r==="style")){if(!this.unattachedDoc)try{this.unattachedDoc=document.implementation.createHTMLDocument()}catch{this.unattachedDoc=this.doc}let s=this.unattachedDoc.createElement("span");t.oldValue&&s.setAttribute("style",t.oldValue);for(let a of Array.from(n.style)){let c=n.style.getPropertyValue(a),u=n.style.getPropertyPriority(a);c!==s.style.getPropertyValue(a)||u!==s.style.getPropertyPriority(a)?u===""?i.styleDiff[a]=c:i.styleDiff[a]=[c,u]:i._unchangedStyles[a]=[c,u]}for(let a of Array.from(s.style))n.style.getPropertyValue(a)===""&&(i.styleDiff[a]=!1)}break}case"childList":{if(He(t.target,this.blockClass,this.blockSelector,this.unblockSelector,!0))return;t.addedNodes.forEach(n=>this.genAdds(n,t.target)),t.removedNodes.forEach(n=>{let r=this.mirror.getId(n),o=Ir(t.target)?this.mirror.getId(t.target.host):this.mirror.getId(t.target);He(t.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||Xs(n,this.mirror)||!Pg(n,this.mirror)||(this.addedSet.has(n)?(ua(this.addedSet,n),this.droppedSet.add(n)):this.addedSet.has(t.target)&&r===-1||td(t.target,this.mirror)||(this.movedSet.has(n)&&this.movedMap[Nl(r,o)]?ua(this.movedSet,n):this.removes.push({parentId:o,id:r,isShadow:Ir(t.target)&&br(t.target)?!0:void 0})),this.mapRemoves.push(n))});break}}},this.genAdds=(t,n)=>{if(!this.processedNodeManager.inOtherBuffer(t,this)&&!(this.addedSet.has(t)||this.movedSet.has(t))){if(this.mirror.hasNode(t)){if(Xs(t,this.mirror))return;this.movedSet.add(t);let r=null;n&&this.mirror.hasNode(n)&&(r=this.mirror.getId(n)),r&&r!==-1&&(this.movedMap[Nl(this.mirror.getId(t),r)]=!0)}else this.addedSet.add(t),this.droppedSet.delete(t);He(t,this.blockClass,this.blockSelector,this.unblockSelector,!1)||(t.childNodes.forEach(r=>this.genAdds(r)),ia(t)&&t.shadowRoot.childNodes.forEach(r=>{this.processedNodeManager.add(r,this),this.genAdds(r,t)}))}}}init(t){["mutationCb","blockClass","blockSelector","unblockSelector","maskAllText","maskTextClass","unmaskTextClass","maskTextSelector","unmaskTextSelector","inlineStylesheet","maskInputOptions","maskAttributeFn","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager","processedNodeManager"].forEach(n=>{this[n]=t[n]})}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}};function ua(e,t){e.delete(t),t.childNodes.forEach(n=>ua(e,n))}function Ml(e,t,n){return e.length===0?!1:sd(e,t,n)}function sd(e,t,n){let{parentNode:r}=t;if(!r)return!1;let o=n.getId(r);return e.some(i=>i.id===o)?!0:sd(e,r,n)}function Ol(e,t){return e.size===0?!1:ad(e,t)}function ad(e,t){let{parentNode:n}=t;return n?e.has(n)?!0:ad(e,n):!1}var vr;function Wg(e){vr=e}function zg(){vr=void 0}var q=e=>vr?(...n)=>{try{return e(...n)}catch(r){if(vr&&vr(r)===!0)return()=>{};throw r}}:e;function at(e){let t,n=e[0],r=1;for(;r<e.length;){let o=e[r],i=e[r+1];if(r+=2,(o==="optionalAccess"||o==="optionalCall")&&n==null)return;o==="access"||o==="optionalAccess"?(t=n,n=i(n)):(o==="call"||o==="optionalCall")&&(n=i((...s)=>n.call(t,...s)),t=void 0)}return n}var Fn=[];function Mr(e){try{if("composedPath"in e){let t=e.composedPath();if(t.length)return t[0]}else if("path"in e&&e.path.length)return e.path[0]}catch{}return e&&e.target}function cd(e,t){let n=new ca;Fn.push(n),n.init(e);let r=window.MutationObserver||window.__rrMutationObserver,o=at([window,"optionalAccess",s=>s.Zone,"optionalAccess",s=>s.__symbol__,"optionalCall",s=>s("MutationObserver")]);o&&window[o]&&(r=window[o]);let i=new r(q(s=>{e.onMutation&&e.onMutation(s)===!1||n.processMutations.bind(n)(s)}));return i.observe(t,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),i}function Gg({mousemoveCb:e,sampling:t,doc:n,mirror:r}){if(t.mousemove===!1)return()=>{};let o=typeof t.mousemove=="number"?t.mousemove:50,i=typeof t.mousemoveCallback=="number"?t.mousemoveCallback:500,s=[],a,c=xr(q(d=>{let f=Date.now()-a;e(s.map(p=>(p.timeOffset-=f,p)),d),s=[],a=null}),i),u=q(xr(q(d=>{let f=Mr(d),{clientX:p,clientY:m}=oa(d)?d.changedTouches[0]:d;a||(a=qo()),s.push({x:p,y:m,id:r.getId(f),timeOffset:qo()-a}),c(typeof DragEvent<"u"&&d instanceof DragEvent?L.Drag:d instanceof MouseEvent?L.MouseMove:L.TouchMove)}),o,{trailing:!1})),l=[Ae("mousemove",u,n),Ae("touchmove",u,n),Ae("drag",u,n)];return q(()=>{l.forEach(d=>d())})}function jg({mouseInteractionCb:e,doc:t,mirror:n,blockClass:r,blockSelector:o,unblockSelector:i,sampling:s}){if(s.mouseInteraction===!1)return()=>{};let a=s.mouseInteraction===!0||s.mouseInteraction===void 0?{}:s.mouseInteraction,c=[],u=null,l=d=>f=>{let p=Mr(f);if(He(p,r,o,i,!0))return;let m=null,g=d;if("pointerType"in f){switch(f.pointerType){case"mouse":m=xt.Mouse;break;case"touch":m=xt.Touch;break;case"pen":m=xt.Pen;break}m===xt.Touch?ke[d]===ke.MouseDown?g="TouchStart":ke[d]===ke.MouseUp&&(g="TouchEnd"):xt.Pen}else oa(f)&&(m=xt.Touch);m!==null?(u=m,(g.startsWith("Touch")&&m===xt.Touch||g.startsWith("Mouse")&&m===xt.Mouse)&&(m=null)):ke[d]===ke.Click&&(m=u,u=null);let T=oa(f)?f.changedTouches[0]:f;if(!T)return;let y=n.getId(p),{clientX:N,clientY:B}=T;q(e)({type:ke[g],id:y,x:N,y:B,...m!==null&&{pointerType:m}})};return Object.keys(ke).filter(d=>Number.isNaN(Number(d))&&!d.endsWith("_Departed")&&a[d]!==!1).forEach(d=>{let f=Un(d),p=l(d);if(window.PointerEvent)switch(ke[d]){case ke.MouseDown:case ke.MouseUp:f=f.replace("mouse","pointer");break;case ke.TouchStart:case ke.TouchEnd:return}c.push(Ae(f,p,t))}),q(()=>{c.forEach(d=>d())})}function ud({scrollCb:e,doc:t,mirror:n,blockClass:r,blockSelector:o,unblockSelector:i,sampling:s}){let a=q(xr(q(c=>{let u=Mr(c);if(!u||He(u,r,o,i,!0))return;let l=n.getId(u);if(u===t&&t.defaultView){let d=Xl(t.defaultView);e({id:l,x:d.left,y:d.top})}else e({id:l,x:u.scrollLeft,y:u.scrollTop})}),s.scroll||100));return Ae("scroll",a,t)}function qg({viewportResizeCb:e},{win:t}){let n=-1,r=-1,o=q(xr(q(()=>{let i=Zl(),s=Ql();(n!==i||r!==s)&&(e({width:Number(s),height:Number(i)}),n=i,r=s)}),200));return Ae("resize",o,t)}var Yg=["INPUT","TEXTAREA","SELECT"],Dl=new WeakMap;function Vg({inputCb:e,doc:t,mirror:n,blockClass:r,blockSelector:o,unblockSelector:i,ignoreClass:s,ignoreSelector:a,maskInputOptions:c,maskInputFn:u,sampling:l,userTriggeredOnInput:d,maskTextClass:f,unmaskTextClass:p,maskTextSelector:m,unmaskTextSelector:g}){function T(S){let R=Mr(S),z=S.isTrusted,E=R&&na(R.tagName);if(E==="OPTION"&&(R=R.parentElement),!R||!E||Yg.indexOf(E)<0||He(R,r,o,i,!0))return;let C=R;if(C.classList.contains(s)||a&&C.matches(a))return;let P=wa(R),X=Go(C,E,P),Q=!1,ue=ri({maskInputOptions:c,tagName:E,type:P}),U=Bn(R,f,m,p,g,ue);(P==="radio"||P==="checkbox")&&(Q=R.checked),X=Rr({isMasked:U,element:R,value:X,maskInputFn:u}),y(R,d?{text:X,isChecked:Q,userTriggered:z}:{text:X,isChecked:Q});let ge=R.name;P==="radio"&&ge&&Q&&t.querySelectorAll(`input[type="radio"][name="${ge}"]`).forEach(Z=>{if(Z!==R){let Ne=Rr({isMasked:U,element:Z,value:Go(Z,E,P),maskInputFn:u});y(Z,d?{text:Ne,isChecked:!Q,userTriggered:!1}:{text:Ne,isChecked:!Q})}})}function y(S,R){let z=Dl.get(S);if(!z||z.text!==R.text||z.isChecked!==R.isChecked){Dl.set(S,R);let E=n.getId(S);q(e)({...R,id:E})}}let B=(l.input==="last"?["change"]:["input","change"]).map(S=>Ae(S,q(T),t)),k=t.defaultView;if(!k)return()=>{B.forEach(S=>S())};let M=k.Object.getOwnPropertyDescriptor(k.HTMLInputElement.prototype,"value"),_=[[k.HTMLInputElement.prototype,"value"],[k.HTMLInputElement.prototype,"checked"],[k.HTMLSelectElement.prototype,"value"],[k.HTMLTextAreaElement.prototype,"value"],[k.HTMLSelectElement.prototype,"selectedIndex"],[k.HTMLOptionElement.prototype,"selected"]];return M&&M.set&&B.push(..._.map(S=>Kl(S[0],S[1],{set(){q(T)({target:this,isTrusted:!1})}},!1,k))),q(()=>{B.forEach(S=>S())})}function Yo(e){let t=[];function n(r,o){if(Uo("CSSGroupingRule")&&r.parentRule instanceof CSSGroupingRule||Uo("CSSMediaRule")&&r.parentRule instanceof CSSMediaRule||Uo("CSSSupportsRule")&&r.parentRule instanceof CSSSupportsRule||Uo("CSSConditionRule")&&r.parentRule instanceof CSSConditionRule){let s=Array.from(r.parentRule.cssRules).indexOf(r);o.unshift(s)}else if(r.parentStyleSheet){let s=Array.from(r.parentStyleSheet.cssRules).indexOf(r);o.unshift(s)}return o}return n(e,t)}function zt(e,t,n){let r,o;return e?(e.ownerNode?r=t.getId(e.ownerNode):o=n.getId(e),{styleId:o,id:r}):{}}function Jg({styleSheetRuleCb:e,mirror:t,stylesheetManager:n},{win:r}){if(!r.CSSStyleSheet||!r.CSSStyleSheet.prototype)return()=>{};let o=r.CSSStyleSheet.prototype.insertRule;r.CSSStyleSheet.prototype.insertRule=new Proxy(o,{apply:q((l,d,f)=>{let[p,m]=f,{id:g,styleId:T}=zt(d,t,n.styleMirror);return(g&&g!==-1||T&&T!==-1)&&e({id:g,styleId:T,adds:[{rule:p,index:m}]}),l.apply(d,f)})});let i=r.CSSStyleSheet.prototype.deleteRule;r.CSSStyleSheet.prototype.deleteRule=new Proxy(i,{apply:q((l,d,f)=>{let[p]=f,{id:m,styleId:g}=zt(d,t,n.styleMirror);return(m&&m!==-1||g&&g!==-1)&&e({id:m,styleId:g,removes:[{index:p}]}),l.apply(d,f)})});let s;r.CSSStyleSheet.prototype.replace&&(s=r.CSSStyleSheet.prototype.replace,r.CSSStyleSheet.prototype.replace=new Proxy(s,{apply:q((l,d,f)=>{let[p]=f,{id:m,styleId:g}=zt(d,t,n.styleMirror);return(m&&m!==-1||g&&g!==-1)&&e({id:m,styleId:g,replace:p}),l.apply(d,f)})}));let a;r.CSSStyleSheet.prototype.replaceSync&&(a=r.CSSStyleSheet.prototype.replaceSync,r.CSSStyleSheet.prototype.replaceSync=new Proxy(a,{apply:q((l,d,f)=>{let[p]=f,{id:m,styleId:g}=zt(d,t,n.styleMirror);return(m&&m!==-1||g&&g!==-1)&&e({id:m,styleId:g,replaceSync:p}),l.apply(d,f)})}));let c={};Bo("CSSGroupingRule")?c.CSSGroupingRule=r.CSSGroupingRule:(Bo("CSSMediaRule")&&(c.CSSMediaRule=r.CSSMediaRule),Bo("CSSConditionRule")&&(c.CSSConditionRule=r.CSSConditionRule),Bo("CSSSupportsRule")&&(c.CSSSupportsRule=r.CSSSupportsRule));let u={};return Object.entries(c).forEach(([l,d])=>{u[l]={insertRule:d.prototype.insertRule,deleteRule:d.prototype.deleteRule},d.prototype.insertRule=new Proxy(u[l].insertRule,{apply:q((f,p,m)=>{let[g,T]=m,{id:y,styleId:N}=zt(p.parentStyleSheet,t,n.styleMirror);return(y&&y!==-1||N&&N!==-1)&&e({id:y,styleId:N,adds:[{rule:g,index:[...Yo(p),T||0]}]}),f.apply(p,m)})}),d.prototype.deleteRule=new Proxy(u[l].deleteRule,{apply:q((f,p,m)=>{let[g]=m,{id:T,styleId:y}=zt(p.parentStyleSheet,t,n.styleMirror);return(T&&T!==-1||y&&y!==-1)&&e({id:T,styleId:y,removes:[{index:[...Yo(p),g]}]}),f.apply(p,m)})})}),q(()=>{r.CSSStyleSheet.prototype.insertRule=o,r.CSSStyleSheet.prototype.deleteRule=i,s&&(r.CSSStyleSheet.prototype.replace=s),a&&(r.CSSStyleSheet.prototype.replaceSync=a),Object.entries(c).forEach(([l,d])=>{d.prototype.insertRule=u[l].insertRule,d.prototype.deleteRule=u[l].deleteRule})})}function ld({mirror:e,stylesheetManager:t},n){let r=null;n.nodeName==="#document"?r=e.getId(n):r=e.getId(n.host);let o=n.nodeName==="#document"?at([n,"access",s=>s.defaultView,"optionalAccess",s=>s.Document]):at([n,"access",s=>s.ownerDocument,"optionalAccess",s=>s.defaultView,"optionalAccess",s=>s.ShadowRoot]),i=at([o,"optionalAccess",s=>s.prototype])?Object.getOwnPropertyDescriptor(at([o,"optionalAccess",s=>s.prototype]),"adoptedStyleSheets"):void 0;return r===null||r===-1||!o||!i?()=>{}:(Object.defineProperty(n,"adoptedStyleSheets",{configurable:i.configurable,enumerable:i.enumerable,get(){return at([i,"access",s=>s.get,"optionalAccess",s=>s.call,"call",s=>s(this)])},set(s){let a=at([i,"access",c=>c.set,"optionalAccess",c=>c.call,"call",c=>c(this,s)]);if(r!==null&&r!==-1)try{t.adoptStyleSheets(s,r)}catch{}return a}}),q(()=>{Object.defineProperty(n,"adoptedStyleSheets",{configurable:i.configurable,enumerable:i.enumerable,get:i.get,set:i.set})}))}function Kg({styleDeclarationCb:e,mirror:t,ignoreCSSAttributes:n,stylesheetManager:r},{win:o}){let i=o.CSSStyleDeclaration.prototype.setProperty;o.CSSStyleDeclaration.prototype.setProperty=new Proxy(i,{apply:q((a,c,u)=>{let[l,d,f]=u;if(n.has(l))return i.apply(c,[l,d,f]);let{id:p,styleId:m}=zt(at([c,"access",g=>g.parentRule,"optionalAccess",g=>g.parentStyleSheet]),t,r.styleMirror);return(p&&p!==-1||m&&m!==-1)&&e({id:p,styleId:m,set:{property:l,value:d,priority:f},index:Yo(c.parentRule)}),a.apply(c,u)})});let s=o.CSSStyleDeclaration.prototype.removeProperty;return o.CSSStyleDeclaration.prototype.removeProperty=new Proxy(s,{apply:q((a,c,u)=>{let[l]=u;if(n.has(l))return s.apply(c,[l]);let{id:d,styleId:f}=zt(at([c,"access",p=>p.parentRule,"optionalAccess",p=>p.parentStyleSheet]),t,r.styleMirror);return(d&&d!==-1||f&&f!==-1)&&e({id:d,styleId:f,remove:{property:l},index:Yo(c.parentRule)}),a.apply(c,u)})}),q(()=>{o.CSSStyleDeclaration.prototype.setProperty=i,o.CSSStyleDeclaration.prototype.removeProperty=s})}function Xg({mediaInteractionCb:e,blockClass:t,blockSelector:n,unblockSelector:r,mirror:o,sampling:i,doc:s}){let a=q(u=>xr(q(l=>{let d=Mr(l);if(!d||He(d,t,n,r,!0))return;let{currentTime:f,volume:p,muted:m,playbackRate:g}=d;e({type:u,id:o.getId(d),currentTime:f,volume:p,muted:m,playbackRate:g})}),i.media||500)),c=[Ae("play",a(0),s),Ae("pause",a(1),s),Ae("seeked",a(2),s),Ae("volumechange",a(3),s),Ae("ratechange",a(4),s)];return q(()=>{c.forEach(u=>u())})}function Zg({fontCb:e,doc:t}){let n=t.defaultView;if(!n)return()=>{};let r=[],o=new WeakMap,i=n.FontFace;n.FontFace=function(c,u,l){let d=new i(c,u,l);return o.set(d,{family:c,buffer:typeof u!="string",descriptors:l,fontSource:typeof u=="string"?u:JSON.stringify(Array.from(new Uint8Array(u)))}),d};let s=Aa(t.fonts,"add",function(a){return function(c){return oi(q(()=>{let u=o.get(c);u&&(e(u),o.delete(c))}),0),a.apply(this,[c])}});return r.push(()=>{n.FontFace=i}),r.push(s),q(()=>{r.forEach(a=>a())})}function Qg(e){let{doc:t,mirror:n,blockClass:r,blockSelector:o,unblockSelector:i,selectionCb:s}=e,a=!0,c=q(()=>{let u=t.getSelection();if(!u||a&&at([u,"optionalAccess",f=>f.isCollapsed]))return;a=u.isCollapsed||!1;let l=[],d=u.rangeCount||0;for(let f=0;f<d;f++){let p=u.getRangeAt(f),{startContainer:m,startOffset:g,endContainer:T,endOffset:y}=p;He(m,r,o,i,!0)||He(T,r,o,i,!0)||l.push({start:n.getId(m),startOffset:g,end:n.getId(T),endOffset:y})}s({ranges:l})});return c(),Ae("selectionchange",c)}function eS({doc:e,customElementCb:t}){let n=e.defaultView;return!n||!n.customElements?()=>{}:Aa(n.customElements,"define",function(o){return function(i,s,a){try{t({define:{name:i}})}catch{}return o.apply(this,[i,s,a])}})}function tS(e,t={}){let n=e.doc.defaultView;if(!n)return()=>{};let r;e.recordDOM&&(r=cd(e,e.doc));let o=Gg(e),i=jg(e),s=ud(e),a=qg(e,{win:n}),c=Vg(e),u=Xg(e),l=()=>{},d=()=>{},f=()=>{},p=()=>{};e.recordDOM&&(l=Jg(e,{win:n}),d=ld(e,e.doc),f=Kg(e,{win:n}),e.collectFonts&&(p=Zg(e)));let m=Qg(e),g=eS(e),T=[];for(let y of e.plugins)T.push(y.observer(y.callback,n,y.options));return q(()=>{Fn.forEach(y=>y.reset()),at([r,"optionalAccess",y=>y.disconnect,"call",y=>y()]),o(),i(),s(),a(),c(),u(),l(),d(),f(),p(),m(),g(),T.forEach(y=>y())})}function Uo(e){return typeof window[e]<"u"}function Bo(e){return!!(typeof window[e]<"u"&&window[e].prototype&&"insertRule"in window[e].prototype&&"deleteRule"in window[e].prototype)}var kr=class{constructor(t){this.generateIdFn=t,this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap}getId(t,n,r,o){let i=r||this.getIdToRemoteIdMap(t),s=o||this.getRemoteIdToIdMap(t),a=i.get(n);return a||(a=this.generateIdFn(),i.set(n,a),s.set(a,n)),a}getIds(t,n){let r=this.getIdToRemoteIdMap(t),o=this.getRemoteIdToIdMap(t);return n.map(i=>this.getId(t,i,r,o))}getRemoteId(t,n,r){let o=r||this.getRemoteIdToIdMap(t);if(typeof n!="number")return n;let i=o.get(n);return i||-1}getRemoteIds(t,n){let r=this.getRemoteIdToIdMap(t);return n.map(o=>this.getRemoteId(t,o,r))}reset(t){if(!t){this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap;return}this.iframeIdToRemoteIdMap.delete(t),this.iframeRemoteIdToIdMap.delete(t)}getIdToRemoteIdMap(t){let n=this.iframeIdToRemoteIdMap.get(t);return n||(n=new Map,this.iframeIdToRemoteIdMap.set(t,n)),n}getRemoteIdToIdMap(t){let n=this.iframeRemoteIdToIdMap.get(t);return n||(n=new Map,this.iframeRemoteIdToIdMap.set(t,n)),n}};function Pl(e){let t,n=e[0],r=1;for(;r<e.length;){let o=e[r],i=e[r+1];if(r+=2,(o==="optionalAccess"||o==="optionalCall")&&n==null)return;o==="access"||o==="optionalAccess"?(t=n,n=i(n)):(o==="call"||o==="optionalCall")&&(n=i((...s)=>n.call(t,...s)),t=void 0)}return n}var la=class{constructor(){this.crossOriginIframeMirror=new kr(xa),this.crossOriginIframeRootIdMap=new WeakMap}addIframe(){}addLoadListener(){}attachIframe(){}},da=class{constructor(t){this.iframes=new WeakMap,this.crossOriginIframeMap=new WeakMap,this.crossOriginIframeMirror=new kr(xa),this.crossOriginIframeRootIdMap=new WeakMap,this.mutationCb=t.mutationCb,this.wrappedEmit=t.wrappedEmit,this.stylesheetManager=t.stylesheetManager,this.recordCrossOriginIframes=t.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new kr(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=t.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}addIframe(t){this.iframes.set(t,!0),t.contentWindow&&this.crossOriginIframeMap.set(t.contentWindow,t)}addLoadListener(t){this.loadListener=t}attachIframe(t,n){this.mutationCb({adds:[{parentId:this.mirror.getId(t),nextId:null,node:n}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),Pl([this,"access",r=>r.loadListener,"optionalCall",r=>r(t)]),t.contentDocument&&t.contentDocument.adoptedStyleSheets&&t.contentDocument.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(t.contentDocument.adoptedStyleSheets,this.mirror.getId(t.contentDocument))}handleMessage(t){let n=t;if(n.data.type!=="rrweb"||n.origin!==n.data.origin||!t.source)return;let o=this.crossOriginIframeMap.get(t.source);if(!o)return;let i=this.transformCrossOriginEvent(o,n.data.event);i&&this.wrappedEmit(i,n.data.isCheckout)}transformCrossOriginEvent(t,n){switch(n.type){case W.FullSnapshot:{this.crossOriginIframeMirror.reset(t),this.crossOriginIframeStyleMirror.reset(t),this.replaceIdOnNode(n.data.node,t);let r=n.data.node.id;return this.crossOriginIframeRootIdMap.set(t,r),this.patchRootIdOnNode(n.data.node,r),{timestamp:n.timestamp,type:W.IncrementalSnapshot,data:{source:L.Mutation,adds:[{parentId:this.mirror.getId(t),nextId:null,node:n.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}}}case W.Meta:case W.Load:case W.DomContentLoaded:return!1;case W.Plugin:return n;case W.Custom:return this.replaceIds(n.data.payload,t,["id","parentId","previousId","nextId"]),n;case W.IncrementalSnapshot:switch(n.data.source){case L.Mutation:return n.data.adds.forEach(r=>{this.replaceIds(r,t,["parentId","nextId","previousId"]),this.replaceIdOnNode(r.node,t);let o=this.crossOriginIframeRootIdMap.get(t);o&&this.patchRootIdOnNode(r.node,o)}),n.data.removes.forEach(r=>{this.replaceIds(r,t,["parentId","id"])}),n.data.attributes.forEach(r=>{this.replaceIds(r,t,["id"])}),n.data.texts.forEach(r=>{this.replaceIds(r,t,["id"])}),n;case L.Drag:case L.TouchMove:case L.MouseMove:return n.data.positions.forEach(r=>{this.replaceIds(r,t,["id"])}),n;case L.ViewportResize:return!1;case L.MediaInteraction:case L.MouseInteraction:case L.Scroll:case L.CanvasMutation:case L.Input:return this.replaceIds(n.data,t,["id"]),n;case L.StyleSheetRule:case L.StyleDeclaration:return this.replaceIds(n.data,t,["id"]),this.replaceStyleIds(n.data,t,["styleId"]),n;case L.Font:return n;case L.Selection:return n.data.ranges.forEach(r=>{this.replaceIds(r,t,["start","end"])}),n;case L.AdoptedStyleSheet:return this.replaceIds(n.data,t,["id"]),this.replaceStyleIds(n.data,t,["styleIds"]),Pl([n,"access",r=>r.data,"access",r=>r.styles,"optionalAccess",r=>r.forEach,"call",r=>r(o=>{this.replaceStyleIds(o,t,["styleId"])})]),n}}return!1}replace(t,n,r,o){for(let i of o)!Array.isArray(n[i])&&typeof n[i]!="number"||(Array.isArray(n[i])?n[i]=t.getIds(r,n[i]):n[i]=t.getId(r,n[i]));return n}replaceIds(t,n,r){return this.replace(this.crossOriginIframeMirror,t,n,r)}replaceStyleIds(t,n,r){return this.replace(this.crossOriginIframeStyleMirror,t,n,r)}replaceIdOnNode(t,n){this.replaceIds(t,n,["id","rootId"]),"childNodes"in t&&t.childNodes.forEach(r=>{this.replaceIdOnNode(r,n)})}patchRootIdOnNode(t,n){t.type!==pe.Document&&!t.rootId&&(t.rootId=n),"childNodes"in t&&t.childNodes.forEach(r=>{this.patchRootIdOnNode(r,n)})}},fa=class{init(){}addShadowRoot(){}observeAttachShadow(){}reset(){}},pa=class{constructor(t){this.shadowDoms=new WeakSet,this.restoreHandlers=[],this.mutationCb=t.mutationCb,this.scrollCb=t.scrollCb,this.bypassOptions=t.bypassOptions,this.mirror=t.mirror,this.init()}init(){this.reset(),this.patchAttachShadow(Element,document)}addShadowRoot(t,n){if(!br(t)||this.shadowDoms.has(t))return;this.shadowDoms.add(t),this.bypassOptions.canvasManager.addShadowRoot(t);let r=cd({...this.bypassOptions,doc:n,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this},t);this.restoreHandlers.push(()=>r.disconnect()),this.restoreHandlers.push(ud({...this.bypassOptions,scrollCb:this.scrollCb,doc:t,mirror:this.mirror})),oi(()=>{t.adoptedStyleSheets&&t.adoptedStyleSheets.length>0&&this.bypassOptions.stylesheetManager.adoptStyleSheets(t.adoptedStyleSheets,this.mirror.getId(t.host)),this.restoreHandlers.push(ld({mirror:this.mirror,stylesheetManager:this.bypassOptions.stylesheetManager},t))},0)}observeAttachShadow(t){!t.contentWindow||!t.contentDocument||this.patchAttachShadow(t.contentWindow.Element,t.contentDocument)}patchAttachShadow(t,n){let r=this;this.restoreHandlers.push(Aa(t.prototype,"attachShadow",function(o){return function(i){let s=o.call(this,i);return this.shadowRoot&&id(this)&&r.addShadowRoot(this.shadowRoot,n),s}}))}reset(){this.restoreHandlers.forEach(t=>{try{t()}catch{}}),this.restoreHandlers=[],this.shadowDoms=new WeakSet,this.bypassOptions.canvasManager.resetShadowRoots()}},Vo=class{reset(){}freeze(){}unfreeze(){}lock(){}unlock(){}snapshot(){}addWindow(){}addShadowRoot(){}resetShadowRoots(){}},ma=class{constructor(t){this.trackedLinkElements=new WeakSet,this.styleMirror=new sa,this.mutationCb=t.mutationCb,this.adoptedStyleSheetCb=t.adoptedStyleSheetCb}attachLinkElement(t,n){"_cssText"in n.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:n.id,attributes:n.attributes}]}),this.trackLinkElement(t)}trackLinkElement(t){this.trackedLinkElements.has(t)||(this.trackedLinkElements.add(t),this.trackStylesheetInLinkElement(t))}adoptStyleSheets(t,n){if(t.length===0)return;let r={id:n,styleIds:[]},o=[];for(let i of t){let s;this.styleMirror.has(i)?s=this.styleMirror.getId(i):(s=this.styleMirror.add(i),o.push({styleId:s,rules:Array.from(i.rules||CSSRule,(a,c)=>({rule:Gl(a),index:c}))})),r.styleIds.push(s)}o.length>0&&(r.styles=o),this.adoptedStyleSheetCb(r)}reset(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}trackStylesheetInLinkElement(t){}},ha=class{constructor(){this.nodeMap=new WeakMap,this.loop=!0,this.periodicallyClear()}periodicallyClear(){Bg(()=>{this.clear(),this.loop&&this.periodicallyClear()})}inOtherBuffer(t,n){let r=this.nodeMap.get(t);return r&&Array.from(r).some(o=>o!==n)}add(t,n){this.nodeMap.set(t,(this.nodeMap.get(t)||new Set).add(n))}clear(){this.nodeMap=new WeakMap}destroy(){this.loop=!1}},ce,Jo;try{if(Array.from([1],e=>e*2)[0]!==2){let e=document.createElement("iframe");document.body.appendChild(e),Array.from=he([e,"access",t=>t.contentWindow,"optionalAccess",t=>t.Array,"access",t=>t.from])||Array.from,document.body.removeChild(e)}}catch(e){console.debug("Unable to override Array.from",e)}var st=dg();function kt(e={}){let{emit:t,checkoutEveryNms:n,checkoutEveryNth:r,blockClass:o="rr-block",blockSelector:i=null,unblockSelector:s=null,ignoreClass:a="rr-ignore",ignoreSelector:c=null,maskAllText:u=!1,maskTextClass:l="rr-mask",unmaskTextClass:d=null,maskTextSelector:f=null,unmaskTextSelector:p=null,inlineStylesheet:m=!0,maskAllInputs:g,maskInputOptions:T,slimDOMOptions:y,maskAttributeFn:N,maskInputFn:B,maskTextFn:k,maxCanvasSize:M=null,packFn:_,sampling:S={},dataURLOptions:R={},mousemoveWait:z,recordDOM:E=!0,recordCanvas:C=!1,recordCrossOriginIframes:P=!1,recordAfter:X=e.recordAfter==="DOMContentLoaded"?e.recordAfter:"load",userTriggeredOnInput:Q=!1,collectFonts:ue=!1,inlineImages:U=!1,plugins:ge,keepIframeSrcFn:Z=()=>!1,ignoreCSSAttributes:Ne=new Set([]),errorHandler:yt,onMutation:Va,getCanvasManager:of}=e;Wg(yt);let mi=P?window.parent===window:!0,Lr=!1;if(!mi)try{window.parent.document&&(Lr=!1)}catch{Lr=!0}if(mi&&!t)throw new Error("emit function is required");z!==void 0&&S.mousemove===void 0&&(S.mousemove=z),st.reset();let hi=g===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,radio:!0,checkbox:!0}:T!==void 0?T:{},gi=y===!0||y==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:y==="all",headMetaDescKeywords:y==="all"}:y||{};Lg();let Si,_i=0,Ja=Y=>{for(let Xe of ge||[])Xe.eventProcessor&&(Y=Xe.eventProcessor(Y));return _&&!Lr&&(Y=_(Y)),Y};ce=(Y,Xe)=>{let G=Y;if(G.timestamp=qo(),he([Fn,"access",se=>se[0],"optionalAccess",se=>se.isFrozen,"call",se=>se()])&&G.type!==W.FullSnapshot&&!(G.type===W.IncrementalSnapshot&&G.data.source===L.Mutation)&&Fn.forEach(se=>se.unfreeze()),mi)he([t,"optionalCall",se=>se(Ja(G),Xe)]);else if(Lr){let se={type:"rrweb",event:Ja(G),origin:window.location.origin,isCheckout:Xe};window.parent.postMessage(se,"*")}if(G.type===W.FullSnapshot)Si=G,_i=0;else if(G.type===W.IncrementalSnapshot){if(G.data.source===L.Mutation&&G.data.isAttachIframe)return;_i++;let se=r&&_i>=r,V=n&&Si&&G.timestamp-Si.timestamp>n;(se||V)&&Ti(!0)}};let Fr=Y=>{ce({type:W.IncrementalSnapshot,data:{source:L.Mutation,...Y}})},Ka=Y=>ce({type:W.IncrementalSnapshot,data:{source:L.Scroll,...Y}}),sf=Y=>ce({type:W.IncrementalSnapshot,data:{source:L.CanvasMutation,...Y}}),af=Y=>ce({type:W.IncrementalSnapshot,data:{source:L.AdoptedStyleSheet,...Y}}),qt=new ma({mutationCb:Fr,adoptedStyleSheetCb:af}),Yt=typeof __RRWEB_EXCLUDE_IFRAME__=="boolean"&&__RRWEB_EXCLUDE_IFRAME__?new la:new da({mirror:st,mutationCb:Fr,stylesheetManager:qt,recordCrossOriginIframes:P,wrappedEmit:ce});for(let Y of ge||[])Y.getMirror&&Y.getMirror({nodeMirror:st,crossOriginIframeMirror:Yt.crossOriginIframeMirror,crossOriginIframeStyleMirror:Yt.crossOriginIframeStyleMirror});let yi=new ha,Ei=rS(of,{mirror:st,win:window,mutationCb:Y=>ce({type:W.IncrementalSnapshot,data:{source:L.CanvasMutation,...Y}}),recordCanvas:C,blockClass:o,blockSelector:i,unblockSelector:s,maxCanvasSize:M,sampling:S.canvas,dataURLOptions:R,errorHandler:yt}),Ur=typeof __RRWEB_EXCLUDE_SHADOW_DOM__=="boolean"&&__RRWEB_EXCLUDE_SHADOW_DOM__?new fa:new pa({mutationCb:Fr,scrollCb:Ka,bypassOptions:{onMutation:Va,blockClass:o,blockSelector:i,unblockSelector:s,maskAllText:u,maskTextClass:l,unmaskTextClass:d,maskTextSelector:f,unmaskTextSelector:p,inlineStylesheet:m,maskInputOptions:hi,dataURLOptions:R,maskAttributeFn:N,maskTextFn:k,maskInputFn:B,recordCanvas:C,inlineImages:U,sampling:S,slimDOMOptions:gi,iframeManager:Yt,stylesheetManager:qt,canvasManager:Ei,keepIframeSrcFn:Z,processedNodeManager:yi},mirror:st}),Ti=(Y=!1)=>{if(!E)return;ce({type:W.Meta,data:{href:window.location.href,width:Ql(),height:Zl()}},Y),qt.reset(),Ur.init(),Fn.forEach(G=>G.lock());let Xe=Dg(document,{mirror:st,blockClass:o,blockSelector:i,unblockSelector:s,maskAllText:u,maskTextClass:l,unmaskTextClass:d,maskTextSelector:f,unmaskTextSelector:p,inlineStylesheet:m,maskAllInputs:hi,maskAttributeFn:N,maskInputFn:B,maskTextFn:k,slimDOM:gi,dataURLOptions:R,recordCanvas:C,inlineImages:U,onSerialize:G=>{nd(G,st)&&Yt.addIframe(G),rd(G,st)&&qt.trackLinkElement(G),ia(G)&&Ur.addShadowRoot(G.shadowRoot,document)},onIframeLoad:(G,se)=>{Yt.attachIframe(G,se),G.contentWindow&&Ei.addWindow(G.contentWindow),Ur.observeAttachShadow(G)},onStylesheetLoad:(G,se)=>{qt.attachLinkElement(G,se)},keepIframeSrcFn:Z});if(!Xe)return console.warn("Failed to snapshot the document");ce({type:W.FullSnapshot,data:{node:Xe,initialOffset:Xl(window)}}),Fn.forEach(G=>G.unlock()),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&qt.adoptStyleSheets(document.adoptedStyleSheets,st.getId(document))};Jo=Ti;try{let Y=[],Xe=se=>q(tS)({onMutation:Va,mutationCb:Fr,mousemoveCb:(V,Vt)=>ce({type:W.IncrementalSnapshot,data:{source:Vt,positions:V}}),mouseInteractionCb:V=>ce({type:W.IncrementalSnapshot,data:{source:L.MouseInteraction,...V}}),scrollCb:Ka,viewportResizeCb:V=>ce({type:W.IncrementalSnapshot,data:{source:L.ViewportResize,...V}}),inputCb:V=>ce({type:W.IncrementalSnapshot,data:{source:L.Input,...V}}),mediaInteractionCb:V=>ce({type:W.IncrementalSnapshot,data:{source:L.MediaInteraction,...V}}),styleSheetRuleCb:V=>ce({type:W.IncrementalSnapshot,data:{source:L.StyleSheetRule,...V}}),styleDeclarationCb:V=>ce({type:W.IncrementalSnapshot,data:{source:L.StyleDeclaration,...V}}),canvasMutationCb:sf,fontCb:V=>ce({type:W.IncrementalSnapshot,data:{source:L.Font,...V}}),selectionCb:V=>{ce({type:W.IncrementalSnapshot,data:{source:L.Selection,...V}})},customElementCb:V=>{ce({type:W.IncrementalSnapshot,data:{source:L.CustomElement,...V}})},blockClass:o,ignoreClass:a,ignoreSelector:c,maskAllText:u,maskTextClass:l,unmaskTextClass:d,maskTextSelector:f,unmaskTextSelector:p,maskInputOptions:hi,inlineStylesheet:m,sampling:S,recordDOM:E,recordCanvas:C,inlineImages:U,userTriggeredOnInput:Q,collectFonts:ue,doc:se,maskAttributeFn:N,maskInputFn:B,maskTextFn:k,keepIframeSrcFn:Z,blockSelector:i,unblockSelector:s,slimDOMOptions:gi,dataURLOptions:R,mirror:st,iframeManager:Yt,stylesheetManager:qt,shadowDomManager:Ur,processedNodeManager:yi,canvasManager:Ei,ignoreCSSAttributes:Ne,plugins:he([ge,"optionalAccess",V=>V.filter,"call",V=>V(Vt=>Vt.observer),"optionalAccess",V=>V.map,"call",V=>V(Vt=>({observer:Vt.observer,options:Vt.options,callback:cf=>ce({type:W.Plugin,data:{plugin:Vt.name,payload:cf}})}))])||[]},{});Yt.addLoadListener(se=>{try{Y.push(Xe(se.contentDocument))}catch(V){console.warn(V)}});let G=()=>{Ti(),Y.push(Xe(document))};return document.readyState==="interactive"||document.readyState==="complete"?G():(Y.push(Ae("DOMContentLoaded",()=>{ce({type:W.DomContentLoaded,data:{}}),X==="DOMContentLoaded"&&G()})),Y.push(Ae("load",()=>{ce({type:W.Load,data:{}}),X==="load"&&G()},window))),()=>{Y.forEach(se=>se()),yi.destroy(),Jo=void 0,zg()}}catch(Y){console.warn(Y)}}function nS(e){if(!Jo)throw new Error("please take full snapshot after start recording");Jo(e)}kt.mirror=st;kt.takeFullSnapshot=nS;function rS(e,t){try{return e?e(t):new Vo}catch{return console.warn("Unable to initialize CanvasManager"),new Vo}}var O=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,Ll=["info","warn","error","log"],$o="[Replay] ";function Zs(e,t="info"){Ve({category:"console",data:{logger:"replay"},level:t,message:`${$o}${e}`},{level:t})}function oS(){let e=!1,t=!1,n={exception:()=>{},infoTick:()=>{},setConfig:r=>{e=r.captureExceptions,t=r.traceInternals}};return O?(Ll.forEach(r=>{n[r]=(...o)=>{h[r]($o,...o),t&&Zs(o[0])}}),n.exception=(r,...o)=>{n.error&&n.error(...o),h.error($o,r),e?an(r):t&&Zs(r)},n.infoTick=(...r)=>{h.info($o,...r),t&&setTimeout(()=>Zs(r[0]),0)}):Ll.forEach(r=>{n[r]=()=>{}}),n}var D=oS(),iS=3,sS=5;function Ma(e){return e>9999999999?e:e*1e3}function Qs(e){return e>9999999999?e/1e3:e}function Or(e,t){t.category!=="sentry.transaction"&&(["ui.click","ui.input"].includes(t.category)?e.triggerUserActivity():e.checkAndHandleExpiredSession(),e.addUpdate(()=>(e.throttledAddEvent({type:W.Custom,timestamp:(t.timestamp||0)*1e3,data:{tag:"breadcrumb",payload:Oe(t,10,1e3)}}),t.category==="console")))}var aS="button,a";function dd(e){return e.closest(aS)||e}function fd(e){let t=pd(e);return!t||!(t instanceof Element)?t:dd(t)}function pd(e){return cS(e)?e.target:e}function cS(e){return typeof e=="object"&&!!e&&"target"in e}var Gt;function uS(e){return Gt||(Gt=[],lS()),Gt.push(e),()=>{let t=Gt?Gt.indexOf(e):-1;t>-1&&Gt.splice(t,1)}}function lS(){le(re,"open",function(e){return function(...t){if(Gt)try{Gt.forEach(n=>n())}catch{}return e.apply(re,t)}})}var dS=new Set([L.Mutation,L.StyleSheetRule,L.StyleDeclaration,L.AdoptedStyleSheet,L.CanvasMutation,L.Selection,L.MediaInteraction]);function fS(e,t,n){e.handleClick(t,n)}var ga=class{constructor(t,n,r=Or){this._lastMutation=0,this._lastScroll=0,this._clicks=[],this._timeout=n.timeout/1e3,this._threshold=n.threshold/1e3,this._scollTimeout=n.scrollTimeout/1e3,this._replay=t,this._ignoreSelector=n.ignoreSelector,this._addBreadcrumbEvent=r}addListeners(){let t=uS(()=>{this._lastMutation=Fl()});this._teardown=()=>{t(),this._clicks=[],this._lastMutation=0,this._lastScroll=0}}removeListeners(){this._teardown&&this._teardown(),this._checkClickTimeout&&clearTimeout(this._checkClickTimeout)}handleClick(t,n){if(mS(n,this._ignoreSelector)||!hS(t))return;let r={timestamp:Qs(t.timestamp),clickBreadcrumb:t,clickCount:0,node:n};this._clicks.some(o=>o.node===r.node&&Math.abs(o.timestamp-r.timestamp)<1)||(this._clicks.push(r),this._clicks.length===1&&this._scheduleCheckClicks())}registerMutation(t=Date.now()){this._lastMutation=Qs(t)}registerScroll(t=Date.now()){this._lastScroll=Qs(t)}registerClick(t){let n=dd(t);this._handleMultiClick(n)}_handleMultiClick(t){this._getClicks(t).forEach(n=>{n.clickCount++})}_getClicks(t){return this._clicks.filter(n=>n.node===t)}_checkClicks(){let t=[],n=Fl();this._clicks.forEach(r=>{!r.mutationAfter&&this._lastMutation&&(r.mutationAfter=r.timestamp<=this._lastMutation?this._lastMutation-r.timestamp:void 0),!r.scrollAfter&&this._lastScroll&&(r.scrollAfter=r.timestamp<=this._lastScroll?this._lastScroll-r.timestamp:void 0),r.timestamp+this._timeout<=n&&t.push(r)});for(let r of t){let o=this._clicks.indexOf(r);o>-1&&(this._generateBreadcrumbs(r),this._clicks.splice(o,1))}this._clicks.length&&this._scheduleCheckClicks()}_generateBreadcrumbs(t){let n=this._replay,r=t.scrollAfter&&t.scrollAfter<=this._scollTimeout,o=t.mutationAfter&&t.mutationAfter<=this._threshold,i=!r&&!o,{clickCount:s,clickBreadcrumb:a}=t;if(i){let c=Math.min(t.mutationAfter||this._timeout,this._timeout)*1e3,u=c<this._timeout*1e3?"mutation":"timeout",l={type:"default",message:a.message,timestamp:a.timestamp,category:"ui.slowClickDetected",data:{...a.data,url:re.location.href,route:n.getCurrentRoute(),timeAfterClickMs:c,endReason:u,clickCount:s||1}};this._addBreadcrumbEvent(n,l);return}if(s>1){let c={type:"default",message:a.message,timestamp:a.timestamp,category:"ui.multiClick",data:{...a.data,url:re.location.href,route:n.getCurrentRoute(),clickCount:s,metric:!0}};this._addBreadcrumbEvent(n,c)}}_scheduleCheckClicks(){this._checkClickTimeout&&clearTimeout(this._checkClickTimeout),this._checkClickTimeout=$t(()=>this._checkClicks(),1e3)}},pS=["A","BUTTON","INPUT"];function mS(e,t){return!!(!pS.includes(e.tagName)||e.tagName==="INPUT"&&!["submit","button"].includes(e.getAttribute("type")||"")||e.tagName==="A"&&(e.hasAttribute("download")||e.hasAttribute("target")&&e.getAttribute("target")!=="_self")||t&&e.matches(t))}function hS(e){return!!(e.data&&typeof e.data.nodeId=="number"&&e.timestamp)}function Fl(){return Date.now()/1e3}function gS(e,t){try{if(!SS(t))return;let{source:n}=t.data;if(dS.has(n)&&e.registerMutation(t.timestamp),n===L.Scroll&&e.registerScroll(t.timestamp),_S(t)){let{type:r,id:o}=t.data,i=kt.mirror.getNode(o);i instanceof HTMLElement&&r===ke.Click&&e.registerClick(i)}}catch{}}function SS(e){return e.type===iS}function _S(e){return e.data.source===L.MouseInteraction}function St(e){return{timestamp:Date.now()/1e3,type:"default",...e}}var Ko;(function(e){e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment"})(Ko||(Ko={}));var yS=new Set(["id","class","aria-label","role","name","alt","title","data-test-id","data-testid","disabled","aria-disabled","data-sentry-component"]);function ES(e){let t={};!e["data-sentry-component"]&&e["data-sentry-element"]&&(e["data-sentry-component"]=e["data-sentry-element"]);for(let n in e)if(yS.has(n)){let r=n;(n==="data-testid"||n==="data-test-id")&&(r="testId"),t[r]=e[n]}return t}var TS=e=>t=>{if(!e.isEnabled())return;let n=IS(t);if(!n)return;let r=t.name==="click",o=r?t.event:void 0;r&&e.clickDetector&&o&&o.target&&!o.altKey&&!o.metaKey&&!o.ctrlKey&&!o.shiftKey&&fS(e.clickDetector,n,fd(t.event)),Or(e,n)};function md(e,t){let n=kt.mirror.getId(e),r=n&&kt.mirror.getNode(n),o=r&&kt.mirror.getMeta(r),i=o&&vS(o)?o:null;return{message:t,data:i?{nodeId:n,node:{id:n,tagName:i.tagName,textContent:Array.from(i.childNodes).map(s=>s.type===Ko.Text&&s.textContent).filter(Boolean).map(s=>s.trim()).join(""),attributes:ES(i.attributes)}}:{}}}function IS(e){let{target:t,message:n}=bS(e);return St({category:`ui.${e.name}`,...md(t,n)})}function bS(e){let t=e.name==="click",n,r=null;try{r=t?fd(e.event):pd(e.event),n=ye(r,{maxStringLength:200})||"<unknown>"}catch{n="<unknown>"}return{target:r,message:n}}function vS(e){return e.type===Ko.Element}function CS(e,t){if(!e.isEnabled())return;e.updateUserActivity();let n=RS(t);n&&Or(e,n)}function RS(e){let{metaKey:t,shiftKey:n,ctrlKey:r,altKey:o,key:i,target:s}=e;if(!s||wS(s)||!i)return null;let a=t||r||o,c=i.length===1;if(!a&&c)return null;let u=ye(s,{maxStringLength:200})||"<unknown>",l=md(s,u);return St({category:"ui.keyDown",message:u,data:{...l.data,metaKey:t,shiftKey:n,ctrlKey:r,altKey:o,key:i}})}function wS(e){return e.tagName==="INPUT"||e.tagName==="TEXTAREA"||e.isContentEditable}var xS={resource:OS,paint:NS,navigation:MS};function Ho(e,t){return({metric:n})=>void t.replayPerformanceEntries.push(e(n))}function kS(e){return e.map(AS).filter(Boolean)}function AS(e){let t=xS[e.entryType];return t?t(e):null}function Hn(e){return((oe||re.performance.timeOrigin)+e)/1e3}function NS(e){let{duration:t,entryType:n,name:r,startTime:o}=e,i=Hn(o);return{type:n,name:r,start:i,end:i+t,data:void 0}}function MS(e){let{entryType:t,name:n,decodedBodySize:r,duration:o,domComplete:i,encodedBodySize:s,domContentLoadedEventStart:a,domContentLoadedEventEnd:c,domInteractive:u,loadEventStart:l,loadEventEnd:d,redirectCount:f,startTime:p,transferSize:m,type:g}=e;return o===0?null:{type:`${t}.${g}`,start:Hn(p),end:Hn(i),name:n,data:{size:m,decodedBodySize:r,encodedBodySize:s,duration:o,domInteractive:u,domContentLoadedEventStart:a,domContentLoadedEventEnd:c,loadEventStart:l,loadEventEnd:d,domComplete:i,redirectCount:f}}}function OS(e){let{entryType:t,initiatorType:n,name:r,responseEnd:o,startTime:i,decodedBodySize:s,encodedBodySize:a,responseStatus:c,transferSize:u}=e;return["fetch","xmlhttprequest"].includes(n)?null:{type:`${t}.${n}`,start:Hn(i),end:Hn(o),name:r,data:{size:u,statusCode:c,decodedBodySize:s,encodedBodySize:a}}}function DS(e){let t=e.entries[e.entries.length-1],n=t&&t.element?[t.element]:void 0;return ii(e,"largest-contentful-paint",n)}function PS(e){return e.sources!==void 0}function LS(e){let t=[],n=[];for(let r of e.entries)if(PS(r)){let o=[];for(let i of r.sources)if(i.node){n.push(i.node);let s=kt.mirror.getId(i.node);s&&o.push(s)}t.push({value:r.value,nodeIds:o.length?o:void 0})}return ii(e,"cumulative-layout-shift",n,t)}function FS(e){let t=e.entries[e.entries.length-1],n=t&&t.target?[t.target]:void 0;return ii(e,"first-input-delay",n)}function US(e){let t=e.entries[e.entries.length-1],n=t&&t.target?[t.target]:void 0;return ii(e,"interaction-to-next-paint",n)}function ii(e,t,n,r){let o=e.value,i=e.rating,s=Hn(o);return{type:"web-vital",name:t,start:s,end:s,data:{value:o,size:o,rating:i,nodeIds:n?n.map(a=>kt.mirror.getId(a)):void 0,attributions:r}}}function BS(e){function t(o){e.performanceEntries.includes(o)||e.performanceEntries.push(o)}function n({entries:o}){o.forEach(t)}let r=[];return["navigation","paint","resource"].forEach(o=>{r.push(ot(o,n))}),r.push(pr(Ho(DS,e)),un(Ho(LS,e)),mr(Ho(FS,e)),hr(Ho(US,e))),()=>{r.forEach(o=>o())}}var HS='var t=Uint8Array,n=Uint16Array,r=Int32Array,e=new t([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),i=new t([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),a=new t([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),s=function(t,e){for(var i=new n(31),a=0;a<31;++a)i[a]=e+=1<<t[a-1];var s=new r(i[30]);for(a=1;a<30;++a)for(var o=i[a];o<i[a+1];++o)s[o]=o-i[a]<<5|a;return{b:i,r:s}},o=s(e,2),f=o.b,h=o.r;f[28]=258,h[258]=28;for(var l=s(i,0).r,u=new n(32768),c=0;c<32768;++c){var v=(43690&c)>>1|(21845&c)<<1;v=(61680&(v=(52428&v)>>2|(13107&v)<<2))>>4|(3855&v)<<4,u[c]=((65280&v)>>8|(255&v)<<8)>>1}var d=function(t,r,e){for(var i=t.length,a=0,s=new n(r);a<i;++a)t[a]&&++s[t[a]-1];var o,f=new n(r);for(a=1;a<r;++a)f[a]=f[a-1]+s[a-1]<<1;if(e){o=new n(1<<r);var h=15-r;for(a=0;a<i;++a)if(t[a])for(var l=a<<4|t[a],c=r-t[a],v=f[t[a]-1]++<<c,d=v|(1<<c)-1;v<=d;++v)o[u[v]>>h]=l}else for(o=new n(i),a=0;a<i;++a)t[a]&&(o[a]=u[f[t[a]-1]++]>>15-t[a]);return o},g=new t(288);for(c=0;c<144;++c)g[c]=8;for(c=144;c<256;++c)g[c]=9;for(c=256;c<280;++c)g[c]=7;for(c=280;c<288;++c)g[c]=8;var w=new t(32);for(c=0;c<32;++c)w[c]=5;var p=d(g,9,0),y=d(w,5,0),m=function(t){return(t+7)/8|0},b=function(n,r,e){return(null==r||r<0)&&(r=0),(null==e||e>n.length)&&(e=n.length),new t(n.subarray(r,e))},M=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],E=function(t,n,r){var e=new Error(n||M[t]);if(e.code=t,Error.captureStackTrace&&Error.captureStackTrace(e,E),!r)throw e;return e},z=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8},A=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8,t[e+2]|=r>>16},_=function(r,e){for(var i=[],a=0;a<r.length;++a)r[a]&&i.push({s:a,f:r[a]});var s=i.length,o=i.slice();if(!s)return{t:F,l:0};if(1==s){var f=new t(i[0].s+1);return f[i[0].s]=1,{t:f,l:1}}i.sort((function(t,n){return t.f-n.f})),i.push({s:-1,f:25001});var h=i[0],l=i[1],u=0,c=1,v=2;for(i[0]={s:-1,f:h.f+l.f,l:h,r:l};c!=s-1;)h=i[i[u].f<i[v].f?u++:v++],l=i[u!=c&&i[u].f<i[v].f?u++:v++],i[c++]={s:-1,f:h.f+l.f,l:h,r:l};var d=o[0].s;for(a=1;a<s;++a)o[a].s>d&&(d=o[a].s);var g=new n(d+1),w=x(i[c-1],g,0);if(w>e){a=0;var p=0,y=w-e,m=1<<y;for(o.sort((function(t,n){return g[n.s]-g[t.s]||t.f-n.f}));a<s;++a){var b=o[a].s;if(!(g[b]>e))break;p+=m-(1<<w-g[b]),g[b]=e}for(p>>=y;p>0;){var M=o[a].s;g[M]<e?p-=1<<e-g[M]++-1:++a}for(;a>=0&&p;--a){var E=o[a].s;g[E]==e&&(--g[E],++p)}w=e}return{t:new t(g),l:w}},x=function(t,n,r){return-1==t.s?Math.max(x(t.l,n,r+1),x(t.r,n,r+1)):n[t.s]=r},D=function(t){for(var r=t.length;r&&!t[--r];);for(var e=new n(++r),i=0,a=t[0],s=1,o=function(t){e[i++]=t},f=1;f<=r;++f)if(t[f]==a&&f!=r)++s;else{if(!a&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(a),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(a);s=1,a=t[f]}return{c:e.subarray(0,i),n:r}},T=function(t,n){for(var r=0,e=0;e<n.length;++e)r+=t[e]*n[e];return r},k=function(t,n,r){var e=r.length,i=m(n+2);t[i]=255&e,t[i+1]=e>>8,t[i+2]=255^t[i],t[i+3]=255^t[i+1];for(var a=0;a<e;++a)t[i+a+4]=r[a];return 8*(i+4+e)},C=function(t,r,s,o,f,h,l,u,c,v,m){z(r,m++,s),++f[256];for(var b=_(f,15),M=b.t,E=b.l,x=_(h,15),C=x.t,U=x.l,F=D(M),I=F.c,S=F.n,L=D(C),O=L.c,j=L.n,q=new n(19),B=0;B<I.length;++B)++q[31&I[B]];for(B=0;B<O.length;++B)++q[31&O[B]];for(var G=_(q,7),H=G.t,J=G.l,K=19;K>4&&!H[a[K-1]];--K);var N,P,Q,R,V=v+5<<3,W=T(f,g)+T(h,w)+l,X=T(f,M)+T(h,C)+l+14+3*K+T(q,H)+2*q[16]+3*q[17]+7*q[18];if(c>=0&&V<=W&&V<=X)return k(r,m,t.subarray(c,c+v));if(z(r,m,1+(X<W)),m+=2,X<W){N=d(M,E,0),P=M,Q=d(C,U,0),R=C;var Y=d(H,J,0);z(r,m,S-257),z(r,m+5,j-1),z(r,m+10,K-4),m+=14;for(B=0;B<K;++B)z(r,m+3*B,H[a[B]]);m+=3*K;for(var Z=[I,O],$=0;$<2;++$){var tt=Z[$];for(B=0;B<tt.length;++B){var nt=31&tt[B];z(r,m,Y[nt]),m+=H[nt],nt>15&&(z(r,m,tt[B]>>5&127),m+=tt[B]>>12)}}}else N=p,P=g,Q=y,R=w;for(B=0;B<u;++B){var rt=o[B];if(rt>255){A(r,m,N[(nt=rt>>18&31)+257]),m+=P[nt+257],nt>7&&(z(r,m,rt>>23&31),m+=e[nt]);var et=31&rt;A(r,m,Q[et]),m+=R[et],et>3&&(A(r,m,rt>>5&8191),m+=i[et])}else A(r,m,N[rt]),m+=P[rt]}return A(r,m,N[256]),m+P[256]},U=new r([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),F=new t(0),I=function(){for(var t=new Int32Array(256),n=0;n<256;++n){for(var r=n,e=9;--e;)r=(1&r&&-306674912)^r>>>1;t[n]=r}return t}(),S=function(){var t=-1;return{p:function(n){for(var r=t,e=0;e<n.length;++e)r=I[255&r^n[e]]^r>>>8;t=r},d:function(){return~t}}},L=function(){var t=1,n=0;return{p:function(r){for(var e=t,i=n,a=0|r.length,s=0;s!=a;){for(var o=Math.min(s+2655,a);s<o;++s)i+=e+=r[s];e=(65535&e)+15*(e>>16),i=(65535&i)+15*(i>>16)}t=e,n=i},d:function(){return(255&(t%=65521))<<24|(65280&t)<<8|(255&(n%=65521))<<8|n>>8}}},O=function(a,s,o,f,u){if(!u&&(u={l:1},s.dictionary)){var c=s.dictionary.subarray(-32768),v=new t(c.length+a.length);v.set(c),v.set(a,c.length),a=v,u.w=c.length}return function(a,s,o,f,u,c){var v=c.z||a.length,d=new t(f+v+5*(1+Math.ceil(v/7e3))+u),g=d.subarray(f,d.length-u),w=c.l,p=7&(c.r||0);if(s){p&&(g[0]=c.r>>3);for(var y=U[s-1],M=y>>13,E=8191&y,z=(1<<o)-1,A=c.p||new n(32768),_=c.h||new n(z+1),x=Math.ceil(o/3),D=2*x,T=function(t){return(a[t]^a[t+1]<<x^a[t+2]<<D)&z},F=new r(25e3),I=new n(288),S=new n(32),L=0,O=0,j=c.i||0,q=0,B=c.w||0,G=0;j+2<v;++j){var H=T(j),J=32767&j,K=_[H];if(A[J]=K,_[H]=J,B<=j){var N=v-j;if((L>7e3||q>24576)&&(N>423||!w)){p=C(a,g,0,F,I,S,O,q,G,j-G,p),q=L=O=0,G=j;for(var P=0;P<286;++P)I[P]=0;for(P=0;P<30;++P)S[P]=0}var Q=2,R=0,V=E,W=J-K&32767;if(N>2&&H==T(j-W))for(var X=Math.min(M,N)-1,Y=Math.min(32767,j),Z=Math.min(258,N);W<=Y&&--V&&J!=K;){if(a[j+Q]==a[j+Q-W]){for(var $=0;$<Z&&a[j+$]==a[j+$-W];++$);if($>Q){if(Q=$,R=W,$>X)break;var tt=Math.min(W,$-2),nt=0;for(P=0;P<tt;++P){var rt=j-W+P&32767,et=rt-A[rt]&32767;et>nt&&(nt=et,K=rt)}}}W+=(J=K)-(K=A[J])&32767}if(R){F[q++]=268435456|h[Q]<<18|l[R];var it=31&h[Q],at=31&l[R];O+=e[it]+i[at],++I[257+it],++S[at],B=j+Q,++L}else F[q++]=a[j],++I[a[j]]}}for(j=Math.max(j,B);j<v;++j)F[q++]=a[j],++I[a[j]];p=C(a,g,w,F,I,S,O,q,G,j-G,p),w||(c.r=7&p|g[p/8|0]<<3,p-=7,c.h=_,c.p=A,c.i=j,c.w=B)}else{for(j=c.w||0;j<v+w;j+=65535){var st=j+65535;st>=v&&(g[p/8|0]=w,st=v),p=k(g,p+1,a.subarray(j,st))}c.i=v}return b(d,0,f+m(p)+u)}(a,null==s.level?6:s.level,null==s.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(a.length)))):12+s.mem,o,f,u)},j=function(t,n,r){for(;r;++n)t[n]=r,r>>>=8},q=function(t,n){var r=n.filename;if(t[0]=31,t[1]=139,t[2]=8,t[8]=n.level<2?4:9==n.level?2:0,t[9]=3,0!=n.mtime&&j(t,4,Math.floor(new Date(n.mtime||Date.now())/1e3)),r){t[3]=8;for(var e=0;e<=r.length;++e)t[e+10]=r.charCodeAt(e)}},B=function(t){return 10+(t.filename?t.filename.length+1:0)},G=function(){function n(n,r){if("function"==typeof n&&(r=n,n={}),this.ondata=r,this.o=n||{},this.s={l:0,i:32768,w:32768,z:32768},this.b=new t(98304),this.o.dictionary){var e=this.o.dictionary.subarray(-32768);this.b.set(e,32768-e.length),this.s.i=32768-e.length}}return n.prototype.p=function(t,n){this.ondata(O(t,this.o,0,0,this.s),n)},n.prototype.push=function(n,r){this.ondata||E(5),this.s.l&&E(4);var e=n.length+this.s.z;if(e>this.b.length){if(e>2*this.b.length-32768){var i=new t(-32768&e);i.set(this.b.subarray(0,this.s.z)),this.b=i}var a=this.b.length-this.s.z;a&&(this.b.set(n.subarray(0,a),this.s.z),this.s.z=this.b.length,this.p(this.b,!1)),this.b.set(this.b.subarray(-32768)),this.b.set(n.subarray(a),32768),this.s.z=n.length-a+32768,this.s.i=32766,this.s.w=32768}else this.b.set(n,this.s.z),this.s.z+=n.length;this.s.l=1&r,(this.s.z>this.s.w+8191||r)&&(this.p(this.b,r||!1),this.s.w=this.s.i,this.s.i-=2)},n}();var H=function(){function t(t,n){this.c=L(),this.v=1,G.call(this,t,n)}return t.prototype.push=function(t,n){this.c.p(t),G.prototype.push.call(this,t,n)},t.prototype.p=function(t,n){var r=O(t,this.o,this.v&&(this.o.dictionary?6:2),n&&4,this.s);this.v&&(function(t,n){var r=n.level,e=0==r?0:r<6?1:9==r?3:2;if(t[0]=120,t[1]=e<<6|(n.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,n.dictionary){var i=L();i.p(n.dictionary),j(t,2,i.d())}}(r,this.o),this.v=0),n&&j(r,r.length-4,this.c.d()),this.ondata(r,n)},t}(),J="undefined"!=typeof TextEncoder&&new TextEncoder,K="undefined"!=typeof TextDecoder&&new TextDecoder;try{K.decode(F,{stream:!0})}catch(t){}var N=function(){function t(t){this.ondata=t}return t.prototype.push=function(t,n){this.ondata||E(5),this.d&&E(4),this.ondata(P(t),this.d=n||!1)},t}();function P(n,r){if(r){for(var e=new t(n.length),i=0;i<n.length;++i)e[i]=n.charCodeAt(i);return e}if(J)return J.encode(n);var a=n.length,s=new t(n.length+(n.length>>1)),o=0,f=function(t){s[o++]=t};for(i=0;i<a;++i){if(o+5>s.length){var h=new t(o+8+(a-i<<1));h.set(s),s=h}var l=n.charCodeAt(i);l<128||r?f(l):l<2048?(f(192|l>>6),f(128|63&l)):l>55295&&l<57344?(f(240|(l=65536+(1047552&l)|1023&n.charCodeAt(++i))>>18),f(128|l>>12&63),f(128|l>>6&63),f(128|63&l)):(f(224|l>>12),f(128|l>>6&63),f(128|63&l))}return b(s,0,o)}function Q(t){return function(t,n){n||(n={});var r=S(),e=t.length;r.p(t);var i=O(t,n,B(n),8),a=i.length;return q(i,n),j(i,a-8,r.d()),j(i,a-4,e),i}(P(t))}const R=new class{constructor(){this._init()}clear(){this._init()}addEvent(t){if(!t)throw new Error("Adding invalid event");const n=this._hasEvents?",":"";this.stream.push(n+t),this._hasEvents=!0}finish(){this.stream.push("]",!0);const t=function(t){let n=0;for(const r of t)n+=r.length;const r=new Uint8Array(n);for(let n=0,e=0,i=t.length;n<i;n++){const i=t[n];r.set(i,e),e+=i.length}return r}(this._deflatedData);return this._init(),t}_init(){this._hasEvents=!1,this._deflatedData=[],this.deflate=new H,this.deflate.ondata=(t,n)=>{this._deflatedData.push(t)},this.stream=new N(((t,n)=>{this.deflate.push(t,n)})),this.stream.push("[")}},V={clear:()=>{R.clear()},addEvent:t=>R.addEvent(t),finish:()=>R.finish(),compress:t=>Q(t)};addEventListener("message",(function(t){const n=t.data.method,r=t.data.id,e=t.data.arg;if(n in V&&"function"==typeof V[n])try{const t=V[n](e);postMessage({id:r,method:n,success:!0,response:t})}catch(t){postMessage({id:r,method:n,success:!1,response:t.message}),console.error(t)}})),postMessage({id:void 0,method:"init",success:!0,response:void 0});';function $S(){let e=new Blob([HS]);return URL.createObjectURL(e)}var Ar=class extends Error{constructor(){super(`Event buffer exceeded maximum size of ${Ra}.`)}},Xo=class{constructor(){this.events=[],this._totalSize=0,this.hasCheckout=!1}get hasEvents(){return this.events.length>0}get type(){return"sync"}destroy(){this.events=[]}async addEvent(t){let n=JSON.stringify(t).length;if(this._totalSize+=n,this._totalSize>Ra)throw new Ar;this.events.push(t)}finish(){return new Promise(t=>{let n=this.events;this.clear(),t(JSON.stringify(n))})}clear(){this.events=[],this._totalSize=0,this.hasCheckout=!1}getEarliestTimestamp(){let t=this.events.map(n=>n.timestamp).sort()[0];return t?Ma(t):null}},Sa=class{constructor(t){this._worker=t,this._id=0}ensureReady(){return this._ensureReadyPromise?this._ensureReadyPromise:(this._ensureReadyPromise=new Promise((t,n)=>{this._worker.addEventListener("message",({data:r})=>{r.success?t():n()},{once:!0}),this._worker.addEventListener("error",r=>{n(r)},{once:!0})}),this._ensureReadyPromise)}destroy(){O&&D.info("Destroying compression worker"),this._worker.terminate()}postMessage(t,n){let r=this._getAndIncrementId();return new Promise((o,i)=>{let s=({data:a})=>{let c=a;if(c.method===t&&c.id===r){if(this._worker.removeEventListener("message",s),!c.success){O&&D.error("Error in compression worker: ",c.response),i(new Error("Error in compression worker"));return}o(c.response)}};this._worker.addEventListener("message",s),this._worker.postMessage({id:r,method:t,arg:n})})}_getAndIncrementId(){return this._id++}},_a=class{constructor(t){this._worker=new Sa(t),this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1}get hasEvents(){return!!this._earliestTimestamp}get type(){return"worker"}ensureReady(){return this._worker.ensureReady()}destroy(){this._worker.destroy()}addEvent(t){let n=Ma(t.timestamp);(!this._earliestTimestamp||n<this._earliestTimestamp)&&(this._earliestTimestamp=n);let r=JSON.stringify(t);return this._totalSize+=r.length,this._totalSize>Ra?Promise.reject(new Ar):this._sendEventToWorker(r)}finish(){return this._finishRequest()}clear(){this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1,this._worker.postMessage("clear").then(null,t=>{O&&D.exception(t,'Sending "clear" message to worker failed',t)})}getEarliestTimestamp(){return this._earliestTimestamp}_sendEventToWorker(t){return this._worker.postMessage("addEvent",t)}async _finishRequest(){let t=await this._worker.postMessage("finish");return this._earliestTimestamp=null,this._totalSize=0,t}},ya=class{constructor(t){this._fallback=new Xo,this._compression=new _a(t),this._used=this._fallback,this._ensureWorkerIsLoadedPromise=this._ensureWorkerIsLoaded()}get type(){return this._used.type}get hasEvents(){return this._used.hasEvents}get hasCheckout(){return this._used.hasCheckout}set hasCheckout(t){this._used.hasCheckout=t}destroy(){this._fallback.destroy(),this._compression.destroy()}clear(){return this._used.clear()}getEarliestTimestamp(){return this._used.getEarliestTimestamp()}addEvent(t){return this._used.addEvent(t)}async finish(){return await this.ensureWorkerIsLoaded(),this._used.finish()}ensureWorkerIsLoaded(){return this._ensureWorkerIsLoadedPromise}async _ensureWorkerIsLoaded(){try{await this._compression.ensureReady()}catch(t){O&&D.exception(t,"Failed to load the compression worker, falling back to simple buffer");return}await this._switchToCompressionWorker()}async _switchToCompressionWorker(){let{events:t,hasCheckout:n}=this._fallback,r=[];for(let o of t)r.push(this._compression.addEvent(o));this._compression.hasCheckout=n,this._used=this._compression;try{await Promise.all(r)}catch(o){O&&D.exception(o,"Failed to add events when switching buffers.")}}};function WS({useCompression:e,workerUrl:t}){if(e&&window.Worker){let n=zS(t);if(n)return n}return O&&D.info("Using simple buffer"),new Xo}function zS(e){try{let t=e||GS();if(!t)return;O&&D.info(`Using compression worker${e?` from ${e}`:""}`);let n=new Worker(t);return new ya(n)}catch(t){O&&D.exception(t,"Failed to create compression worker")}}function GS(){return typeof __SENTRY_EXCLUDE_REPLAY_WORKER__>"u"||!__SENTRY_EXCLUDE_REPLAY_WORKER__?$S():""}function Oa(){try{return"sessionStorage"in re&&!!re.sessionStorage}catch{return!1}}function jS(e){qS(),e.session=void 0}function qS(){if(Oa())try{re.sessionStorage.removeItem(va)}catch{}}function hd(e){return e===void 0?!1:Math.random()<e}function gd(e){let t=Date.now(),n=e.id||$(),r=e.started||t,o=e.lastActivity||t,i=e.segmentId||0,s=e.sampled,a=e.previousSessionId;return{id:n,started:r,lastActivity:o,segmentId:i,sampled:s,previousSessionId:a}}function Da(e){if(Oa())try{re.sessionStorage.setItem(va,JSON.stringify(e))}catch{}}function YS(e,t){return hd(e)?"session":t?"buffer":!1}function Ul({sessionSampleRate:e,allowBuffering:t,stickySession:n=!1},{previousSessionId:r}={}){let o=YS(e,t),i=gd({sampled:o,previousSessionId:r});return n&&Da(i),i}function VS(){if(!Oa())return null;try{let e=re.sessionStorage.getItem(va);if(!e)return null;let t=JSON.parse(e);return O&&D.infoTick("Loading existing session"),gd(t)}catch{return null}}function Ea(e,t,n=+new Date){return e===null||t===void 0||t<0?!0:t===0?!1:e+t<=n}function Sd(e,{maxReplayDuration:t,sessionIdleExpire:n,targetTime:r=Date.now()}){return Ea(e.started,t,r)||Ea(e.lastActivity,n,r)}function _d(e,{sessionIdleExpire:t,maxReplayDuration:n}){return!(!Sd(e,{sessionIdleExpire:t,maxReplayDuration:n})||e.sampled==="buffer"&&e.segmentId===0)}function ea({sessionIdleExpire:e,maxReplayDuration:t,previousSessionId:n},r){let o=r.stickySession&&VS();return o?_d(o,{sessionIdleExpire:e,maxReplayDuration:t})?(O&&D.infoTick("Session in sessionStorage is expired, creating new one..."),Ul(r,{previousSessionId:o.id})):o:(O&&D.infoTick("Creating new session"),Ul(r,{previousSessionId:n}))}function JS(e){return e.type===W.Custom}function Pa(e,t,n){return Ed(e,t)?(yd(e,t,n),!0):!1}function KS(e,t,n){return Ed(e,t)?yd(e,t,n):Promise.resolve(null)}async function yd(e,t,n){if(!e.eventBuffer)return null;try{n&&e.recordingMode==="buffer"&&e.eventBuffer.clear(),n&&(e.eventBuffer.hasCheckout=!0);let r=e.getOptions(),o=XS(t,r.beforeAddRecordingEvent);return o?await e.eventBuffer.addEvent(o):void 0}catch(r){let o=r&&r instanceof Ar?"addEventSizeExceeded":"addEvent";e.handleException(r),await e.stop({reason:o});let i=v();i&&i.recordDroppedEvent("internal_sdk_error","replay")}}function Ed(e,t){if(!e.eventBuffer||e.isPaused()||!e.isEnabled())return!1;let n=Ma(t.timestamp);return n+e.timeouts.sessionIdlePause<Date.now()?!1:n>e.getContext().initialTimestamp+e.getOptions().maxReplayDuration?(O&&D.infoTick(`Skipping event with timestamp ${n} because it is after maxReplayDuration`),!1):!0}function XS(e,t){try{if(typeof t=="function"&&JS(e))return t(e)}catch(n){return O&&D.exception(n,"An error occured in the `beforeAddRecordingEvent` callback, skipping the event..."),null}return e}function La(e){return!e.type}function Ta(e){return e.type==="transaction"}function ZS(e){return e.type==="replay_event"}function Bl(e){return e.type==="feedback"}function QS(e){return(t,n)=>{if(!e.isEnabled()||!La(t)&&!Ta(t))return;let r=n&&n.statusCode;if(!(!r||r<200||r>=300)){if(Ta(t)){e_(e,t);return}t_(e,t)}}}function e_(e,t){let n=e.getContext();t.contexts&&t.contexts.trace&&t.contexts.trace.trace_id&&n.traceIds.size<100&&n.traceIds.add(t.contexts.trace.trace_id)}function t_(e,t){let n=e.getContext();if(t.event_id&&n.errorIds.size<100&&n.errorIds.add(t.event_id),e.recordingMode!=="buffer"||!t.tags||!t.tags.replayId)return;let{beforeErrorSampling:r}=e.getOptions();typeof r=="function"&&!r(t)||$t(()=>{e.sendBufferedReplayOrFlush()})}function n_(e){return t=>{!e.isEnabled()||!La(t)||r_(e,t)}}function r_(e,t){let n=t.exception&&t.exception.values&&t.exception.values[0]&&t.exception.values[0].value;if(typeof n=="string"&&(n.match(/(reactjs\.org\/docs\/error-decoder\.html\?invariant=|react\.dev\/errors\/)(418|419|422|423|425)/)||n.match(/(does not match server-rendered HTML|Hydration failed because)/i))){let r=St({category:"replay.hydrate-error",data:{url:Wn()}});Or(e,r)}}function o_(e){let t=v();t&&t.on("beforeAddBreadcrumb",n=>i_(e,n))}function i_(e,t){if(!e.isEnabled()||!Td(t))return;let n=s_(t);n&&Or(e,n)}function s_(e){return!Td(e)||["fetch","xhr","sentry.event","sentry.transaction"].includes(e.category)||e.category.startsWith("ui.")?null:e.category==="console"?a_(e):St(e)}function a_(e){let t=e.data&&e.data.arguments;if(!Array.isArray(t)||t.length===0)return St(e);let n=!1,r=t.map(o=>{if(!o)return o;if(typeof o=="string")return o.length>Fo?(n=!0,`${o.slice(0,Fo)}\u2026`):o;if(typeof o=="object")try{let i=Oe(o,7);return JSON.stringify(i).length>Fo?(n=!0,`${JSON.stringify(i,null,2).slice(0,Fo)}\u2026`):i}catch{}return o});return St({...e,data:{...e.data,arguments:r,...n?{_meta:{warnings:["CONSOLE_ARG_TRUNCATED"]}}:{}}})}function Td(e){return!!e.category}function c_(e,t){return e.type||!e.exception||!e.exception.values||!e.exception.values.length?!1:!!(t.originalException&&t.originalException.__rrweb__)}function u_(e,t){e.triggerUserActivity(),e.addUpdate(()=>t.timestamp?(e.throttledAddEvent({type:W.Custom,timestamp:t.timestamp*1e3,data:{tag:"breadcrumb",payload:{timestamp:t.timestamp,type:"default",category:"sentry.feedback",data:{feedbackId:t.event_id}}}}),!1):!0)}function l_(e,t){return e.recordingMode!=="buffer"||t.message===Ca||!t.exception||t.type?!1:hd(e.getOptions().errorSampleRate)}function d_(e){return Object.assign((t,n)=>e.isEnabled()?ZS(t)?(delete t.breadcrumbs,t):!La(t)&&!Ta(t)&&!Bl(t)||!e.checkAndHandleExpiredSession()?t:Bl(t)?(e.flush(),t.contexts.feedback.replay_id=e.getSessionId(),u_(e,t),t):c_(t,n)&&!e.getOptions()._experiments.captureExceptions?(O&&D.log("Ignoring error from rrweb internals",t),null):((l_(e,t)||e.recordingMode==="session")&&(t.tags={...t.tags,replayId:e.getSessionId()}),t):t,{id:"Replay"})}function si(e,t){return t.map(({type:n,start:r,end:o,name:i,data:s})=>{let a=e.throttledAddEvent({type:W.Custom,timestamp:r,data:{tag:"performanceSpan",payload:{op:n,description:i,startTimestamp:r,endTimestamp:o,data:s}}});return typeof a=="string"?Promise.resolve(null):a})}function f_(e){let{from:t,to:n}=e,r=Date.now()/1e3;return{type:"navigation.push",start:r,end:r,name:n,data:{previous:t}}}function p_(e){return t=>{if(!e.isEnabled())return;let n=f_(t);n!==null&&(e.getContext().urls.push(n.name),e.triggerUserActivity(),e.addUpdate(()=>(si(e,[n]),!1)))}}function m_(e,t){return O&&e.getOptions()._experiments.traceInternals?!1:Cs(t,v())}function Id(e,t){e.isEnabled()&&t!==null&&(m_(e,t.name)||e.addUpdate(()=>(si(e,[t]),!0)))}function ai(e){if(!e)return;let t=new TextEncoder;try{if(typeof e=="string")return t.encode(e).length;if(e instanceof URLSearchParams)return t.encode(e.toString()).length;if(e instanceof FormData){let n=Rd(e);return t.encode(n).length}if(e instanceof Blob)return e.size;if(e instanceof ArrayBuffer)return e.byteLength}catch{}}function bd(e){if(!e)return;let t=parseInt(e,10);return isNaN(t)?void 0:t}function vd(e){try{if(typeof e=="string")return[e];if(e instanceof URLSearchParams)return[e.toString()];if(e instanceof FormData)return[Rd(e)];if(!e)return[void 0]}catch(t){return O&&D.exception(t,"Failed to serialize body",e),[void 0,"BODY_PARSE_ERROR"]}return O&&D.info("Skipping network body because of body type",e),[void 0,"UNPARSEABLE_BODY_TYPE"]}function Zo(e,t){if(!e)return{headers:{},size:void 0,_meta:{warnings:[t]}};let n={...e._meta},r=n.warnings||[];return n.warnings=[...r,t],e._meta=n,e}function Cd(e,t){if(!t)return null;let{startTimestamp:n,endTimestamp:r,url:o,method:i,statusCode:s,request:a,response:c}=t;return{type:e,start:n/1e3,end:r/1e3,name:o,data:J({method:i,statusCode:s,request:a,response:c})}}function Nr(e){return{headers:{},size:e,_meta:{warnings:["URL_SKIPPED"]}}}function jt(e,t,n){if(!t&&Object.keys(e).length===0)return;if(!t)return{headers:e};if(!n)return{headers:e,size:t};let r={headers:e,size:t},{body:o,warnings:i}=h_(n);return r.body=o,i&&i.length>0&&(r._meta={warnings:i}),r}function Ia(e,t){return Object.entries(e).reduce((n,[r,o])=>{let i=r.toLowerCase();return t.includes(i)&&e[r]&&(n[i]=o),n},{})}function Rd(e){return new URLSearchParams(e).toString()}function h_(e){if(!e||typeof e!="string")return{body:e};let t=e.length>bl,n=g_(e);if(t){let r=e.slice(0,bl);return n?{body:r,warnings:["MAYBE_JSON_TRUNCATED"]}:{body:`${r}\u2026`,warnings:["TEXT_TRUNCATED"]}}if(n)try{return{body:JSON.parse(e)}}catch{}return{body:e}}function g_(e){let t=e[0],n=e[e.length-1];return t==="["&&n==="]"||t==="{"&&n==="}"}function Qo(e,t){let n=S_(e);return We(n,t)}function S_(e,t=re.document.baseURI){if(e.startsWith("http://")||e.startsWith("https://")||e.startsWith(re.location.origin))return e;let n=new URL(e,t);if(n.origin!==new URL(t).origin)return e;let r=n.href;return!e.endsWith("/")&&r.endsWith("/")?r.slice(0,-1):r}async function __(e,t,n){try{let r=await E_(e,t,n),o=Cd("resource.fetch",r);Id(n.replay,o)}catch(r){O&&D.exception(r,"Failed to capture fetch breadcrumb")}}function y_(e,t){let{input:n,response:r}=t,o=n?wd(n):void 0,i=ai(o),s=r?bd(r.headers.get("content-length")):void 0;i!==void 0&&(e.data.request_body_size=i),s!==void 0&&(e.data.response_body_size=s)}async function E_(e,t,n){let r=Date.now(),{startTimestamp:o=r,endTimestamp:i=r}=t,{url:s,method:a,status_code:c=0,request_body_size:u,response_body_size:l}=e.data,d=Qo(s,n.networkDetailAllowUrls)&&!Qo(s,n.networkDetailDenyUrls),f=d?T_(n,t.input,u):Nr(u),p=await I_(d,n,t.response,l);return{startTimestamp:o,endTimestamp:i,url:s,method:a,statusCode:c,request:f,response:p}}function T_({networkCaptureBodies:e,networkRequestHeaders:t},n,r){let o=n?C_(n,t):{};if(!e)return jt(o,r,void 0);let i=wd(n),[s,a]=vd(i),c=jt(o,r,s);return a?Zo(c,a):c}async function I_(e,{networkCaptureBodies:t,networkResponseHeaders:n},r,o){if(!e&&o!==void 0)return Nr(o);let i=r?xd(r.headers,n):{};if(!r||!t&&o!==void 0)return jt(i,o,void 0);let[s,a]=await v_(r),c=b_(s,{networkCaptureBodies:t,responseBodySize:o,captureDetails:e,headers:i});return a?Zo(c,a):c}function b_(e,{networkCaptureBodies:t,responseBodySize:n,captureDetails:r,headers:o}){try{let i=e&&e.length&&n===void 0?ai(e):n;return r?t?jt(o,i,e):jt(o,i,void 0):Nr(i)}catch(i){return O&&D.exception(i,"Failed to serialize response body"),jt(o,n,void 0)}}async function v_(e){let t=R_(e);if(!t)return[void 0,"BODY_PARSE_ERROR"];try{return[await w_(t)]}catch(n){return O&&D.exception(n,"Failed to get text body from response"),[void 0,"BODY_PARSE_ERROR"]}}function wd(e=[]){if(!(e.length!==2||typeof e[1]!="object"))return e[1].body}function xd(e,t){let n={};return t.forEach(r=>{e.get(r)&&(n[r]=e.get(r))}),n}function C_(e,t){return e.length===1&&typeof e[0]!="string"?Hl(e[0],t):e.length===2?Hl(e[1],t):{}}function Hl(e,t){if(!e)return{};let n=e.headers;return n?n instanceof Headers?xd(n,t):Array.isArray(n)?{}:Ia(n,t):{}}function R_(e){try{return e.clone()}catch(t){O&&D.exception(t,"Failed to clone response body")}}function w_(e){return new Promise((t,n)=>{let r=$t(()=>n(new Error("Timeout while trying to read response body")),500);x_(e).then(o=>t(o),o=>n(o)).finally(()=>clearTimeout(r))})}async function x_(e){return await e.text()}async function k_(e,t,n){try{let r=N_(e,t,n),o=Cd("resource.xhr",r);Id(n.replay,o)}catch(r){O&&D.exception(r,"Failed to capture xhr breadcrumb")}}function A_(e,t){let{xhr:n,input:r}=t;if(!n)return;let o=ai(r),i=n.getResponseHeader("content-length")?bd(n.getResponseHeader("content-length")):P_(n.response,n.responseType);o!==void 0&&(e.data.request_body_size=o),i!==void 0&&(e.data.response_body_size=i)}function N_(e,t,n){let r=Date.now(),{startTimestamp:o=r,endTimestamp:i=r,input:s,xhr:a}=t,{url:c,method:u,status_code:l=0,request_body_size:d,response_body_size:f}=e.data;if(!c)return null;if(!a||!Qo(c,n.networkDetailAllowUrls)||Qo(c,n.networkDetailDenyUrls)){let _=Nr(d),S=Nr(f);return{startTimestamp:o,endTimestamp:i,url:c,method:u,statusCode:l,request:_,response:S}}let p=a[it],m=p?Ia(p.request_headers,n.networkRequestHeaders):{},g=Ia(M_(a),n.networkResponseHeaders),[T,y]=n.networkCaptureBodies?vd(s):[void 0],[N,B]=n.networkCaptureBodies?O_(a):[void 0],k=jt(m,d,T),M=jt(g,f,N);return{startTimestamp:o,endTimestamp:i,url:c,method:u,statusCode:l,request:y?Zo(k,y):k,response:B?Zo(M,B):M}}function M_(e){let t=e.getAllResponseHeaders();return t?t.split(`\r
`).reduce((n,r)=>{let[o,i]=r.split(": ");return i&&(n[o.toLowerCase()]=i),n},{}):{}}function O_(e){let t=[];try{return[e.responseText]}catch(n){t.push(n)}try{return D_(e.response,e.responseType)}catch(n){t.push(n)}return O&&D.warn("Failed to get xhr response body",...t),[void 0]}function D_(e,t){try{if(typeof e=="string")return[e];if(e instanceof Document)return[e.body.outerHTML];if(t==="json"&&e&&typeof e=="object")return[JSON.stringify(e)];if(!e)return[void 0]}catch(n){return O&&D.exception(n,"Failed to serialize body",e),[void 0,"BODY_PARSE_ERROR"]}return O&&D.info("Skipping network body because of body type",e),[void 0,"UNPARSEABLE_BODY_TYPE"]}function P_(e,t){try{let n=t==="json"&&e&&typeof e=="object"?JSON.stringify(e):e;return ai(n)}catch{return}}function L_(e){let t=v();try{let{networkDetailAllowUrls:n,networkDetailDenyUrls:r,networkCaptureBodies:o,networkRequestHeaders:i,networkResponseHeaders:s}=e.getOptions(),a={replay:e,networkDetailAllowUrls:n,networkDetailDenyUrls:r,networkCaptureBodies:o,networkRequestHeaders:i,networkResponseHeaders:s};t&&t.on("beforeAddBreadcrumb",(c,u)=>F_(a,c,u))}catch{}}function F_(e,t,n){if(t.data)try{U_(t)&&H_(n)&&(A_(t,n),k_(t,n,e)),B_(t)&&$_(n)&&(y_(t,n),__(t,n,e))}catch(r){O&&D.exception(r,"Error when enriching network breadcrumb")}}function U_(e){return e.category==="xhr"}function B_(e){return e.category==="fetch"}function H_(e){return e&&e.xhr}function $_(e){return e&&e.response}function W_(e){let t=v();yr(TS(e)),wt(p_(e)),o_(e),L_(e);let n=d_(e);ho(n),t&&(t.on("beforeSendEvent",n_(e)),t.on("afterSendEvent",QS(e)),t.on("createDsc",r=>{let o=e.getSessionId();o&&e.isEnabled()&&e.recordingMode==="session"&&e.checkAndHandleExpiredSession()&&(r.replay_id=o)}),t.on("spanStart",r=>{e.lastActiveSpan=r}),t.on("spanEnd",r=>{e.lastActiveSpan=r}),t.on("beforeSendFeedback",(r,o)=>{let i=e.getSessionId();o&&o.includeReplay&&e.isEnabled()&&i&&r.contexts&&r.contexts.feedback&&(r.contexts.feedback.replay_id=i)}))}async function z_(e){try{return Promise.all(si(e,[G_(re.performance.memory)]))}catch{return[]}}function G_(e){let{jsHeapSizeLimit:t,totalJSHeapSize:n,usedJSHeapSize:r}=e,o=Date.now()/1e3;return{type:"memory",name:"memory",start:o,end:o,data:{memory:{jsHeapSizeLimit:t,totalJSHeapSize:n,usedJSHeapSize:r}}}}function j_(e,t,n){let r,o,i,s=n&&n.maxWait?Math.max(n.maxWait,t):0;function a(){return c(),r=e(),r}function c(){o!==void 0&&clearTimeout(o),i!==void 0&&clearTimeout(i),o=i=void 0}function u(){return o!==void 0||i!==void 0?a():r}function l(){return o&&clearTimeout(o),o=$t(a,t),s&&i===void 0&&(i=$t(a,s)),r}return l.cancel=c,l.flush=u,l}function q_(e){let t=!1;return(n,r)=>{if(!e.checkAndHandleExpiredSession()){O&&D.warn("Received replay event after session expired.");return}let o=r||!t;t=!0,e.clickDetector&&gS(e.clickDetector,n),e.addUpdate(()=>{if(e.recordingMode==="buffer"&&o&&e.setInitialState(),!Pa(e,n,o))return!0;if(!o)return!1;if(V_(e,o),e.session&&e.session.previousSessionId)return!0;if(e.recordingMode==="buffer"&&e.session&&e.eventBuffer){let i=e.eventBuffer.getEarliestTimestamp();i&&(O&&D.info(`Updating session start time to earliest event in buffer to ${new Date(i)}`),e.session.started=i,e.getOptions().stickySession&&Da(e.session))}return e.recordingMode==="session"&&e.flush(),!0})}}function Y_(e){let t=e.getOptions();return{type:W.Custom,timestamp:Date.now(),data:{tag:"options",payload:{shouldRecordCanvas:e.isRecordingCanvas(),sessionSampleRate:t.sessionSampleRate,errorSampleRate:t.errorSampleRate,useCompressionOption:t.useCompression,blockAllMedia:t.blockAllMedia,maskAllText:t.maskAllText,maskAllInputs:t.maskAllInputs,useCompression:e.eventBuffer?e.eventBuffer.type==="worker":!1,networkDetailHasUrls:t.networkDetailAllowUrls.length>0,networkCaptureBodies:t.networkCaptureBodies,networkRequestHasHeaders:t.networkRequestHeaders.length>0,networkResponseHasHeaders:t.networkResponseHeaders.length>0}}}}function V_(e,t){!t||!e.session||e.session.segmentId!==0||Pa(e,Y_(e),!1)}function J_(e,t,n,r){return Fe(Zn(e,Tn(e),r,n),[[{type:"replay_event"},e],[{type:"replay_recording",length:typeof t=="string"?new TextEncoder().encode(t).length:t.length},t]])}function K_({recordingData:e,headers:t}){let n,r=`${JSON.stringify(t)}
`;if(typeof e=="string")n=`${r}${e}`;else{let i=new TextEncoder().encode(r);n=new Uint8Array(i.length+e.length),n.set(i),n.set(e,i.length)}return n}async function X_({client:e,scope:t,replayId:n,event:r}){let o=typeof e._integrations=="object"&&e._integrations!==null&&!Array.isArray(e._integrations)?Object.keys(e._integrations):void 0,i={event_id:n,integrations:o};e.emit("preprocessEvent",r,i);let s=await ir(e.getOptions(),r,i,t,e,ae());if(!s)return null;s.platform=s.platform||"javascript";let a=e.getSdkMetadata(),{name:c,version:u}=a&&a.sdk||{};return s.sdk={...s.sdk,name:c||"sentry.javascript.unknown",version:u||"0.0.0"},s}async function Z_({recordingData:e,replayId:t,segmentId:n,eventContext:r,timestamp:o,session:i}){let s=K_({recordingData:e,headers:{segment_id:n}}),{urls:a,errorIds:c,traceIds:u,initialTimestamp:l}=r,d=v(),f=F(),p=d&&d.getTransport(),m=d&&d.getDsn();if(!d||!p||!m||!i.sampled)return Ce({});let g={type:Yh,replay_start_timestamp:l/1e3,timestamp:o/1e3,error_ids:c,trace_ids:u,urls:a,replay_id:t,segment_id:n,replay_type:i.sampled},T=await X_({scope:f,client:d,replayId:t,event:g});if(!T)return d.recordDroppedEvent("event_processor","replay",g),O&&D.info("An event processor returned `null`, will not send event."),Ce({});delete T.sdkProcessingMetadata;let y=J_(T,s,m,d.getOptions().tunnel),N;try{N=await p.send(y)}catch(k){let M=new Error(Ca);try{M.cause=k}catch{}throw M}if(typeof N.statusCode=="number"&&(N.statusCode<200||N.statusCode>=300))throw new ei(N.statusCode);let B=er({},N);if(Qn(B,"replay"))throw new ti(B);return N}var ei=class extends Error{constructor(t){super(`Transport returned status code ${t}`)}},ti=class extends Error{constructor(t){super("Rate limit hit"),this.rateLimits=t}};async function kd(e,t={count:0,interval:Qh}){let{recordingData:n,options:r}=e;if(n.length)try{return await Z_(e),!0}catch(o){if(o instanceof ei||o instanceof ti)throw o;if(kn("Replays",{_retryCount:t.count}),O&&r._experiments&&r._experiments.captureExceptions&&an(o),t.count>=eg){let i=new Error(`${Ca} - max retries exceeded`);try{i.cause=o}catch{}throw i}return t.interval*=++t.count,new Promise((i,s)=>{$t(async()=>{try{await kd(e,t),i(!0)}catch(a){s(a)}},t.interval)})}}var Ad="__THROTTLED",Q_="__SKIPPED";function ey(e,t,n){let r=new Map,o=a=>{let c=a-n;r.forEach((u,l)=>{l<c&&r.delete(l)})},i=()=>[...r.values()].reduce((a,c)=>a+c,0),s=!1;return(...a)=>{let c=Math.floor(Date.now()/1e3);if(o(c),i()>=t){let l=s;return s=!0,l?Q_:Ad}s=!1;let u=r.get(c)||0;return r.set(c,u+1),e(...a)}}var ba=class e{constructor({options:t,recordingOptions:n}){e.prototype.__init.call(this),e.prototype.__init2.call(this),e.prototype.__init3.call(this),e.prototype.__init4.call(this),e.prototype.__init5.call(this),e.prototype.__init6.call(this),this.eventBuffer=null,this.performanceEntries=[],this.replayPerformanceEntries=[],this.recordingMode="session",this.timeouts={sessionIdlePause:Vh,sessionIdleExpire:Jh},this._lastActivity=Date.now(),this._isEnabled=!1,this._isPaused=!1,this._requiresManualStart=!1,this._hasInitializedCoreListeners=!1,this._context={errorIds:new Set,traceIds:new Set,urls:[],initialTimestamp:Date.now(),initialUrl:""},this._recordingOptions=n,this._options=t,this._debouncedFlush=j_(()=>this._flush(),this._options.flushMinDelay,{maxWait:this._options.flushMaxDelay}),this._throttledAddEvent=ey((s,a)=>KS(this,s,a),300,5);let{slowClickTimeout:r,slowClickIgnoreSelectors:o}=this.getOptions(),i=r?{threshold:Math.min(tg,r),timeout:r,scrollTimeout:ng,ignoreSelector:o?o.join(","):""}:void 0;if(i&&(this.clickDetector=new ga(this,i)),O){let s=t._experiments;D.setConfig({captureExceptions:!!s.captureExceptions,traceInternals:!!s.traceInternals})}}getContext(){return this._context}isEnabled(){return this._isEnabled}isPaused(){return this._isPaused}isRecordingCanvas(){return!!this._canvas}getOptions(){return this._options}handleException(t){O&&D.exception(t)}initializeSampling(t){let{errorSampleRate:n,sessionSampleRate:r}=this._options,o=n<=0&&r<=0;if(this._requiresManualStart=o,!o){if(this._initializeSessionForSampling(t),!this.session){O&&D.exception(new Error("Unable to initialize and create session"));return}this.session.sampled!==!1&&(this.recordingMode=this.session.sampled==="buffer"&&this.session.segmentId===0?"buffer":"session",O&&D.infoTick(`Starting replay in ${this.recordingMode} mode`),this._initializeRecording())}}start(){if(this._isEnabled&&this.recordingMode==="session"){O&&D.info("Recording is already in progress");return}if(this._isEnabled&&this.recordingMode==="buffer"){O&&D.info("Buffering is in progress, call `flush()` to save the replay");return}O&&D.infoTick("Starting replay in session mode"),this._updateUserActivity();let t=ea({maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire},{stickySession:this._options.stickySession,sessionSampleRate:1,allowBuffering:!1});this.session=t,this._initializeRecording()}startBuffering(){if(this._isEnabled){O&&D.info("Buffering is in progress, call `flush()` to save the replay");return}O&&D.infoTick("Starting replay in buffer mode");let t=ea({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration},{stickySession:this._options.stickySession,sessionSampleRate:0,allowBuffering:!0});this.session=t,this.recordingMode="buffer",this._initializeRecording()}startRecording(){try{let t=this._canvas;this._stopRecording=kt({...this._recordingOptions,...this.recordingMode==="buffer"&&{checkoutEveryNms:Zh},emit:q_(this),onMutation:this._onMutationHandler,...t?{recordCanvas:t.recordCanvas,getCanvasManager:t.getCanvasManager,sampling:t.sampling,dataURLOptions:t.dataURLOptions}:{}})}catch(t){this.handleException(t)}}stopRecording(){try{return this._stopRecording&&(this._stopRecording(),this._stopRecording=void 0),!0}catch(t){return this.handleException(t),!1}}async stop({forceFlush:t=!1,reason:n}={}){if(this._isEnabled){this._isEnabled=!1;try{O&&D.info(`Stopping Replay${n?` triggered by ${n}`:""}`),this._removeListeners(),this.stopRecording(),this._debouncedFlush.cancel(),t&&await this._flush({force:!0}),this.eventBuffer&&this.eventBuffer.destroy(),this.eventBuffer=null,jS(this)}catch(r){this.handleException(r)}}}pause(){this._isPaused||(this._isPaused=!0,this.stopRecording(),O&&D.info("Pausing replay"))}resume(){!this._isPaused||!this._checkSession()||(this._isPaused=!1,this.startRecording(),O&&D.info("Resuming replay"))}async sendBufferedReplayOrFlush({continueRecording:t=!0}={}){if(this.recordingMode==="session")return this.flushImmediate();let n=Date.now();O&&D.info("Converting buffer to session"),await this.flushImmediate();let r=this.stopRecording();!t||!r||this.recordingMode!=="session"&&(this.recordingMode="session",this.session&&(this._updateUserActivity(n),this._updateSessionActivity(n),this._maybeSaveSession()),this.startRecording())}addUpdate(t){let n=t();this.recordingMode!=="buffer"&&n!==!0&&this._debouncedFlush()}triggerUserActivity(){if(this._updateUserActivity(),!this._stopRecording){if(!this._checkSession())return;this.resume();return}this.checkAndHandleExpiredSession(),this._updateSessionActivity()}updateUserActivity(){this._updateUserActivity(),this._updateSessionActivity()}conditionalFlush(){return this.recordingMode==="buffer"?Promise.resolve():this.flushImmediate()}flush(){return this._debouncedFlush()}flushImmediate(){return this._debouncedFlush(),this._debouncedFlush.flush()}cancelFlush(){this._debouncedFlush.cancel()}getSessionId(){return this.session&&this.session.id}checkAndHandleExpiredSession(){if(this._lastActivity&&Ea(this._lastActivity,this.timeouts.sessionIdlePause)&&this.session&&this.session.sampled==="session"){this.pause();return}return!!this._checkSession()}setInitialState(){let t=`${re.location.pathname}${re.location.hash}${re.location.search}`,n=`${re.location.origin}${t}`;this.performanceEntries=[],this.replayPerformanceEntries=[],this._clearContext(),this._context.initialUrl=n,this._context.initialTimestamp=Date.now(),this._context.urls.push(n)}throttledAddEvent(t,n){let r=this._throttledAddEvent(t,n);if(r===Ad){let o=St({category:"replay.throttled"});this.addUpdate(()=>!Pa(this,{type:sS,timestamp:o.timestamp||0,data:{tag:"breadcrumb",payload:o,metric:!0}}))}return r}getCurrentRoute(){let t=this.lastActiveSpan||K(),n=t&&j(t),o=(n&&x(n).data||{})[be];if(!(!n||!o||!["route","custom"].includes(o)))return x(n).description}_initializeRecording(){this.setInitialState(),this._updateSessionActivity(),this.eventBuffer=WS({useCompression:this._options.useCompression,workerUrl:this._options.workerUrl}),this._removeListeners(),this._addListeners(),this._isEnabled=!0,this._isPaused=!1,this.startRecording()}_initializeSessionForSampling(t){let n=this._options.errorSampleRate>0,r=ea({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration,previousSessionId:t},{stickySession:this._options.stickySession,sessionSampleRate:this._options.sessionSampleRate,allowBuffering:n});this.session=r}_checkSession(){if(!this.session)return!1;let t=this.session;return _d(t,{sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration})?(this._refreshSession(t),!1):!0}async _refreshSession(t){this._isEnabled&&(await this.stop({reason:"refresh session"}),this.initializeSampling(t.id))}_addListeners(){try{re.document.addEventListener("visibilitychange",this._handleVisibilityChange),re.addEventListener("blur",this._handleWindowBlur),re.addEventListener("focus",this._handleWindowFocus),re.addEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.addListeners(),this._hasInitializedCoreListeners||(W_(this),this._hasInitializedCoreListeners=!0)}catch(t){this.handleException(t)}this._performanceCleanupCallback=BS(this)}_removeListeners(){try{re.document.removeEventListener("visibilitychange",this._handleVisibilityChange),re.removeEventListener("blur",this._handleWindowBlur),re.removeEventListener("focus",this._handleWindowFocus),re.removeEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.removeListeners(),this._performanceCleanupCallback&&this._performanceCleanupCallback()}catch(t){this.handleException(t)}}__init(){this._handleVisibilityChange=()=>{re.document.visibilityState==="visible"?this._doChangeToForegroundTasks():this._doChangeToBackgroundTasks()}}__init2(){this._handleWindowBlur=()=>{let t=St({category:"ui.blur"});this._doChangeToBackgroundTasks(t)}}__init3(){this._handleWindowFocus=()=>{let t=St({category:"ui.focus"});this._doChangeToForegroundTasks(t)}}__init4(){this._handleKeyboardEvent=t=>{CS(this,t)}}_doChangeToBackgroundTasks(t){!this.session||Sd(this.session,{maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire})||(t&&this._createCustomBreadcrumb(t),this.conditionalFlush())}_doChangeToForegroundTasks(t){if(!this.session)return;if(!this.checkAndHandleExpiredSession()){O&&D.info("Document has become active, but session has expired");return}t&&this._createCustomBreadcrumb(t)}_updateUserActivity(t=Date.now()){this._lastActivity=t}_updateSessionActivity(t=Date.now()){this.session&&(this.session.lastActivity=t,this._maybeSaveSession())}_createCustomBreadcrumb(t){this.addUpdate(()=>{this.throttledAddEvent({type:W.Custom,timestamp:t.timestamp||0,data:{tag:"breadcrumb",payload:t}})})}_addPerformanceEntries(){let t=kS(this.performanceEntries).concat(this.replayPerformanceEntries);return this.performanceEntries=[],this.replayPerformanceEntries=[],Promise.all(si(this,t))}_clearContext(){this._context.errorIds.clear(),this._context.traceIds.clear(),this._context.urls=[]}_updateInitialTimestampFromEventBuffer(){let{session:t,eventBuffer:n}=this;if(!t||!n||this._requiresManualStart||t.segmentId)return;let r=n.getEarliestTimestamp();r&&r<this._context.initialTimestamp&&(this._context.initialTimestamp=r)}_popEventContext(){let t={initialTimestamp:this._context.initialTimestamp,initialUrl:this._context.initialUrl,errorIds:Array.from(this._context.errorIds),traceIds:Array.from(this._context.traceIds),urls:this._context.urls};return this._clearContext(),t}async _runFlush(){let t=this.getSessionId();if(!this.session||!this.eventBuffer||!t){O&&D.error("No session or eventBuffer found to flush.");return}if(await this._addPerformanceEntries(),!(!this.eventBuffer||!this.eventBuffer.hasEvents)&&(await z_(this),!!this.eventBuffer&&t===this.getSessionId()))try{this._updateInitialTimestampFromEventBuffer();let n=Date.now();if(n-this._context.initialTimestamp>this._options.maxReplayDuration+3e4)throw new Error("Session is too long, not sending replay");let r=this._popEventContext(),o=this.session.segmentId++;this._maybeSaveSession();let i=await this.eventBuffer.finish();await kd({replayId:t,recordingData:i,segmentId:o,eventContext:r,session:this.session,options:this.getOptions(),timestamp:n})}catch(n){this.handleException(n),this.stop({reason:"sendReplay"});let r=v();r&&r.recordDroppedEvent("send_error","replay")}}__init5(){this._flush=async({force:t=!1}={})=>{if(!this._isEnabled&&!t)return;if(!this.checkAndHandleExpiredSession()){O&&D.error("Attempting to finish replay event after session expired.");return}if(!this.session)return;let n=this.session.started,o=Date.now()-n;this._debouncedFlush.cancel();let i=o<this._options.minReplayDuration,s=o>this._options.maxReplayDuration+5e3;if(i||s){O&&D.info(`Session duration (${Math.floor(o/1e3)}s) is too ${i?"short":"long"}, not sending replay.`),i&&this._debouncedFlush();return}let a=this.eventBuffer;if(a&&this.session.segmentId===0&&!a.hasCheckout&&O&&D.info("Flushing initial segment without checkout."),!this._flushLock){this._flushLock=this._runFlush(),await this._flushLock,this._flushLock=void 0;return}try{await this._flushLock}catch(c){O&&D.error(c)}finally{this._debouncedFlush()}}}_maybeSaveSession(){this.session&&this._options.stickySession&&Da(this.session)}__init6(){this._onMutationHandler=t=>{let n=t.length,r=this._options.mutationLimit,o=this._options.mutationBreadcrumbLimit,i=r&&n>r;if(n>o||i){let s=St({category:"replay.mutations",data:{count:n,limit:i}});this._createCustomBreadcrumb(s)}return i?(this.stop({reason:"mutationLimit",forceFlush:this.recordingMode==="session"}),!1):!0}}};function Tr(e,t){return[...e,...t].join(",")}function ty({mask:e,unmask:t,block:n,unblock:r,ignore:o}){let i=['base[href="/"]'],s=Tr(e,[".sentry-mask","[data-sentry-mask]"]),a=Tr(t,[]);return{maskTextSelector:s,unmaskTextSelector:a,blockSelector:Tr(n,[".sentry-block","[data-sentry-block]",...i]),unblockSelector:Tr(r,[]),ignoreSelector:Tr(o,[".sentry-ignore","[data-sentry-ignore]",'input[type="file"]'])}}function ny({el:e,key:t,maskAttributes:n,maskAllText:r,privacyOptions:o,value:i}){return!r||o.unmaskTextSelector&&e.matches(o.unmaskTextSelector)?i:n.includes(t)||t==="value"&&e.tagName==="INPUT"&&["submit","button"].includes(e.getAttribute("type")||"")?i.replace(/[\S]/g,"*"):i}var $l='img,image,svg,video,object,picture,embed,map,audio,link[rel="icon"],link[rel="apple-touch-icon"]',ry=["content-length","content-type","accept"],Wl=!1,Fa=e=>new ni(e),ni=class e{static __initStatic(){this.id="Replay"}constructor({flushMinDelay:t=Kh,flushMaxDelay:n=Xh,minReplayDuration:r=rg,maxReplayDuration:o=vl,stickySession:i=!0,useCompression:s=!0,workerUrl:a,_experiments:c={},maskAllText:u=!0,maskAllInputs:l=!0,blockAllMedia:d=!0,mutationBreadcrumbLimit:f=750,mutationLimit:p=1e4,slowClickTimeout:m=7e3,slowClickIgnoreSelectors:g=[],networkDetailAllowUrls:T=[],networkDetailDenyUrls:y=[],networkCaptureBodies:N=!0,networkRequestHeaders:B=[],networkResponseHeaders:k=[],mask:M=[],maskAttributes:_=["title","placeholder"],unmask:S=[],block:R=[],unblock:z=[],ignore:E=[],maskFn:C,beforeAddRecordingEvent:P,beforeErrorSampling:X}={}){this.name=e.id;let Q=ty({mask:M,unmask:S,block:R,unblock:z,ignore:E});if(this._recordingOptions={maskAllInputs:l,maskAllText:u,maskInputOptions:{password:!0},maskTextFn:C,maskInputFn:C,maskAttributeFn:(ue,U,ge)=>ny({maskAttributes:_,maskAllText:u,privacyOptions:Q,key:ue,value:U,el:ge}),...Q,slimDOMOptions:"all",inlineStylesheet:!0,inlineImages:!1,collectFonts:!0,errorHandler:ue=>{try{ue.__rrweb__=!0}catch{}}},this._initialOptions={flushMinDelay:t,flushMaxDelay:n,minReplayDuration:Math.min(r,og),maxReplayDuration:Math.min(o,vl),stickySession:i,useCompression:s,workerUrl:a,blockAllMedia:d,maskAllInputs:l,maskAllText:u,mutationBreadcrumbLimit:f,mutationLimit:p,slowClickTimeout:m,slowClickIgnoreSelectors:g,networkDetailAllowUrls:T,networkDetailDenyUrls:y,networkCaptureBodies:N,networkRequestHeaders:zl(B),networkResponseHeaders:zl(k),beforeAddRecordingEvent:P,beforeErrorSampling:X,_experiments:c},this._initialOptions.blockAllMedia&&(this._recordingOptions.blockSelector=this._recordingOptions.blockSelector?`${this._recordingOptions.blockSelector},${$l}`:$l),this._isInitialized&&eo())throw new Error("Multiple Sentry Session Replay instances are not supported");this._isInitialized=!0}get _isInitialized(){return Wl}set _isInitialized(t){Wl=t}afterAllSetup(t){!eo()||this._replay||(this._setup(t),this._initialize(t))}start(){this._replay&&this._replay.start()}startBuffering(){this._replay&&this._replay.startBuffering()}stop(){return this._replay?this._replay.stop({forceFlush:this._replay.recordingMode==="session"}):Promise.resolve()}flush(t){return this._replay?this._replay.isEnabled()?this._replay.sendBufferedReplayOrFlush(t):(this._replay.start(),Promise.resolve()):Promise.resolve()}getReplayId(){if(!(!this._replay||!this._replay.isEnabled()))return this._replay.getSessionId()}_initialize(t){this._replay&&(this._maybeLoadFromReplayCanvasIntegration(t),this._replay.initializeSampling())}_setup(t){let n=oy(this._initialOptions,t);this._replay=new ba({options:n,recordingOptions:this._recordingOptions})}_maybeLoadFromReplayCanvasIntegration(t){try{let n=t.getIntegrationByName("ReplayCanvas");if(!n)return;this._replay._canvas=n.getOptions()}catch{}}};ni.__initStatic();function oy(e,t){let n=t.getOptions(),r={sessionSampleRate:0,errorSampleRate:0,...J(e)},o=Ut(n.replaysSessionSampleRate),i=Ut(n.replaysOnErrorSampleRate);return o==null&&i==null&&je(()=>{console.warn("Replay is disabled because neither `replaysSessionSampleRate` nor `replaysOnErrorSampleRate` are set.")}),o!=null&&(r.sessionSampleRate=o),i!=null&&(r.errorSampleRate=i),r}function zl(e){return[...ry,...e.map(t=>t.toLowerCase())]}var Nd=new WeakMap,Ua=new Map,ci={traceFetch:!0,traceXHR:!0,enableHTTPTimings:!0};function Od(e,t){let{traceFetch:n,traceXHR:r,shouldCreateSpanForRequest:o,enableHTTPTimings:i,tracePropagationTargets:s}={traceFetch:ci.traceFetch,traceXHR:ci.traceXHR,...t},a=typeof o=="function"?o:l=>!0,c=l=>cy(l,s),u={};n&&(e.addEventProcessor(l=>(l.type==="transaction"&&l.spans&&l.spans.forEach(d=>{if(d.op==="http.client"){let f=Ua.get(d.span_id);f&&(d.timestamp=f/1e3,Ua.delete(d.span_id))}}),l)),qi(l=>{if(l.response){let d=Nd.get(l.response);d&&l.endTimestamp&&Ua.set(d,l.endTimestamp)}}),Yn(l=>{let d=Rs(l,a,c,u);if(l.response&&l.fetchData.__span&&Nd.set(l.response,l.fetchData.__span),d){let f=Dd(l.fetchData.url),p=f?qe(f).host:void 0;d.setAttributes({"http.url":f,"server.address":p})}i&&d&&Md(d)})),r&&Er(l=>{let d=uy(l,a,c,u);i&&d&&Md(d)})}function iy(e){return e.entryType==="resource"&&"initiatorType"in e&&typeof e.nextHopProtocol=="string"&&(e.initiatorType==="fetch"||e.initiatorType==="xmlhttprequest")}function Md(e){let{url:t}=x(e).data||{};if(!t||typeof t!="string")return;let n=ot("resource",({entries:r})=>{r.forEach(o=>{iy(o)&&o.name.endsWith(t)&&(ay(o).forEach(s=>e.setAttribute(...s)),setTimeout(n))})})}function sy(e){let t="unknown",n="unknown",r="";for(let o of e){if(o==="/"){[t,n]=e.split("/");break}if(!isNaN(Number(o))){t=r==="h"?"http":r,n=e.split(r)[1];break}r+=o}return r===e&&(t=r),{name:t,version:n}}function _t(e=0){return((oe||performance.timeOrigin)+e)/1e3}function ay(e){let{name:t,version:n}=sy(e.nextHopProtocol),r=[];return r.push(["network.protocol.version",n],["network.protocol.name",t]),oe?[...r,["http.request.redirect_start",_t(e.redirectStart)],["http.request.fetch_start",_t(e.fetchStart)],["http.request.domain_lookup_start",_t(e.domainLookupStart)],["http.request.domain_lookup_end",_t(e.domainLookupEnd)],["http.request.connect_start",_t(e.connectStart)],["http.request.secure_connection_start",_t(e.secureConnectionStart)],["http.request.connection_end",_t(e.connectEnd)],["http.request.request_start",_t(e.requestStart)],["http.request.response_start",_t(e.responseStart)],["http.request.response_end",_t(e.responseEnd)]]:r}function cy(e,t){let n=I.location&&I.location.href;if(n){let r,o;try{r=new URL(e,n),o=new URL(n).origin}catch{return!1}let i=r.origin===o;return t?We(r.toString(),t)||i&&We(r.pathname,t):i}else{let r=!!e.match(/^\/(?!\/)/);return t?We(e,t):r}}function uy(e,t,n,r){let o=e.xhr,i=o&&o[it];if(!o||o.__sentry_own_request__||!i)return;let s=De()&&t(i.url);if(e.endTimestamp&&s){let f=o.__sentry_xhr_span_id__;if(!f)return;let p=r[f];p&&i.status_code!==void 0&&(Cn(p,i.status_code),p.end(),delete r[f]);return}let a=Dd(i.url),c=a?qe(a).host:void 0,u=!!K(),l=s&&u?xe({name:`${i.method} ${i.url}`,attributes:{type:"xhr","http.method":i.method,"http.url":a,url:i.url,"server.address":c,[te]:"auto.http.browser",[Re]:"http.client"}}):new Be;o.__sentry_xhr_span_id__=l.spanContext().spanId,r[o.__sentry_xhr_span_id__]=l;let d=v();return o.setRequestHeader&&n(i.url)&&d&&ly(o,d,De()&&u?l:void 0),l}function ly(e,t,n){let r=F(),o=ae(),{traceId:i,spanId:s,sampled:a,dsc:c}={...o.getPropagationContext(),...r.getPropagationContext()},u=n&&De()?Rn(n):Qt(i,s,a),l=yn(c||(n?we(n):Ft(i,t)));dy(e,u,l)}function dy(e,t,n){try{e.setRequestHeader("sentry-trace",t),n&&e.setRequestHeader(_n,n)}catch{}}function Dd(e){try{return new URL(e,I.location.origin).href}catch{return}}function Pd(){I&&I.document?I.document.addEventListener("visibilitychange",()=>{let e=K();if(!e)return;let t=j(e);if(I.document.hidden&&t){let n="cancelled",{op:r,status:o}=x(t);H&&h.log(`[Tracing] Transaction: ${n} -> since tab moved to the background, op: ${r}`),o||t.setStatus({code:2,message:n}),t.setAttribute("sentry.cancellation_reason","document.hidden"),t.end()}}):H&&h.warn("[Tracing] Could not set up background tab detection due to lack of global document")}var fy="BrowserTracing",py={...xn,instrumentNavigation:!0,instrumentPageLoad:!0,markBackgroundSpan:!0,enableLongTask:!0,enableLongAnimationFrame:!0,enableInp:!0,_experiments:{},...ci},Ba=(e={})=>{uo();let{enableInp:t,enableLongTask:n,enableLongAnimationFrame:r,_experiments:{enableInteractions:o,enableStandaloneClsSpans:i},beforeStartSpan:s,idleTimeout:a,finalTimeout:c,childSpanTimeout:u,markBackgroundSpan:l,traceFetch:d,traceXHR:f,shouldCreateSpanForRequest:p,enableHTTPTimings:m,instrumentPageLoad:g,instrumentNavigation:T}={...py,...e},y=Bs({recordClsStandaloneSpans:i||!1});t&&Ys(),r&&w.PerformanceObserver&&PerformanceObserver.supportedEntryTypes.includes("long-animation-frame")?$s():n&&Hs(),o&&Ws();let N={name:void 0,source:void 0};function B(k,M){let _=M.op==="pageload",S=s?s(M):M,R=S.attributes||{};M.name!==S.name&&(R[be]="custom",S.attributes=R),N.name=S.name,N.source=R[be];let z=po(S,{idleTimeout:a,finalTimeout:c,childSpanTimeout:u,disableAutoFinish:_,beforeSpanEnd:C=>{y(),zs(C,{recordClsOnPageloadSpan:!i})}});function E(){["interactive","complete"].includes(I.document.readyState)&&k.emit("idleSpanEnableAutoFinish",z)}return _&&I.document&&(I.document.addEventListener("readystatechange",()=>{E()}),E()),z}return{name:fy,afterAllSetup(k){let M,_=I.location&&I.location.href;k.on("startNavigationSpan",S=>{v()===k&&(M&&!x(M).timestamp&&(H&&h.log(`[Tracing] Finishing current root span with op: ${x(M).op}`),M.end()),M=B(k,{op:"navigation",...S}))}),k.on("startPageLoadSpan",(S,R={})=>{if(v()!==k)return;M&&!x(M).timestamp&&(H&&h.log(`[Tracing] Finishing current root span with op: ${x(M).op}`),M.end());let z=R.sentryTrace||Ld("sentry-trace"),E=R.baggage||Ld("baggage"),C=Qi(z,E);F().setPropagationContext(C),M=B(k,{op:"pageload",...S})}),k.on("spanEnd",S=>{let R=x(S).op;if(S!==j(S)||R!=="navigation"&&R!=="pageload")return;let z=F(),E=z.getPropagationContext();z.setPropagationContext({...E,sampled:E.sampled!==void 0?E.sampled:Ye(S),dsc:E.dsc||we(S)})}),I.location&&(g&&Fd(k,{name:I.location.pathname,startTime:oe?oe/1e3:void 0,attributes:{[be]:"url",[te]:"auto.pageload.browser"}}),T&&wt(({to:S,from:R})=>{if(R===void 0&&_&&_.indexOf(S)!==-1){_=void 0;return}R!==S&&(_=void 0,Ud(k,{name:I.location.pathname,attributes:{[be]:"url",[te]:"auto.navigation.browser"}}))})),l&&Pd(),o&&my(a,c,u,N),t&&Vs(),Od(k,{traceFetch:d,traceXHR:f,tracePropagationTargets:k.getOptions().tracePropagationTargets,shouldCreateSpanForRequest:p,enableHTTPTimings:m})}}};function Fd(e,t,n){e.emit("startPageLoadSpan",t,n),F().setTransactionName(t.name);let r=K();return(r&&x(r).op)==="pageload"?r:void 0}function Ud(e,t){ae().setPropagationContext(en()),F().setPropagationContext(en()),e.emit("startNavigationSpan",t),F().setTransactionName(t.name);let n=K();return(n&&x(n).op)==="navigation"?n:void 0}function Ld(e){let t=Li(`meta[name=${e}]`);return t?t.getAttribute("content"):void 0}function my(e,t,n,r){let o,i=()=>{let s="ui.action.click",a=K(),c=a&&j(a);if(c){let u=x(c).op;if(["navigation","pageload"].includes(u)){H&&h.warn(`[Tracing] Did not create ${s} span because a pageload or navigation span is in progress.`);return}}if(o&&(o.setAttribute(vn,"interactionInterrupted"),o.end(),o=void 0),!r.name){H&&h.warn(`[Tracing] Did not create ${s} transaction because _latestRouteName is missing.`);return}o=po({name:r.name,op:s,attributes:{[be]:r.source||"url"}},{idleTimeout:e,finalTimeout:t,childSpanTimeout:n})};I.document&&addEventListener("click",i,{once:!1,capture:!0})}var Bd=1e6,ui=String(0),hy="main",Wd="",zd="",Gd="",Ha=I.navigator&&I.navigator.userAgent||"",jd="",gy=I.navigator&&I.navigator.language||I.navigator&&I.navigator.languages&&I.navigator.languages[0]||"";function Sy(e){return typeof e=="object"&&e!==null&&"getHighEntropyValues"in e}var Hd=I.navigator&&I.navigator.userAgentData;Sy(Hd)&&Hd.getHighEntropyValues(["architecture","model","platform","platformVersion","fullVersionList"]).then(e=>{if(Wd=e.platform||"",Gd=e.architecture||"",jd=e.model||"",zd=e.platformVersion||"",e.fullVersionList&&e.fullVersionList.length>0){let t=e.fullVersionList[e.fullVersionList.length-1];Ha=`${t.brand} ${t.version}`}}).catch(e=>{});function _y(e){return!("thread_metadata"in e)}function yy(e){return _y(e)?Iy(e):e}function Ey(e){let t=e&&e.contexts&&e.contexts.trace&&e.contexts.trace.trace_id;return typeof t=="string"&&t.length!==32&&H&&h.log(`[Profiling] Invalid traceId: ${t} on profiled event`),typeof t!="string"?"":t}function Ty(e,t,n,r){if(r.type!=="transaction")throw new TypeError("Profiling events may only be attached to transactions, this should never occur.");if(n==null)throw new TypeError(`Cannot construct profiling event envelope without a valid profile. Got ${n} instead.`);let o=Ey(r),i=yy(n),s=t||(typeof r.start_timestamp=="number"?r.start_timestamp*1e3:ee()*1e3),a=typeof r.timestamp=="number"?r.timestamp*1e3:ee()*1e3;return{event_id:e,timestamp:new Date(s).toISOString(),platform:"javascript",version:"1",release:r.release||"",environment:r.environment||vt,runtime:{name:"javascript",version:I.navigator.userAgent},os:{name:Wd,version:zd,build_number:Ha},device:{locale:gy,model:jd,manufacturer:Ha,architecture:Gd,is_emulator:!1},debug_meta:{images:by(n.resources)},profile:i,transactions:[{name:r.transaction||"",id:r.event_id||$(),trace_id:o,active_thread_id:ui,relative_start_ns:"0",relative_end_ns:((a-s)*1e6).toFixed(0)}]}}function li(e){return x(e).op==="pageload"}function Iy(e){let t,n=0,r={samples:[],stacks:[],frames:[],thread_metadata:{[ui]:{name:hy}}},o=e.samples[0];if(!o)return r;let i=o.timestamp,s=typeof performance.timeOrigin=="number"?performance.timeOrigin:oe||0,a=s-(oe||s);return e.samples.forEach((c,u)=>{if(c.stackId===void 0){t===void 0&&(t=n,r.stacks[t]=[],n++),r.samples[u]={elapsed_since_start_ns:((c.timestamp+a-i)*Bd).toFixed(0),stack_id:t,thread_id:ui};return}let l=e.stacks[c.stackId],d=[];for(;l;){d.push(l.frameId);let p=e.frames[l.frameId];p&&r.frames[l.frameId]===void 0&&(r.frames[l.frameId]={function:p.name,abs_path:typeof p.resourceId=="number"?e.resources[p.resourceId]:void 0,lineno:p.line,colno:p.column}),l=l.parentId===void 0?void 0:e.stacks[l.parentId]}let f={elapsed_since_start_ns:((c.timestamp+a-i)*Bd).toFixed(0),stack_id:n,thread_id:ui};r.stacks[n]=d,r.samples[u]=f,n++}),r}function qd(e,t){if(!t.length)return e;for(let n of t)e[1].push([{type:"profile"},n]);return e}function Yd(e){let t=[];return En(e,(n,r)=>{if(r==="transaction")for(let o=1;o<n.length;o++){let i=n[o];i&&i.contexts&&i.contexts.profile&&i.contexts.profile.profile_id&&t.push(n[o])}}),t}var $d=new WeakMap;function by(e){let t=w._sentryDebugIds;if(!t)return[];let n=v(),r=n&&n.getOptions(),o=r&&r.stackParser;if(!o)return[];let i,s=$d.get(o);s?i=s:(i=new Map,$d.set(o,i));let a=Object.keys(t).reduce((u,l)=>{let d,f=i.get(l);f?d=f:(d=o(l),i.set(l,d));for(let p=d.length-1;p>=0;p--){let m=d[p],g=m&&m.filename;if(m&&g){u[g]=t[l];break}}return u},{}),c=[];for(let u of e)u&&a[u]&&c.push({type:"sourcemap",code_file:u,debug_id:a[u]});return c}function vy(e){return typeof e!="number"&&typeof e!="boolean"||typeof e=="number"&&isNaN(e)?(H&&h.warn(`[Profiling] Invalid sample rate. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(e)} of type ${JSON.stringify(typeof e)}.`),!1):e===!0||e===!1?!0:e<0||e>1?(H&&h.warn(`[Profiling] Invalid sample rate. Sample rate must be between 0 and 1. Got ${e}.`),!1):!0}function Cy(e){return e.samples.length<2?(H&&h.log("[Profiling] Discarding profile because it contains less than 2 samples"),!1):e.frames.length?!0:(H&&h.log("[Profiling] Discarding profile because it contains no frames"),!1)}var Vd=!1,$a=3e4;function Ry(e){return typeof e=="function"}function Jd(){let e=I.Profiler;if(!Ry(e)){H&&h.log("[Profiling] Profiling is not supported by this browser, Profiler interface missing on window object.");return}let t=10,n=Math.floor($a/t);try{return new e({sampleInterval:t,maxBufferSize:n})}catch{H&&(h.log("[Profiling] Failed to initialize the Profiling constructor, this is likely due to a missing 'Document-Policy': 'js-profiling' header."),h.log("[Profiling] Disabling profiling for current user session.")),Vd=!0}}function Wa(e){if(Vd)return H&&h.log("[Profiling] Profiling has been disabled for the duration of the current user session."),!1;if(!e.isRecording())return H&&h.log("[Profiling] Discarding profile because transaction was not sampled."),!1;let t=v(),n=t&&t.getOptions();if(!n)return H&&h.log("[Profiling] Profiling disabled, no options found."),!1;let r=n.profilesSampleRate;return vy(r)?r?(r===!0?!0:Math.random()<r)?!0:(H&&h.log(`[Profiling] Discarding profile because it's not included in the random sample (sampling rate = ${Number(r)})`),!1):(H&&h.log("[Profiling] Discarding profile because a negative sampling decision was inherited or profileSampleRate is set to 0"),!1):(H&&h.warn("[Profiling] Discarding profile because of invalid sample rate."),!1)}function Kd(e,t,n,r){return Cy(n)?Ty(e,t,n,r):null}var fn=new Map;function Xd(){return fn.size}function Zd(e){let t=fn.get(e);return t&&fn.delete(e),t}function Qd(e,t){if(fn.set(e,t),fn.size>30){let n=fn.keys().next().value;fn.delete(n)}}function za(e){let t;li(e)&&(t=ee()*1e3);let n=Jd();if(!n)return;H&&h.log(`[Profiling] started profiling span: ${x(e).description}`);let r=$();F().setContext("profile",{profile_id:r,start_timestamp:t});async function o(){if(e&&n)return n.stop().then(c=>{if(i&&(I.clearTimeout(i),i=void 0),H&&h.log(`[Profiling] stopped profiling of span: ${x(e).description}`),!c){H&&h.log(`[Profiling] profiler returned null profile for: ${x(e).description}`,"this may indicate an overlapping span or a call to stopProfiling with a profile title that was never started");return}Qd(r,c)}).catch(c=>{H&&h.log("[Profiling] error while stopping profiler:",c)})}let i=I.setTimeout(()=>{H&&h.log("[Profiling] max profile duration elapsed, stopping profiling for:",x(e).description),o()},$a),s=e.end.bind(e);function a(){return e?(o().then(()=>{s()},()=>{s()}),e):s()}e.end=a}var wy="BrowserProfiling",xy=()=>({name:wy,setup(e){let t=K(),n=t&&j(t);n&&li(n)&&Wa(n)&&za(n),e.on("spanStart",r=>{r===j(r)&&Wa(r)&&za(r)}),e.on("beforeEnvelope",r=>{if(!Xd())return;let o=Yd(r);if(!o.length)return;let i=[];for(let s of o){let a=s&&s.contexts,c=a&&a.profile&&a.profile.profile_id,u=a&&a.profile&&a.profile.start_timestamp;if(typeof c!="string"){H&&h.log("[Profiling] cannot find profile for a span without a profile context");continue}if(!c){H&&h.log("[Profiling] cannot find profile for a span without a profile context");continue}a&&a.profile&&delete a.profile;let l=Zd(c);if(!l){H&&h.log(`[Profiling] Could not retrieve profile for span: ${c}`);continue}let d=Kd(c,u,l,s);d&&i.push(d)}qd(r,i)})}}),Ga=xy;var ef=Br(Ii(),1);function ja(e){let t={...e};return lr(t,"react"),kn("react",{version:ef.version}),Ks(t)}var rf=Br(uf()),Pr=Br(Ii());var tf={"app-container":"S"};var me=Br(Ii()),Ay=(0,me.lazy)(()=>import("./FormulaBar-FXBYNFGR.js")),Ny=(0,me.lazy)(()=>import("./ToolBar-XNL6LMOG.js")),My=(0,me.lazy)(()=>import("./canvas-3OSOD5RY.js")),Oy=(0,me.lazy)(()=>import("./SheetBar-EX2J6RRH.js")),Dy=(0,me.lazy)(()=>import("./MenuBar-532FXKYZ.js")),di=(0,me.memo)(({controller:e})=>me.default.createElement("div",{className:tf["app-container"],"data-testid":"app-container"},me.default.createElement(me.Suspense,{fallback:me.default.createElement("div",null,"loading")},me.default.createElement(Dy,{controller:e}),me.default.createElement(Ny,{controller:e}),me.default.createElement(Ay,{controller:e}),me.default.createElement(My,{controller:e}),me.default.createElement(Oy,{controller:e}))));di.displayName="App";var qa={top:0,left:0,row:0,col:0,scrollLeft:0,scrollTop:0},Dr=class{constructor(t,n){this.scrollValue={};this.changeSet=new Set;this.floatElementUuid="";this.copyRange=void 0;this.isCut=!1;this.isNoChange=!1;this.deleteSheet=t=>{this.model.deleteSheet(t),this.emitChange()};this.getCell=t=>this.model.getCell(t);this.model=t,this.hooks=n}applyCommandList(t){this.model.applyCommandList(t)}getHooks(){return this.hooks}validateDefinedName(t){return this.model.validateDefinedName(t)}validateDrawing(t){return this.model.validateDrawing(t)}validateRange(t){return this.model.validateRange(t)}getCurrentSheetId(){return this.model.getCurrentSheetId()}getSheetList(){return this.model.getSheetList()}getSheetInfo(t){return this.model.getSheetInfo(t)}batchUpdate(t,n=!1){this.isNoChange=!0;let r=t();n&&this.changeSet.add("noHistory"),this.isNoChange=!1,r&&this.emitChange()}emitChange(){this.isNoChange||(this.model.emitChange(this.changeSet),this.changeSet=new Set)}getActiveRange(t){return this.model.getActiveRange(t)}setNextActiveCell(t){let{range:n,isMerged:r}=this.getActiveRange(),o=n.col,i=n.row,s=this.getSheetInfo(n.sheetId),a={...n,rowCount:1,colCount:1};if(t==="left"){for(o--;o>0&&this.getColWidth(o).len<=0;)o--;a.col=o}if(t==="right"){for(r?o=n.col+n.colCount:o++;o<s.colCount&&this.getColWidth(o).len<=0;)o++;a.col=o}if(t==="up"){for(i--;i>0&&this.getRowHeight(i).len<=0;)i--;a.row=i}if(t==="down"){for(r?i=n.row+n.rowCount:i++;i<s.rowCount&&this.getRowHeight(i).len<=0;)i++;a.row=i}this.setActiveRange(a)}setActiveRange(t){this.model.setActiveRange(t),this.emitChange()}setCurrentSheetId(t){this.model.setCurrentSheetId(t),this.setScroll(this.getScroll())}getWorksheet(t){return this.model.getWorksheet(t)}setWorksheet(t,n){this.model.setWorksheet(t,n),this.emitChange()}addSheet(){let t=this.model.addSheet();return this.setScroll({...qa}),t}updateSheetInfo(t,n){this.model.updateSheetInfo(t,n),this.emitChange()}hideSheet(t){this.model.hideSheet(t),this.emitChange()}unhideSheet(t){this.model.unhideSheet(t),this.emitChange()}renameSheet(t,n){this.model.renameSheet(t,n),this.emitChange()}fromJSON(t){this.model.fromJSON(t),this.setScroll({...qa})}toJSON(){return this.model.toJSON()}setCell(t,n,r){this.model.setCell(t,n,r),this.emitChange()}setCellValue(t,n){let r=this.getCell(n);if(fc(r?.style?.numberFormat)&&typeof t=="string"&&!isNaN(Date.parse(t))){let o=pc(new Date(t));this.model.setCellValue(o,n)}else this.model.setCellValue(t,n);this.emitChange()}updateCellStyle(t,n){this.model.updateCellStyle(t,n),this.emitChange()}canRedo(){return this.model.canRedo()}canUndo(){return this.model.canUndo()}undo(){this.model.undo(),this.changeSet.add("scroll"),this.changeSet.add("undo"),this.emitChange()}redo(){this.model.redo(),this.changeSet.add("scroll"),this.changeSet.add("redo"),this.emitChange()}getColWidth(t,n){return this.model.getColWidth(t,n)}setColWidth(t,n,r){this.model.setColWidth(t,n,r),this.emitChange()}getRowHeight(t,n){return this.model.getRowHeight(t,n)}setRowHeight(t,n,r){this.model.setRowHeight(t,n,r),this.emitChange()}getCellSize(t){return t.sheetId=t.sheetId||this.getCurrentSheetId(),this.getRangeSize(t)}getRangeSize(t){let{row:n,col:r,colCount:o,rowCount:i}=t,s=n,a=r,c=n+i,u=r+o,l=t.sheetId||this.getCurrentSheetId(),d=this.getSheetInfo(l);if(!d)return{width:0,height:0};tc(t)?(a=0,u=d.colCount,s=0,c=d.rowCount):rc(t)?(s=0,c=d.rowCount):nc(t)&&(a=0,u=d.colCount);let f=0,p=0;for(;s<c;s++)p+=this.getRowHeight(s,l).len;for(;a<u;a++)f+=this.getColWidth(a,l).len;return{width:f,height:p}}computeCellPosition(t){let{row:n,col:r}=t,o=t.sheetId||this.model.getCurrentSheetId(),i=Hr.get(),s=this.getScroll(o),a=i.width,c=i.height,u=s.row,l=s.col;if(r>=s.col)for(;l<r;)a+=this.getColWidth(l,o).len,l++;else for(a=-i.width;l>r;)a-=this.getColWidth(l,o).len,l--;if(n>=s.row)for(;u<n;)c+=this.getRowHeight(u,o).len,u++;else for(c=-i.height;u>n;)c-=this.getRowHeight(u,o).len,u--;return{top:c,left:a}}addRow(t,n,r=!1){this.model.addRow(t,n,r),this.emitChange()}addCol(t,n,r=!1){this.model.addCol(t,n,r),this.emitChange()}deleteCol(t,n){this.model.deleteCol(t,n),this.emitChange()}deleteRow(t,n){this.model.deleteRow(t,n),this.emitChange()}hideCol(t,n){this.model.hideCol(t,n),this.emitChange()}hideRow(t,n){this.model.hideRow(t,n),this.emitChange()}getScroll(t){let n=t||this.model.getCurrentSheetId();return{...this.scrollValue[n]||{...qa}}}setScroll(t){let n=this.model.getCurrentSheetId();this.scrollValue[n]={...t},t.row>9999?Hr.set({width:Math.floor(vi*2),height:bi}):Hr.set({width:vi,height:bi}),this.changeSet.add("scroll"),this.emitChange()}getPasteRange(t){let n=t.length,r=this.getActiveRange().range,o=Math.max(...t.map(i=>i.length));return{...r,rowCount:n,colCount:o}}parseText(t){let n=Qa(t),r=this.getPasteRange(n);if(n.length>0)return this.model.setCell(n,[],r),r}parseHTML(t){let{textList:n,styleList:r,rowMap:o,colMap:i}=ec(t),s=this.getPasteRange(n);for(let[a,c]of o.entries())this.model.setRowHeight(a,c);for(let[a,c]of i.entries())this.model.setColWidth(a,c);if(n.length>0||r.length>0)return this.model.setCell(n,r,s),s}async getCopyData(t){let{range:n,isMerged:r}=this.getActiveRange(),{row:o,col:i,rowCount:s,colCount:a}=n,c=[],u=[],l=1,d=[],f=this.model.getCurrentSheetId(),p=new Set;for(let k=o,M=o+s;k<M;k++){let _=[],S=[],R=Ri(this.getRowHeight(k).len,"");for(let z=i,E=i+a;z<E;z++){let C=this.model.getCell({row:k,col:z,rowCount:1,colCount:1,sheetId:f});if(!C)continue;let P=dc(C.value,C.style?.numberFormat);_.push(P);let X=Ri(this.getColWidth(z).len,""),Q=`height=${R} width=${X} style='height:${R}pt;width:${X}pt;'`;if(p.add(`<col width=${X} style='width:${X}pt;'>`),C.style){let ue=Za(C.style);P||(ue+="mso-pattern:black none;");let U=`xl${l++}`;d.push(`.${U}{${ue}}`),S.push(`<td ${Q} class="${U}"> ${P} </td>`)}else S.push(`<td ${Q}> ${P} </td>`);if(r)break}if(c.push(_),u.push(`<tr height=${R} style='height:${R}pt;'>${S.join(`
`)}</tr>`),r)break}let m={range:n,type:t,floatElementUuid:this.floatElementUuid},g=JSON.stringify(m),T=oc(d.join(`
`),`
      ${Array.from(p).join(`
`)}
      ${u.join(`
`)}`,ic(g)),y=`${c.map(k=>k.join("	")).join(`\r
`)}\r
`,N={[ct]:y,[ut]:T,[$e]:m,[Et]:null},B="";if(this.floatElementUuid){let M=this.getDrawingList(this.getCurrentSheetId()).find(_=>_.uuid===this.floatElementUuid);if(M)if(M.type==="floating-picture"){let _=document.querySelector(`canvas[data-uuid="${M.uuid}"]`);_&&(_.toBlob(S=>{S&&(N[Et]=S)}),B=_.toDataURL())}else B=M.imageSrc||"",N[Et]=uc(B)}return[N,B]}pasteFloatElement(t,n){if(!t)return!1;if(n){let u=this.getActiveRange().range;return this.model.updateDrawing(t,{fromCol:u.col,fromRow:u.row,marginX:0,marginY:0}),this.floatElementUuid="",this.isCut=!1,this.emitChange(),!0}let o=this.getDrawingList(this.getCurrentSheetId()).find(u=>u.uuid===t);if(!o)return!1;let i=this.getCellSize({row:o.fromRow,col:o.fromCol,rowCount:1,colCount:1,sheetId:o.sheetId}),{marginX:s,marginY:a}=o,c=14;return s+c<i.width?s+=c:s-c>=0&&(s-=c),a+c<i.width?a+=c:a-c>=0&&(a-=c),this.addDrawing({...o,uuid:Ci(),marginX:s,marginY:a}),!0}paste(t){return this.floatElementUuid&&this.pasteFloatElement(this.floatElementUuid,this.isCut)?Promise.resolve():this.basePaste(t)}async basePaste(t){let n="",r="",o=null,i=null;if(t){n=t.clipboardData?.getData(ut)||"",r=t.clipboardData?.getData(ct)||"";let s=t.clipboardData?.getData($e)||"";s&&(o=JSON.parse(s)),o&&o.type==="cut"&&(t.clipboardData?.setData(ut,""),t.clipboardData?.setData(ct,""),t.clipboardData?.setData($e,""),t.clipboardData?.setData(Et,"")),t.clipboardData?.files&&(i=t.clipboardData?.files)}else{let s=await this.hooks.paste();n=s[ut],r=s[ct],s[$e]&&(o=s[$e]),o&&o.type==="cut"&&this.hooks.copyOrCut({[ct]:"",[ut]:"",[$e]:null,[Et]:null},"copy")}if(i){let s=[];for(let a of i){if(a.size<=0)continue;let c=a.name,u=a.type.slice(6);c=c.slice(0,-(u.length+1));let l=await ac(a,!0);if(!l)continue;let d=await cc(l),f=this.getActiveRange().range;s.push({width:d.width,height:d.height,originHeight:d.height,originWidth:d.width,title:c,type:"floating-picture",uuid:Ci(),imageSrc:l,sheetId:f.sheetId,fromRow:f.row,fromCol:f.col,marginX:0,marginY:0})}if(s.length>0){this.addDrawing(...s);return}}if(!(o&&o.floatElementUuid&&this.pasteFloatElement(o.floatElementUuid,o.type==="cut"))){if(o){let s=this.model.pasteRange(o.range,o.type==="cut");this.setActiveRange(s);return}if(n=n.trim(),r=r.trim(),n){let s=this.parseHTML(n);if(s){this.setActiveRange(s);return}}if(r){let s=this.parseText(r);if(s){this.setActiveRange(s);return}}if(this.copyRange){let s=this.model.pasteRange(this.copyRange,this.isCut);this.setActiveRange(s),this.isCut&&(this.copyRange=void 0,this.isCut=!1);return}}}copy(t){return this.copyRange=this.getActiveRange().range,this.isCut=!1,this.baseCopy("copy",t)}cut(t){return this.copyRange=this.getActiveRange().range,this.isCut=!0,this.baseCopy("cut",t)}async baseCopy(t,n){let[r,o]=await this.getCopyData(t);n?(n.clipboardData?.setData(ut,r[ut]),n.clipboardData?.setData(ct,r[ct]),n.clipboardData?.setData($e,r[$e]?JSON.stringify(r[$e]):""),n.clipboardData?.setData(Et,o)):this.hooks.copyOrCut(r,t),this.changeSet.add("antLine"),this.emitChange()}getCopyRange(){return this.copyRange}setCopyRange(t){this.copyRange=t}deleteAll(t){this.model.deleteAll(t),this.emitChange()}getDefineName(t){return this.model.getDefineName(t)}getDefineNameList(){return this.model.getDefineNameList()}setDefineName(t,n){let r=this.model.setDefineName(t,n);return this.emitChange(),r}checkDefineName(t){return this.model.checkDefineName(t)}getDrawingList(t){return this.model.getDrawingList(t)}addDrawing(...t){this.model.addDrawing(...t),this.emitChange()}updateDrawing(t,n){this.model.updateDrawing(t,n),this.emitChange()}deleteDrawing(t){this.model.deleteDrawing(t),this.emitChange()}getMergeCellList(t){return this.model.getMergeCellList(t)}addMergeCell(t,n){this.model.addMergeCell(t,n),this.emitChange()}deleteMergeCell(t){this.model.deleteMergeCell(t),this.emitChange()}setFloatElementUuid(t){this.floatElementUuid=t}};var nf={async copyOrCut(){},async paste(){return{[ut]:"",[ct]:"",[$e]:null,[Et]:null}},worker:hc};function fi(e=!1,t=nf){if(!Xa()&&t===nf)throw new Error("hooks must be provided in production or development environment");let n=new mc(t.worker),r=new Dr(n,t);return r.batchUpdate(()=>(r.addSheet(),!0),e),r}function Ya(e){let t=new BroadcastChannel("excel");sc.on("modelChange",n=>{t.postMessage(n)}),t.onmessage=n=>{e.applyCommandList(n.data)}}if(typeof Worker!="function")throw new Error("Don't support Web Worker");location.hostname!=="localhost"&&ja({dsn:"https://b292d91ba509038c141ecfc7d10e7bb7@o4506851168092160.ingest.sentry.io/4506851171041280",integrations:[Ba(),Fa({maskAllText:!1,blockAllMedia:!1}),Ga()],tracesSampleRate:1,tracePropagationTargets:["nusr.github.io"],replaysSessionSampleRate:.1,replaysOnErrorSampleRate:1,profilesSampleRate:1});var Py=document.getElementById("root"),pi=fi(!0,{copyOrCut:wi,paste:xi,worker:lc(new Worker("./worker.js",{type:"module",name:"worker"}))});window.controller=pi;(0,rf.createRoot)(Py).render(Pr.default.createElement(Pr.StrictMode,null,Pr.default.createElement(di,{controller:pi})));pi.fromJSON(ki);Ya(pi);
//# sourceMappingURL=demo.js.map
